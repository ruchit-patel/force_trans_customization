var Kt=Object.defineProperty,qt=Object.defineProperties;var Jt=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var mt=(e,t,s)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ke=(e,t)=>{for(var s in t||(t={}))vt.call(t,s)&&mt(e,s,t[s]);if(We)for(var s of We(t))ft.call(t,s)&&mt(e,s,t[s]);return e},rt=(e,t)=>qt(e,Jt(t));var Qe=(e,t)=>{var s={};for(var a in e)vt.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&We)for(var a of We(e))t.indexOf(a)<0&&ft.call(e,a)&&(s[a]=e[a]);return s};var pe=(e,t,s)=>new Promise((a,n)=>{var c=p=>{try{y(s.next(p))}catch(v){n(v)}},m=p=>{try{y(s.throw(p))}catch(v){n(v)}},y=p=>p.done?a(p.value):Promise.resolve(p.value).then(c,m);y((s=s.apply(e,t)).next())});import{r as O,o as je,w as Tt,a as ne,d as Be,y as Wt,c as M,b as Qt,h as Gt,p as Pt,e as Xt,u as Yt,l as et,H as st,t as it,f as Zt,g as es,N as ht,i as ot,j as ts,k as _e,x as ss,m as ye,n as de,q as Me,v as os,s as bt,_ as Rt,O as as,z as l,A as g,B,C as oe,F as Z,D as re,E as T,G as o,I as V,J as rs,K as Q,L as q,M as z,P as C,Q as Se,R as Re,S as we,T as te,U as Ae,V as Oe,W as ls,X as ns,Y as Ee,Z as me,$ as ut,a0 as Ie,a1 as Dt,a2 as Ne,a3 as is,a4 as us,a5 as cs,a6 as $e,a7 as Te,a8 as he,a9 as xe,aa as yt,ab as ds,ac as Ce,ad as gs,ae as Ue,af as ct,ag as be,ah as ps,ai as ms,aj as Ve,ak as vs,al as xt,am as wt}from"./index-DzMERN1j.js";function _t(e,t){if(e)return e;let s=t!=null?t:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function fs(e,t){let s=O(_t(e.value.type,e.value.as));return je(()=>{s.value=_t(e.value.type,e.value.as)}),Tt(()=>{var a;s.value||ne(t)&&ne(t)instanceof HTMLButtonElement&&!((a=ne(t))!=null&&a.hasAttribute("type"))&&(s.value="button")}),s}let kt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Ct(e){var t,s;let a=(t=e.innerText)!=null?t:"",n=e.cloneNode(!0);if(!(n instanceof HTMLElement))return a;let c=!1;for(let y of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))y.remove(),c=!0;let m=c?(s=n.innerText)!=null?s:"":a;return kt.test(m)&&(m=m.replace(kt,"")),m}function hs(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let s=e.getAttribute("aria-labelledby");if(s){let a=s.split(" ").map(n=>{let c=document.getElementById(n);if(c){let m=c.getAttribute("aria-label");return typeof m=="string"?m.trim():Ct(c).trim()}return null}).filter(Boolean);if(a.length>0)return a.join(", ")}return Ct(e).trim()}function bs(e){let t=O(""),s=O("");return()=>{let a=ne(e);if(!a)return"";let n=a.innerText;if(t.value===n)return s.value;let c=hs(a).trim().toLowerCase();return t.value=n,s.value=c,c}}var ys=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ys||{}),xs=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(xs||{});function ws(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Lt=Symbol("MenuContext");function at(e){let t=_e(Lt,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,at),s}return t}let _s=Be({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:s}){let a=O(1),n=O(null),c=O(null),m=O([]),y=O(""),p=O(null),v=O(1);function d(w=_=>_){let _=p.value!==null?m.value[p.value]:null,f=as(w(m.value.slice()),R=>ne(R.dataRef.domRef)),h=_?f.indexOf(_):null;return h===-1&&(h=null),{items:f,activeItemIndex:h}}let $={menuState:a,buttonRef:n,itemsRef:c,items:m,searchQuery:y,activeItemIndex:p,activationTrigger:v,closeMenu:()=>{a.value=1,p.value=null},openMenu:()=>a.value=0,goToItem(w,_,f){let h=d(),R=ss(w===ye.Specific?{focus:ye.Specific,id:_}:{focus:w},{resolveItems:()=>h.items,resolveActiveIndex:()=>h.activeItemIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});y.value="",p.value=R,v.value=f!=null?f:1,m.value=h.items},search(w){let _=y.value!==""?0:1;y.value+=w.toLowerCase();let f=(p.value!==null?m.value.slice(p.value+_).concat(m.value.slice(0,p.value+_)):m.value).find(R=>R.dataRef.textValue.startsWith(y.value)&&!R.dataRef.disabled),h=f?m.value.indexOf(f):-1;h===-1||h===p.value||(p.value=h,v.value=1)},clearSearch(){y.value=""},registerItem(w,_){let f=d(h=>[...h,{id:w,dataRef:_}]);m.value=f.items,p.value=f.activeItemIndex,v.value=1},unregisterItem(w){let _=d(f=>{let h=f.findIndex(R=>R.id===w);return h!==-1&&f.splice(h,1),f});m.value=_.items,p.value=_.activeItemIndex,v.value=1}};return Wt([n,c],(w,_)=>{var f;$.closeMenu(),Qt(_,Gt.Loose)||(w.preventDefault(),(f=ne(n))==null||f.focus())},M(()=>a.value===0)),Pt(Lt,$),Xt(M(()=>Yt(a.value,{0:et.Open,1:et.Closed}))),()=>{let w={open:a.value===0,close:$.closeMenu};return st({ourProps:{},theirProps:e,slot:w,slots:t,attrs:s,name:"Menu"})}}}),ks=Be({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${it()}`}},setup(e,{attrs:t,slots:s,expose:a}){let n=at("MenuButton");a({el:n.buttonRef,$el:n.buttonRef});function c(v){switch(v.key){case de.Space:case de.Enter:case de.ArrowDown:v.preventDefault(),v.stopPropagation(),n.openMenu(),Me(()=>{var d;(d=ne(n.itemsRef))==null||d.focus({preventScroll:!0}),n.goToItem(ye.First)});break;case de.ArrowUp:v.preventDefault(),v.stopPropagation(),n.openMenu(),Me(()=>{var d;(d=ne(n.itemsRef))==null||d.focus({preventScroll:!0}),n.goToItem(ye.Last)});break}}function m(v){switch(v.key){case de.Space:v.preventDefault();break}}function y(v){e.disabled||(n.menuState.value===0?(n.closeMenu(),Me(()=>{var d;return(d=ne(n.buttonRef))==null?void 0:d.focus({preventScroll:!0})})):(v.preventDefault(),n.openMenu(),ws(()=>{var d;return(d=ne(n.itemsRef))==null?void 0:d.focus({preventScroll:!0})})))}let p=fs(M(()=>({as:e.as,type:t.type})),n.buttonRef);return()=>{var v;let d={open:n.menuState.value===0},f=e,{id:$}=f,w=Qe(f,["id"]),_={ref:n.buttonRef,id:$,type:p.value,"aria-haspopup":"menu","aria-controls":(v=ne(n.itemsRef))==null?void 0:v.id,"aria-expanded":n.menuState.value===0,onKeydown:c,onKeyup:m,onClick:y};return st({ourProps:_,theirProps:w,slot:d,attrs:t,slots:s,name:"MenuButton"})}}}),Cs=Be({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${it()}`}},setup(e,{attrs:t,slots:s,expose:a}){let n=at("MenuItems"),c=O(null);a({el:n.itemsRef,$el:n.itemsRef}),Zt({container:M(()=>ne(n.itemsRef)),enabled:M(()=>n.menuState.value===0),accept(d){return d.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:d.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(d){d.setAttribute("role","none")}});function m(d){var $;switch(c.value&&clearTimeout(c.value),d.key){case de.Space:if(n.searchQuery.value!=="")return d.preventDefault(),d.stopPropagation(),n.search(d.key);case de.Enter:if(d.preventDefault(),d.stopPropagation(),n.activeItemIndex.value!==null){let w=n.items.value[n.activeItemIndex.value];($=ne(w.dataRef.domRef))==null||$.click()}n.closeMenu(),Rt(ne(n.buttonRef));break;case de.ArrowDown:return d.preventDefault(),d.stopPropagation(),n.goToItem(ye.Next);case de.ArrowUp:return d.preventDefault(),d.stopPropagation(),n.goToItem(ye.Previous);case de.Home:case de.PageUp:return d.preventDefault(),d.stopPropagation(),n.goToItem(ye.First);case de.End:case de.PageDown:return d.preventDefault(),d.stopPropagation(),n.goToItem(ye.Last);case de.Escape:d.preventDefault(),d.stopPropagation(),n.closeMenu(),Me(()=>{var w;return(w=ne(n.buttonRef))==null?void 0:w.focus({preventScroll:!0})});break;case de.Tab:d.preventDefault(),d.stopPropagation(),n.closeMenu(),Me(()=>os(ne(n.buttonRef),d.shiftKey?bt.Previous:bt.Next));break;default:d.key.length===1&&(n.search(d.key),c.value=setTimeout(()=>n.clearSearch(),350));break}}function y(d){switch(d.key){case de.Space:d.preventDefault();break}}let p=es(),v=M(()=>p!==null?(p.value&et.Open)===et.Open:n.menuState.value===0);return()=>{var d,$;let w={open:n.menuState.value===0},R=e,{id:_}=R,f=Qe(R,["id"]),h={"aria-activedescendant":n.activeItemIndex.value===null||(d=n.items.value[n.activeItemIndex.value])==null?void 0:d.id,"aria-labelledby":($=ne(n.buttonRef))==null?void 0:$.id,id:_,onKeydown:m,onKeyup:y,role:"menu",tabIndex:0,ref:n.itemsRef};return st({ourProps:h,theirProps:f,slot:w,attrs:t,slots:s,features:ht.RenderStrategy|ht.Static,visible:v.value,name:"MenuItems"})}}}),Is=Be({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${it()}`}},setup(e,{slots:t,attrs:s,expose:a}){let n=at("MenuItem"),c=O(null);a({el:c,$el:c});let m=M(()=>n.activeItemIndex.value!==null?n.items.value[n.activeItemIndex.value].id===e.id:!1),y=bs(c),p=M(()=>({disabled:e.disabled,get textValue(){return y()},domRef:c}));je(()=>n.registerItem(e.id,p)),ot(()=>n.unregisterItem(e.id)),Tt(()=>{n.menuState.value===0&&m.value&&n.activationTrigger.value!==0&&Me(()=>{var h,R;return(R=(h=ne(c))==null?void 0:h.scrollIntoView)==null?void 0:R.call(h,{block:"nearest"})})});function v(h){if(e.disabled)return h.preventDefault();n.closeMenu(),Rt(ne(n.buttonRef))}function d(){if(e.disabled)return n.goToItem(ye.Nothing);n.goToItem(ye.Specific,e.id)}let $=ts();function w(h){$.update(h)}function _(h){$.wasMoved(h)&&(e.disabled||m.value||n.goToItem(ye.Specific,e.id,0))}function f(h){$.wasMoved(h)&&(e.disabled||m.value&&n.goToItem(ye.Nothing))}return()=>{let{disabled:h}=e,R={active:m.value,disabled:h,close:n.closeMenu},L=e,{id:x}=L,k=Qe(L,["id"]);return st({ourProps:{id:x,ref:c,role:"menuitem",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,disabled:void 0,onClick:v,onFocus:d,onPointerenter:w,onMouseenter:w,onPointermove:_,onMousemove:_,onPointerleave:f,onMouseleave:f},theirProps:ke(ke({},s),k),slot:R,attrs:s,slots:t,name:"MenuItem"})}}});const Ss=["src","alt"],$s=Be({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(e){const t=O(!1),s=e,a=M(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),n=M(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),c=M(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),m=M(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),y=M(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),p=M(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function v(d){d.type&&(t.value=!0)}return(d,$)=>(l(),g("div",{class:B(["relative inline-block shrink-0",[n.value,a.value]])},[d.image&&!t.value?(l(),g("img",{key:0,src:d.image,alt:d.label,class:B([a.value,"h-full w-full object-cover"]),onError:$[0]||($[0]=w=>v(w))},null,42,Ss)):(l(),g("div",{key:1,class:B(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[c.value,a.value]])},[d.$slots.default?(l(),g("div",{key:0,class:B(p.value)},[oe(d.$slots,"default")],2)):(l(),g(Z,{key:1},[re(T(d.label&&d.label[0]),1)],64))],2)),d.$slots.indicator?(l(),g("div",{key:2,class:B(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",m.value])},[o("div",{class:B(y.value)},[oe(d.$slots,"indicator")],2)],2)):V("",!0)],2))}}),Ts={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},Ps=["onClick"],Rs={class:"whitespace-nowrap text-ink-gray-7"},Ds=Be({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const t=rs(),s=e,a=p=>{let v=()=>{p.route?t.push(p.route):p.onClick&&p.onClick()};return{label:p.label,icon:p.icon,component:p.component,onClick:v}},n=p=>(p||[]).filter(Boolean).filter(v=>v.condition?v.condition():!0).map(v=>a(v)),c=M(()=>{let p=[],v=null,d=0;for(let $ of s.options)if($!=null){if("group"in $){v&&(p.push(v),v=null);let w=rt(ke({key:d},$),{items:n($.items)});p.push(w)}else v||(v={key:d,group:"",hideLabel:!0,items:[]}),v.items.push(...n([$]));d++}return v&&p.push(v),p}),m=M(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),y=M(()=>s.placement==="left"?"bottom-start":s.placement==="right"?"bottom-end":s.placement==="center"?"bottom-center":"bottom");return(p,v)=>(l(),Q(C(_s),{as:"div",class:"relative inline-block text-left"},{default:q(({open:d})=>[z(C(ls),{transition:m.value,show:d,placement:y.value},{target:q(()=>[z(C(ks),{as:"div"},{default:q(()=>[p.$slots.default?oe(p.$slots,"default",Se(Re({key:0},{open:d}))):(l(),Q(C(we),Re({key:1,active:d},p.button),{default:q(()=>{var $;return[re(T(p.button?(($=p.button)==null?void 0:$.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:q(()=>[z(C(Cs),{class:B(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":p.placement=="left","right-0 origin-top-right":p.placement=="right","inset-x-0 origin-top":p.placement=="center"}])},{default:q(()=>[(l(!0),g(Z,null,te(c.value,$=>(l(),g("div",{key:$.key,class:"p-1.5"},[$.group&&!$.hideLabel?(l(),g("div",Ts,T($.group),1)):V("",!0),(l(!0),g(Z,null,te($.items,w=>(l(),Q(C(Is),{key:w.label},{default:q(({active:_})=>[w.component?(l(),Q(Ae(w.component),{key:0,active:_},null,8,["active"])):(l(),g("button",{key:1,class:B([_?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:w.onClick},[w.icon&&typeof w.icon=="string"?(l(),Q(Oe,{key:0,name:w.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):w.icon?(l(),Q(Ae(w.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):V("",!0),o("span",Rs,T(w.label),1)],10,Ps))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),Ls={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ms={class:"text-xl font-medium"},Os={class:"mt-1 text-base text-ink-gray-5"},Fs={__name:"ListEmptyState",setup(e){const t=_e("list");return(s,a)=>(l(),g("div",Ls,[oe(s.$slots,"default",{},()=>[o("div",Ms,T(C(t).options.emptyState.title),1),o("div",Os,T(C(t).options.emptyState.description),1),C(t).options.emptyState.button?(l(),Q(C(we),Re({key:0},C(t).options.emptyState.button,{class:"mt-4"}),null,16)):V("",!0)])]))}};function Mt(e,t=!0){let s=t?"14px ":"",a=e.map(n=>{let c=n.width||1;return typeof c=="number"?c+"fr":c}).join(" ");return s+a}const dt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Vs={class:"truncate"},Ot={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=e,a=t,n=O(null),c=O(null),m=M(()=>{if(typeof s.item.width=="string"){const d=parseInt(s.item.width);if(s.item.width.includes("rem"))return d*16;if(s.item.width.includes("px"))return d}return c.value.offsetWidth}),y=d=>{const $=d.clientX,w=m.value,_=h=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),n.value.style.backgroundColor="rgb(199 199 199)";let R=w+(h.clientX-$);s.item.width=`${R<50?50:R}px`,p(s.item.width)},f=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),n.value.style.backgroundColor="",window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",f)},p=ns(d=>{s.item.width=d,a("columnWidthUpdated")},s.debounce),v=_e("list");return(d,$)=>(l(),g("div",{ref_key:"columnRef",ref:c,class:B(["group relative flex items-center",e.item.align?C(dt)[e.item.align]:"justify-between"])},[o("div",{class:B(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",d.$attrs.class])},[oe(d.$slots,"prefix",Se(Ee({item:e.item}))),oe(d.$slots,"default",{},()=>[o("div",Vs,T(e.item.label),1)]),oe(d.$slots,"suffix",Se(Ee({item:e.item})))],2),C(v).options.resizeColumn?oe(d.$slots,"resizer",Se(Re({key:0},{item:e.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:y},[o("div",{ref_key:"resizer",ref:n,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):V("",!0)],2))}},Ft={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=t,a=_e("list");return(n,c)=>(l(),g("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Ie({gridTemplateColumns:C(Mt)(C(a).columns,C(a).options.selectable)})},[C(a).options.selectable?(l(),Q(ut,{key:0,class:"cursor-pointer duration-300",modelValue:C(a).allRowsSelected,onClick:me(C(a).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):V("",!0),oe(n.$slots,"default",{},()=>[(l(!0),g(Z,null,te(C(a).columns,m=>(l(),Q(Ot,{key:m.key,item:m,onColumnWidthUpdated:y=>s("columnWidthUpdated",m)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},As={class:"truncate text-base"},Vt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const t=e,s=M(()=>{var m,y;return(m=t.column)!=null&&m.getLabel?(y=t.column)==null?void 0:y.getLabel({row:t.row}):n(t.item).label||""}),a=M(()=>c.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):n(t.item).label:"");function n(m){return m&&typeof m=="object"?m:{label:m}}const c=_e("list");return(m,y)=>(l(),g("div",{class:B(["flex items-center space-x-2",C(dt)[e.align]])},[oe(m.$slots,"prefix",{},()=>[e.column.prefix?(l(),Q(Ae(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):V("",!0)]),z(C(Dt),Se(Ee(C(c).options.showTooltip?{text:a.value}:{text:""})),{default:q(()=>[oe(m.$slots,"default",Se(Ee({label:s.value})),()=>[o("div",As,T(s.value),1)])]),_:3},16),oe(m.$slots,"suffix")],2))}},gt={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const t=e,s=_e("list"),a=M(()=>{var d;return(d=s.value.rows)!=null&&d.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===t.row[s.value.rowKey]:!1}),n=M(()=>s.value.selections.has(t.row[s.value.rowKey])),c=M(()=>s.value.options.enableActive&&s.value.activeRow.value===t.row.name),m=M(()=>s.value.options.getRowRoute||s.value.options.onRowClick),y=M(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),p=M(()=>{var w,_,f;if(!n.value)return"rounded";const d=[...s.value.selections];let $=(w=s.value.rows[0])!=null&&w.group?s.value.rows.map(h=>h.rows):[s.value.rows];for(let h of $){let R=h.findIndex(L=>L==t.row);if(R===-1)continue;let x=!d.includes((_=h[R+1])==null?void 0:_.name),k=!d.includes((f=h[R-1])==null?void 0:f.name);return(x?"rounded-b ":"")+(k?"rounded-t":"")}}),v=(d,$)=>{s.value.options.onRowClick&&s.value.options.onRowClick(d,$),s.value.activeRow.value===d.name?s.value.activeRow.value=null:s.value.activeRow.value=d.name};return(d,$)=>(l(),Q(Ae(C(s).options.getRowRoute?"router-link":"div"),Re({class:[[p.value,n.value||c.value?"bg-surface-gray-2":"",m.value?"cursor-pointer":"",m.value?n.value||c.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:C(s).options.getRowRoute?C(s).options.getRowRoute(e.row):void 0,onClick:w=>v(e.row,w)}),{default:q(()=>[(l(),Q(Ae(C(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:q(()=>{var w,_;return[o("div",{class:"grid items-center space-x-4 px-2",style:Ie({height:y.value,gridTemplateColumns:C(Mt)(C(s).columns,C(s).options.selectable)})},[C(s).options.selectable?(l(),g("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:$[1]||($[1]=me(()=>{},["stop","prevent"])),onDblclick:$[2]||($[2]=me(()=>{},["stop"]))},[z(ut,{modelValue:n.value,class:"cursor-pointer duration-300",onClick:$[0]||($[0]=me(f=>C(s).toggleRow(e.row[C(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):V("",!0),(l(!0),g(Z,null,te(C(s).columns,(f,h)=>(l(),g("div",{key:f.key,class:B([C(dt)[f.align],h==0?"text-ink-gray-9":"text-ink-gray-7"])},[oe(d.$slots,"default",Re({ref_for:!0},{idx:h,column:f,item:e.row[f.key],isActive:c.value}),()=>[C(s).slots.cell?(l(),Q(Ae(C(s).slots.cell),Re({key:0,ref_for:!0},{column:f,row:e.row,item:e.row[f.key],align:f.align}),null,16)):(l(),Q(Vt,{key:1,column:f,row:e.row,item:e.row[f.key],align:f.align},null,8,["column","row","item","align"]))])],2))),128))],4),a.value?V("",!0):(l(),g("div",{key:0,class:B(["h-px border-t",p.value==="rounded"||(_=(w=p.value)==null?void 0:w.includes)!=null&&_.call(w,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Es={class:"h-full overflow-y-auto"},At={__name:"ListRows",setup(e){const t=_e("list");return(s,a)=>(l(),g("div",Es,[oe(s.$slots,"default",{},()=>[(l(!0),g(Z,null,te(C(t).rows,n=>(l(),Q(gt,{key:n[C(t).rowKey],row:n},null,8,["row"]))),128))])]))}},js={},Us={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Bs(e,t){return l(),g("svg",Us,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Ns=Ne(js,[["render",Bs]]),zs={class:"flex items-center"},Hs={class:"w-full py-1.5 pr-2"},Ks={key:1,class:"text-base font-medium leading-6"},qs={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const t=e,s=_e("list");function a(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(n,c)=>(l(),g(Z,null,[o("div",zs,[o("button",{onClick:a,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[z(Ns,{class:B(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),oe(n.$slots,"default",{},()=>[o("div",Hs,[C(s).slots["group-header"]?(l(),Q(Ae(C(s).slots["group-header"]),Se(Re({key:0},{group:e.group})),null,16)):(l(),g("span",Ks,T(e.group.group),1))])])]),c[0]||(c[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Js={key:0,class:"mb-5 mt-2"},Ws={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const t=_e("list");return(s,a)=>e.group.collapsed?V("",!0):(l(),g("div",Js,[oe(s.$slots,"default",{},()=>[(l(!0),g(Z,null,te(e.group.rows,n=>(l(),Q(gt,{key:n[C(t).rowKey],row:n},null,8,["row"]))),128))])]))}},Qs={class:"h-full overflow-y-auto"},Gs={__name:"ListGroups",setup(e){const t=_e("list");return(s,a)=>(l(),g("div",Qs,[(l(!0),g(Z,null,te(C(t).rows,n=>(l(),g("div",{key:n.group},[oe(s.$slots,"default",{},()=>[z(qs,{group:n},{default:q(()=>[s.$slots["group-header"]?oe(s.$slots,"group-header",Re({key:0,ref_for:!0},{group:n})):V("",!0)]),_:2},1032,["group"]),z(Ws,{group:n},null,8,["group"])])]))),128))]))}},Xs={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Ys={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Zs={class:"flex items-center space-x-3"},eo={class:"mr-3"},to={class:"flex items-center space-x-1"},Et=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const t=_e("list");let s=M(()=>t.value.options.selectionText(t.value.selections.size));return(a,n)=>(l(),Q(is,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:q(()=>[C(t).selections.size?(l(),g("div",Xs,[o("div",{class:B(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",a.$attrs.class])},[oe(a.$slots,"default",Se(Ee({selections:C(t).selections,allRowsSelected:C(t).allRowsSelected,selectAll:()=>C(t).toggleAllRows(!0),unselectAll:()=>C(t).toggleAllRows(!1)})),()=>[o("div",Ys,[o("div",Zs,[z(ut,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,T(C(s)),1)]),o("div",eo,[oe(a.$slots,"actions",Se(Ee({selections:C(t).selections,allRowsSelected:C(t).allRowsSelected,selectAll:()=>C(t).toggleAllRows(!0),unselectAll:()=>C(t).toggleAllRows(!1)})))])]),o("div",to,[z(C(we),{class:B(["w- text-ink-gray-7",C(t).allRowsSelected?"cursor-not-allowed":""]),disabled:C(t).allRowsSelected,variant:"ghost",onClick:n[0]||(n[0]=c=>C(t).toggleAllRows(!0))},{default:q(()=>n[2]||(n[2]=[re(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),z(C(we),{icon:"x",variant:"ghost",onClick:n[1]||(n[1]=c=>C(t).toggleAllRows(!1))})])])],2)])):V("",!0)]),_:3}))}}),so={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},oo=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:t,emit:s}){const a=e,n=us();let c=cs(new Set),m=O(null);const y=s;$e(c,f=>{c.size&&(m.value=null),y("update:selections",f)}),$e(m,f=>{y("update:active-row",f)});let p=M(()=>{function f(R){return R===void 0?!0:R}function h(R){return R===void 0?!1:R}return{getRowRoute:a.options.getRowRoute||null,onRowClick:a.options.onRowClick||null,showTooltip:f(a.options.showTooltip),selectionText:a.options.selectionText||(R=>R===1?"1 row selected":`${R} rows selected`),enableActive:h(a.options.enableActive),selectable:f(a.options.selectable),resizeColumn:h(a.options.resizeColumn),rowHeight:a.options.rowHeight||40,emptyState:a.options.emptyState}});const v=M(()=>a.rows.length?$.value?c.size===a.rows.reduce((f,h)=>f+h.rows.length,0):c.size===a.rows.length:!1),d=M(()=>p.value.selectable);let $=M(()=>a.rows.every(f=>f.group&&f.rows&&Array.isArray(f.rows)));function w(f){c.delete(f)||c.add(f)}function _(f){if(!f||v.value){c.clear();return}if($.value){a.rows.forEach(h=>{h.rows.forEach(R=>c.add(R[a.rowKey]))});return}a.rows.forEach(h=>c.add(h[a.rowKey]))}return Pt("list",M(()=>({rowKey:a.rowKey,rows:a.rows,columns:a.columns,options:p.value,selections:c,activeRow:m,allRowsSelected:v.value,slots:n,toggleRow:w,toggleAllRows:_}))),t({selections:c,allRowsSelected:v,toggleRow:w,toggleAllRows:_}),(f,h)=>(l(),g("div",so,[o("div",{class:B(["flex w-max min-w-full flex-col overflow-y-hidden",f.$attrs.class]),style:Ie(f.$attrs.style)},[oe(f.$slots,"default",Se(Ee({showGroupedRows:C($),selectable:d.value})),()=>[z(Ft),a.rows.length?(l(),g(Z,{key:0},[C($)?(l(),Q(Gs,{key:0})):(l(),Q(At,{key:1}))],64)):(l(),Q(Fs,{key:1})),d.value?(l(),Q(Et,{key:2})):V("",!0)])],6)]))}});function ao(a,n){return pe(this,arguments,function*(e,t,s={}){t||(t={});let c=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},s.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(c["X-Frappe-CSRF-Token"]=window.csrf_token);let m=e.startsWith("/")?e:`/api/method/${e}`;const y=yield fetch(m,{method:"POST",headers:c,body:JSON.stringify(t)});if(y.ok){const p=yield y.json();if(p.docs||e==="login")return p;if(p.exc)try{console.groupCollapsed(e),console.log(`method: ${e}`),console.log("params:",t);let v=JSON.parse(p.exc);for(let d of v)console.log(d);console.groupEnd()}catch(v){console.warn("Error printing debug messages",v)}return p.message}else{let p=yield y.text(),v,d;try{v=JSON.parse(p)}catch(_){}let $=[[e,v.exc_type,v._error_message].filter(Boolean).join(" ")];if(v.exc){d=v.exc;try{d=JSON.parse(d)[0],console.log(d)}catch(_){}}let w=new Error($.join(`
`));throw w.exc_type=v.exc_type,w.exc=d,w.status=y.status,w.messages=v._server_messages?JSON.parse(v._server_messages):[],w.messages=w.messages.concat(v.message),w.messages=w.messages.map(_=>{try{return JSON.parse(_).message}catch(f){return _}}),w.messages=w.messages.filter(Boolean),w.messages.length||(w.messages=v._error_message?[v._error_message]:["Internal Server Error"]),s.onError&&s.onError({response:y,status:y.status,error:w}),w}})}const ve=Te({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(e){const t=e||{},s=t.limit_page_length||10,a=t.limit_start||0,n=t.filters||{},c=t.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:s,limit_start:a,filters:n,order_by:c}),{limit_page_length:s,limit_start:a,filters:n,order_by:c}},onError(e){console.error("Failed to fetch issues:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),jt=Te({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(e){const t=e||{},s=t.filters||t||{};return console.log("issuesCountResource filters:",s),{filters:s}},onError(e){console.error("Failed to fetch issues count:",e)}});function Ke(e={}){const t={limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,filters:e.filters||{},order_by:e.order_by||"creation desc"};return console.log("reloadIssues with params:",t),ve.reload(t)}function tt(e={}){return console.log("getIssuesCount with filters:",e),jt.reload(e)}const Ut=Te({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(e){return{issue_name:e}},onError(e){console.error("Failed to fetch single issue:",e)},auto:!1});function ro(e){return Ut.reload(e)}const lo=Te({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(e){console.error("Failed to fetch issue priorities:",e)},auto:!0}),no=Te({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(e){console.error("Failed to fetch issue types:",e)},auto:!0});Te({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(e){console.error("Failed to fetch projects:",e)},auto:!0});let Ge=null,It=null,Xe=null,St=null;function io(){const e=lo.data||[],t=JSON.stringify(e);if(Ge&&It===t)return Ge;const s=[{label:"All Priority",value:""},...e.map(a=>({label:a.name,value:a.name}))];return Ge=Object.freeze(s),It=t,Ge}function uo(){const e=no.data||[],t=JSON.stringify(e);if(Xe&&St===t)return Xe;const s=[{label:"All Types",value:""},...e.map(a=>({label:a.name,value:a.name}))];return Xe=Object.freeze(s),St=t,Xe}const co=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function go(){return co}const po=Te({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(e){console.error("Failed to fetch tag colors:",e)},auto:!0}),Ye=new Map;let $t=null;function Bt(e){const t=po.data||{},s=JSON.stringify(t);if($t!==s&&(Ye.clear(),$t=s),Ye.has(e))return Ye.get(e);const a=t[e]||null;return Ye.set(e,a),a}const lt=Te({url:"force_trans_customization.api.issues.issue_search",makeParams(e){const t=e||{};return{search_query:t.search_query||"",limit:t.limit||8}},onError(e){console.error("Failed to search issues:",e)},auto:!1});function mo(e,t=8){return!e||e.length<2?Promise.resolve(lt.data||[]):lt.reload({search_query:e,limit:t}).then(()=>lt.data||[])}const fe=Te({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to filter issues by stat:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),Nt=Te({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to get stat filter count:",e)},auto:!1});function nt(e,t={}){const s={stat_type:e,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),console.log("filterIssuesByStat params:",s),fe.reload(s)}function Ze(e,t=null){const s={stat_type:e};return t&&(s.filters=t),Nt.reload(s)}const vo={class:"relative w-full max-w-2xl mx-auto"},fo={class:"relative group"},ho=["placeholder"],bo={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},yo={key:1,class:"flex items-center pointer-events-none"},xo={key:2,class:"animate-spin"},wo={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},_o={class:"flex items-center justify-between"},ko={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},Co={class:"text-xs text-slate-500"},Io={key:0,class:"px-6 py-8 text-center"},So=["onClick"],$o={class:"flex items-start space-x-4"},To={class:"flex-1 min-w-0"},Po={class:"flex items-start justify-between"},Ro={class:"flex-1 min-w-0"},Do={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},Lo=["innerHTML"],Mo={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Oo={key:0,class:"ml-2"},Fo={class:"flex-shrink-0 ml-4"},Vo={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Ao={key:0,class:"flex items-center"},Eo={key:1,class:"flex items-center"},jo={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Uo={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(e,{expose:t,emit:s}){const a=e,n=s,c=O(null),m=O(a.modelValue),y=O(!1),p=O(!1),v=O(-1),d=O(!1),$=O(0),w=O(null),_=O([]);let f=null;$e(()=>a.modelValue,D=>{m.value=D}),$e(m,D=>{n("update:modelValue",D),n("search",D)});const h=O([]),R=D=>pe(this,null,function*(){if(!D||D.length<2){h.value=[],p.value=!1,d.value=!1;return}try{d.value=!0;const F=performance.now(),K=yield mo(D,8);$.value=performance.now()-F,h.value=K||[],p.value=!0}catch(F){console.error("Search error:",F),h.value=[],p.value=!1}finally{d.value=!1}}),x=D=>{if(f&&clearTimeout(f),v.value=-1,!D||D.length<2){h.value=[],p.value=!1,d.value=!1;return}d.value=!0,f=setTimeout(()=>{R(D)},1e3)},k=()=>{x(m.value)},L=(D,F)=>{if(!D||!F)return D;const K=F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ie=new RegExp(`(${K})`,"gi");return D.replace(ie,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},H=D=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[D]||"bg-gray-100 text-gray-800 border border-gray-200",U=()=>{y.value=!0,j&&(clearTimeout(j),j=null),m.value.length>=2&&(h.value.length>0?p.value=!0:R(m.value))};let j=null;const N=()=>{y.value=!1,j=setTimeout(()=>{p.value=!1,j=null},200)},A=D=>{var F;if(p.value)switch(D.key){case"ArrowDown":D.preventDefault(),v.value=Math.min(v.value+1,h.value.length-1),X();break;case"ArrowUp":D.preventDefault(),v.value=Math.max(v.value-1,-1),X();break;case"Enter":D.preventDefault(),v.value>=0&&J(h.value[v.value]);break;case"Escape":ee(),(F=c.value)==null||F.blur();break}},J=D=>{m.value=D.name,ee();const K=`${window.location.origin}/app/issue/${D.name}`;window.open(K,"_blank"),n("suggestion-selected",D)},E=()=>{var D;m.value="",ee(),(D=c.value)==null||D.focus()},ee=()=>{p.value=!1,v.value=-1},X=()=>{if(v.value<0||!w.value||!_.value[v.value])return;const D=w.value,F=_.value[v.value];if(F){const K=D.getBoundingClientRect(),ie=F.getBoundingClientRect(),ae=ie.top-K.top+D.scrollTop,Pe=ae+ie.height,De=D.scrollTop,ge=D.clientHeight;ae<De?D.scrollTop=ae:Pe>De+ge&&(D.scrollTop=Pe-ge)}},Y=D=>{if(!D)return"";try{const F=new Date(D),K=new Date,ie=Math.abs(K-F),ae=Math.ceil(ie/(1e3*60*60*24));return ae===1?"Today":ae===2?"Yesterday":ae<=7?`${ae-1} days ago`:F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:F.getFullYear()!==K.getFullYear()?"numeric":void 0})}catch(F){return console.error("Error formatting date:",F),D}},ce=D=>{var F,K;(D.metaKey||D.ctrlKey)&&D.key==="k"&&(D.preventDefault(),(F=c.value)==null||F.focus(),(K=c.value)==null||K.select())};return je(()=>{document.addEventListener("keydown",ce)}),ot(()=>{document.removeEventListener("keydown",ce),f&&clearTimeout(f),j&&clearTimeout(j)}),t({focus:()=>{var D,F;(D=c.value)==null||D.focus(),(F=c.value)==null||F.select()},select:()=>{var D;return(D=c.value)==null?void 0:D.select()},$el:c}),(D,F)=>(l(),g("div",vo,[o("div",fo,[F[4]||(F[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),he(o("input",{ref_key:"searchInput",ref:c,type:"text","onUpdate:modelValue":F[0]||(F[0]=K=>m.value=K),onInput:k,onFocus:U,onBlur:N,onKeydown:A,placeholder:e.placeholder,class:B(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":y.value,"bg-slate-50/50":!y.value&&m.value}])},null,42,ho),[[xe,m.value]]),o("div",bo,[m.value?(l(),g("button",{key:0,onClick:E,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},F[1]||(F[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):V("",!0),!m.value&&!y.value?(l(),g("div",yo,F[2]||(F[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),re("K ")],-1)]))):V("",!0),d.value?(l(),g("div",xo,F[3]||(F[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):V("",!0)])]),p.value?(l(),g("div",{key:0,class:B(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":p.value}])},[h.value.length>0?(l(),g("div",wo,[o("div",_o,[o("span",ko,T(h.value.length)+" Result"+T(h.value.length!==1?"s":""),1),o("span",Co,T(Math.round($.value))+"ms ",1)])])):V("",!0),o("div",{ref_key:"suggestionsContainer",ref:w,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[h.value.length===0&&m.value.length>=2?(l(),g("div",Io,F[5]||(F[5]=[yt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):V("",!0),(l(!0),g(Z,null,te(h.value,(K,ie)=>(l(),g("div",{key:K.name||ie,ref_for:!0,ref:ae=>_.value[ie]=ae,onClick:ae=>J(K),class:B(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":ie===v.value}])},[o("div",$o,[F[8]||(F[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",To,[o("div",Po,[o("div",Ro,[o("h4",Do,[o("span",{innerHTML:L(K.subject||K.name,m.value)},null,8,Lo)]),o("p",Mo,[re(" ID: "+T(K.name)+" ",1),K.customer?(l(),g("span",Oo,"• "+T(K.customer),1)):V("",!0)])]),o("div",Fo,[o("span",{class:B(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",H(K.status)])},T(K.status),3)])]),o("div",Vo,[K.raised_by?(l(),g("div",Ao,[F[6]||(F[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),re(" "+T(K.raised_by),1)])):V("",!0),K.creation?(l(),g("div",Eo,[F[7]||(F[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),re(" "+T(Y(K.creation)),1)])):V("",!0)])])])],10,So))),128))],512),m.value&&h.value.length>0?(l(),g("div",jo,F[9]||(F[9]=[yt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):V("",!0)],2)):V("",!0),p.value?(l(),g("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:ee})):V("",!0)]))}},Bo=Ne(Uo,[["__scopeId","data-v-4969cdcf"]]),No={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},zo={class:"mb-6"},Ho={class:"relative max-w-2xl mx-auto"},Ko={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},qo={class:"border-t border-gray-200 pt-4"},Jo={class:"flex items-center justify-between"},Wo={class:"flex items-center space-x-3 flex-1"},Qo={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Go={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},Xo={class:"text-green-800 font-medium"},Yo={class:"text-green-600"},Zo={class:"text-green-900"},ea=["onClick"],ta={class:"flex items-center space-x-2 ml-4"},sa=["disabled"],oa={key:0,class:"flex items-center"},aa={key:1},ra={key:0,class:"relative"},la={class:"flex"},na={class:"w-48 border-r border-gray-200 bg-gray-50"},ia={class:"max-h-64 overflow-y-auto"},ua=["onClick"],ca={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},da={class:"flex-1 min-w-96"},ga={class:"p-4"},pa={key:0,class:"text-center py-8 text-gray-500"},ma={key:1,class:"space-y-4"},va={class:"col-span-2 flex items-center"},fa={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},ha={class:"col-span-2 flex items-center"},ba={class:"text-gray-700 font-medium truncate"},ya={class:"col-span-7"},xa=["onUpdate:modelValue","placeholder"],wa=["onUpdate:modelValue","placeholder"],_a={key:2,class:"space-y-2"},ka={key:0,class:"grid grid-cols-2 gap-2"},Ca=["onUpdate:modelValue","onInput"],Ia=["onUpdate:modelValue","onInput"],Sa={key:1},$a=["onUpdate:modelValue"],Ta={key:3,class:"space-y-2"},Pa={key:0,class:"grid grid-cols-2 gap-2"},Ra=["onUpdate:modelValue","onInput"],Da=["onUpdate:modelValue","onInput"],La={key:1},Ma=["onUpdate:modelValue"],Oa={key:4,class:"relative"},Fa={key:0},Va=["onUpdate:modelValue"],Aa={value:""},Ea=["value"],ja={key:1,class:"space-y-2"},Ua={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ba=["onClick"],Na={key:5,class:"space-y-2"},za={class:"space-y-2"},Ha={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ka=["onClick"],qa={class:"relative"},Ja=["onUpdate:modelValue","onInput","onKeydown","placeholder"],Wa={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Qa={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Ga=["onClick"],Xa={class:"font-medium text-gray-900"},Ya={class:"text-xs text-gray-500"},Za={key:6,class:"space-y-2"},er={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},tr=["onClick"],sr={class:"relative"},or=["onUpdate:modelValue","onInput","onKeyup","onKeydown"],ar={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},rr={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},lr=["onClick"],nr={class:"flex items-center justify-between"},ir={class:"font-medium text-gray-900"},ur={class:"text-xs text-gray-500"},cr={class:"col-span-1 flex items-start justify-center pt-1"},dr=["onClick"],gr={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},pr=["disabled"],mr={key:0,class:"flex items-center"},vr={key:1},fr={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(e,{emit:t}){const s=e,a=t,n=O(s.searchQuery),c=O(!1),m=O([]),y=O([]);let p=0;const v=O(!1),d=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],$={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},w={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},_=M(()=>JSON.stringify(m.value)!==JSON.stringify(y.value)),f=r=>{const u=d.find(i=>i.value===r);return(u==null?void 0:u.type)||"text"},h=r=>{const u=d.find(i=>i.value===r);return(u==null?void 0:u.label)||r},R=r=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[r]||`Enter ${h(r).toLowerCase()}...`,x=r=>{const u=f(r);return w[u]||w.text},k=r=>$[r]||[],L=r=>r.displayValue?r.displayValue:Array.isArray(r.value)?r.value.join(", "):r.value,H=r=>r?typeof r=="string"?r.split(",").map(u=>u.trim()).filter(Boolean):r:[],U=(r,u)=>{const i=H(r.value);i.splice(u,1),r.value=i.join(", ")},j=r=>r?r.split(",").map(u=>u.trim()).filter(Boolean):[],N=(r,u)=>{const i=j(r.value);i.splice(u,1),r.value=i.join(", ")},A=(r,u)=>u.userDisplayMap&&u.userDisplayMap[r]?u.userDisplayMap[r]:r,J=(r,u)=>{const i=H(r.value);i.includes(u.value)||(i.push(u.value),r.value=i.join(", "),r.userDisplayMap||(r.userDisplayMap={}),r.userDisplayMap[u.value]=u.label),r.searchValue="",r.suggestions=[],r.selectedLinkIndex=-1},E=(r,u)=>{if(!r.suggestions||r.suggestions.length===0)return;const i=r.suggestions.length-1;(r.selectedLinkIndex===void 0||r.selectedLinkIndex===null)&&(r.selectedLinkIndex=-1),u==="down"?r.selectedLinkIndex=r.selectedLinkIndex<i?r.selectedLinkIndex+1:0:u==="up"&&(r.selectedLinkIndex=r.selectedLinkIndex>0?r.selectedLinkIndex-1:i),Y()},ee=r=>{r.selectedLinkIndex>=0&&r.suggestions&&r.suggestions[r.selectedLinkIndex]&&J(r,r.suggestions[r.selectedLinkIndex])},X=r=>{r.suggestions=[],r.selectedLinkIndex=-1},Y=r=>{Me(()=>{const u=document.querySelector('[ref="selectedLinkOption"]');u&&u.scrollIntoView({block:"nearest",behavior:"smooth"})})};let ce={};const D=(r,u)=>pe(this,null,function*(){r.loadingTags=!0;const i=r.selectedTagIndex;ce[r.id]&&clearTimeout(ce[r.id]),ce[r.id]=setTimeout(()=>pe(this,null,function*(){try{const W=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:u||"",limit:15})});if(W.ok){const S=yield W.json();r.tagSuggestions=S.message||[],!r.tagSuggestions||r.tagSuggestions.length===0?r.selectedTagIndex=-1:i>=0&&i<r.tagSuggestions.length?r.selectedTagIndex=i:r.selectedTagIndex>=r.tagSuggestions.length&&(r.selectedTagIndex=Math.max(0,r.tagSuggestions.length-1))}}catch(W){console.error("Tag search error:",W),r.tagSuggestions=[]}finally{r.loadingTags=!1}}),300)}),F=r=>{if(!r.tagInput||!r.tagInput.trim())return;const u=r.tagInput.replace(",","").trim(),i=j(r.value);u&&!i.includes(u)&&(i.push(u),r.value=i.join(", ")),r.tagInput="",r.tagSuggestions=[]},K=(r,u)=>{const i=j(r.value);i.includes(u.value)||(i.push(u.value),r.value=i.join(", ")),r.tagInput="",r.tagSuggestions=[],r.selectedTagIndex=-1},ie=(r,u)=>{if(!r.tagSuggestions||r.tagSuggestions.length===0)return;const i=r.tagSuggestions.length-1;(r.selectedTagIndex===void 0||r.selectedTagIndex===null)&&(r.selectedTagIndex=-1),u==="down"?r.selectedTagIndex=r.selectedTagIndex<i?r.selectedTagIndex+1:0:u==="up"&&(r.selectedTagIndex=r.selectedTagIndex>0?r.selectedTagIndex-1:i),De()},ae=r=>{r.selectedTagIndex>=0&&r.tagSuggestions&&r.tagSuggestions[r.selectedTagIndex]?K(r,r.tagSuggestions[r.selectedTagIndex]):F(r)},Pe=r=>{r.tagSuggestions=[],r.selectedTagIndex=-1},De=r=>{Me(()=>{const u=document.querySelector('[ref="selectedTagOption"]');u&&u.scrollIntoView({block:"nearest",behavior:"smooth"})})},ge=r=>{const u=Bt(r);if(u){const i=u.startsWith("#")?u:`#${u}`,W=i.replace("#",""),S=parseInt(W.substr(0,2),16),se=parseInt(W.substr(2,2),16),Fe=parseInt(W.substr(4,2),16);return{backgroundColor:`rgba(${S}, ${se}, ${Fe}, 0.15)`,color:"#000000",borderColor:i,borderWidth:"1.5px"}}return{backgroundColor:"rgba(107, 114, 128, 0.1)",color:"#000000",borderColor:"rgba(107, 114, 128, 0.3)",borderWidth:"1px"}};let ue={};const ze=(r,u)=>pe(this,null,function*(){r.searchValue=u,r.loading=!0;const i=r.selectedLinkIndex;ue[r.id]&&clearTimeout(ue[r.id]),ue[r.id]=setTimeout(()=>pe(this,null,function*(){try{let W=[],S="";if(r.field==="customer"?S="/api/method/force_trans_customization.api.issues.search_customers":r.field==="contact"?S="/api/method/force_trans_customization.api.issues.search_contacts":r.field==="lead"?S="/api/method/force_trans_customization.api.issues.search_leads":r.field==="custom_assigned_csm_team"?S="/api/method/force_trans_customization.api.issues.search_user_groups":r.field==="custom_users_assigned"&&(S="/api/method/force_trans_customization.api.issues.search_users"),S){const se=yield fetch(S,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:u||"",limit:10,doctype_filter:r.field==="custom_users_assigned"?"User":void 0})});se.ok&&(W=(yield se.json()).message||[])}r.suggestions=W,!r.suggestions||r.suggestions.length===0?r.selectedLinkIndex=-1:i>=0&&i<r.suggestions.length?r.selectedLinkIndex=i:r.selectedLinkIndex>=r.suggestions.length&&(r.selectedLinkIndex=Math.max(0,r.suggestions.length-1))}catch(W){console.error("Search error:",W),r.suggestions=[]}finally{r.loading=!1}}),300)}),I=(r,u)=>x(r).map(W=>({label:W.label,onClick:()=>{u.operator!==W.value&&(f(r)==="date"&&(W.value==="between"?u.value&&!u.startValue&&(u.startValue=u.value,u.endValue=""):u.operator==="between"&&(u.startValue&&!u.value&&(u.value=u.startValue),u.startValue="",u.endValue="")),u.multiSelectValue=null,u.searchValue="",u.suggestions=[],u.searchOptions=[]),u.operator=W.value}})),b=(r,u)=>{var W;return((W=x(u).find(S=>S.value===r))==null?void 0:W.label)||r},P=(r,u)=>{const W=k(u).find(S=>S.value===r);return W?W.label:r},G=r=>{r.startValue&&r.endValue?r.value=`${r.startValue},${r.endValue}`:r.value=""},le=r=>{var S;const u=f(r);let i="equals";u==="link"?i="in":u==="tags"?i="has":i=((S=x(r)[0])==null?void 0:S.value)||"equals";const W={id:++p,field:r,operator:i,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},selectedLinkIndex:-1,tagInput:"",tagSuggestions:[],loadingTags:!1,selectedTagIndex:-1};m.value.push(W)},Le=r=>{m.value.splice(r,1)},qe=r=>{y.value.splice(r,1),pt()},Je=()=>pe(this,null,function*(){if(_.value){v.value=!0;try{y.value=JSON.parse(JSON.stringify(m.value)),pt(),c.value=!1}catch(r){console.error("Error applying filters:",r)}finally{setTimeout(()=>{v.value=!1},500)}}}),He=()=>{m.value=[],y.value=[],n.value="",a("update:searchQuery",""),a("update:filters",[]),a("filters-applied",[]),c.value=!1},pt=()=>{const r=y.value.filter(u=>u.value&&u.value.toString().trim()).map(u=>({field:u.field,operator:u.operator,value:u.value.toString().trim(),displayValue:u.displayValue||null}));console.log("Emitting filters:",r),a("update:filters",r),a("filters-applied",r)},zt=r=>{n.value=r,a("update:searchQuery",r)},Ht=r=>{a("suggestion-selected",r)};return $e(()=>s.searchQuery,r=>{n.value=r}),je(()=>{const r=localStorage.getItem("issue_filters");if(r)try{const u=JSON.parse(r);y.value=u.applied||[],m.value=u.pending||[]}catch(u){console.warn("Failed to parse saved filters:",u)}$e(()=>m.value,u=>{u.forEach(i=>{f(i.field)==="link"&&i.searchValue&&ze(i,i.searchValue)})},{deep:!0})}),$e([y,m],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:y.value,pending:m.value}))},{deep:!0}),(r,u)=>(l(),g("div",No,[o("div",zo,[o("div",Ho,[z(Bo,{ref:"searchBoxRef","model-value":n.value,"onUpdate:modelValue":zt,onSuggestionSelected:Ht,issues:e.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),n.value?(l(),g("div",Ko," Searching in "+T(e.filteredCount)+" issues ",1)):V("",!0)])]),o("div",qo,[o("div",Jo,[o("div",Wo,[o("button",{onClick:u[0]||(u[0]=i=>c.value=!c.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[u[4]||(u[4]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),u[5]||(u[5]=o("span",null,"Filters",-1)),y.value.length>0?(l(),g("span",Qo,T(y.value.length),1)):V("",!0)]),y.value.length>0?(l(),g("div",Go,[(l(!0),g(Z,null,te(y.value,(i,W)=>(l(),g("div",{key:i.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",Xo,T(h(i.field)),1),o("span",Yo,T(i.operator),1),o("span",Zo,T(L(i)),1),o("button",{onClick:S=>qe(W),class:"text-green-400 hover:text-red-600 ml-1"},u[6]||(u[6]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ea)]))),128))])):V("",!0)]),o("div",ta,[y.value.length>0||n.value?(l(),g("button",{key:0,onClick:He,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):V("",!0),m.value.length>0?(l(),g("button",{key:1,onClick:Je,class:B(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",v.value?"bg-blue-500 text-white cursor-wait":_.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!_.value||v.value},[v.value?(l(),g("span",oa,u[7]||(u[7]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),re(" Applying... ")]))):(l(),g("span",aa,T(_.value?"Apply Filters":"Filters Applied"),1))],10,sa)):V("",!0)])])]),c.value?(l(),g("div",ra,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:u[2]||(u[2]=me(()=>{},["stop"]))},[o("div",la,[o("div",na,[u[8]||(u[8]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",ia,[(l(),g(Z,null,te(d,i=>o("button",{key:i.value,onClick:me(W=>le(i.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,T(i.label),1),o("span",ca,T(i.type),1)],8,ua)),64))])]),o("div",da,[o("div",ga,[m.value.length===0?(l(),g("div",pa,u[9]||(u[9]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(l(),g("div",ma,[(l(!0),g(Z,null,te(m.value,(i,W)=>(l(),g("div",{key:i.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",va,[o("span",fa,T(h(i.field)),1)]),o("div",ha,[z(C(Ds),{options:I(i.field,i),placement:"left"},{default:q(({open:S})=>[o("button",{class:B(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",S?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",ba,T(b(i.operator,i.field)),1),u[10]||(u[10]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",ya,[f(i.field)==="text"?he((l(),g("input",{key:0,"onUpdate:modelValue":S=>i.value=S,type:"text",placeholder:R(i.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,xa)),[[xe,i.value]]):f(i.field)==="email"?he((l(),g("input",{key:1,"onUpdate:modelValue":S=>i.value=S,type:"email",placeholder:R(i.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,wa)),[[xe,i.value]]):f(i.field)==="datetime"?(l(),g("div",_a,[i.operator==="between"?(l(),g("div",ka,[o("div",null,[he(o("input",{"onUpdate:modelValue":S=>i.startValue=S,type:"datetime-local",placeholder:"Start date and time",onInput:S=>G(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ca),[[xe,i.startValue]]),u[11]||(u[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[he(o("input",{"onUpdate:modelValue":S=>i.endValue=S,type:"datetime-local",placeholder:"End date and time",onInput:S=>G(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ia),[[xe,i.endValue]]),u[12]||(u[12]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(l(),g("div",Sa,[he(o("input",{"onUpdate:modelValue":S=>i.value=S,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,$a),[[xe,i.value]]),u[13]||(u[13]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):f(i.field)==="date"?(l(),g("div",Ta,[i.operator==="between"?(l(),g("div",Pa,[o("div",null,[he(o("input",{"onUpdate:modelValue":S=>i.startValue=S,type:"date",onInput:S=>G(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ra),[[xe,i.startValue]]),u[14]||(u[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[he(o("input",{"onUpdate:modelValue":S=>i.endValue=S,type:"date",onInput:S=>G(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Da),[[xe,i.endValue]]),u[15]||(u[15]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(l(),g("div",La,[he(o("input",{"onUpdate:modelValue":S=>i.value=S,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Ma),[[xe,i.value]])]))])):f(i.field)==="select"?(l(),g("div",Oa,[i.isMultiSelect?(l(),g("div",ja,[H(i.value).length>0?(l(),g("div",Ua,[(l(!0),g(Z,null,te(H(i.value),(S,se)=>(l(),g("span",{key:se,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[re(T(P(S,i.field))+" ",1),o("button",{onClick:Fe=>U(i,se),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},u[16]||(u[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ba)]))),128))])):V("",!0)])):(l(),g("div",Fa,[i.field==="priority"||i.field==="status"||i.field==="issue_type"?he((l(),g("select",{key:0,"onUpdate:modelValue":S=>i.value=S,onKeydown:u[1]||(u[1]=Ce(me(S=>S.target.blur(),["prevent"]),["enter"])),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Aa,"Select "+T(h(i.field))+"...",1),(l(!0),g(Z,null,te(k(i.field),S=>(l(),g("option",{key:S.value,value:S.value},T(S.label),9,Ea))),128))],40,Va)),[[ds,i.value]]):V("",!0)]))])):f(i.field)==="link"?(l(),g("div",Na,[o("div",za,[H(i.value).length>0?(l(),g("div",Ha,[(l(!0),g(Z,null,te(H(i.value),(S,se)=>(l(),g("span",{key:se,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[re(T(A(S,i))+" ",1),o("button",{onClick:Fe=>U(i,se),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},u[17]||(u[17]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ka)]))),128))])):V("",!0),o("div",qa,[he(o("input",{"onUpdate:modelValue":S=>i.searchValue=S,onInput:S=>ze(i,i.searchValue),onKeydown:[Ce(me(S=>E(i,"up"),["prevent"]),["up"]),Ce(me(S=>E(i,"down"),["prevent"]),["down"]),Ce(me(S=>ee(i),["prevent"]),["enter"]),Ce(S=>X(i),["escape"])],type:"text",placeholder:`Search and add ${h(i.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ja),[[xe,i.searchValue]]),i.loading?(l(),g("div",Wa,u[18]||(u[18]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):V("",!0)]),i.suggestions&&i.suggestions.length>0&&i.searchValue?(l(),g("div",Qa,[(l(!0),g(Z,null,te(i.suggestions,(S,se)=>(l(),g("button",{key:se,onClick:Fe=>J(i,S),class:B(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",i.selectedLinkIndex===se?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:i.selectedLinkIndex===se?"selectedLinkOption":null},[o("div",Xa,T(S.label),1),o("div",Ya,T(S.subtitle),1)],10,Ga))),128))])):V("",!0)])])):f(i.field)==="tags"?(l(),g("div",Za,[j(i.value).length>0?(l(),g("div",er,[(l(!0),g(Z,null,te(j(i.value),(S,se)=>(l(),g("span",{key:se,style:Ie(ge(S)),class:"inline-flex items-center px-2 py-1 text-xs rounded-full border transition-colors"},[re(T(S)+" ",1),o("button",{onClick:Fe=>N(i,se),class:"ml-1 hover:text-red-600 transition-colors"},u[19]||(u[19]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,tr)],4))),128))])):V("",!0),o("div",sr,[he(o("input",{"onUpdate:modelValue":S=>i.tagInput=S,onInput:S=>D(i,i.tagInput),onKeyup:[Ce(S=>ae(i),["enter"]),Ce(S=>F(i),["comma"])],onKeydown:[Ce(me(S=>ie(i,"up"),["prevent"]),["up"]),Ce(me(S=>ie(i,"down"),["prevent"]),["down"]),Ce(S=>Pe(i),["escape"])],type:"text",placeholder:"Search and select tags or type new ones...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,or),[[xe,i.tagInput]]),i.loadingTags?(l(),g("div",ar,u[20]||(u[20]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):V("",!0)]),i.tagSuggestions&&i.tagSuggestions.length>0?(l(),g("div",rr,[(l(!0),g(Z,null,te(i.tagSuggestions,(S,se)=>(l(),g("button",{key:se,onClick:Fe=>K(i,S),class:B(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",i.selectedTagIndex===se?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:i.selectedTagIndex===se?"selectedTagOption":null},[o("div",nr,[o("div",null,[o("div",ir,T(S.label),1),o("div",ur,T(S.subtitle),1)]),S.color?(l(),g("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:Ie({backgroundColor:S.color})},null,4)):V("",!0)])],10,lr))),128))])):V("",!0),u[21]||(u[21]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags or press Enter/comma to create new tags",-1))])):V("",!0)]),o("div",cr,[o("button",{onClick:S=>Le(W),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},u[22]||(u[22]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,dr)])]))),128))])),m.value.length>0?(l(),g("div",gr,[o("button",{onClick:He,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:Je,disabled:!_.value||v.value,class:B(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",v.value?"bg-gray-700 text-white cursor-wait":_.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[v.value?(l(),g("span",mr,u[23]||(u[23]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),re(" Applying... ")]))):(l(),g("span",vr,T(_.value?"Apply Filters":"Filters Applied"),1))],10,pr)])):V("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:u[3]||(u[3]=i=>c.value=!1)})])):V("",!0)]))}},hr=Ne(fr,[["__scopeId","data-v-283ceaa0"]]),br={class:"bg-white rounded-lg shadow-sm border mt-4"},yr={class:"px-6 py-4 flex items-center justify-between"},xr={class:"text-sm text-gray-700"},wr={key:0},_r={key:1},kr={key:0,class:"flex items-center space-x-2"},Cr={class:"flex items-center space-x-1"},Ir={key:1,class:"px-2 text-gray-500"},Sr={key:2,class:"px-2 text-gray-500"},$r={key:1,class:"flex items-center space-x-2"},Tr={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(e,{emit:t}){const s=e,a=t,n=O(s.itemsPerPage);$e(()=>s.itemsPerPage,k=>{n.value=k});const c=M(()=>Math.ceil(s.totalItems/s.itemsPerPage)),m=M(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),y=M(()=>{const k=s.currentPage*s.itemsPerPage;return Math.min(k,s.totalItems)}),p=M(()=>{const k=[],L=s.maxVisiblePages,H=s.currentPage,U=c.value;if(U<=L)for(let j=1;j<=U;j++)k.push(j);else{let j=Math.max(1,H-Math.floor(L/2)),N=Math.min(U,j+L-1);N-j+1<L&&(j=Math.max(1,N-L+1)),j>1&&(j=Math.max(2,j)),N<U&&(N=Math.min(U-1,N));for(let A=j;A<=N;A++)k.push(A)}return k}),v=M(()=>c.value>s.maxVisiblePages&&!p.value.includes(1)),d=M(()=>c.value>s.maxVisiblePages&&!p.value.includes(c.value)),$=M(()=>v.value&&p.value.length>0&&p.value[0]>2),w=M(()=>d.value&&p.value.length>0&&p.value[p.value.length-1]<c.value-1),_=M(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),f=k=>{k>=1&&k<=c.value&&k!==s.currentPage&&(a("update:currentPage",k),a("pageChange",{page:k,itemsPerPage:s.itemsPerPage,offset:(k-1)*s.itemsPerPage}))},h=()=>{s.currentPage>1&&f(s.currentPage-1)},R=()=>{s.currentPage<c.value&&f(s.currentPage+1)},x=()=>{const k=n.value;a("update:itemsPerPage",k);const L=(s.currentPage-1)*s.itemsPerPage+1,H=Math.ceil(L/k);a("pageChange",{page:H,itemsPerPage:k,offset:(H-1)*k})};return(k,L)=>(l(),g("div",br,[o("div",yr,[o("div",xr,[e.totalItems>0?(l(),g("span",wr," Showing "+T(m.value)+" to "+T(y.value)+" of "+T(e.totalItems)+" results ",1)):(l(),g("span",_r," No results found "))]),c.value>1?(l(),g("div",kr,[z(C(we),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===1,onClick:h},{prefix:q(()=>[z(C(Oe),{name:"chevron-left",class:"h-4 w-4"})]),default:q(()=>[L[3]||(L[3]=re(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",Cr,[v.value?(l(),Q(C(we),{key:0,theme:"gray",variant:"outline",size:"sm",class:B({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==1,"pagination-active-btn":e.currentPage===1}),onClick:L[0]||(L[0]=H=>f(1))},{default:q(()=>L[4]||(L[4]=[re(" 1 ")])),_:1,__:[4]},8,["class"])):V("",!0),$.value?(l(),g("span",Ir,"...")):V("",!0),(l(!0),g(Z,null,te(p.value,H=>(l(),Q(C(we),{key:H,theme:"gray",variant:"outline",size:"sm",class:B({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==H,"pagination-active-btn":e.currentPage===H}),onClick:U=>f(H)},{default:q(()=>[re(T(H),1)]),_:2},1032,["class","onClick"]))),128)),w.value?(l(),g("span",Sr,"...")):V("",!0),d.value?(l(),Q(C(we),{key:3,theme:"gray",variant:"outline",size:"sm",class:B({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==c.value,"pagination-active-btn":e.currentPage===c.value}),onClick:L[1]||(L[1]=H=>f(c.value))},{default:q(()=>[re(T(c.value),1)]),_:1},8,["class"])):V("",!0)]),z(C(we),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===c.value,onClick:R},{suffix:q(()=>[z(C(Oe),{name:"chevron-right",class:"h-4 w-4"})]),default:q(()=>[L[5]||(L[5]=re(" Next "))]),_:1,__:[5]},8,["disabled"])])):V("",!0),e.showItemsPerPage?(l(),g("div",$r,[L[6]||(L[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),z(C(gs),{modelValue:n.value,"onUpdate:modelValue":L[2]||(L[2]=H=>n.value=H),options:_.value,onChange:x,class:"w-20"},null,8,["modelValue","options"])])):V("",!0)])]))}},Pr=Ne(Tr,[["__scopeId","data-v-898deb80"]]),Rr={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Dr={class:"text-3xl font-bold text-gray-900"},Lr={class:"text-3xl font-bold text-blue-600"},Mr={class:"text-3xl font-bold text-green-600"},Or={class:"text-3xl font-bold text-orange-600"},Fr={class:"text-3xl font-bold text-purple-600"},Vr=3e4,Ar={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(e,{expose:t,emit:s}){const a=e,n=s,c=Ue({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),m=M(()=>c.value.team_tickets),y=M(()=>c.value.open_tickets),p=M(()=>c.value.assigned_to_me),v=M(()=>c.value.actionable_tickets),d=M(()=>c.value.response_tickets);let $=null,w=0;const _=()=>pe(this,null,function*(){const x=Date.now();if($&&x-w<Vr)return $;try{const k=yield ao("force_trans_customization.api.issues.get_issue_stats");return c.value=k,$=k,w=x,k}catch(k){return console.error("Error fetching issue stats:",k),c.value}});let f=null;const h=()=>{f&&clearTimeout(f),f=setTimeout(()=>{_()},500)};je(()=>{_()}),$e(()=>a.issues.length,()=>{h()});const R=x=>{n("filter-changed",x)};return t({refreshStats:_}),(x,k)=>(l(),g("div",Rr,[o("div",{onClick:k[0]||(k[0]=L=>R("team_tickets")),class:B(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Dr,T(m.value),1),k[5]||(k[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:k[1]||(k[1]=L=>R("open_tickets")),class:B(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",Lr,T(y.value),1),k[6]||(k[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:k[2]||(k[2]=L=>R("assigned_to_me")),class:B(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",Mr,T(p.value),1),k[7]||(k[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:k[3]||(k[3]=L=>R("actionable_tickets")),class:B(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Tickets where customer awaits our reply"},[o("div",Or,T(v.value),1),k[8]||(k[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:k[4]||(k[4]=L=>R("response_tickets")),class:B(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Tickets awaiting customer response"},[o("div",Fr,T(d.value),1),k[9]||(k[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Er={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const e=this.status||"New";return{New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[e]||"gray"}},components:{Badge:ct}},jr={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const e=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[e]||"yellow"},priorityIndicatorClass(){const e=this.priority||"Medium";return{"bg-red-500":e==="Critical","bg-red-400":e==="High","bg-yellow-400":e==="Medium","bg-green-400":e==="Low"}}},components:{Badge:ct}},Ur={components:{ListView:oo,Avatar:$s,Badge:ct,Button:we,FeatherIcon:Oe,ListHeader:Ft,ListHeaderItem:Ot,ListRow:gt,ListRowItem:Vt,ListRows:At,ListSelectBanner:Et,StatusBadge:Er,PriorityBadge:jr,Tooltip:Dt},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(e,{emit:t}){const s=O(!1),a=O(null),n=O({x:0,y:0}),c=O(!1),m=O({x:0,y:0}),y=O(null),p=O(!1),v=O({x:0,y:0}),d=O(null),$=I=>{if(!I||typeof I!="string")return"?";if(I.includes("@")){const b=I.split("@")[0];return b.includes(".")||b.includes("_")?b.split(/[._]/).map(G=>G[0]).join("").toUpperCase().slice(0,2):b.slice(0,2).toUpperCase()}return I.includes(" ")?I.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2):I.slice(0,2).toUpperCase()},w=I=>{if(!I)return"";const b=I.match(/ISS-(\d{4}-\d+)/);return b?b[1]:I},_=I=>{if(!I)return"";const b=document.createElement("div");return b.innerHTML=I,b.textContent||b.innerText||""},f=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",h=I=>I?new Date(I).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",R=I=>({New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[I]||"gray",x=I=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[I]||"yellow",k=new Map,L=M(()=>e.issues.map(I=>{const b=I.name;if(k.has(b)){const G=k.get(b);if(G.originalStatus===I.status&&G.originalPriority===I.priority&&G.originalSubject===I.subject&&G.originalUsersAssigned===JSON.stringify(I.custom_users_assigned)&&G.originalIsResponseExpected===I.custom_is_response_expected)return G.transformed}const P=rt(ke({},I),{status:{label:I.status||"New",color:R(I.status)},priority:{label:I.priority||"Medium",color:x(I.priority)}});return k.set(b,{transformed:P,originalStatus:I.status,originalPriority:I.priority,originalSubject:I.subject,originalUsersAssigned:JSON.stringify(I.custom_users_assigned),originalIsResponseExpected:I.custom_is_response_expected}),P})),H=Ue([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Raised By",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"150px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"100px",sortable:!0}]),U=Ue({showTooltip:!1,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No tickets found",description:"Try adjusting your search or filter criteria"},onRowClick:I=>{N(I)}}),j=I=>{console.log("Selected rows:",I)},N=I=>{console.log("Issue clicked:",I);const P=`${window.location.origin}/app/issue/${I.name}`;window.open(P,"_blank")},A=I=>{const b=I||"New";return{"bg-blue-500":b==="New","bg-orange-500":b==="In Review","bg-purple-500":b==="Confirmed","bg-blue-500":b==="In Transit","bg-green-500":b==="Delivered","bg-green-500":b==="Closed","bg-red-500":b==="Open","bg-orange-500":b==="Replied","bg-yellow-500":b==="On Hold","bg-green-500":b==="Resolved"}},J=I=>{const b=I||"Medium";return{"bg-red-500":b==="Critical"||b==="High","bg-yellow-500":b==="Medium","bg-green-500":b==="Low"}},E=I=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[I||"New"]||"bg-gray-100 text-gray-800",ee=I=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[I||"Medium"]||"bg-yellow-100 text-yellow-800",X=I=>{const b=I||"Medium";return{"bg-red-500":b==="Critical","bg-red-400":b==="High","bg-yellow-400":b==="Medium","bg-green-400":b==="Low"}},Y=(I,b)=>{const P=I.target.getBoundingClientRect();n.value={x:P.left+P.width/2,y:P.top-10},a.value=b,s.value=!0},ce=()=>{s.value=!1,a.value=null},D=(I,b)=>{if(!b||b.length===0)return;const P=I.target.getBoundingClientRect();m.value={x:P.left+P.width/2,y:P.top-10},y.value=b,c.value=!0},F=()=>{c.value=!1,y.value=null},K=(I,b)=>{if(!b||!b.subject)return;const P=I.currentTarget.getBoundingClientRect();v.value={x:P.left+P.width/2,y:P.top-10},d.value={subject:b.subject,description:b.description},p.value=!0},ie=()=>{p.value=!1,d.value=null},ae=I=>{let b="asc";e.sortField===I&&(b=e.sortDirection==="asc"?"desc":"asc"),t("sort",{field:I,direction:b})},Pe=I=>e.sortField!==I?"arrow-up-down":e.sortDirection==="asc"?"arrow-up":"arrow-down",De=I=>e.sortField!==I?"text-gray-400":"text-blue-600",ge=I=>e.sortField===I?"bg-blue-50":"",ue=new Map;return{columns:H,listOptions:U,transformedIssues:L,handleSelections:j,handleIssueClick:N,getStatusColor:A,getPriorityColor:J,getStatusBadgeClass:E,getPriorityBadgeClass:ee,getPriorityIndicatorClass:X,getInitials:$,formatIssueId:w,stripHtml:_,formatDate:f,formatTime:h,showPopup:s,popupUser:a,popupPosition:n,showUserPopup:Y,hideUserPopup:ce,handleColumnSort:ae,getSortIcon:Pe,getSortIconClass:De,getSortButtonClass:ge,getTagStyle:I=>{if(ue.has(I))return ue.get(I);const b=Bt(I);let P;if(b){const G=b.replace("#",""),le=parseInt(G.substr(0,2),16),Le=parseInt(G.substr(2,2),16),qe=parseInt(G.substr(4,2),16),Je=`rgba(${le}, ${Le}, ${qe}, 0.1)`,He=`rgb(${Math.max(le-50,0)}, ${Math.max(Le-50,0)}, ${Math.max(qe-50,0)})`;P={backgroundColor:Je,color:He,borderColor:He}}else P={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return ue.set(I,P),P},showTagsPopup:c,tagsPopupPosition:m,tagsPopupData:y,showTagsPopupFn:D,hideTagsPopupFn:F,showIssueDetailsPopup:p,issueDetailsPopupPosition:v,issueDetailsPopupData:d,showIssueDetailsPopupFn:K,hideIssueDetailsPopup:ie}}},Br={class:"bg-white rounded-lg shadow-sm border"},Nr={key:0,class:"px-6 py-12 text-center text-gray-500"},zr=["onClick"],Hr=["onClick"],Kr=["onMouseenter"],qr={class:"font-medium truncate"},Jr={key:0,class:"relative"},Wr={class:"text-gray-500 text-sm mt-1 truncate max-w-xs"},Qr={class:"text-sm font-medium text-gray-900 truncate block"},Gr={key:3,class:"flex flex-wrap gap-1"},Xr=["onMouseenter"],Yr={key:1,class:"text-gray-400 text-sm"},Zr=["onMouseenter"],el=["title"],tl={class:"truncate"},sl={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},ol={key:1,class:"text-gray-400 text-sm"},al={key:5,class:"flex flex-col"},rl={class:"text-sm"},ll={class:"text-xs text-gray-400"},nl={key:7},il={class:"flex gap-2"},ul={class:"text-sm"},cl={class:"font-semibold text-gray-900 mb-1"},dl={class:"text-gray-600 flex items-center gap-1"},gl={class:"text-xs text-gray-500 mt-1"},pl={class:"text-sm"},ml={class:"font-bold text-gray-900 mb-3"},vl={key:0,class:"text-gray-700 whitespace-pre-wrap max-h-48 overflow-y-auto"},fl={key:1,class:"text-gray-400 italic"},hl={class:"text-sm"},bl={class:"flex flex-wrap gap-1"};function yl(e,t,s,a,n,c){const m=be("FeatherIcon"),y=be("ListHeaderItem"),p=be("ListHeader"),v=be("Avatar"),d=be("Tooltip"),$=be("ListRowItem"),w=be("ListRow"),_=be("ListRows"),f=be("Button"),h=be("ListSelectBanner"),R=be("ListView");return l(),g("div",Br,[t[6]||(t[6]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(l(),g("div",Nr,t[3]||(t[3]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(l(),Q(R,{key:1,columns:a.columns,rows:a.transformedIssues,"row-key":"name",options:a.listOptions,"onUpdate:selections":a.handleSelections,class:"p-4"},{default:q(()=>[z(p,null,{default:q(()=>[(l(!0),g(Z,null,te(a.columns,x=>(l(),Q(y,{key:x.key,item:x},ps({_:2},[x.icon?{name:"prefix",fn:q(({item:k})=>[z(m,{name:k.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,x.sortable?{name:"suffix",fn:q(()=>[o("button",{onClick:k=>a.handleColumnSort(x.key),class:B(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",a.getSortButtonClass(x.key)])},[z(m,{name:a.getSortIcon(x.key),class:B(["h-3 w-3",a.getSortIconClass(x.key)])},null,8,["name","class"])],10,zr)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),z(_,null,{default:q(()=>[(l(!0),g(Z,null,te(a.transformedIssues,x=>(l(),Q(w,{key:x.name,row:x,class:B({"bg-orange-50 hover:bg-orange-100":x.custom_is_response_expected===1})},{default:q(({column:k,item:L})=>[z($,{item:L,align:k.align},{prefix:q(()=>[k.key==="raised_by"?(l(),Q(v,{key:0,size:"sm",label:a.getInitials(x.raised_by),class:"mr-3"},null,8,["label"])):V("",!0)]),default:q(()=>{var H;return[k.key==="name"?(l(),g("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:me(U=>a.handleIssueClick(x),["prevent"])},T(a.formatIssueId(L)),9,Hr)):k.key==="subject"?(l(),g("div",{key:1,class:"max-w-xs cursor-pointer",onMouseenter:U=>a.showIssueDetailsPopupFn(U,x),onMouseleave:t[0]||(t[0]=(...U)=>a.hideIssueDetailsPopup&&a.hideIssueDetailsPopup(...U))},[o("div",qr,T(x.subject),1),x.description&&x.description.length>0?(l(),g("div",Jr,[o("div",Wr,T(a.stripHtml(x.description)),1)])):V("",!0)],40,Kr)):k.key==="raised_by"?(l(),Q(d,{key:2,text:`Raised By: ${L||"Not assigned"}`},{default:q(()=>[o("span",Qr,T(L||"-"),1)]),_:2},1032,["text"])):k.key==="custom_users_assigned"?(l(),g("div",Gr,[x.custom_users_assigned&&x.custom_users_assigned.length>0?(l(!0),g(Z,{key:0},te(x.custom_users_assigned.filter(U=>U.user_assigned),U=>(l(),g("div",{key:U.name||U,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:j=>a.showUserPopup(j,U),onMouseleave:t[1]||(t[1]=(...j)=>a.hideUserPopup&&a.hideUserPopup(...j))},T(a.getInitials(U.user_assigned)),41,Xr)]))),128)):(l(),g("span",Yr,"-"))])):k.key==="_user_tags"?(l(),g("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:U=>a.showTagsPopupFn(U,x._user_tags),onMouseleave:t[2]||(t[2]=(...U)=>a.hideTagsPopupFn&&a.hideTagsPopupFn(...U))},[x._user_tags&&x._user_tags.length>0?(l(),g(Z,{key:0},[o("span",{style:Ie(a.getTagStyle(x._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:x._user_tags[0]},[o("span",tl,T(x._user_tags[0]),1)],12,el),x._user_tags.length>1?(l(),g("span",sl," +"+T(x._user_tags.length-1),1)):V("",!0)],64)):(l(),g("span",ol,"-"))],40,Zr)):k.key==="creation"?(l(),g("div",al,[o("span",rl,T(a.formatDate(L)),1),o("span",ll,T(a.formatTime(L)),1)])):k.key==="status"?(l(),Q(d,{key:6,text:`Status: ${((H=x.status)==null?void 0:H.label)||x.status||"New"}`},{default:q(()=>{var U,j;return[o("span",{class:B([a.getStatusBadgeClass(((U=x.status)==null?void 0:U.label)||x.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},T(((j=x.status)==null?void 0:j.label)||x.status||"New"),3)]}),_:2},1032,["text"])):(l(),g("span",nl,T(L),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row","class"]))),128))]),_:1}),z(h,null,{actions:q(({unselectAll:x})=>[o("div",il,[z(f,{variant:"ghost",label:"Delete"}),z(f,{variant:"ghost",label:"Unselect all",onClick:x},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),a.showPopup&&a.popupUser&&typeof a.popupUser=="object"?(l(),g("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:Ie({left:a.popupPosition.x+"px",top:a.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",ul,[o("div",cl,T(a.popupUser.user_assigned||"Unknown User"),1),o("div",dl,[t[4]||(t[4]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),re(" "+T(a.popupUser.team||"No Team"),1)]),o("div",gl," Assigned: "+T(a.formatDate(a.popupUser.assigned_date)),1)])],4)):V("",!0),a.showIssueDetailsPopup&&a.issueDetailsPopupData?(l(),g("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-md",style:Ie({left:a.issueDetailsPopupPosition.x+"px",top:a.issueDetailsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",pl,[o("div",ml,T(a.issueDetailsPopupData.subject),1),a.issueDetailsPopupData.description?(l(),g("div",vl,T(a.stripHtml(a.issueDetailsPopupData.description)),1)):(l(),g("div",fl," No description available "))])],4)):V("",!0),a.showTagsPopup&&a.tagsPopupData?(l(),g("div",{key:4,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:Ie({left:a.tagsPopupPosition.x+"px",top:a.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",hl,[t[5]||(t[5]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",bl,[(l(!0),g(Z,null,te(a.tagsPopupData,x=>(l(),g("span",{key:x,style:Ie(a.getTagStyle(x)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},T(x),5))),128))])])],4)):V("",!0)])}const xl=Ne(Ur,[["render",yl]]),wl={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},_l={class:"flex items-start justify-between"},kl={class:"flex items-start space-x-3"},Cl={class:"flex-shrink-0"},Il={class:"flex-1 min-w-0"},Sl={class:"text-sm font-medium text-gray-900"},$l={class:"text-sm text-gray-600 mt-1"},Tl={class:"text-xs text-gray-500 mt-1"},Pl=["onClick"],Rl={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(e){const t=c=>{const m="bg-white/95 border-l-4",y={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${m} ${y[c]||y.info}`},s=c=>{const m={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return m[c]||m.info},a=c=>{const m={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return m[c]||m.info},n=c=>{const y=new Date-c,p=Math.floor(y/6e4);if(p<1)return"Just now";if(p<60)return`${p}m ago`;const v=Math.floor(p/60);return v<24?`${v}h ago`:c.toLocaleDateString()};return(c,m)=>(l(),g("div",wl,[z(ms,{name:"notification",tag:"div"},{default:q(()=>[(l(!0),g(Z,null,te(e.notifications,y=>(l(),g("div",{key:y.id,class:B([t(y.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",_l,[o("div",kl,[o("div",Cl,[z(C(Oe),{name:s(y.type),class:B([a(y.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",Il,[o("p",Sl,T(y.title),1),o("p",$l,T(y.message),1),o("p",Tl,T(n(y.timestamp)),1)])]),o("button",{onClick:p=>c.$emit("remove",y.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[z(C(Oe),{name:"x",class:"h-4 w-4"})],8,Pl)])],2))),128))]),_:1})]))}},Dl=Ne(Rl,[["__scopeId","data-v-d57fd7d2"]]);function Ll(e,t){let s;return function(...n){const c=()=>{clearTimeout(s),e(...n)};clearTimeout(s),s=setTimeout(c,t)}}function Ml(){const e=O(""),t=O({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=O(""),a=Ll(_=>{s.value=_},300);$e(e,_=>{a(_)});const n=M(()=>{const _={};return s.value.trim()&&(_.subject=["like",`%${s.value.trim()}%`]),t.value.status&&(_.status=t.value.status),t.value.priority&&(_.priority=t.value.priority),t.value.assignee&&(_.raised_by=t.value.assignee),t.value.tags&&(_.issue_type=t.value.tags),_}),c=M(()=>t.value.sortBy||"creation desc"),m=new Map,y=_=>{if(!_||!Array.isArray(_))return[];const f=JSON.stringify({issuesLength:_.length,searchQuery:e.value.trim(),status:t.value.status,priority:t.value.priority,assignee:t.value.assignee,tags:t.value.tags,sortBy:t.value.sortBy});if(m.has(f))return m.get(f);let h=[..._];if(e.value.trim()){const x=e.value.toLowerCase().trim();h=h.filter(k=>{const L=(k.subject||"").toLowerCase(),H=(k.description||"").toLowerCase();return L.includes(x)||H.includes(x)})}t.value.status&&(h=h.filter(x=>x.status===t.value.status)),t.value.priority&&(h=h.filter(x=>x.priority===t.value.priority)),t.value.assignee&&(h=h.filter(x=>x.raised_by===t.value.assignee)),t.value.tags&&(h=h.filter(x=>x.issue_type===t.value.tags));const R=Ve({Critical:4,High:3,Medium:2,Low:1});if(h.sort((x,k)=>{const[L,H]=t.value.sortBy.split(" "),U=x[L]||"",j=k[L]||"";let N=0;return L==="creation"||L==="modified"?N=new Date(U)-new Date(j):L==="priority"?N=(R[U]||0)-(R[j]||0):N=U.toString().localeCompare(j.toString()),H==="desc"?-N:N}),m.size>50){const x=m.keys().next().value;m.delete(x)}return m.set(f,h),h};let p=null,v=null;const d=_=>{if(!_||!Array.isArray(_))return Ve([{label:"All Assignees",value:""}]);const f=_.map(x=>x.raised_by).filter(x=>x&&x.trim()).sort().join("|");if(p&&v===f)return p;const h=[...new Set(_.map(x=>x.raised_by).filter(x=>x&&x.trim()))],R=Ve([{label:"All Assignees",value:""},...h.map(x=>({label:x,value:x}))]);return p=R,v=f,R},$=()=>{e.value="",s.value="",t.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},w=M(()=>e.value.trim()!==""||t.value.status!==""||t.value.priority!==""||t.value.assignee!==""||t.value.tags!==""||t.value.sortBy!=="creation desc");return{searchQuery:e,filters:t,debouncedSearchQuery:s,apiFilters:n,sortOrder:c,hasActiveFilters:w,filterIssues:y,getAssigneeOptions:d,resetFilters:$}}function Ol(e,t,s){const a=vs(),n=O([]),c=O(!1),m=O(!1);let y=null;const p=m.value?15e3:2e3,v=()=>{console.log(`⏰ Setting up debounced refresh with ${p}ms delay`),y&&(clearTimeout(y),console.log("🔄 Cleared existing debounce timer")),y=setTimeout(()=>{console.log("⏰ Debounce timer fired, calling processDocumentRefreshes"),w()},p)},d=()=>{if(!a||c.value)return;a.emit("doctype_subscribe","Issue"),a.off("list_update"),a.on("list_update",A=>{try{if(console.log("📡 Received list_update event:",A),(A==null?void 0:A.doctype)!=="Issue")return;if(R()){console.log("⏸️ Skipping realtime update (avoid condition met)");return}if(A.action==="insert"||A.action==="create"){console.log("📝 Skipping new issue creation update:",A.name);return}console.log("✅ Adding to pending refreshes:",A.name),n.value.push(A),v()}catch(J){console.error("❌ Error processing list_update event:",J)}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(A=>{a.on(A,J=>{if((J==null?void 0:J.doctype)!=="Issue"||R())return;const E={doctype:"Issue",name:J.name,action:A.includes("create")?"insert":A.includes("delete")?"delete":"update",modified_by:J.modified_by||J.owner,timestamp:new Date().toISOString()};if(E.action==="insert"){console.log("📝 Skipping new issue creation update:",J.name);return}n.value.push(E),v()})}),c.value=!0},$=()=>{if(!a||!c.value)return;a.emit("doctype_unsubscribe","Issue"),a.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(A=>{a.off(A)}),c.value=!1},w=()=>pe(this,null,function*(){if(console.log("🔄 processDocumentRefreshes called with",n.value.length,"pending refreshes"),!n.value.length){console.log("⏸️ No pending refreshes, returning early");return}const N=window.location.hash||window.location.pathname;if(console.log("🛣️ Current route:",N),!N.includes("issue-tracker")&&!N.includes("issues")&&!N.includes("frontend")){console.log("❌ Not on correct route, clearing pending refreshes and disabling updates"),n.value=[],$();return}console.log("✅ Route check passed, proceeding with refresh");const A=[...new Set(n.value.map(E=>E.name))],J=A.length;console.log(`🔄 Processing ${J} document refreshes:`,A),n.value=[];try{yield _(A),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:J,documents:A}})),console.log(`✅ Successfully processed ${J} document refreshes`)}catch(E){console.error("❌ Error updating individual rows, falling back to full refresh:",E);try{t&&typeof t=="function"?(console.log("🔄 Using custom refresh function for fallback"),yield t()):(console.log("🔄 Using default refresh functions for fallback"),yield Ke(),yield tt()),console.log("✅ Fallback refresh completed successfully")}catch(ee){console.error("❌ Error in fallback refresh:",ee)}}}),_=N=>pe(this,null,function*(){try{const{activeResource:A,currentData:J}=f();if(!J||!Array.isArray(J)){console.log("📋 No current data available, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}let E={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(e&&typeof e=="function")try{const Y=e();Y&&(E=ke(ke({},E),Y))}catch(Y){console.warn("Error getting current parameters, using defaults:",Y)}const ee=J.map(Y=>Y.name),X=N.filter(Y=>ee.includes(Y));if(X.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${X.length} visible issues:`,X),yield h(X,A,J)}catch(A){throw console.error("Error during targeted refresh:",A),t&&typeof t=="function"&&(yield t()),A}}),f=()=>{if(s&&typeof s=="function")try{const ee=s();if(ee)return console.log(`📊 Using ${ee.resourceType} resource for updates (from parent)`),ee}catch(ee){console.warn("Error getting resource state from parent, falling back to detection:",ee)}const N=fe.data&&Array.isArray(fe.data)&&fe.data.length>0,A=ve.data&&Array.isArray(ve.data)&&ve.data.length>0;if(N&&!A)return console.log("📊 Using statFilterResource for updates (only stat has data)"),{activeResource:fe,currentData:fe.data,resourceType:"stat"};if(A&&!N)return console.log("📋 Using issuesResource for updates (only issues has data)"),{activeResource:ve,currentData:ve.data,resourceType:"main"};const J=fe.lastLoaded||0,E=ve.lastLoaded||0;return N&&J>=E?(console.log("📊 Using statFilterResource for updates (more recent)"),{activeResource:fe,currentData:fe.data,resourceType:"stat"}):(console.log("📋 Using issuesResource for updates (default)"),{activeResource:ve,currentData:ve.data||[],resourceType:"main"})},h=(N,A,J)=>pe(this,null,function*(){try{const ee=(yield Promise.all(N.map(X=>pe(this,null,function*(){try{return yield ro(X),Ut.data}catch(Y){return console.warn(`Failed to fetch updated issue ${X}:`,Y),null}})))).filter(X=>X!==null);if(ee.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}if(A.data&&Array.isArray(A.data))console.log(`🔄 Updating ${ee.length} issues in ${A.data.length} total issues`),ee.forEach(X=>{const Y=A.data.findIndex(ce=>ce.name===X.name);Y!==-1?(console.log(`✅ Updating issue at index ${Y}: ${X.name}`),Object.assign(A.data[Y],X)):console.warn(`⚠️ Issue ${X.name} not found in current data for update`)});else{console.warn("⚠️ activeResource.data is not an array, using fallback method");const X=[...J];ee.forEach(Y=>{const ce=X.findIndex(D=>D.name===Y.name);ce!==-1?(console.log(`✅ Updating issue at index ${ce}: ${Y.name} (fallback)`),X[ce]=Y):console.warn(`⚠️ Issue ${Y.name} not found in current data for update (fallback)`)}),A.data=X}console.log(`🎯 Successfully updated ${ee.length} issues in current view`)}catch(E){console.error("Error updating visible issues in place:",E),t&&typeof t=="function"&&(yield t())}}),R=()=>!!document.hidden,x=O(!1),k=()=>{document.hidden?x.value=!0:x.value&&(x.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),n.value.length>0?(console.log(`📋 Processing ${n.value.length} pending updates`),w()):L())},L=()=>{n.value=[];try{t&&typeof t=="function"?t():(Ke(),tt())}catch(N){console.error("Error during manual refresh:",N)}},H=()=>{d()},U=()=>{c.value=!1},j=N=>{console.error("Socket connection error:",N),c.value=!1};return je(()=>{a&&(a.on("connect",H),a.on("disconnect",U),a.on("connect_error",j),document.addEventListener("visibilitychange",k),a.connected&&d())}),ot(()=>{a&&(a.off("connect",H),a.off("disconnect",U),a.off("connect_error",j)),document.removeEventListener("visibilitychange",k),$(),y&&clearTimeout(y)}),{pendingDocumentRefreshes:n,realtimeEventsSetup:c,setupRealtimeUpdates:d,disableRealtimeUpdates:$,manualRefresh:L,processDocumentRefreshes:w}}const Fl={class:"min-h-screen bg-gray-50"},Vl={class:"bg-white shadow-sm border-b"},Al={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},El={class:"flex justify-between items-center py-4"},jl={class:"flex items-center space-x-4"},Ul={class:"flex space-x-4"},Bl={class:"flex items-center space-x-4"},Nl={class:"text-sm text-gray-600"},zl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Hl={class:"fixed top-20 right-4 flex flex-col space-y-2"},Kl=["title"],ql={class:"relative"},Jl={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Yl={__name:"IssueTracker",setup(e){const{searchQuery:t,filters:s,debouncedSearchQuery:a,apiFilters:n,sortOrder:c,getAssigneeOptions:m}=Ml(),y=O(!1),p=O("team_tickets"),v=O(null),d=()=>{console.log("Refreshing current view:",{isUsingStatFilter:y.value,currentStatFilter:p.value,hasCustomFilters:E.value&&E.value.length>0});const b={limit_page_length:ue.value,limit_start:(ge.value-1)*ue.value,order_by:c.value};y.value?(E.value&&E.value.length>0&&(b.filters=JSON.stringify(E.value)),Promise.all([nt(p.value,b),E.value&&E.value.length>0?Ze(p.value,JSON.stringify(E.value)):Ze(p.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(P=>{console.error("Error refreshing stat filter view:",P)})):Promise.all([Ke(ke({filters:JSON.stringify(E.value)},b)),tt(JSON.stringify(E.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(P=>{console.error("Error refreshing regular filter view:",P)})},{pendingDocumentRefreshes:$,realtimeEventsSetup:w,manualRefresh:_}=Ol(()=>({filters:I.value,order_by:c.value,limit_page_length:ue.value,limit_start:(ge.value-1)*ue.value}),d,()=>y.value?{activeResource:fe,currentData:fe.data||[],resourceType:"stat"}:{activeResource:ve,currentData:ve.data||[],resourceType:"main"}),f=()=>{d()},h=O([]),R=b=>{h.value.push(ke({id:Date.now()+Math.random()},b)),setTimeout(()=>{var P;x((P=h.value[h.value.length-1])==null?void 0:P.id)},5e3)},x=b=>{h.value=h.value.filter(P=>P.id!==b)},k=M(()=>y.value?fe.data||[]:ve.data||[]),L=M(()=>y.value?Nt.data||0:jt.data||0),H=M(()=>y.value?fe.loading:ve.loading),U=M(()=>k.value),j=M(()=>(c.value||"creation desc").split(" ")[0]),N=M(()=>(c.value||"creation desc").split(" ")[1]||"desc"),A=({field:b,direction:P})=>{const G=`${b} ${P}`;s.value.sortBy=G,ge.value=1,d()},J=b=>{},E=O([]),ee=b=>{console.log("Filters applied:",b),E.value=b,ge.value=1,b&&b.length>0?y.value?(console.log("Applying custom filters on top of card filter:",p.value),D(p.value)):(console.log("Applying custom filters in regular mode"),X()):(console.log("No filters applied, returning to default view"),Y())},X=()=>{y.value=!1,p.value="team_tickets",Promise.all([Ke({filters:JSON.stringify(E.value),order_by:c.value,limit_page_length:ue.value,limit_start:0}),tt(JSON.stringify(E.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(b=>{console.error("Error applying custom filters:",b)})},Y=()=>{y.value=!0,p.value="team_tickets",D("team_tickets")},ce=b=>{console.log("Card clicked:",b,"Current filters:",E.value),y.value=!0,p.value=b,t.value="",ge.value=1,D(b)},D=b=>{const P={limit_page_length:ue.value,limit_start:0,order_by:c.value};E.value&&E.value.length>0?(P.filters=JSON.stringify(E.value),console.log("Applying card filter with custom filters:",b,E.value)):console.log("Applying card filter without custom filters:",b),Promise.all([nt(b,P),E.value&&E.value.length>0?Ze(b,JSON.stringify(E.value)):Ze(b)]).then(()=>{console.log("Card filter applied successfully")}).catch(G=>{console.error("Error applying card filter:",G)})},F=Ue(Ve(io())),K=Ue(Ve(uo())),ie=Ue(Ve(go()));let ae=null,Pe=0;const De=M(()=>{const b=k.value.length;return ae&&Pe===b||(ae=Ve(m(k.value)),Pe=b),ae}),ge=O(1),ue=O(10),ze=({page:b,itemsPerPage:P,offset:G})=>{console.log("Page change:",{page:b,newItemsPerPage:P,offset:G}),ge.value=b,ue.value=P;const le={limit_page_length:P,limit_start:G,order_by:c.value};y.value?(E.value&&E.value.length>0&&(le.filters=JSON.stringify(E.value)),nt(p.value,le).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(Le=>{console.error("Error during pagination (stat filter):",Le)})):Ke(ke({filters:JSON.stringify(E.value)},le)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(Le=>{console.error("Error during pagination (regular filter):",Le)})},I=M(()=>{const b={};return s.value.status&&(b.status=s.value.status),s.value.priority&&(b.priority=s.value.priority),s.value.assignee&&(b.raised_by=s.value.assignee),s.value.tags&&(b.issue_type=s.value.tags),b});return je(()=>{console.log("IssueTracker mounted, initializing with default view"),y.value=!0,p.value="team_tickets",D("team_tickets"),window.addEventListener("issueListUpdated",b=>pe(this,null,function*(){const{count:P,documents:G}=b.detail;R({type:"info",title:"List Updated",message:`${P} issue${P>1?"s":""} updated: ${G.slice(0,3).join(", ")}${G.length>3?"...":""}`,timestamp:new Date}),console.log("🔄 List updated event received - refreshing only stat cards");try{v.value&&v.value.refreshStats&&(console.log("📊 Refreshing stat cards..."),yield v.value.refreshStats(),console.log("📊 Stat cards refreshed successfully")),console.log("✅ Stat cards refreshed after websocket update"),console.log("ℹ️  Individual row updates are handled automatically by the composable")}catch(le){console.error("❌ Error refreshing stat cards after websocket update:",le),R({type:"error",title:"Refresh Error",message:"Failed to refresh stat cards. Please refresh manually.",timestamp:new Date})}}))}),ot(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(b,P)=>{const G=be("router-link");return l(),g("div",Fl,[o("div",Vl,[o("div",Al,[o("div",El,[o("div",jl,[P[8]||(P[8]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Ticket Tracker",-1)),o("nav",Ul,[z(G,{to:"/",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:q(()=>P[5]||(P[5]=[re(" Tickets ")])),_:1,__:[5]}),P[6]||(P[6]=o("a",{href:"/app/support",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Desk ",-1)),P[7]||(P[7]=o("a",{href:"/intro",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Wiki ",-1))])]),o("div",Bl,[o("span",Nl,T(C(wt).user),1),z(C(we),{onClick:P[0]||(P[0]=le=>C(wt).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:q(()=>P[9]||(P[9]=[re(" Logout ")])),_:1,__:[9]})])])])]),o("div",zl,[z(Ar,{ref_key:"issueStatsRef",ref:v,issues:U.value,activeFilter:p.value,onFilterChanged:ce},null,8,["issues","activeFilter"]),z(hr,{searchQuery:C(t),"onUpdate:searchQuery":P[1]||(P[1]=le=>xt(t)?t.value=le:null),filters:C(s),"onUpdate:filters":P[2]||(P[2]=le=>xt(s)?s.value=le:null),statusOptions:ie.value,priorityOptions:F.value,assigneeOptions:De.value,tagsOptions:K.value,issues:k.value,filteredCount:L.value,onSuggestionSelected:J,onFiltersApplied:ee},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),z(xl,{issues:U.value,loading:H.value,sortField:j.value,sortDirection:N.value,onSort:A},null,8,["issues","loading","sortField","sortDirection"]),z(Pr,{currentPage:ge.value,"onUpdate:currentPage":P[3]||(P[3]=le=>ge.value=le),itemsPerPage:ue.value,"onUpdate:itemsPerPage":P[4]||(P[4]=le=>ue.value=le),totalItems:L.value,onPageChange:ze},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Hl,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:C(w)?"Real-time updates active":"Real-time updates disabled"},[o("div",ql,[z(C(Oe),{name:C(w)?"wifi":"wifi-off",class:B(["h-5 w-5 transition-colors duration-200",C(w)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:B(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",C(w)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),C($).length>0?(l(),g("div",Jl,T(C($).length>9?"9+":C($).length),1)):V("",!0)])],8,Kl),o("button",{onClick:f,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[z(C(Oe),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),z(Dl,{notifications:h.value,onRemove:x},null,8,["notifications"])])}}};export{Yl as default};
//# sourceMappingURL=IssueTracker-ZSPjXhLb.js.map
