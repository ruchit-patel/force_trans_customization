var Te=Object.defineProperty,Le=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ye=(s,e,t)=>e in s?Te(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,te=(s,e)=>{for(var t in e||(e={}))Ae.call(e,t)&&ye(s,t,e[t]);if(ve)for(var t of ve(e))je.call(e,t)&&ye(s,t,e[t]);return s},he=(s,e)=>Le(s,Oe(e));import{g as Ue,r as U,i as b,o as i,a as m,n as T,j as A,F as z,f as W,t as $,b as u,k as O,l as q,u as a,m as L,p as X,q as Q,v as Be,x as G,y as Z,h as oe,z as me,A as K,B as ie,C as le,d as k,w as S,D as Ve,E as pe,T as Me,G as De,H as ze,I as J,J as Ee,K as He,L as se,M as Y,s as ce,N as ue,e as N,O as Fe,P as Ne,c as ae,Q as be,R as xe,S as We,U as we}from"./index-B7nx8MfH.js";const Qe=["src","alt"],Ke=Ue({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(s){const e=U(!1),t=s,o=b(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),c=b(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),n=b(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),v=b(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),y=b(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),g=b(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function I(l){l.type&&(e.value=!0)}return(l,p)=>(i(),m("div",{class:T(["relative inline-block shrink-0",[c.value,o.value]])},[l.image&&!e.value?(i(),m("img",{key:0,src:l.image,alt:l.label,class:T([o.value,"h-full w-full object-cover"]),onError:p[0]||(p[0]=x=>I(x))},null,42,Qe)):(i(),m("div",{key:1,class:T(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[n.value,o.value]])},[l.$slots.default?(i(),m("div",{key:0,class:T(g.value)},[A(l.$slots,"default")],2)):(i(),m(z,{key:1},[W($(l.label&&l.label[0]),1)],64))],2)),l.$slots.indicator?(i(),m("div",{key:2,class:T(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",v.value])},[u("div",{class:T(y.value)},[A(l.$slots,"indicator")],2)],2)):O("",!0)],2))}}),qe={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ge={class:"text-xl font-medium"},Xe={class:"mt-1 text-base text-ink-gray-5"},Ze={__name:"ListEmptyState",setup(s){const e=q("list");return(t,o)=>(i(),m("div",qe,[A(t.$slots,"default",{},()=>[u("div",Ge,$(a(e).options.emptyState.title),1),u("div",Xe,$(a(e).options.emptyState.description),1),a(e).options.emptyState.button?(i(),L(a(Q),X({key:0},a(e).options.emptyState.button,{class:"mt-4"}),null,16)):O("",!0)])]))}};function _e(s,e=!0){let t=e?"14px ":"",o=s.map(c=>{let n=c.width||1;return typeof n=="number"?n+"fr":n}).join(" ");return t+o}const ge={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Je={class:"truncate"},ke={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=s,o=e,c=U(null),n=U(null),v=b(()=>{if(typeof t.item.width=="string"){const l=parseInt(t.item.width);if(t.item.width.includes("rem"))return l*16;if(t.item.width.includes("px"))return l}return n.value.offsetWidth}),y=l=>{const p=l.clientX,x=v.value,R=C=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),c.value.style.backgroundColor="rgb(199 199 199)";let _=x+(C.clientX-p);t.item.width=`${_<50?50:_}px`,g(t.item.width)},d=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),c.value.style.backgroundColor="",window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",R),window.addEventListener("mouseup",d)},g=Be(l=>{t.item.width=l,o("columnWidthUpdated")},t.debounce),I=q("list");return(l,p)=>(i(),m("div",{ref_key:"columnRef",ref:n,class:T(["group relative flex items-center",s.item.align?a(ge)[s.item.align]:"justify-between"])},[u("div",{class:T(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",l.$attrs.class])},[A(l.$slots,"prefix",G(Z({item:s.item}))),A(l.$slots,"default",{},()=>[u("div",Je,$(s.item.label),1)]),A(l.$slots,"suffix",G(Z({item:s.item})))],2),a(I).options.resizeColumn?A(l.$slots,"resizer",G(X({key:0},{item:s.item})),()=>[u("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:y},[u("div",{ref_key:"resizer",ref:c,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):O("",!0)],2))}},Ce={__name:"ListHeader",emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=e,o=q("list");return(c,n)=>(i(),m("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ie({gridTemplateColumns:a(_e)(a(o).columns,a(o).options.selectable)})},[a(o).options.selectable?(i(),L(me,{key:0,class:"cursor-pointer duration-300",modelValue:a(o).allRowsSelected,onClick:oe(a(o).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):O("",!0),A(c.$slots,"default",{},()=>[(i(!0),m(z,null,K(a(o).columns,v=>(i(),L(ke,{key:v.key,item:v,onColumnWidthUpdated:y=>t("columnWidthUpdated",v)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Ye={class:"truncate text-base"},Pe={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(s){const e=s,t=b(()=>{var v,y;return(v=e.column)!=null&&v.getLabel?(y=e.column)==null?void 0:y.getLabel({row:e.row}):c(e.item).label||""}),o=b(()=>n.value.options.showTooltip?e.column.getTooltip?e.column.getTooltip(e.row):c(e.item).label:"");function c(v){return v&&typeof v=="object"?v:{label:v}}const n=q("list");return(v,y)=>(i(),m("div",{class:T(["flex items-center space-x-2",a(ge)[s.align]])},[A(v.$slots,"prefix",{},()=>[s.column.prefix?(i(),L(le(typeof s.column.prefix=="function"?s.column.prefix({row:s.row}):s.column.prefix),{key:0})):O("",!0)]),k(a(Ve),G(Z(a(n).options.showTooltip?{text:o.value}:{text:""})),{default:S(()=>[A(v.$slots,"default",G(Z({label:t.value})),()=>[u("div",Ye,$(t.value),1)])]),_:3},16),A(v.$slots,"suffix")],2))}},fe={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(s){const e=s,t=q("list"),o=b(()=>{var l;return(l=t.value.rows)!=null&&l.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===e.row[t.value.rowKey]:!1}),c=b(()=>t.value.selections.has(e.row[t.value.rowKey])),n=b(()=>t.value.options.enableActive&&t.value.activeRow.value===e.row.name),v=b(()=>t.value.options.getRowRoute||t.value.options.onRowClick),y=b(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),g=b(()=>{var x,R,d;if(!c.value)return"rounded";const l=[...t.value.selections];let p=(x=t.value.rows[0])!=null&&x.group?t.value.rows.map(C=>C.rows):[t.value.rows];for(let C of p){let _=C.findIndex(P=>P==e.row);if(_===-1)continue;let h=!l.includes((R=C[_+1])==null?void 0:R.name),w=!l.includes((d=C[_-1])==null?void 0:d.name);return(h?"rounded-b ":"")+(w?"rounded-t":"")}}),I=(l,p)=>{t.value.options.onRowClick&&t.value.options.onRowClick(l,p),t.value.activeRow.value===l.name?t.value.activeRow.value=null:t.value.activeRow.value=l.name};return(l,p)=>(i(),L(le(a(t).options.getRowRoute?"router-link":"div"),X({class:[[g.value,c.value||n.value?"bg-surface-gray-2":"",v.value?"cursor-pointer":"",v.value?c.value||n.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:a(t).options.getRowRoute?a(t).options.getRowRoute(s.row):void 0,onClick:x=>I(s.row,x)}),{default:S(()=>[(i(),L(le(a(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:S(()=>{var x,R;return[u("div",{class:"grid items-center space-x-4 px-2",style:ie({height:y.value,gridTemplateColumns:a(_e)(a(t).columns,a(t).options.selectable)})},[a(t).options.selectable?(i(),m("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:p[1]||(p[1]=oe(()=>{},["stop","prevent"])),onDblclick:p[2]||(p[2]=oe(()=>{},["stop"]))},[k(me,{modelValue:c.value,class:"cursor-pointer duration-300",onClick:p[0]||(p[0]=oe(d=>a(t).toggleRow(s.row[a(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):O("",!0),(i(!0),m(z,null,K(a(t).columns,(d,C)=>(i(),m("div",{key:d.key,class:T([a(ge)[d.align],C==0?"text-ink-gray-9":"text-ink-gray-7"])},[A(l.$slots,"default",X({ref_for:!0},{idx:C,column:d,item:s.row[d.key],isActive:n.value}),()=>[a(t).slots.cell?(i(),L(le(a(t).slots.cell),X({key:0,ref_for:!0},{column:d,row:s.row,item:s.row[d.key],align:d.align}),null,16)):(i(),L(Pe,{key:1,column:d,row:s.row,item:s.row[d.key],align:d.align},null,8,["column","row","item","align"]))])],2))),128))],4),o.value?O("",!0):(i(),m("div",{key:0,class:T(["h-px border-t",g.value==="rounded"||(R=(x=g.value)==null?void 0:x.includes)!=null&&R.call(x,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},et={class:"h-full overflow-y-auto"},$e={__name:"ListRows",setup(s){const e=q("list");return(t,o)=>(i(),m("div",et,[A(t.$slots,"default",{},()=>[(i(!0),m(z,null,K(a(e).rows,c=>(i(),L(fe,{key:c[a(e).rowKey],row:c},null,8,["row"]))),128))])]))}},tt={},st={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function ot(s,e){return i(),m("svg",st,e[0]||(e[0]=[u("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const lt=pe(tt,[["render",ot]]),rt={class:"flex items-center"},nt={class:"w-full py-1.5 pr-2"},at={key:1,class:"text-base font-medium leading-6"},it={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(s){const e=s,t=q("list");function o(){e.group.collapsed==null&&(e.group.collapsed=!1),e.group.collapsed=!e.group.collapsed}return(c,n)=>(i(),m(z,null,[u("div",rt,[u("button",{onClick:o,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[k(lt,{class:T(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[s.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),A(c.$slots,"default",{},()=>[u("div",nt,[a(t).slots["group-header"]?(i(),L(le(a(t).slots["group-header"]),G(X({key:0},{group:s.group})),null,16)):(i(),m("span",at,$(s.group.group),1))])])]),n[0]||(n[0]=u("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},ut={key:0,class:"mb-5 mt-2"},ct={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(s){const e=q("list");return(t,o)=>s.group.collapsed?O("",!0):(i(),m("div",ut,[A(t.$slots,"default",{},()=>[(i(!0),m(z,null,K(s.group.rows,c=>(i(),L(fe,{key:c[a(e).rowKey],row:c},null,8,["row"]))),128))])]))}},dt={class:"h-full overflow-y-auto"},mt={__name:"ListGroups",setup(s){const e=q("list");return(t,o)=>(i(),m("div",dt,[(i(!0),m(z,null,K(a(e).rows,c=>(i(),m("div",{key:c.group},[A(t.$slots,"default",{},()=>[k(it,{group:c},{default:S(()=>[t.$slots["group-header"]?A(t.$slots,"group-header",X({key:0,ref_for:!0},{group:c})):O("",!0)]),_:2},1032,["group"]),k(ct,{group:c},null,8,["group"])])]))),128))]))}},pt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},gt={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},ft={class:"flex items-center space-x-3"},vt={class:"mr-3"},yt={class:"flex items-center space-x-1"},Ie=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(s){const e=q("list");let t=b(()=>e.value.options.selectionText(e.value.selections.size));return(o,c)=>(i(),L(Me,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:S(()=>[a(e).selections.size?(i(),m("div",pt,[u("div",{class:T(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",o.$attrs.class])},[A(o.$slots,"default",G(Z({selections:a(e).selections,allRowsSelected:a(e).allRowsSelected,selectAll:()=>a(e).toggleAllRows(!0),unselectAll:()=>a(e).toggleAllRows(!1)})),()=>[u("div",gt,[u("div",ft,[k(me,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),u("div",null,$(a(t)),1)]),u("div",vt,[A(o.$slots,"actions",G(Z({selections:a(e).selections,allRowsSelected:a(e).allRowsSelected,selectAll:()=>a(e).toggleAllRows(!0),unselectAll:()=>a(e).toggleAllRows(!1)})))])]),u("div",yt,[k(a(Q),{class:T(["w- text-ink-gray-7",a(e).allRowsSelected?"cursor-not-allowed":""]),disabled:a(e).allRowsSelected,variant:"ghost",onClick:c[0]||(c[0]=n=>a(e).toggleAllRows(!0))},{default:S(()=>c[2]||(c[2]=[W(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),k(a(Q),{icon:"x",variant:"ghost",onClick:c[1]||(c[1]=n=>a(e).toggleAllRows(!1))})])])],2)])):O("",!0)]),_:3}))}}),ht={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},wt=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(s,{expose:e,emit:t}){const o=s,c=De();let n=ze(new Set),v=U(null);const y=t;J(n,d=>{n.size&&(v.value=null),y("update:selections",d)}),J(v,d=>{y("update:active-row",d)});let g=b(()=>{function d(_){return _===void 0?!0:_}function C(_){return _===void 0?!1:_}return{getRowRoute:o.options.getRowRoute||null,onRowClick:o.options.onRowClick||null,showTooltip:d(o.options.showTooltip),selectionText:o.options.selectionText||(_=>_===1?"1 row selected":`${_} rows selected`),enableActive:C(o.options.enableActive),selectable:d(o.options.selectable),resizeColumn:C(o.options.resizeColumn),rowHeight:o.options.rowHeight||40,emptyState:o.options.emptyState}});const I=b(()=>o.rows.length?p.value?n.size===o.rows.reduce((d,C)=>d+C.rows.length,0):n.size===o.rows.length:!1),l=b(()=>g.value.selectable);let p=b(()=>o.rows.every(d=>d.group&&d.rows&&Array.isArray(d.rows)));function x(d){n.delete(d)||n.add(d)}function R(d){if(!d||I.value){n.clear();return}if(p.value){o.rows.forEach(C=>{C.rows.forEach(_=>n.add(_[o.rowKey]))});return}o.rows.forEach(C=>n.add(C[o.rowKey]))}return Ee("list",b(()=>({rowKey:o.rowKey,rows:o.rows,columns:o.columns,options:g.value,selections:n,activeRow:v,allRowsSelected:I.value,slots:c,toggleRow:x,toggleAllRows:R}))),e({selections:n,allRowsSelected:I,toggleRow:x,toggleAllRows:R}),(d,C)=>(i(),m("div",ht,[u("div",{class:T(["flex w-max min-w-full flex-col overflow-y-hidden",d.$attrs.class]),style:ie(d.$attrs.style)},[A(d.$slots,"default",G(Z({showGroupedRows:a(p),selectable:l.value})),()=>[k(Ce),o.rows.length?(i(),m(z,{key:0},[a(p)?(i(),L(mt,{key:0})):(i(),L($e,{key:1}))],64)):(i(),L(Ze,{key:1})),l.value?(i(),L(Ie,{key:2})):O("",!0)])],6)]))}}),bt={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},xt={class:"flex flex-col sm:flex-row gap-4"},_t={class:"flex-1"},kt={class:"flex gap-2 flex-wrap"},Ct={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({status:"",priority:"",assignee:"",tags:"",sortBy:"creation"})},statusOptions:{type:Array,default:()=>[]},priorityOptions:{type:Array,default:()=>[]},assigneeOptions:{type:Array,default:()=>[]},tagsOptions:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters"],setup(s,{emit:e}){const t=s,o=e,c=U(t.searchQuery),n=U(te({},t.filters)),v=b(()=>[{label:"Created Date (Newest)",value:"creation desc"},{label:"Created Date (Oldest)",value:"creation asc"},{label:"Modified Date (Newest)",value:"modified desc"},{label:"Modified Date (Oldest)",value:"modified asc"},{label:"Subject (A-Z)",value:"subject asc"},{label:"Subject (Z-A)",value:"subject desc"},{label:"Priority",value:"priority asc"},{label:"Status",value:"status asc"}]);J(()=>t.searchQuery,I=>{c.value=I}),J(()=>t.filters,I=>{n.value=te({},I)},{deep:!0});const y=()=>{o("update:searchQuery",c.value)},g=()=>{o("update:filters",te({},n.value))};return(I,l)=>(i(),m("div",bt,[u("div",xt,[u("div",_t,[k(a(He),{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=p=>c.value=p),placeholder:"Search",class:"w-full",onInput:y},null,8,["modelValue"])]),u("div",kt,[k(a(se),{modelValue:n.value.status,"onUpdate:modelValue":l[1]||(l[1]=p=>n.value.status=p),options:s.statusOptions,placeholder:"All Status",onChange:g},null,8,["modelValue","options"]),k(a(se),{modelValue:n.value.priority,"onUpdate:modelValue":l[2]||(l[2]=p=>n.value.priority=p),options:s.priorityOptions,placeholder:"All Priority",onChange:g},null,8,["modelValue","options"]),k(a(se),{modelValue:n.value.assignee,"onUpdate:modelValue":l[3]||(l[3]=p=>n.value.assignee=p),options:s.assigneeOptions,placeholder:"All Assignees",onChange:g},null,8,["modelValue","options"]),k(a(se),{modelValue:n.value.tags,"onUpdate:modelValue":l[4]||(l[4]=p=>n.value.tags=p),options:s.tagsOptions,placeholder:"All Tags",onChange:g},null,8,["modelValue","options"]),k(a(se),{modelValue:n.value.sortBy,"onUpdate:modelValue":l[5]||(l[5]=p=>n.value.sortBy=p),options:v.value,placeholder:"Sort By",onChange:g},null,8,["modelValue","options"]),k(a(Q),{theme:"blue",variant:"solid",size:"sm"},{default:S(()=>l[6]||(l[6]=[W(" New Issue ")])),_:1,__:[6]})])])]))}},Pt={class:"bg-white rounded-lg shadow-sm border mt-4"},$t={class:"px-6 py-4 flex items-center justify-between"},It={class:"text-sm text-gray-700"},Rt={key:0},St={key:1},Tt={key:0,class:"flex items-center space-x-2"},Lt={class:"flex items-center space-x-1"},Ot={key:1,class:"px-2 text-gray-500"},At={key:2,class:"px-2 text-gray-500"},jt={key:1,class:"flex items-center space-x-2"},Ut={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(s,{emit:e}){const t=s,o=e,c=U(t.itemsPerPage);J(()=>t.itemsPerPage,w=>{c.value=w});const n=b(()=>Math.ceil(t.totalItems/t.itemsPerPage)),v=b(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),y=b(()=>{const w=t.currentPage*t.itemsPerPage;return Math.min(w,t.totalItems)}),g=b(()=>{const w=[],P=t.maxVisiblePages,j=t.currentPage,E=n.value;if(E<=P)for(let B=1;B<=E;B++)w.push(B);else{let B=Math.max(1,j-Math.floor(P/2)),H=Math.min(E,B+P-1);H-B+1<P&&(B=Math.max(1,H-P+1)),B>1&&(B=Math.max(2,B)),H<E&&(H=Math.min(E-1,H));for(let F=B;F<=H;F++)w.push(F)}return w}),I=b(()=>n.value>t.maxVisiblePages&&!g.value.includes(1)),l=b(()=>n.value>t.maxVisiblePages&&!g.value.includes(n.value)),p=b(()=>I.value&&g.value.length>0&&g.value[0]>2),x=b(()=>l.value&&g.value.length>0&&g.value[g.value.length-1]<n.value-1),R=b(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),d=w=>{w>=1&&w<=n.value&&w!==t.currentPage&&(o("update:currentPage",w),o("pageChange",{page:w,itemsPerPage:t.itemsPerPage,offset:(w-1)*t.itemsPerPage}))},C=()=>{t.currentPage>1&&d(t.currentPage-1)},_=()=>{t.currentPage<n.value&&d(t.currentPage+1)},h=()=>{const w=c.value;o("update:itemsPerPage",w);const P=(t.currentPage-1)*t.itemsPerPage+1,j=Math.ceil(P/w);o("pageChange",{page:j,itemsPerPage:w,offset:(j-1)*w})};return(w,P)=>(i(),m("div",Pt,[u("div",$t,[u("div",It,[s.totalItems>0?(i(),m("span",Rt," Showing "+$(v.value)+" to "+$(y.value)+" of "+$(s.totalItems)+" results ",1)):(i(),m("span",St," No results found "))]),n.value>1?(i(),m("div",Tt,[k(a(Q),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===1,onClick:C},{prefix:S(()=>[k(a(Y),{name:"chevron-left",class:"h-4 w-4"})]),default:S(()=>[P[3]||(P[3]=W(" Previous "))]),_:1,__:[3]},8,["disabled"]),u("div",Lt,[I.value?(i(),L(a(Q),{key:0,theme:"gray",variant:"outline",size:"sm",class:T({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===1}),onClick:P[0]||(P[0]=j=>d(1))},{default:S(()=>P[4]||(P[4]=[W(" 1 ")])),_:1,__:[4]},8,["class"])):O("",!0),p.value?(i(),m("span",Ot,"...")):O("",!0),(i(!0),m(z,null,K(g.value,j=>(i(),L(a(Q),{key:j,theme:"gray",variant:"outline",size:"sm",class:T({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===j}),onClick:E=>d(j)},{default:S(()=>[W($(j),1)]),_:2},1032,["class","onClick"]))),128)),x.value?(i(),m("span",At,"...")):O("",!0),l.value?(i(),L(a(Q),{key:3,theme:"gray",variant:"outline",size:"sm",class:T({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===n.value}),onClick:P[1]||(P[1]=j=>d(n.value))},{default:S(()=>[W($(n.value),1)]),_:1},8,["class"])):O("",!0)]),k(a(Q),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===n.value,onClick:_},{suffix:S(()=>[k(a(Y),{name:"chevron-right",class:"h-4 w-4"})]),default:S(()=>[P[5]||(P[5]=W(" Next "))]),_:1,__:[5]},8,["disabled"])])):O("",!0),s.showItemsPerPage?(i(),m("div",jt,[P[6]||(P[6]=u("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),k(a(se),{modelValue:c.value,"onUpdate:modelValue":P[2]||(P[2]=j=>c.value=j),options:R.value,onChange:h,class:"w-20"},null,8,["modelValue","options"])])):O("",!0)])]))}},Bt={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Vt={class:"bg-white p-6 rounded-lg shadow-sm border"},Mt={class:"text-3xl font-bold text-gray-900"},Dt={class:"bg-white p-6 rounded-lg shadow-sm border"},zt={class:"text-3xl font-bold text-blue-600"},Et={class:"bg-white p-6 rounded-lg shadow-sm border"},Ht={class:"text-3xl font-bold text-green-600"},Ft={class:"bg-white p-6 rounded-lg shadow-sm border"},Nt={class:"text-3xl font-bold text-orange-600"},Wt={class:"bg-white p-6 rounded-lg shadow-sm border"},Qt={class:"text-3xl font-bold text-purple-600"},Kt={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]}},setup(s){const e=s,t=b(()=>e.issues.length),o=b(()=>e.issues.filter(y=>y.status==="Open").length),c=b(()=>e.issues.filter(y=>y.raised_by===ce.user).length),n=b(()=>e.issues.filter(y=>["Open","Replied"].includes(y.status)).length),v=b(()=>e.issues.filter(y=>y.status==="Replied").length);return(y,g)=>(i(),m("div",Bt,[u("div",Vt,[u("div",Mt,$(t.value),1),g[0]||(g[0]=u("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))]),u("div",Dt,[u("div",zt,$(o.value),1),g[1]||(g[1]=u("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))]),u("div",Et,[u("div",Ht,$(c.value),1),g[2]||(g[2]=u("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))]),u("div",Ft,[u("div",Nt,$(n.value),1),g[3]||(g[3]=u("div",{class:"text-sm text-gray-600 mt-1"},"Actionable",-1))]),u("div",Wt,[u("div",Qt,$(v.value),1),g[4]||(g[4]=u("div",{class:"text-sm text-gray-600 mt-1"},"Response",-1))])]))}},qt={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const s=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[s]||"gray"}},components:{Badge:ue}},Gt={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const s=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[s]||"yellow"},priorityIndicatorClass(){const s=this.priority||"Medium";return{"bg-red-500":s==="Critical","bg-red-400":s==="High","bg-yellow-400":s==="Medium","bg-green-400":s==="Low"}}},components:{Badge:ue}},Xt={props:["issueType"],template:`
    <div v-if="issueType" class="flex items-center">
      <Badge :label="issueType" :theme="issueTypeTheme" variant="subtle" />
    </div>
    <span v-else class="text-gray-400 text-sm">-</span>
  `,computed:{issueTypeTheme(){const s=this.issueType;if(!s)return"gray";const e={Bug:"red",Feature:"blue",Enhancement:"green",Task:"purple",Support:"orange",Question:"yellow",Documentation:"gray"};for(const[t,o]of Object.entries(e))if(s.toLowerCase().includes(t.toLowerCase()))return o;return"gray"}},components:{Badge:ue}},Zt={components:{ListView:wt,Avatar:Ke,Badge:ue,Button:Q,FeatherIcon:Y,ListHeader:Ce,ListHeaderItem:ke,ListRow:fe,ListRowItem:Pe,ListRows:$e,ListSelectBanner:Ie,StatusBadge:qt,PriorityBadge:Gt,IssueTypeBadge:Xt},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(s,{emit:e}){const t=U(!1),o=U(null),c=U({x:0,y:0}),n=r=>{if(!r||typeof r!="string")return"?";if(r.includes("@")){const f=r.split("@")[0];return f.includes(".")||f.includes("_")?f.split(/[._]/).map(Se=>Se[0]).join("").toUpperCase().slice(0,2):f.slice(0,2).toUpperCase()}return r.includes(" ")?r.split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2):r.slice(0,2).toUpperCase()},v=r=>{if(!r)return"";const f=r.match(/ISS-(\d{4}-\d+)/);return f?f[1]:r},y=r=>{if(!r)return"";const f=document.createElement("div");return f.innerHTML=r,f.textContent||f.innerText||""},g=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",I=r=>r?new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",l=r=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[r]||"gray",p=r=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[r]||"yellow",x=b(()=>s.issues.map(r=>he(te({},r),{status:{label:r.status||"New",color:l(r.status)},priority:{label:r.priority||"Medium",color:p(r.priority)}}))),R=b(()=>[{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Priority",key:"priority",width:"130px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Project",key:"project",width:"120px",sortable:!0},{label:"Tags",key:"issue_type",width:"100px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),d=b(()=>({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:r=>{console.log("Row clicked:",r)}}));return{columns:R,listOptions:d,transformedIssues:x,handleSelections:r=>{console.log("Selected rows:",r)},handleIssueClick:r=>{console.log("Issue clicked:",r)},getStatusColor:r=>{const f=r||"New";return{"bg-blue-500":f==="New","bg-orange-500":f==="In Review","bg-yellow-500":f==="Waiting on Customer","bg-purple-500":f==="Confirmed","bg-blue-500":f==="In Transit","bg-gray-500":f==="In Transit Unmanaged","bg-green-500":f==="Delivered","bg-green-500":f==="Closed","bg-red-500":f==="Open","bg-orange-500":f==="Replied","bg-yellow-500":f==="On Hold","bg-green-500":f==="Resolved"}},getPriorityColor:r=>{const f=r||"Medium";return{"bg-red-500":f==="Critical"||f==="High","bg-yellow-500":f==="Medium","bg-green-500":f==="Low"}},getStatusBadgeClass:r=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[r||"New"]||"bg-gray-100 text-gray-800",getPriorityBadgeClass:r=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[r||"Medium"]||"bg-yellow-100 text-yellow-800",getPriorityIndicatorClass:r=>{const f=r||"Medium";return{"bg-red-500":f==="Critical","bg-red-400":f==="High","bg-yellow-400":f==="Medium","bg-green-400":f==="Low"}},getInitials:n,formatIssueId:v,stripHtml:y,formatDate:g,formatTime:I,showPopup:t,popupUser:o,popupPosition:c,showUserPopup:(r,f)=>{const V=r.target.getBoundingClientRect();c.value={x:V.left+V.width/2,y:V.top-10},o.value=f,t.value=!0},hideUserPopup:()=>{t.value=!1,o.value=null},handleColumnSort:r=>{let f="asc";s.sortField===r&&(f=s.sortDirection==="asc"?"desc":"asc"),e("sort",{field:r,direction:f})},getSortIcon:r=>s.sortField!==r?"arrow-up-down":s.sortDirection==="asc"?"arrow-up":"arrow-down",getSortIconClass:r=>s.sortField!==r?"text-gray-400":"text-blue-600",getSortButtonClass:r=>s.sortField===r?"bg-blue-50":""}}},Jt={class:"bg-white rounded-lg shadow-sm border"},Yt={key:0,class:"px-6 py-12 text-center text-gray-500"},es=["onClick"],ts=["onClick"],ss={key:1,class:"max-w-xs"},os=["title"],ls=["title"],rs=["title"],ns={key:3,class:"flex flex-wrap gap-1"},as=["onMouseenter"],is={key:1,class:"text-gray-400 text-sm"},us={key:4},cs={key:6,class:"flex flex-col"},ds={class:"text-xs text-gray-400"},ms={key:8,class:"flex items-center gap-2"},ps={key:9},gs={class:"flex gap-2"},fs={class:"text-sm"},vs={class:"font-semibold text-gray-900 mb-1"},ys={class:"text-gray-600 flex items-center gap-1"},hs={class:"text-xs text-gray-500 mt-1"};function ws(s,e,t,o,c,n){const v=N("FeatherIcon"),y=N("ListHeaderItem"),g=N("ListHeader"),I=N("Avatar"),l=N("IssueTypeBadge"),p=N("ListRowItem"),x=N("ListRow"),R=N("ListRows"),d=N("Button"),C=N("ListSelectBanner"),_=N("ListView");return i(),m("div",Jt,[e[3]||(e[3]=u("div",{class:"px-6 py-4 border-b border-gray-200"},[u("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(i(),m("div",Yt,e[1]||(e[1]=[u("div",{class:"flex items-center justify-center"},[u("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),u("span",{class:"ml-2"},"Loading issues...")],-1)]))):(i(),L(_,{key:1,columns:o.columns,rows:o.transformedIssues,"row-key":"name",options:o.listOptions,"onUpdate:selections":o.handleSelections},{default:S(()=>[k(g,null,{default:S(()=>[(i(!0),m(z,null,K(o.columns,h=>(i(),L(y,{key:h.key,item:h},Fe({_:2},[h.icon?{name:"prefix",fn:S(({item:w})=>[k(v,{name:w.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,h.sortable?{name:"suffix",fn:S(()=>[u("button",{onClick:w=>o.handleColumnSort(h.key),class:T(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",o.getSortButtonClass(h.key)])},[k(v,{name:o.getSortIcon(h.key),class:T(["h-3 w-3",o.getSortIconClass(h.key)])},null,8,["name","class"])],10,es)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),k(R,null,{default:S(()=>[(i(!0),m(z,null,K(o.transformedIssues,h=>(i(),L(x,{key:h.name,row:h},{default:S(({column:w,item:P})=>[k(p,{item:P,align:w.align},{prefix:S(()=>[w.key==="raised_by"?(i(),L(I,{key:0,size:"sm",label:o.getInitials(h.raised_by),class:"mr-3"},null,8,["label"])):O("",!0)]),default:S(()=>{var j,E,B,H,F;return[w.key==="name"?(i(),m("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:oe(M=>o.handleIssueClick(h),["prevent"])},$(o.formatIssueId(P)),9,ts)):w.key==="subject"?(i(),m("div",ss,[u("div",{class:"font-medium truncate",title:h.subject},$(h.subject),9,os),h.description?(i(),m("div",{key:0,class:"text-gray-500 text-xs mt-1 truncate",title:h.description},$(o.stripHtml(h.description)),9,ls)):O("",!0)])):w.key==="raised_by"?(i(),m("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:P||"-"},$(P||"-"),9,rs)):w.key==="custom_users_assigned"?(i(),m("div",ns,[h.custom_users_assigned&&h.custom_users_assigned.length>0?(i(!0),m(z,{key:0},K(h.custom_users_assigned.filter(M=>M.user_assigned),M=>(i(),m("div",{key:M.name||M,class:"relative inline-block"},[u("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:ee=>o.showUserPopup(ee,M),onMouseleave:e[0]||(e[0]=(...ee)=>o.hideUserPopup&&o.hideUserPopup(...ee))},$(o.getInitials(M.user_assigned)),41,as)]))),128)):(i(),m("span",is,"-"))])):w.key==="project"?(i(),m("span",us,$(P||"-"),1)):w.key==="issue_type"?(i(),L(l,{key:5,issueType:P},null,8,["issueType"])):w.key==="creation"?(i(),m("div",cs,[u("span",null,$(o.formatDate(P)),1),u("span",ds,$(o.formatTime(P)),1)])):w.key==="status"?(i(),m("span",{key:7,class:T([o.getStatusBadgeClass(((j=h.status)==null?void 0:j.label)||h.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},$(((E=h.status)==null?void 0:E.label)||h.status||"New"),3)):w.key==="priority"?(i(),m("div",ms,[u("div",{class:T([o.getPriorityIndicatorClass(((B=h.priority)==null?void 0:B.label)||h.priority||"Medium"),"w-2 h-2 rounded-full"])},null,2),u("span",{class:T([o.getPriorityBadgeClass(((H=h.priority)==null?void 0:H.label)||h.priority||"Medium"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},$(((F=h.priority)==null?void 0:F.label)||h.priority||"Medium"),3)])):(i(),m("span",ps,$(P),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),k(C,null,{actions:S(({unselectAll:h})=>[u("div",gs,[k(d,{variant:"ghost",label:"Delete"}),k(d,{variant:"ghost",label:"Unselect all",onClick:h},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),o.showPopup&&o.popupUser?(i(),m("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ie({left:o.popupPosition.x+"px",top:o.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[u("div",fs,[u("div",vs,$(o.popupUser.user_assigned||"Unknown User"),1),u("div",ys,[e[2]||(e[2]=u("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),W(" "+$(o.popupUser.team||"No Team"),1)]),u("div",hs," Assigned: "+$(o.formatDate(o.popupUser.assigned_date)),1)])],4)):O("",!0)])}const bs=pe(Zt,[["render",ws]]),xs={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},_s={class:"flex items-start justify-between"},ks={class:"flex items-start space-x-3"},Cs={class:"flex-shrink-0"},Ps={class:"flex-1 min-w-0"},$s={class:"text-sm font-medium text-gray-900"},Is={class:"text-sm text-gray-600 mt-1"},Rs={class:"text-xs text-gray-500 mt-1"},Ss=["onClick"],Ts={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(s){const e=n=>{const v="bg-white/95 border-l-4",y={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${v} ${y[n]||y.info}`},t=n=>{const v={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return v[n]||v.info},o=n=>{const v={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return v[n]||v.info},c=n=>{const y=new Date-n,g=Math.floor(y/6e4);if(g<1)return"Just now";if(g<60)return`${g}m ago`;const I=Math.floor(g/60);return I<24?`${I}h ago`:n.toLocaleDateString()};return(n,v)=>(i(),m("div",xs,[k(Ne,{name:"notification",tag:"div"},{default:S(()=>[(i(!0),m(z,null,K(s.notifications,y=>(i(),m("div",{key:y.id,class:T([e(y.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[u("div",_s,[u("div",ks,[u("div",Cs,[k(a(Y),{name:t(y.type),class:T([o(y.type),"h-5 w-5"])},null,8,["name","class"])]),u("div",Ps,[u("p",$s,$(y.title),1),u("p",Is,$(y.message),1),u("p",Rs,$(c(y.timestamp)),1)])]),u("button",{onClick:g=>n.$emit("remove",y.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[k(a(Y),{name:"x",class:"h-4 w-4"})],8,Ss)])],2))),128))]),_:1})]))}},Ls=pe(Ts,[["__scopeId","data-v-d57fd7d2"]]);function Os(s,e){let t;return function(...c){const n=()=>{clearTimeout(t),s(...c)};clearTimeout(t),t=setTimeout(n,e)}}function As(){const s=U(""),e=U({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=U(""),o=Os(l=>{t.value=l},300);J(s,l=>{o(l)});const c=b(()=>{const l={};return t.value.trim()&&(l.subject=["like",`%${t.value.trim()}%`]),e.value.status&&(l.status=e.value.status),e.value.priority&&(l.priority=e.value.priority),e.value.assignee&&(l.raised_by=e.value.assignee),e.value.tags&&(l.issue_type=e.value.tags),l}),n=b(()=>e.value.sortBy||"creation desc"),v=l=>{if(!l||!Array.isArray(l))return[];let p=[...l];if(s.value.trim()){const x=s.value.toLowerCase().trim();p=p.filter(R=>{const d=(R.subject||"").toLowerCase(),C=(R.description||"").toLowerCase();return d.includes(x)||C.includes(x)})}return e.value.status&&(p=p.filter(x=>x.status===e.value.status)),e.value.priority&&(p=p.filter(x=>x.priority===e.value.priority)),e.value.assignee&&(p=p.filter(x=>x.raised_by===e.value.assignee)),e.value.tags&&(p=p.filter(x=>x.issue_type===e.value.tags)),p.sort((x,R)=>{const[d,C]=e.value.sortBy.split(" "),_=x[d]||"",h=R[d]||"";let w=0;if(d==="creation"||d==="modified")w=new Date(_)-new Date(h);else if(d==="priority"){const P={Critical:4,High:3,Medium:2,Low:1};w=(P[_]||0)-(P[h]||0)}else w=_.toString().localeCompare(h.toString());return C==="desc"?-w:w}),p},y=l=>{if(!l||!Array.isArray(l))return[{label:"All Assignees",value:""}];const p=[...new Set(l.map(x=>x.raised_by).filter(x=>x&&x.trim()))];return[{label:"All Assignees",value:""},...p.map(x=>({label:x,value:x}))]},g=()=>{s.value="",t.value="",e.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},I=b(()=>s.value.trim()!==""||e.value.status!==""||e.value.priority!==""||e.value.assignee!==""||e.value.tags!==""||e.value.sortBy!=="creation desc");return{searchQuery:s,filters:e,debouncedSearchQuery:t,apiFilters:c,sortOrder:n,hasActiveFilters:I,filterIssues:v,getAssigneeOptions:y,resetFilters:g}}const de=ae({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(s){const e=s||{},t=e.limit_page_length||10,o=e.limit_start||0,c=e.filters||{},n=e.order_by||"creation desc";return{limit_page_length:t,limit_start:o,filters:c,order_by:n}},onError(s){console.error("Failed to fetch issues:",s),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Re=ae({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(s){return{filters:(s||{}).filters||{}}},onError(s){console.error("Failed to fetch issues count:",s)}});function re(s={}){const e={limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,filters:s.filters||{},order_by:s.order_by||"creation desc"};return de.reload(e)}function ne(s={}){return Re.reload({filters:s})}const js=ae({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(s){console.error("Failed to fetch issue priorities:",s)},auto:!0}),Us=ae({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(s){console.error("Failed to fetch issue types:",s)},auto:!0});ae({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(s){console.error("Failed to fetch projects:",s)},auto:!0});function Bs(){const s=js.data||[];return[{label:"All Priority",value:""},...s.map(e=>({label:e.name,value:e.name}))]}function Vs(){const s=Us.data||[];return[{label:"All Types",value:""},...s.map(e=>({label:e.name,value:e.name}))]}function Ms(){return[{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]}function Ds(){const s=We(),e=U([]),t=U(!1),o=U(!1);let c=null;const n=o.value?15e3:2e3,v=()=>{c&&clearTimeout(c),c=setTimeout(()=>{I()},n)},y=()=>{if(!s||t.value)return;s.emit("doctype_subscribe","Issue"),s.off("list_update"),s.on("list_update",_=>{(_==null?void 0:_.doctype)==="Issue"&&(l()||(e.value.push(_),v()))}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(_=>{s.on(_,h=>{if((h==null?void 0:h.doctype)!=="Issue"||l())return;const w={doctype:"Issue",name:h.name,action:_.includes("create")?"insert":_.includes("delete")?"delete":"update",modified_by:h.modified_by||h.owner,timestamp:new Date().toISOString()};e.value.push(w),v()})}),t.value=!0},g=()=>{if(!s||!t.value)return;s.emit("doctype_unsubscribe","Issue"),s.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(_=>{s.off(_)}),t.value=!1},I=()=>{if(!e.value.length)return;const C=window.location.hash||window.location.pathname;if(!C.includes("issue-tracker")&&!C.includes("issues")){e.value=[],g();return}const _=[...new Set(e.value.map(w=>w.name))],h=_.length;e.value=[];try{re(),ne(),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:h,documents:_}}))}catch(w){console.error("Error refreshing issue list:",w)}},l=()=>!!document.hidden,p=()=>{e.value=[];try{re(),ne()}catch(C){console.error("Error during manual refresh:",C)}},x=()=>{y()},R=()=>{t.value=!1},d=C=>{console.error("Socket connection error:",C),t.value=!1};return be(()=>{s&&(s.on("connect",x),s.on("disconnect",R),s.on("connect_error",d),s.connected&&y())}),xe(()=>{s&&(s.off("connect",x),s.off("disconnect",R),s.off("connect_error",d)),g(),c&&clearTimeout(c)}),{pendingDocumentRefreshes:e,realtimeEventsSetup:t,setupRealtimeUpdates:y,disableRealtimeUpdates:g,manualRefresh:p,processDocumentRefreshes:I}}const zs={class:"min-h-screen bg-gray-50"},Es={class:"bg-white shadow-sm border-b"},Hs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Fs={class:"flex justify-between items-center py-4"},Ns={class:"flex items-center space-x-4"},Ws={class:"flex space-x-4"},Qs={class:"flex items-center space-x-4"},Ks={class:"text-sm text-gray-600"},qs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Gs={class:"fixed top-20 right-4 flex flex-col space-y-2"},Xs=["title"],Zs={class:"relative"},Js={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},to={__name:"IssueTracker",setup(s){const{searchQuery:e,filters:t,debouncedSearchQuery:o,apiFilters:c,sortOrder:n,getAssigneeOptions:v}=As(),{pendingDocumentRefreshes:y,realtimeEventsSetup:g,manualRefresh:I}=Ds(),l=U([]),p=D=>{l.value.push(te({id:Date.now()+Math.random()},D)),setTimeout(()=>{var r;x((r=l.value[l.value.length-1])==null?void 0:r.id)},5e3)},x=D=>{l.value=l.value.filter(r=>r.id!==D)},R=b(()=>de.data||[]),d=b(()=>Re.data||0),C=b(()=>de.loading),_=b(()=>R.value),h=b(()=>(n.value||"creation desc").split(" ")[0]),w=b(()=>(n.value||"creation desc").split(" ")[1]||"desc"),P=({field:D,direction:r})=>{const f=`${D} ${r}`;t.value.sortBy=f},j=b(()=>Bs()),E=b(()=>Vs()),B=b(()=>Ms()),H=b(()=>v(R.value)),F=U(1),M=U(10),ee=({page:D,itemsPerPage:r,offset:f})=>{F.value=D,M.value=r,re({filters:c.value,order_by:n.value,limit_page_length:r,limit_start:f}),ne(c.value)};return J([o,c,n],()=>{F.value=1,re({filters:c.value,order_by:n.value,limit_page_length:M.value,limit_start:0}),ne(c.value)},{deep:!0}),be(()=>{re({filters:c.value,order_by:n.value,limit_page_length:M.value,limit_start:0}),ne(c.value),window.addEventListener("issueListUpdated",D=>{const{count:r,documents:f}=D.detail;p({type:"info",title:"List Updated",message:`${r} issue${r>1?"s":""} updated: ${f.slice(0,3).join(", ")}${f.length>3?"...":""}`,timestamp:new Date})})}),xe(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(D,r)=>{const f=N("router-link");return i(),m("div",zs,[u("div",Es,[u("div",Hs,[u("div",Fs,[u("div",Ns,[r[8]||(r[8]=u("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),u("nav",Ws,[k(f,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:S(()=>r[6]||(r[6]=[W(" Home ")])),_:1,__:[6]}),k(f,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:S(()=>r[7]||(r[7]=[W(" Issues ")])),_:1,__:[7]})])]),u("div",Qs,[u("span",Ks,$(a(ce).user),1),k(a(Q),{onClick:r[0]||(r[0]=V=>a(ce).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:S(()=>r[9]||(r[9]=[W(" Logout ")])),_:1,__:[9]})])])])]),u("div",qs,[k(Kt,{issues:_.value},null,8,["issues"]),k(Ct,{searchQuery:a(e),"onUpdate:searchQuery":r[1]||(r[1]=V=>we(e)?e.value=V:null),filters:a(t),"onUpdate:filters":r[2]||(r[2]=V=>we(t)?t.value=V:null),statusOptions:B.value,priorityOptions:j.value,assigneeOptions:H.value,tagsOptions:E.value},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions"]),k(bs,{issues:_.value,loading:C.value,sortField:h.value,sortDirection:w.value,onSort:P},null,8,["issues","loading","sortField","sortDirection"]),k(Ut,{currentPage:F.value,"onUpdate:currentPage":r[3]||(r[3]=V=>F.value=V),itemsPerPage:M.value,"onUpdate:itemsPerPage":r[4]||(r[4]=V=>M.value=V),totalItems:d.value,onPageChange:ee},null,8,["currentPage","itemsPerPage","totalItems"]),u("div",Gs,[u("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:a(g)?"Real-time updates active":"Real-time updates disabled"},[u("div",Zs,[k(a(Y),{name:a(g)?"wifi":"wifi-off",class:T(["h-5 w-5 transition-colors duration-200",a(g)?"text-green-600":"text-red-500"])},null,8,["name","class"]),u("div",{class:T(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",a(g)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),a(y)>0?(i(),m("div",Js,$(a(y)>9?"9+":a(y)),1)):O("",!0)])],8,Xs),u("button",{onClick:r[5]||(r[5]=(...V)=>a(I)&&a(I)(...V)),class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[k(a(Y),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),k(Ls,{notifications:l.value,onRemove:x},null,8,["notifications"])])}}};export{to as default};
//# sourceMappingURL=IssueTracker-CEg0ccCK.js.map
