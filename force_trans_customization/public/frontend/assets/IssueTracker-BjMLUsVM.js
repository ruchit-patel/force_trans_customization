var Et=Object.defineProperty,Bt=Object.defineProperties;var Ut=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var it=(t,e,s)=>e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,be=(t,e)=>{for(var s in e||(e={}))ut.call(e,s)&&it(t,s,e[s]);if(Ue)for(var s of Ue(e))ct.call(e,s)&&it(t,s,e[s]);return t},Ye=(t,e)=>Bt(t,Ut(e));var ze=(t,e)=>{var s={};for(var l in t)ut.call(t,l)&&e.indexOf(l)<0&&(s[l]=t[l]);if(t!=null&&Ue)for(var l of Ue(t))e.indexOf(l)<0&&ct.call(t,l)&&(s[l]=t[l]);return s};var ce=(t,e,s)=>new Promise((l,i)=>{var d=m=>{try{b(s.next(m))}catch(v){i(v)}},g=m=>{try{b(s.throw(m))}catch(v){i(v)}},b=m=>m.done?l(m.value):Promise.resolve(m.value).then(d,g);b((s=s.apply(t,e)).next())});import{r as F,i as Oe,j as kt,k as oe,g as je,y as zt,l as R,m as Nt,n as Ht,p as Ct,q as qt,v as Jt,x as Ke,H as Qe,z as tt,A as Kt,B as Wt,N as dt,C as Ge,D as Qt,E as he,F as Gt,G as me,I as le,J as Ve,K as Xt,L as pt,M as St,O as Yt,o as n,a as c,P as N,Q as te,R as W,f as Y,t as S,b as o,S as D,T as Zt,U as K,w as H,d as U,u as w,V as ye,W as _e,X as fe,Y as X,Z as Re,$ as $e,a0 as es,a1 as ts,a2 as De,h as Me,a3 as st,a4 as Ie,a5 as It,a6 as Be,a7 as ss,a8 as os,a9 as rs,aa as xe,c as we,ab as ge,ac as ve,ad as gt,ae as as,af as mt,ag as ls,ah as Ae,ai as ot,_ as ns,e as de,aj as is,ak as us,al as Pe,am as cs,an as vt,s as ft}from"./index-By7UxGXc.js";function ht(t,e){if(t)return t;let s=e!=null?e:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function ds(t,e){let s=F(ht(t.value.type,t.value.as));return Oe(()=>{s.value=ht(t.value.type,t.value.as)}),kt(()=>{var l;s.value||oe(e)&&oe(e)instanceof HTMLButtonElement&&!((l=oe(e))!=null&&l.hasAttribute("type"))&&(s.value="button")}),s}let bt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function yt(t){var e,s;let l=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return l;let d=!1;for(let b of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))b.remove(),d=!0;let g=d?(s=i.innerText)!=null?s:"":l;return bt.test(g)&&(g=g.replace(bt,"")),g}function ps(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let s=t.getAttribute("aria-labelledby");if(s){let l=s.split(" ").map(i=>{let d=document.getElementById(i);if(d){let g=d.getAttribute("aria-label");return typeof g=="string"?g.trim():yt(d).trim()}return null}).filter(Boolean);if(l.length>0)return l.join(", ")}return yt(t).trim()}function gs(t){let e=F(""),s=F("");return()=>{let l=oe(t);if(!l)return"";let i=l.innerText;if(e.value===i)return s.value;let d=ps(l).trim().toLowerCase();return e.value=i,s.value=d,d}}var ms=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ms||{}),vs=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(vs||{});function fs(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let $t=Symbol("MenuContext");function Xe(t){let e=he($t,null);if(e===null){let s=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Xe),s}return e}let hs=je({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:s}){let l=F(1),i=F(null),d=F(null),g=F([]),b=F(""),m=F(null),v=F(1);function u(y=x=>x){let x=m.value!==null?g.value[m.value]:null,f=Yt(y(g.value.slice()),$=>oe($.dataRef.domRef)),h=x?f.indexOf(x):null;return h===-1&&(h=null),{items:f,activeItemIndex:h}}let _={menuState:l,buttonRef:i,itemsRef:d,items:g,searchQuery:b,activeItemIndex:m,activationTrigger:v,closeMenu:()=>{l.value=1,m.value=null},openMenu:()=>l.value=0,goToItem(y,x,f){let h=u(),$=Gt(y===me.Specific?{focus:me.Specific,id:x}:{focus:y},{resolveItems:()=>h.items,resolveActiveIndex:()=>h.activeItemIndex,resolveId:T=>T.id,resolveDisabled:T=>T.dataRef.disabled});b.value="",m.value=$,v.value=f!=null?f:1,g.value=h.items},search(y){let x=b.value!==""?0:1;b.value+=y.toLowerCase();let f=(m.value!==null?g.value.slice(m.value+x).concat(g.value.slice(0,m.value+x)):g.value).find($=>$.dataRef.textValue.startsWith(b.value)&&!$.dataRef.disabled),h=f?g.value.indexOf(f):-1;h===-1||h===m.value||(m.value=h,v.value=1)},clearSearch(){b.value=""},registerItem(y,x){let f=u(h=>[...h,{id:y,dataRef:x}]);g.value=f.items,m.value=f.activeItemIndex,v.value=1},unregisterItem(y){let x=u(f=>{let h=f.findIndex($=>$.id===y);return h!==-1&&f.splice(h,1),f});g.value=x.items,m.value=x.activeItemIndex,v.value=1}};return zt([i,d],(y,x)=>{var f;_.closeMenu(),Nt(x,Ht.Loose)||(y.preventDefault(),(f=oe(i))==null||f.focus())},R(()=>l.value===0)),Ct($t,_),qt(R(()=>Jt(l.value,{0:Ke.Open,1:Ke.Closed}))),()=>{let y={open:l.value===0,close:_.closeMenu};return Qe({ourProps:{},theirProps:t,slot:y,slots:e,attrs:s,name:"Menu"})}}}),bs=je({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${tt()}`}},setup(t,{attrs:e,slots:s,expose:l}){let i=Xe("MenuButton");l({el:i.buttonRef,$el:i.buttonRef});function d(v){switch(v.key){case le.Space:case le.Enter:case le.ArrowDown:v.preventDefault(),v.stopPropagation(),i.openMenu(),Ve(()=>{var u;(u=oe(i.itemsRef))==null||u.focus({preventScroll:!0}),i.goToItem(me.First)});break;case le.ArrowUp:v.preventDefault(),v.stopPropagation(),i.openMenu(),Ve(()=>{var u;(u=oe(i.itemsRef))==null||u.focus({preventScroll:!0}),i.goToItem(me.Last)});break}}function g(v){switch(v.key){case le.Space:v.preventDefault();break}}function b(v){t.disabled||(i.menuState.value===0?(i.closeMenu(),Ve(()=>{var u;return(u=oe(i.buttonRef))==null?void 0:u.focus({preventScroll:!0})})):(v.preventDefault(),i.openMenu(),fs(()=>{var u;return(u=oe(i.itemsRef))==null?void 0:u.focus({preventScroll:!0})})))}let m=ds(R(()=>({as:t.as,type:e.type})),i.buttonRef);return()=>{var v;let u={open:i.menuState.value===0},f=t,{id:_}=f,y=ze(f,["id"]),x={ref:i.buttonRef,id:_,type:m.value,"aria-haspopup":"menu","aria-controls":(v=oe(i.itemsRef))==null?void 0:v.id,"aria-expanded":i.menuState.value===0,onKeydown:d,onKeyup:g,onClick:b};return Qe({ourProps:x,theirProps:y,slot:u,attrs:e,slots:s,name:"MenuButton"})}}}),ys=je({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${tt()}`}},setup(t,{attrs:e,slots:s,expose:l}){let i=Xe("MenuItems"),d=F(null);l({el:i.itemsRef,$el:i.itemsRef}),Kt({container:R(()=>oe(i.itemsRef)),enabled:R(()=>i.menuState.value===0),accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function g(u){var _;switch(d.value&&clearTimeout(d.value),u.key){case le.Space:if(i.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),i.search(u.key);case le.Enter:if(u.preventDefault(),u.stopPropagation(),i.activeItemIndex.value!==null){let y=i.items.value[i.activeItemIndex.value];(_=oe(y.dataRef.domRef))==null||_.click()}i.closeMenu(),St(oe(i.buttonRef));break;case le.ArrowDown:return u.preventDefault(),u.stopPropagation(),i.goToItem(me.Next);case le.ArrowUp:return u.preventDefault(),u.stopPropagation(),i.goToItem(me.Previous);case le.Home:case le.PageUp:return u.preventDefault(),u.stopPropagation(),i.goToItem(me.First);case le.End:case le.PageDown:return u.preventDefault(),u.stopPropagation(),i.goToItem(me.Last);case le.Escape:u.preventDefault(),u.stopPropagation(),i.closeMenu(),Ve(()=>{var y;return(y=oe(i.buttonRef))==null?void 0:y.focus({preventScroll:!0})});break;case le.Tab:u.preventDefault(),u.stopPropagation(),i.closeMenu(),Ve(()=>Xt(oe(i.buttonRef),u.shiftKey?pt.Previous:pt.Next));break;default:u.key.length===1&&(i.search(u.key),d.value=setTimeout(()=>i.clearSearch(),350));break}}function b(u){switch(u.key){case le.Space:u.preventDefault();break}}let m=Wt(),v=R(()=>m!==null?(m.value&Ke.Open)===Ke.Open:i.menuState.value===0);return()=>{var u,_;let y={open:i.menuState.value===0},$=t,{id:x}=$,f=ze($,["id"]),h={"aria-activedescendant":i.activeItemIndex.value===null||(u=i.items.value[i.activeItemIndex.value])==null?void 0:u.id,"aria-labelledby":(_=oe(i.buttonRef))==null?void 0:_.id,id:x,onKeydown:g,onKeyup:b,role:"menu",tabIndex:0,ref:i.itemsRef};return Qe({ourProps:h,theirProps:f,slot:y,attrs:e,slots:s,features:dt.RenderStrategy|dt.Static,visible:v.value,name:"MenuItems"})}}}),xs=je({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${tt()}`}},setup(t,{slots:e,attrs:s,expose:l}){let i=Xe("MenuItem"),d=F(null);l({el:d,$el:d});let g=R(()=>i.activeItemIndex.value!==null?i.items.value[i.activeItemIndex.value].id===t.id:!1),b=gs(d),m=R(()=>({disabled:t.disabled,get textValue(){return b()},domRef:d}));Oe(()=>i.registerItem(t.id,m)),Ge(()=>i.unregisterItem(t.id)),kt(()=>{i.menuState.value===0&&g.value&&i.activationTrigger.value!==0&&Ve(()=>{var h,$;return($=(h=oe(d))==null?void 0:h.scrollIntoView)==null?void 0:$.call(h,{block:"nearest"})})});function v(h){if(t.disabled)return h.preventDefault();i.closeMenu(),St(oe(i.buttonRef))}function u(){if(t.disabled)return i.goToItem(me.Nothing);i.goToItem(me.Specific,t.id)}let _=Qt();function y(h){_.update(h)}function x(h){_.wasMoved(h)&&(t.disabled||g.value||i.goToItem(me.Specific,t.id,0))}function f(h){_.wasMoved(h)&&(t.disabled||g.value&&i.goToItem(me.Nothing))}return()=>{let{disabled:h}=t,$={active:g.value,disabled:h,close:i.closeMenu},O=t,{id:T}=O,I=ze(O,["id"]);return Qe({ourProps:{id:T,ref:d,role:"menuitem",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,disabled:void 0,onClick:v,onFocus:u,onPointerenter:y,onMouseenter:y,onPointermove:x,onMousemove:x,onPointerleave:f,onMouseleave:f},theirProps:be(be({},s),I),slot:$,attrs:s,slots:e,name:"MenuItem"})}}});const ws=["src","alt"],_s=je({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(t){const e=F(!1),s=t,l=R(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),i=R(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),d=R(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),g=R(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),b=R(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),m=R(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function v(u){u.type&&(e.value=!0)}return(u,_)=>(n(),c("div",{class:N(["relative inline-block shrink-0",[i.value,l.value]])},[u.image&&!e.value?(n(),c("img",{key:0,src:u.image,alt:u.label,class:N([l.value,"h-full w-full object-cover"]),onError:_[0]||(_[0]=y=>v(y))},null,42,ws)):(n(),c("div",{key:1,class:N(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[d.value,l.value]])},[u.$slots.default?(n(),c("div",{key:0,class:N(m.value)},[te(u.$slots,"default")],2)):(n(),c(W,{key:1},[Y(S(u.label&&u.label[0]),1)],64))],2)),u.$slots.indicator?(n(),c("div",{key:2,class:N(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",g.value])},[o("div",{class:N(b.value)},[te(u.$slots,"indicator")],2)],2)):D("",!0)],2))}}),ks={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},Cs=["onClick"],Ss={class:"whitespace-nowrap text-ink-gray-7"},Is=je({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(t){const e=Zt(),s=t,l=m=>{let v=()=>{m.route?e.push(m.route):m.onClick&&m.onClick()};return{label:m.label,icon:m.icon,component:m.component,onClick:v}},i=m=>(m||[]).filter(Boolean).filter(v=>v.condition?v.condition():!0).map(v=>l(v)),d=R(()=>{let m=[],v=null,u=0;for(let _ of s.options)if(_!=null){if("group"in _){v&&(m.push(v),v=null);let y=Ye(be({key:u},_),{items:i(_.items)});m.push(y)}else v||(v={key:u,group:"",hideLabel:!0,items:[]}),v.items.push(...i([_]));u++}return v&&m.push(v),m}),g=R(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),b=R(()=>s.placement==="left"?"bottom-start":s.placement==="right"?"bottom-end":s.placement==="center"?"bottom-center":"bottom");return(m,v)=>(n(),K(w(hs),{as:"div",class:"relative inline-block text-left"},{default:H(({open:u})=>[U(w(es),{transition:g.value,show:u,placement:b.value},{target:H(()=>[U(w(bs),{as:"div"},{default:H(()=>[m.$slots.default?te(m.$slots,"default",ye(_e({key:0},{open:u}))):(n(),K(w(fe),_e({key:1,active:u},m.button),{default:H(()=>{var _;return[Y(S(m.button?((_=m.button)==null?void 0:_.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:H(()=>[U(w(ys),{class:N(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":m.placement=="left","right-0 origin-top-right":m.placement=="right","inset-x-0 origin-top":m.placement=="center"}])},{default:H(()=>[(n(!0),c(W,null,X(d.value,_=>(n(),c("div",{key:_.key,class:"p-1.5"},[_.group&&!_.hideLabel?(n(),c("div",ks,S(_.group),1)):D("",!0),(n(!0),c(W,null,X(_.items,y=>(n(),K(w(xs),{key:y.label},{default:H(({active:x})=>[y.component?(n(),K(Re(y.component),{key:0,active:x},null,8,["active"])):(n(),c("button",{key:1,class:N([x?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:y.onClick},[y.icon&&typeof y.icon=="string"?(n(),K($e,{key:0,name:y.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):y.icon?(n(),K(Re(y.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):D("",!0),o("span",Ss,S(y.label),1)],10,Cs))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),$s={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ts={class:"text-xl font-medium"},Ps={class:"mt-1 text-base text-ink-gray-5"},Rs={__name:"ListEmptyState",setup(t){const e=he("list");return(s,l)=>(n(),c("div",$s,[te(s.$slots,"default",{},()=>[o("div",Ts,S(w(e).options.emptyState.title),1),o("div",Ps,S(w(e).options.emptyState.description),1),w(e).options.emptyState.button?(n(),K(w(fe),_e({key:0},w(e).options.emptyState.button,{class:"mt-4"}),null,16)):D("",!0)])]))}};function Tt(t,e=!0){let s=e?"14px ":"",l=t.map(i=>{let d=i.width||1;return typeof d=="number"?d+"fr":d}).join(" ");return s+l}const rt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Ms={class:"truncate"},Pt={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(t,{emit:e}){const s=t,l=e,i=F(null),d=F(null),g=R(()=>{if(typeof s.item.width=="string"){const u=parseInt(s.item.width);if(s.item.width.includes("rem"))return u*16;if(s.item.width.includes("px"))return u}return d.value.offsetWidth}),b=u=>{const _=u.clientX,y=g.value,x=h=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),i.value.style.backgroundColor="rgb(199 199 199)";let $=y+(h.clientX-_);s.item.width=`${$<50?50:$}px`,m(s.item.width)},f=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),i.value.style.backgroundColor="",window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",f)},m=ts(u=>{s.item.width=u,l("columnWidthUpdated")},s.debounce),v=he("list");return(u,_)=>(n(),c("div",{ref_key:"columnRef",ref:d,class:N(["group relative flex items-center",t.item.align?w(rt)[t.item.align]:"justify-between"])},[o("div",{class:N(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",u.$attrs.class])},[te(u.$slots,"prefix",ye(De({item:t.item}))),te(u.$slots,"default",{},()=>[o("div",Ms,S(t.item.label),1)]),te(u.$slots,"suffix",ye(De({item:t.item})))],2),w(v).options.resizeColumn?te(u.$slots,"resizer",ye(_e({key:0},{item:t.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:b},[o("div",{ref_key:"resizer",ref:i,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):D("",!0)],2))}},Rt={__name:"ListHeader",emits:["columnWidthUpdated"],setup(t,{emit:e}){const s=e,l=he("list");return(i,d)=>(n(),c("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Ie({gridTemplateColumns:w(Tt)(w(l).columns,w(l).options.selectable)})},[w(l).options.selectable?(n(),K(st,{key:0,class:"cursor-pointer duration-300",modelValue:w(l).allRowsSelected,onClick:Me(w(l).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):D("",!0),te(i.$slots,"default",{},()=>[(n(!0),c(W,null,X(w(l).columns,g=>(n(),K(Pt,{key:g.key,item:g,onColumnWidthUpdated:b=>s("columnWidthUpdated",g)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Ds={class:"truncate text-base"},Mt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(t){const e=t,s=R(()=>{var g,b;return(g=e.column)!=null&&g.getLabel?(b=e.column)==null?void 0:b.getLabel({row:e.row}):i(e.item).label||""}),l=R(()=>d.value.options.showTooltip?e.column.getTooltip?e.column.getTooltip(e.row):i(e.item).label:"");function i(g){return g&&typeof g=="object"?g:{label:g}}const d=he("list");return(g,b)=>(n(),c("div",{class:N(["flex items-center space-x-2",w(rt)[t.align]])},[te(g.$slots,"prefix",{},()=>[t.column.prefix?(n(),K(Re(typeof t.column.prefix=="function"?t.column.prefix({row:t.row}):t.column.prefix),{key:0})):D("",!0)]),U(w(It),ye(De(w(d).options.showTooltip?{text:l.value}:{text:""})),{default:H(()=>[te(g.$slots,"default",ye(De({label:s.value})),()=>[o("div",Ds,S(s.value),1)])]),_:3},16),te(g.$slots,"suffix")],2))}},at={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(t){const e=t,s=he("list"),l=R(()=>{var u;return(u=s.value.rows)!=null&&u.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===e.row[s.value.rowKey]:!1}),i=R(()=>s.value.selections.has(e.row[s.value.rowKey])),d=R(()=>s.value.options.enableActive&&s.value.activeRow.value===e.row.name),g=R(()=>s.value.options.getRowRoute||s.value.options.onRowClick),b=R(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),m=R(()=>{var y,x,f;if(!i.value)return"rounded";const u=[...s.value.selections];let _=(y=s.value.rows[0])!=null&&y.group?s.value.rows.map(h=>h.rows):[s.value.rows];for(let h of _){let $=h.findIndex(O=>O==e.row);if($===-1)continue;let T=!u.includes((x=h[$+1])==null?void 0:x.name),I=!u.includes((f=h[$-1])==null?void 0:f.name);return(T?"rounded-b ":"")+(I?"rounded-t":"")}}),v=(u,_)=>{s.value.options.onRowClick&&s.value.options.onRowClick(u,_),s.value.activeRow.value===u.name?s.value.activeRow.value=null:s.value.activeRow.value=u.name};return(u,_)=>(n(),K(Re(w(s).options.getRowRoute?"router-link":"div"),_e({class:[[m.value,i.value||d.value?"bg-surface-gray-2":"",g.value?"cursor-pointer":"",g.value?i.value||d.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:w(s).options.getRowRoute?w(s).options.getRowRoute(t.row):void 0,onClick:y=>v(t.row,y)}),{default:H(()=>[(n(),K(Re(w(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:H(()=>{var y,x;return[o("div",{class:"grid items-center space-x-4 px-2",style:Ie({height:b.value,gridTemplateColumns:w(Tt)(w(s).columns,w(s).options.selectable)})},[w(s).options.selectable?(n(),c("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:_[1]||(_[1]=Me(()=>{},["stop","prevent"])),onDblclick:_[2]||(_[2]=Me(()=>{},["stop"]))},[U(st,{modelValue:i.value,class:"cursor-pointer duration-300",onClick:_[0]||(_[0]=Me(f=>w(s).toggleRow(t.row[w(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):D("",!0),(n(!0),c(W,null,X(w(s).columns,(f,h)=>(n(),c("div",{key:f.key,class:N([w(rt)[f.align],h==0?"text-ink-gray-9":"text-ink-gray-7"])},[te(u.$slots,"default",_e({ref_for:!0},{idx:h,column:f,item:t.row[f.key],isActive:d.value}),()=>[w(s).slots.cell?(n(),K(Re(w(s).slots.cell),_e({key:0,ref_for:!0},{column:f,row:t.row,item:t.row[f.key],align:f.align}),null,16)):(n(),K(Mt,{key:1,column:f,row:t.row,item:t.row[f.key],align:f.align},null,8,["column","row","item","align"]))])],2))),128))],4),l.value?D("",!0):(n(),c("div",{key:0,class:N(["h-px border-t",m.value==="rounded"||(x=(y=m.value)==null?void 0:y.includes)!=null&&x.call(y,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Os={class:"h-full overflow-y-auto"},Dt={__name:"ListRows",setup(t){const e=he("list");return(s,l)=>(n(),c("div",Os,[te(s.$slots,"default",{},()=>[(n(!0),c(W,null,X(w(e).rows,i=>(n(),K(at,{key:i[w(e).rowKey],row:i},null,8,["row"]))),128))])]))}},Fs={},Vs={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function As(t,e){return n(),c("svg",Vs,e[0]||(e[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const js=Be(Fs,[["render",As]]),Ls={class:"flex items-center"},Es={class:"w-full py-1.5 pr-2"},Bs={key:1,class:"text-base font-medium leading-6"},Us={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(t){const e=t,s=he("list");function l(){e.group.collapsed==null&&(e.group.collapsed=!1),e.group.collapsed=!e.group.collapsed}return(i,d)=>(n(),c(W,null,[o("div",Ls,[o("button",{onClick:l,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[U(js,{class:N(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[t.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),te(i.$slots,"default",{},()=>[o("div",Es,[w(s).slots["group-header"]?(n(),K(Re(w(s).slots["group-header"]),ye(_e({key:0},{group:t.group})),null,16)):(n(),c("span",Bs,S(t.group.group),1))])])]),d[0]||(d[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},zs={key:0,class:"mb-5 mt-2"},Ns={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(t){const e=he("list");return(s,l)=>t.group.collapsed?D("",!0):(n(),c("div",zs,[te(s.$slots,"default",{},()=>[(n(!0),c(W,null,X(t.group.rows,i=>(n(),K(at,{key:i[w(e).rowKey],row:i},null,8,["row"]))),128))])]))}},Hs={class:"h-full overflow-y-auto"},qs={__name:"ListGroups",setup(t){const e=he("list");return(s,l)=>(n(),c("div",Hs,[(n(!0),c(W,null,X(w(e).rows,i=>(n(),c("div",{key:i.group},[te(s.$slots,"default",{},()=>[U(Us,{group:i},{default:H(()=>[s.$slots["group-header"]?te(s.$slots,"group-header",_e({key:0,ref_for:!0},{group:i})):D("",!0)]),_:2},1032,["group"]),U(Ns,{group:i},null,8,["group"])])]))),128))]))}},Js={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Ks={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Ws={class:"flex items-center space-x-3"},Qs={class:"mr-3"},Gs={class:"flex items-center space-x-1"},Ot=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(t){const e=he("list");let s=R(()=>e.value.options.selectionText(e.value.selections.size));return(l,i)=>(n(),K(ss,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:H(()=>[w(e).selections.size?(n(),c("div",Js,[o("div",{class:N(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",l.$attrs.class])},[te(l.$slots,"default",ye(De({selections:w(e).selections,allRowsSelected:w(e).allRowsSelected,selectAll:()=>w(e).toggleAllRows(!0),unselectAll:()=>w(e).toggleAllRows(!1)})),()=>[o("div",Ks,[o("div",Ws,[U(st,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,S(w(s)),1)]),o("div",Qs,[te(l.$slots,"actions",ye(De({selections:w(e).selections,allRowsSelected:w(e).allRowsSelected,selectAll:()=>w(e).toggleAllRows(!0),unselectAll:()=>w(e).toggleAllRows(!1)})))])]),o("div",Gs,[U(w(fe),{class:N(["w- text-ink-gray-7",w(e).allRowsSelected?"cursor-not-allowed":""]),disabled:w(e).allRowsSelected,variant:"ghost",onClick:i[0]||(i[0]=d=>w(e).toggleAllRows(!0))},{default:H(()=>i[2]||(i[2]=[Y(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),U(w(fe),{icon:"x",variant:"ghost",onClick:i[1]||(i[1]=d=>w(e).toggleAllRows(!1))})])])],2)])):D("",!0)]),_:3}))}}),Xs={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ys=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(t,{expose:e,emit:s}){const l=t,i=os();let d=rs(new Set),g=F(null);const b=s;xe(d,f=>{d.size&&(g.value=null),b("update:selections",f)}),xe(g,f=>{b("update:active-row",f)});let m=R(()=>{function f($){return $===void 0?!0:$}function h($){return $===void 0?!1:$}return{getRowRoute:l.options.getRowRoute||null,onRowClick:l.options.onRowClick||null,showTooltip:f(l.options.showTooltip),selectionText:l.options.selectionText||($=>$===1?"1 row selected":`${$} rows selected`),enableActive:h(l.options.enableActive),selectable:f(l.options.selectable),resizeColumn:h(l.options.resizeColumn),rowHeight:l.options.rowHeight||40,emptyState:l.options.emptyState}});const v=R(()=>l.rows.length?_.value?d.size===l.rows.reduce((f,h)=>f+h.rows.length,0):d.size===l.rows.length:!1),u=R(()=>m.value.selectable);let _=R(()=>l.rows.every(f=>f.group&&f.rows&&Array.isArray(f.rows)));function y(f){d.delete(f)||d.add(f)}function x(f){if(!f||v.value){d.clear();return}if(_.value){l.rows.forEach(h=>{h.rows.forEach($=>d.add($[l.rowKey]))});return}l.rows.forEach(h=>d.add(h[l.rowKey]))}return Ct("list",R(()=>({rowKey:l.rowKey,rows:l.rows,columns:l.columns,options:m.value,selections:d,activeRow:g,allRowsSelected:v.value,slots:i,toggleRow:y,toggleAllRows:x}))),e({selections:d,allRowsSelected:v,toggleRow:y,toggleAllRows:x}),(f,h)=>(n(),c("div",Xs,[o("div",{class:N(["flex w-max min-w-full flex-col overflow-y-hidden",f.$attrs.class]),style:Ie(f.$attrs.style)},[te(f.$slots,"default",ye(De({showGroupedRows:w(_),selectable:u.value})),()=>[U(Rt),l.rows.length?(n(),c(W,{key:0},[w(_)?(n(),K(qs,{key:0})):(n(),K(Dt,{key:1}))],64)):(n(),K(Rs,{key:1})),u.value?(n(),K(Ot,{key:2})):D("",!0)])],6)]))}});function Ft(l,i){return ce(this,arguments,function*(t,e,s={}){e||(e={});let d=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},s.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(d["X-Frappe-CSRF-Token"]=window.csrf_token);let g=t.startsWith("/")?t:`/api/method/${t}`;const b=yield fetch(g,{method:"POST",headers:d,body:JSON.stringify(e)});if(b.ok){const m=yield b.json();if(m.docs||t==="login")return m;if(m.exc)try{console.groupCollapsed(t),console.log(`method: ${t}`),console.log("params:",e);let v=JSON.parse(m.exc);for(let u of v)console.log(u);console.groupEnd()}catch(v){console.warn("Error printing debug messages",v)}return m.message}else{let m=yield b.text(),v,u;try{v=JSON.parse(m)}catch(x){}let _=[[t,v.exc_type,v._error_message].filter(Boolean).join(" ")];if(v.exc){u=v.exc;try{u=JSON.parse(u)[0],console.log(u)}catch(x){}}let y=new Error(_.join(`
`));throw y.exc_type=v.exc_type,y.exc=u,y.status=b.status,y.messages=v._server_messages?JSON.parse(v._server_messages):[],y.messages=y.messages.concat(v.message),y.messages=y.messages.map(x=>{try{return JSON.parse(x).message}catch(f){return x}}),y.messages=y.messages.filter(Boolean),y.messages.length||(y.messages=v._error_message?[v._error_message]:["Internal Server Error"]),s.onError&&s.onError({response:b,status:b.status,error:y}),y}})}const Ee=we({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(t){const e=t||{},s=e.limit_page_length||10,l=e.limit_start||0,i=e.filters||{},d=e.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:s,limit_start:l,filters:i,order_by:d}),{limit_page_length:s,limit_start:l,filters:i,order_by:d}},onError(t){console.error("Failed to fetch issues:",t),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Vt=we({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(t){const e=t||{},s=e.filters||e||{};return console.log("issuesCountResource filters:",s),{filters:s}},onError(t){console.error("Failed to fetch issues count:",t)}});function Le(t={}){const e={limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,filters:t.filters||{},order_by:t.order_by||"creation desc"};return console.log("reloadIssues with params:",e),Ee.reload(e)}function We(t={}){return console.log("getIssuesCount with filters:",t),Vt.reload(t)}const At=we({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(t){return{issue_name:t}},onError(t){console.error("Failed to fetch single issue:",t)},auto:!1});function Zs(t){return At.reload(t)}const eo=we({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(t){console.error("Failed to fetch issue priorities:",t)},auto:!0}),to=we({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(t){console.error("Failed to fetch issue types:",t)},auto:!0});we({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(t){console.error("Failed to fetch projects:",t)},auto:!0});let Ne=null,xt=null,He=null,wt=null;function so(){const t=eo.data||[],e=JSON.stringify(t);if(Ne&&xt===e)return Ne;const s=[{label:"All Priority",value:""},...t.map(l=>({label:l.name,value:l.name}))];return Ne=Object.freeze(s),xt=e,Ne}function oo(){const t=to.data||[],e=JSON.stringify(t);if(He&&wt===e)return He;const s=[{label:"All Types",value:""},...t.map(l=>({label:l.name,value:l.name}))];return He=Object.freeze(s),wt=e,He}const ro=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function ao(){return ro}const lo=we({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(t){console.error("Failed to fetch tag colors:",t)},auto:!0}),qe=new Map;let _t=null;function no(t){const e=lo.data||{},s=JSON.stringify(e);if(_t!==s&&(qe.clear(),_t=s),qe.has(t))return qe.get(t);const l=e[t]||null;return qe.set(t,l),l}const Ze=we({url:"force_trans_customization.api.issues.issue_search",makeParams(t){const e=t||{};return{search_query:e.search_query||"",limit:e.limit||8}},onError(t){console.error("Failed to search issues:",t)},auto:!1});function io(t,e=8){return!t||t.length<2?Promise.resolve(Ze.data||[]):Ze.reload({search_query:t,limit:e}).then(()=>Ze.data||[])}const Se=we({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(t){const e=t||{},s={stat_type:e.stat_type||"team_tickets",limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,order_by:e.order_by||"creation desc"};return e.filters&&(s.filters=e.filters),s},onError(t){console.error("Failed to filter issues by stat:",t),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),jt=we({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(t){const e=t||{},s={stat_type:e.stat_type||"team_tickets"};return e.filters&&(s.filters=e.filters),s},onError(t){console.error("Failed to get stat filter count:",t)},auto:!1});function et(t,e={}){const s={stat_type:t,limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,order_by:e.order_by||"creation desc"};return e.filters&&(s.filters=e.filters),console.log("filterIssuesByStat params:",s),Se.reload(s)}function Je(t,e=null){const s={stat_type:t};return e&&(s.filters=e),jt.reload(s)}const uo={class:"relative w-full max-w-2xl mx-auto"},co={class:"relative group"},po=["placeholder"],go={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},mo={key:1,class:"flex items-center pointer-events-none"},vo={key:2,class:"animate-spin"},fo={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},ho={class:"flex items-center justify-between"},bo={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},yo={class:"text-xs text-slate-500"},xo={key:0,class:"px-6 py-8 text-center"},wo=["onClick"],_o={class:"flex items-start space-x-4"},ko={class:"flex-1 min-w-0"},Co={class:"flex items-start justify-between"},So={class:"flex-1 min-w-0"},Io={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},$o=["innerHTML"],To={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Po={key:0,class:"ml-2"},Ro={class:"flex-shrink-0 ml-4"},Mo={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Do={key:0,class:"flex items-center"},Oo={key:1,class:"flex items-center"},Fo={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Vo={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(t,{expose:e,emit:s}){const l=t,i=s,d=F(null),g=F(l.modelValue),b=F(!1),m=F(!1),v=F(-1),u=F(!1),_=F(0),y=F(null),x=F([]);let f=null;xe(()=>l.modelValue,P=>{g.value=P}),xe(g,P=>{i("update:modelValue",P),i("search",P)});const h=F([]),$=P=>ce(this,null,function*(){if(!P||P.length<2){h.value=[],m.value=!1,u.value=!1;return}try{u.value=!0;const j=performance.now(),q=yield io(P,8);_.value=performance.now()-j,h.value=q||[],m.value=!0}catch(j){console.error("Search error:",j),h.value=[],m.value=!1}finally{u.value=!1}}),T=P=>{if(f&&clearTimeout(f),v.value=-1,!P||P.length<2){h.value=[],m.value=!1,u.value=!1;return}u.value=!0,f=setTimeout(()=>{$(P)},1e3)},I=()=>{T(g.value)},O=(P,j)=>{if(!P||!j)return P;const q=j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),se=new RegExp(`(${q})`,"gi");return P.replace(se,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},k=P=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[P]||"bg-gray-100 text-gray-800 border border-gray-200",V=()=>{b.value=!0,A&&(clearTimeout(A),A=null),g.value.length>=2&&(h.value.length>0?m.value=!0:$(g.value))};let A=null;const L=()=>{b.value=!1,A=setTimeout(()=>{m.value=!1,A=null},200)},J=P=>{var j;if(m.value)switch(P.key){case"ArrowDown":P.preventDefault(),v.value=Math.min(v.value+1,h.value.length-1),G();break;case"ArrowUp":P.preventDefault(),v.value=Math.max(v.value-1,-1),G();break;case"Enter":P.preventDefault(),v.value>=0&&M(h.value[v.value]);break;case"Escape":Q(),(j=d.value)==null||j.blur();break}},M=P=>{g.value=P.name,Q();const q=`${window.location.origin}/app/issue/${P.name}`;window.open(q,"_blank"),i("suggestion-selected",P)},Z=()=>{var P;g.value="",Q(),(P=d.value)==null||P.focus()},Q=()=>{m.value=!1,v.value=-1},G=()=>{if(v.value<0||!y.value||!x.value[v.value])return;const P=y.value,j=x.value[v.value];if(j){const q=P.getBoundingClientRect(),se=j.getBoundingClientRect(),ee=se.top-q.top+P.scrollTop,ke=ee+se.height,ie=P.scrollTop,re=P.clientHeight;ee<ie?P.scrollTop=ee:ke>ie+re&&(P.scrollTop=ke-re)}},pe=P=>{if(!P)return"";try{const j=new Date(P),q=new Date,se=Math.abs(q-j),ee=Math.ceil(se/(1e3*60*60*24));return ee===1?"Today":ee===2?"Yesterday":ee<=7?`${ee-1} days ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:j.getFullYear()!==q.getFullYear()?"numeric":void 0})}catch(j){return console.error("Error formatting date:",j),P}},ne=P=>{var j,q;(P.metaKey||P.ctrlKey)&&P.key==="k"&&(P.preventDefault(),(j=d.value)==null||j.focus(),(q=d.value)==null||q.select())};return Oe(()=>{document.addEventListener("keydown",ne)}),Ge(()=>{document.removeEventListener("keydown",ne),f&&clearTimeout(f),A&&clearTimeout(A)}),e({focus:()=>{var P,j;(P=d.value)==null||P.focus(),(j=d.value)==null||j.select()},select:()=>{var P;return(P=d.value)==null?void 0:P.select()},$el:d}),(P,j)=>(n(),c("div",uo,[o("div",co,[j[4]||(j[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ge(o("input",{ref_key:"searchInput",ref:d,type:"text","onUpdate:modelValue":j[0]||(j[0]=q=>g.value=q),onInput:I,onFocus:V,onBlur:L,onKeydown:J,placeholder:t.placeholder,class:N(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":b.value,"bg-slate-50/50":!b.value&&g.value}])},null,42,po),[[ve,g.value]]),o("div",go,[g.value?(n(),c("button",{key:0,onClick:Z,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},j[1]||(j[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):D("",!0),!g.value&&!b.value?(n(),c("div",mo,j[2]||(j[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),Y("K ")],-1)]))):D("",!0),u.value?(n(),c("div",vo,j[3]||(j[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)])]),m.value?(n(),c("div",{key:0,class:N(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":m.value}])},[h.value.length>0?(n(),c("div",fo,[o("div",ho,[o("span",bo,S(h.value.length)+" Result"+S(h.value.length!==1?"s":""),1),o("span",yo,S(Math.round(_.value))+"ms ",1)])])):D("",!0),o("div",{ref_key:"suggestionsContainer",ref:y,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[h.value.length===0&&g.value.length>=2?(n(),c("div",xo,j[5]||(j[5]=[gt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):D("",!0),(n(!0),c(W,null,X(h.value,(q,se)=>(n(),c("div",{key:q.name||se,ref_for:!0,ref:ee=>x.value[se]=ee,onClick:ee=>M(q),class:N(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":se===v.value}])},[o("div",_o,[j[8]||(j[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",ko,[o("div",Co,[o("div",So,[o("h4",Io,[o("span",{innerHTML:O(q.subject||q.name,g.value)},null,8,$o)]),o("p",To,[Y(" ID: "+S(q.name)+" ",1),q.customer?(n(),c("span",Po,"• "+S(q.customer),1)):D("",!0)])]),o("div",Ro,[o("span",{class:N(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",k(q.status)])},S(q.status),3)])]),o("div",Mo,[q.raised_by?(n(),c("div",Do,[j[6]||(j[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),Y(" "+S(q.raised_by),1)])):D("",!0),q.creation?(n(),c("div",Oo,[j[7]||(j[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Y(" "+S(pe(q.creation)),1)])):D("",!0)])])])],10,wo))),128))],512),g.value&&h.value.length>0?(n(),c("div",Fo,j[9]||(j[9]=[gt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):D("",!0)],2)):D("",!0),m.value?(n(),c("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:Q})):D("",!0)]))}},Ao=Be(Vo,[["__scopeId","data-v-4969cdcf"]]),jo={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Lo={class:"mb-6"},Eo={class:"relative max-w-2xl mx-auto"},Bo={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Uo={class:"border-t border-gray-200 pt-4"},zo={class:"flex items-center justify-between"},No={class:"flex items-center space-x-3 flex-1"},Ho={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},qo={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},Jo={class:"text-green-800 font-medium"},Ko={class:"text-green-600"},Wo={class:"text-green-900"},Qo=["onClick"],Go={class:"flex items-center space-x-2 ml-4"},Xo=["disabled"],Yo={key:0,class:"flex items-center"},Zo={key:1},er={key:0,class:"relative"},tr={class:"flex"},sr={class:"w-48 border-r border-gray-200 bg-gray-50"},or={class:"max-h-64 overflow-y-auto"},rr=["onClick"],ar={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},lr={class:"flex-1 min-w-96"},nr={class:"p-4"},ir={key:0,class:"text-center py-8 text-gray-500"},ur={key:1,class:"space-y-4"},cr={class:"col-span-2 flex items-center"},dr={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},pr={class:"col-span-2 flex items-center"},gr={class:"text-gray-700 font-medium truncate"},mr={class:"col-span-7"},vr=["onUpdate:modelValue","placeholder"],fr=["onUpdate:modelValue","placeholder"],hr={key:2,class:"space-y-2"},br={key:0,class:"grid grid-cols-2 gap-2"},yr=["onUpdate:modelValue","onInput"],xr=["onUpdate:modelValue","onInput"],wr={key:1},_r=["onUpdate:modelValue"],kr={key:3,class:"space-y-2"},Cr={key:0,class:"grid grid-cols-2 gap-2"},Sr=["onUpdate:modelValue","onInput"],Ir=["onUpdate:modelValue","onInput"],$r={key:1},Tr=["onUpdate:modelValue"],Pr={key:4,class:"relative"},Rr={key:0},Mr=["onUpdate:modelValue"],Dr={value:""},Or=["value"],Fr={key:1,class:"space-y-2"},Vr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ar=["onClick"],jr={key:5,class:"space-y-2"},Lr={class:"space-y-2"},Er={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Br=["onClick"],Ur={class:"relative"},zr=["onUpdate:modelValue","onInput","placeholder"],Nr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Hr={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},qr=["onClick"],Jr={class:"font-medium text-gray-900"},Kr={class:"text-xs text-gray-500"},Wr={key:6,class:"space-y-2"},Qr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Gr=["onClick"],Xr={class:"relative"},Yr=["onUpdate:modelValue","onInput","onKeyup"],Zr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},ea={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},ta=["onClick"],sa={class:"flex items-center justify-between"},oa={class:"font-medium text-gray-900"},ra={class:"text-xs text-gray-500"},aa={class:"col-span-1 flex items-start justify-center pt-1"},la=["onClick"],na={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},ia=["disabled"],ua={key:0,class:"flex items-center"},ca={key:1},da={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(t,{emit:e}){const s=t,l=e,i=F(s.searchQuery),d=F(!1),g=F([]),b=F([]);let m=0;const v=F(!1),u=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],_={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Waiting on Customer",label:"Waiting on Customer"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},y={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"not_in",label:"Not In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},x=R(()=>JSON.stringify(g.value)!==JSON.stringify(b.value)),f=p=>{const r=u.find(a=>a.value===p);return(r==null?void 0:r.type)||"text"},h=p=>{const r=u.find(a=>a.value===p);return(r==null?void 0:r.label)||p},$=p=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[p]||`Enter ${h(p).toLowerCase()}...`,T=p=>{const r=f(p);return y[r]||y.text},I=p=>_[p]||[],O=p=>p.displayValue?p.displayValue:Array.isArray(p.value)?p.value.join(", "):p.value,k=p=>p?typeof p=="string"?p.split(",").map(r=>r.trim()).filter(Boolean):p:[],V=(p,r)=>{const a=k(p.value);a.splice(r,1),p.value=a.join(", ")},A=p=>p?p.split(",").map(r=>r.trim()).filter(Boolean):[],L=(p,r)=>{const a=A(p.value);a.splice(r,1),p.value=a.join(", ")},J=(p,r)=>r.userDisplayMap&&r.userDisplayMap[p]?r.userDisplayMap[p]:p,M=(p,r)=>{const a=k(p.value);a.includes(r.value)||(a.push(r.value),p.value=a.join(", "),p.userDisplayMap||(p.userDisplayMap={}),p.userDisplayMap[r.value]=r.label),p.searchValue="",p.suggestions=[]};let Z={};const Q=(p,r)=>ce(this,null,function*(){p.loadingTags=!0,Z[p.id]&&clearTimeout(Z[p.id]),Z[p.id]=setTimeout(()=>ce(this,null,function*(){try{const a=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:r||"",limit:15})});if(a.ok){const E=yield a.json();p.tagSuggestions=E.message||[]}}catch(a){console.error("Tag search error:",a),p.tagSuggestions=[]}finally{p.loadingTags=!1}}),300)}),G=p=>{if(!p.tagInput||!p.tagInput.trim())return;const r=p.tagInput.replace(",","").trim(),a=A(p.value);r&&!a.includes(r)&&(a.push(r),p.value=a.join(", ")),p.tagInput="",p.tagSuggestions=[]},pe=(p,r)=>{const a=A(p.value);a.includes(r.value)||(a.push(r.value),p.value=a.join(", ")),p.tagInput="",p.tagSuggestions=[]};let ne={};const P=(p,r)=>ce(this,null,function*(){p.searchValue=r,p.loading=!0,ne[p.id]&&clearTimeout(ne[p.id]),ne[p.id]=setTimeout(()=>ce(this,null,function*(){try{let a=[],E="";if(p.field==="customer"?E="/api/method/force_trans_customization.api.issues.search_customers":p.field==="contact"?E="/api/method/force_trans_customization.api.issues.search_contacts":p.field==="lead"?E="/api/method/force_trans_customization.api.issues.search_leads":p.field==="custom_assigned_csm_team"?E="/api/method/force_trans_customization.api.issues.search_user_groups":p.field==="custom_users_assigned"&&(E="/api/method/force_trans_customization.api.issues.search_users"),E){const C=yield fetch(E,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:r||"",limit:10,doctype_filter:p.field==="custom_users_assigned"?"User":void 0})});C.ok&&(a=(yield C.json()).message||[])}p.suggestions=a}catch(a){console.error("Search error:",a),p.suggestions=[]}finally{p.loading=!1}}),300)}),j=(p,r)=>T(p).map(E=>({label:E.label,onClick:()=>{r.operator!==E.value&&(f(p)==="date"&&(E.value==="between"?r.value&&!r.startValue&&(r.startValue=r.value,r.endValue=""):r.operator==="between"&&(r.startValue&&!r.value&&(r.value=r.startValue),r.startValue="",r.endValue="")),r.multiSelectValue=null,r.searchValue="",r.suggestions=[],r.searchOptions=[]),r.operator=E.value}})),q=(p,r)=>{var E;return((E=T(r).find(C=>C.value===p))==null?void 0:E.label)||p},se=(p,r)=>{const E=I(r).find(C=>C.value===p);return E?E.label:p},ee=p=>{p.startValue&&p.endValue?p.value=`${p.startValue},${p.endValue}`:p.value=""},ke=p=>{var C;const r=f(p);let a="equals";r==="link"?a="in":r==="tags"?a="has":a=((C=T(p)[0])==null?void 0:C.value)||"equals";const E={id:++m,field:p,operator:a,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},tagInput:"",tagSuggestions:[],loadingTags:!1};g.value.push(E)},ie=p=>{g.value.splice(p,1)},re=p=>{b.value.splice(p,1),B()},Fe=()=>ce(this,null,function*(){if(x.value){v.value=!0;try{b.value=JSON.parse(JSON.stringify(g.value)),B(),d.value=!1}catch(p){console.error("Error applying filters:",p)}finally{setTimeout(()=>{v.value=!1},500)}}}),Ce=()=>{g.value=[],b.value=[],i.value="",l("update:searchQuery",""),l("update:filters",[]),l("filters-applied",[]),d.value=!1},B=()=>{const p=b.value.filter(r=>r.value&&r.value.toString().trim()).map(r=>({field:r.field,operator:r.operator,value:r.value.toString().trim(),displayValue:r.displayValue||null}));console.log("Emitting filters:",p),l("update:filters",p),l("filters-applied",p)},z=p=>{i.value=p,l("update:searchQuery",p)},ue=p=>{l("suggestion-selected",p)};return xe(()=>s.searchQuery,p=>{i.value=p}),Oe(()=>{const p=localStorage.getItem("issue_filters");if(p)try{const r=JSON.parse(p);b.value=r.applied||[],g.value=r.pending||[]}catch(r){console.warn("Failed to parse saved filters:",r)}xe(()=>g.value,r=>{r.forEach(a=>{f(a.field)==="link"&&a.searchValue&&P(a,a.searchValue)})},{deep:!0})}),xe([b,g],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:b.value,pending:g.value}))},{deep:!0}),(p,r)=>(n(),c("div",jo,[o("div",Lo,[o("div",Eo,[U(Ao,{ref:"searchBoxRef","model-value":i.value,"onUpdate:modelValue":z,onSuggestionSelected:ue,issues:t.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),i.value?(n(),c("div",Bo," Searching in "+S(t.filteredCount)+" issues ",1)):D("",!0)])]),o("div",Uo,[o("div",zo,[o("div",No,[o("button",{onClick:r[0]||(r[0]=a=>d.value=!d.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[r[3]||(r[3]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),r[4]||(r[4]=o("span",null,"Filters",-1)),b.value.length>0?(n(),c("span",Ho,S(b.value.length),1)):D("",!0)]),b.value.length>0?(n(),c("div",qo,[(n(!0),c(W,null,X(b.value,(a,E)=>(n(),c("div",{key:a.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",Jo,S(h(a.field)),1),o("span",Ko,S(a.operator),1),o("span",Wo,S(O(a)),1),o("button",{onClick:C=>re(E),class:"text-green-400 hover:text-red-600 ml-1"},r[5]||(r[5]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Qo)]))),128))])):D("",!0)]),o("div",Go,[b.value.length>0||i.value?(n(),c("button",{key:0,onClick:Ce,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):D("",!0),g.value.length>0?(n(),c("button",{key:1,onClick:Fe,class:N(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",v.value?"bg-blue-500 text-white cursor-wait":x.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!x.value||v.value},[v.value?(n(),c("span",Yo,r[6]||(r[6]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Y(" Applying... ")]))):(n(),c("span",Zo,S(x.value?"Apply Filters":"Filters Applied"),1))],10,Xo)):D("",!0)])])]),d.value?(n(),c("div",er,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:r[1]||(r[1]=Me(()=>{},["stop"]))},[o("div",tr,[o("div",sr,[r[7]||(r[7]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",or,[(n(),c(W,null,X(u,a=>o("button",{key:a.value,onClick:Me(E=>ke(a.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,S(a.label),1),o("span",ar,S(a.type),1)],8,rr)),64))])]),o("div",lr,[o("div",nr,[g.value.length===0?(n(),c("div",ir,r[8]||(r[8]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(n(),c("div",ur,[(n(!0),c(W,null,X(g.value,(a,E)=>(n(),c("div",{key:a.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",cr,[o("span",dr,S(h(a.field)),1)]),o("div",pr,[U(w(Is),{options:j(a.field,a),placement:"left"},{default:H(({open:C})=>[o("button",{class:N(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",C?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",gr,S(q(a.operator,a.field)),1),r[9]||(r[9]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",mr,[f(a.field)==="text"?ge((n(),c("input",{key:0,"onUpdate:modelValue":C=>a.value=C,type:"text",placeholder:$(a.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,vr)),[[ve,a.value]]):f(a.field)==="email"?ge((n(),c("input",{key:1,"onUpdate:modelValue":C=>a.value=C,type:"email",placeholder:$(a.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,fr)),[[ve,a.value]]):f(a.field)==="datetime"?(n(),c("div",hr,[a.operator==="between"?(n(),c("div",br,[o("div",null,[ge(o("input",{"onUpdate:modelValue":C=>a.startValue=C,type:"datetime-local",placeholder:"Start date and time",onInput:C=>ee(a),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,yr),[[ve,a.startValue]]),r[10]||(r[10]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[ge(o("input",{"onUpdate:modelValue":C=>a.endValue=C,type:"datetime-local",placeholder:"End date and time",onInput:C=>ee(a),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,xr),[[ve,a.endValue]]),r[11]||(r[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(n(),c("div",wr,[ge(o("input",{"onUpdate:modelValue":C=>a.value=C,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,_r),[[ve,a.value]]),r[12]||(r[12]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):f(a.field)==="date"?(n(),c("div",kr,[a.operator==="between"?(n(),c("div",Cr,[o("div",null,[ge(o("input",{"onUpdate:modelValue":C=>a.startValue=C,type:"date",onInput:C=>ee(a),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Sr),[[ve,a.startValue]]),r[13]||(r[13]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[ge(o("input",{"onUpdate:modelValue":C=>a.endValue=C,type:"date",onInput:C=>ee(a),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ir),[[ve,a.endValue]]),r[14]||(r[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(n(),c("div",$r,[ge(o("input",{"onUpdate:modelValue":C=>a.value=C,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Tr),[[ve,a.value]])]))])):f(a.field)==="select"?(n(),c("div",Pr,[a.isMultiSelect?(n(),c("div",Fr,[k(a.value).length>0?(n(),c("div",Vr,[(n(!0),c(W,null,X(k(a.value),(C,ae)=>(n(),c("span",{key:ae,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[Y(S(se(C,a.field))+" ",1),o("button",{onClick:Te=>V(a,ae),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},r[15]||(r[15]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ar)]))),128))])):D("",!0)])):(n(),c("div",Rr,[a.field==="priority"||a.field==="status"||a.field==="issue_type"?ge((n(),c("select",{key:0,"onUpdate:modelValue":C=>a.value=C,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Dr,"Select "+S(h(a.field))+"...",1),(n(!0),c(W,null,X(I(a.field),C=>(n(),c("option",{key:C.value,value:C.value},S(C.label),9,Or))),128))],8,Mr)),[[as,a.value]]):D("",!0)]))])):f(a.field)==="link"?(n(),c("div",jr,[o("div",Lr,[k(a.value).length>0?(n(),c("div",Er,[(n(!0),c(W,null,X(k(a.value),(C,ae)=>(n(),c("span",{key:ae,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[Y(S(J(C,a))+" ",1),o("button",{onClick:Te=>V(a,ae),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},r[16]||(r[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Br)]))),128))])):D("",!0),o("div",Ur,[ge(o("input",{"onUpdate:modelValue":C=>a.searchValue=C,onInput:C=>P(a,a.searchValue),type:"text",placeholder:`Search and add ${h(a.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,zr),[[ve,a.searchValue]]),a.loading?(n(),c("div",Nr,r[17]||(r[17]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)]),a.suggestions&&a.suggestions.length>0&&a.searchValue?(n(),c("div",Hr,[(n(!0),c(W,null,X(a.suggestions,(C,ae)=>(n(),c("button",{key:ae,onClick:Te=>M(a,C),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Jr,S(C.label),1),o("div",Kr,S(C.subtitle),1)],8,qr))),128))])):D("",!0)])])):f(a.field)==="tags"?(n(),c("div",Wr,[A(a.value).length>0?(n(),c("div",Qr,[(n(!0),c(W,null,X(A(a.value),(C,ae)=>(n(),c("span",{key:ae,class:"inline-flex items-center px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full border border-purple-200 hover:bg-purple-200 transition-colors"},[Y(S(C)+" ",1),o("button",{onClick:Te=>L(a,ae),class:"ml-1 text-purple-600 hover:text-red-600 transition-colors"},r[18]||(r[18]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Gr)]))),128))])):D("",!0),o("div",Xr,[ge(o("input",{"onUpdate:modelValue":C=>a.tagInput=C,onInput:C=>Q(a,a.tagInput),onKeyup:[mt(C=>G(a),["enter"]),mt(C=>G(a),["comma"])],type:"text",placeholder:"Search and select tags or type new ones...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Yr),[[ve,a.tagInput]]),a.loadingTags?(n(),c("div",Zr,r[19]||(r[19]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)]),a.tagSuggestions&&a.tagSuggestions.length>0?(n(),c("div",ea,[(n(!0),c(W,null,X(a.tagSuggestions,(C,ae)=>(n(),c("button",{key:ae,onClick:Te=>pe(a,C),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",sa,[o("div",null,[o("div",oa,S(C.label),1),o("div",ra,S(C.subtitle),1)]),C.color?(n(),c("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:Ie({backgroundColor:C.color})},null,4)):D("",!0)])],8,ta))),128))])):D("",!0),r[20]||(r[20]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags or press Enter/comma to create new tags",-1))])):D("",!0)]),o("div",aa,[o("button",{onClick:C=>ie(E),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},r[21]||(r[21]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,la)])]))),128))])),g.value.length>0?(n(),c("div",na,[o("button",{onClick:Ce,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:Fe,disabled:!x.value||v.value,class:N(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",v.value?"bg-gray-700 text-white cursor-wait":x.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[v.value?(n(),c("span",ua,r[22]||(r[22]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Y(" Applying... ")]))):(n(),c("span",ca,S(x.value?"Apply Filters":"Filters Applied"),1))],10,ia)])):D("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:r[2]||(r[2]=a=>d.value=!1)})])):D("",!0)]))}},pa=Be(da,[["__scopeId","data-v-b8ffb355"]]),ga={class:"bg-white rounded-lg shadow-sm border mt-4"},ma={class:"px-6 py-4 flex items-center justify-between"},va={class:"text-sm text-gray-700"},fa={key:0},ha={key:1},ba={key:0,class:"flex items-center space-x-2"},ya={class:"flex items-center space-x-1"},xa={key:1,class:"px-2 text-gray-500"},wa={key:2,class:"px-2 text-gray-500"},_a={key:1,class:"flex items-center space-x-2"},ka={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(t,{emit:e}){const s=t,l=e,i=F(s.itemsPerPage);xe(()=>s.itemsPerPage,I=>{i.value=I});const d=R(()=>Math.ceil(s.totalItems/s.itemsPerPage)),g=R(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),b=R(()=>{const I=s.currentPage*s.itemsPerPage;return Math.min(I,s.totalItems)}),m=R(()=>{const I=[],O=s.maxVisiblePages,k=s.currentPage,V=d.value;if(V<=O)for(let A=1;A<=V;A++)I.push(A);else{let A=Math.max(1,k-Math.floor(O/2)),L=Math.min(V,A+O-1);L-A+1<O&&(A=Math.max(1,L-O+1)),A>1&&(A=Math.max(2,A)),L<V&&(L=Math.min(V-1,L));for(let J=A;J<=L;J++)I.push(J)}return I}),v=R(()=>d.value>s.maxVisiblePages&&!m.value.includes(1)),u=R(()=>d.value>s.maxVisiblePages&&!m.value.includes(d.value)),_=R(()=>v.value&&m.value.length>0&&m.value[0]>2),y=R(()=>u.value&&m.value.length>0&&m.value[m.value.length-1]<d.value-1),x=R(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),f=I=>{I>=1&&I<=d.value&&I!==s.currentPage&&(l("update:currentPage",I),l("pageChange",{page:I,itemsPerPage:s.itemsPerPage,offset:(I-1)*s.itemsPerPage}))},h=()=>{s.currentPage>1&&f(s.currentPage-1)},$=()=>{s.currentPage<d.value&&f(s.currentPage+1)},T=()=>{const I=i.value;l("update:itemsPerPage",I);const O=(s.currentPage-1)*s.itemsPerPage+1,k=Math.ceil(O/I);l("pageChange",{page:k,itemsPerPage:I,offset:(k-1)*I})};return(I,O)=>(n(),c("div",ga,[o("div",ma,[o("div",va,[t.totalItems>0?(n(),c("span",fa," Showing "+S(g.value)+" to "+S(b.value)+" of "+S(t.totalItems)+" results ",1)):(n(),c("span",ha," No results found "))]),d.value>1?(n(),c("div",ba,[U(w(fe),{theme:"gray",variant:"outline",size:"sm",disabled:t.currentPage===1,onClick:h},{prefix:H(()=>[U(w($e),{name:"chevron-left",class:"h-4 w-4"})]),default:H(()=>[O[3]||(O[3]=Y(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",ya,[v.value?(n(),K(w(fe),{key:0,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":t.currentPage===1}),onClick:O[0]||(O[0]=k=>f(1))},{default:H(()=>O[4]||(O[4]=[Y(" 1 ")])),_:1,__:[4]},8,["class"])):D("",!0),_.value?(n(),c("span",xa,"...")):D("",!0),(n(!0),c(W,null,X(m.value,k=>(n(),K(w(fe),{key:k,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":t.currentPage===k}),onClick:V=>f(k)},{default:H(()=>[Y(S(k),1)]),_:2},1032,["class","onClick"]))),128)),y.value?(n(),c("span",wa,"...")):D("",!0),u.value?(n(),K(w(fe),{key:3,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":t.currentPage===d.value}),onClick:O[1]||(O[1]=k=>f(d.value))},{default:H(()=>[Y(S(d.value),1)]),_:1},8,["class"])):D("",!0)]),U(w(fe),{theme:"gray",variant:"outline",size:"sm",disabled:t.currentPage===d.value,onClick:$},{suffix:H(()=>[U(w($e),{name:"chevron-right",class:"h-4 w-4"})]),default:H(()=>[O[5]||(O[5]=Y(" Next "))]),_:1,__:[5]},8,["disabled"])])):D("",!0),t.showItemsPerPage?(n(),c("div",_a,[O[6]||(O[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),U(w(ls),{modelValue:i.value,"onUpdate:modelValue":O[2]||(O[2]=k=>i.value=k),options:x.value,onChange:T,class:"w-20"},null,8,["modelValue","options"])])):D("",!0)])]))}},Ca={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Sa={class:"text-3xl font-bold text-gray-900"},Ia={class:"text-3xl font-bold text-blue-600"},$a={class:"text-3xl font-bold text-green-600"},Ta={class:"text-3xl font-bold text-orange-600"},Pa={class:"text-3xl font-bold text-purple-600"},Ra=3e4,Ma={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(t,{expose:e,emit:s}){const l=t,i=s,d=Ae({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),g=R(()=>d.value.team_tickets),b=R(()=>d.value.open_tickets),m=R(()=>d.value.assigned_to_me),v=R(()=>d.value.actionable_tickets),u=R(()=>d.value.response_tickets);let _=null,y=0;const x=()=>ce(this,null,function*(){const T=Date.now();if(_&&T-y<Ra)return _;try{const I=yield Ft("force_trans_customization.api.issues.get_issue_stats");return d.value=I,_=I,y=T,I}catch(I){return console.error("Error fetching issue stats:",I),d.value}});let f=null;const h=()=>{f&&clearTimeout(f),f=setTimeout(()=>{x()},500)};Oe(()=>{x()}),xe(()=>l.issues.length,()=>{h()});const $=T=>{i("filter-changed",T)};return e({refreshStats:x}),(T,I)=>(n(),c("div",Ca,[o("div",{onClick:I[0]||(I[0]=O=>$("team_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",t.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Sa,S(g.value),1),I[5]||(I[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:I[1]||(I[1]=O=>$("open_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",t.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",Ia,S(b.value),1),I[6]||(I[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:I[2]||(I[2]=O=>$("assigned_to_me")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",t.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",$a,S(m.value),1),I[7]||(I[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:I[3]||(I[3]=O=>$("actionable_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",t.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Issues where customer awaits our reply"},[o("div",Ta,S(v.value),1),I[8]||(I[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:I[4]||(I[4]=O=>$("response_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",t.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Issues awaiting customer response"},[o("div",Pa,S(u.value),1),I[9]||(I[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Da={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const t=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[t]||"gray"}},components:{Badge:ot}},Oa={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const t=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[t]||"yellow"},priorityIndicatorClass(){const t=this.priority||"Medium";return{"bg-red-500":t==="Critical","bg-red-400":t==="High","bg-yellow-400":t==="Medium","bg-green-400":t==="Low"}}},components:{Badge:ot}},Fa={components:{ListView:Ys,Avatar:_s,Badge:ot,Button:fe,FeatherIcon:$e,ListHeader:Rt,ListHeaderItem:Pt,ListRow:at,ListRowItem:Mt,ListRows:Dt,ListSelectBanner:Ot,StatusBadge:Da,PriorityBadge:Oa,Tooltip:It,Dialog:ns},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(t,{emit:e}){const s=F(!1),l=F(null),i=F({x:0,y:0}),d=F(!1),g=F({x:0,y:0}),b=F(null),m=F(!1),v=F(null),u=F([]),_=F(!1),y=r=>{if(!r||typeof r!="string")return"?";if(r.includes("@")){const a=r.split("@")[0];return a.includes(".")||a.includes("_")?a.split(/[._]/).map(C=>C[0]).join("").toUpperCase().slice(0,2):a.slice(0,2).toUpperCase()}return r.includes(" ")?r.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2):r.slice(0,2).toUpperCase()},x=r=>{if(!r)return"";const a=r.match(/ISS-(\d{4}-\d+)/);return a?a[1]:r},f=r=>{if(!r)return"";if(typeof r!="string")return String(r);try{const a=document.createElement("div");return a.innerHTML=r,(a.textContent||a.innerText||"").replace(/\s+/g," ").trim()}catch(a){return console.warn("Error stripping HTML:",a),String(r).replace(/\s+/g," ").trim()}},h=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",$=r=>r?new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",T=r=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[r]||"gray",I=r=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[r]||"yellow",O=new Map,k=R(()=>t.issues.map(r=>{const a=r.name;if(O.has(a)){const C=O.get(a);if(C.originalStatus===r.status&&C.originalPriority===r.priority&&C.originalSubject===r.subject&&C.originalUsersAssigned===JSON.stringify(r.custom_users_assigned))return C.transformed}const E=Ye(be({},r),{status:{label:r.status||"New",color:T(r.status)},priority:{label:r.priority||"Medium",color:I(r.priority)}});return O.set(a,{transformed:E,originalStatus:r.status,originalPriority:r.priority,originalSubject:r.subject,originalUsersAssigned:JSON.stringify(r.custom_users_assigned)}),E})),V=Ae([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),A=Ae({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:r=>{console.log("Row clicked:",r)}}),L=r=>{console.log("Selected rows:",r)},J=r=>{console.log("Issue clicked:",r);const E=`${window.location.origin}/app/issue/${r.name}`;window.open(E,"_blank")},M=r=>{const a=r||"New";return{"bg-blue-500":a==="New","bg-orange-500":a==="In Review","bg-yellow-500":a==="Waiting on Customer","bg-purple-500":a==="Confirmed","bg-blue-500":a==="In Transit","bg-gray-500":a==="In Transit Unmanaged","bg-green-500":a==="Delivered","bg-green-500":a==="Closed","bg-red-500":a==="Open","bg-orange-500":a==="Replied","bg-yellow-500":a==="On Hold","bg-green-500":a==="Resolved"}},Z=r=>{const a=r||"Medium";return{"bg-red-500":a==="Critical"||a==="High","bg-yellow-500":a==="Medium","bg-green-500":a==="Low"}},Q=r=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[r||"New"]||"bg-gray-100 text-gray-800",G=r=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[r||"Medium"]||"bg-yellow-100 text-yellow-800",pe=r=>{const a=r||"Medium";return{"bg-red-500":a==="Critical","bg-red-400":a==="High","bg-yellow-400":a==="Medium","bg-green-400":a==="Low"}},ne=(r,a)=>{const E=r.target.getBoundingClientRect();i.value={x:E.left+E.width/2,y:E.top-10},l.value=a,s.value=!0},P=()=>{s.value=!1,l.value=null},j=(r,a)=>{if(!a||a.length===0)return;const E=r.target.getBoundingClientRect();g.value={x:E.left+E.width/2,y:E.top-10},b.value=a,d.value=!0},q=()=>{d.value=!1,b.value=null},se=r=>ce(this,null,function*(){v.value=r,m.value=!0,_.value=!0,u.value=[];try{const a=yield Ft("force_trans_customization.api.issues.get_issue_communications",{issue_name:r.name,limit:5});u.value=a||[]}catch(a){console.error("Error fetching communications:",a),u.value=[]}finally{_.value=!1}}),ee=()=>{var r;(r=v.value)!=null&&r.name&&window.open(`/app/issue/${v.value.name}`,"_blank")},ke=r=>{let a="asc";t.sortField===r&&(a=t.sortDirection==="asc"?"desc":"asc"),e("sort",{field:r,direction:a})},ie=r=>t.sortField!==r?"arrow-up-down":t.sortDirection==="asc"?"arrow-up":"arrow-down",re=r=>t.sortField!==r?"text-gray-400":"text-blue-600",Fe=r=>t.sortField===r?"bg-blue-50":"",Ce=new Map;return{columns:V,listOptions:A,transformedIssues:k,handleSelections:L,handleIssueClick:J,getStatusColor:M,getPriorityColor:Z,getStatusBadgeClass:Q,getPriorityBadgeClass:G,getPriorityIndicatorClass:pe,getInitials:y,formatIssueId:x,stripHtml:f,formatDate:h,formatTime:$,showPopup:s,popupUser:l,popupPosition:i,showUserPopup:ne,hideUserPopup:P,handleColumnSort:ke,getSortIcon:ie,getSortIconClass:re,getSortButtonClass:Fe,getTagStyle:r=>{if(Ce.has(r))return Ce.get(r);const a=no(r);let E;if(a){const C=a.replace("#",""),ae=parseInt(C.substr(0,2),16),Te=parseInt(C.substr(2,2),16),lt=parseInt(C.substr(4,2),16),Lt=`rgba(${ae}, ${Te}, ${lt}, 0.1)`,nt=`rgb(${Math.max(ae-50,0)}, ${Math.max(Te-50,0)}, ${Math.max(lt-50,0)})`;E={backgroundColor:Lt,color:nt,borderColor:nt}}else E={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return Ce.set(r,E),E},getCommunicationStatusTheme:r=>r==="Sent"?"blue":r==="Received"?"green":"gray",formatDateTime:r=>r?new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",sanitizeContent:r=>{if(!r)return"";let a=r.replace(/<blockquote[\s\S]*?<\/blockquote>/gi,"");return a=a.replace(/&nbsp;/gi," "),a=a.replace(/\s+/g," ").replace(/<p><br><\/p>/gi,""),a=a.trim(),a},showTagsPopup:d,tagsPopupPosition:g,tagsPopupData:b,showTagsPopupFn:j,hideTagsPopupFn:q,showCommunicationDialog:m,selectedIssue:v,communications:u,loadingCommunications:_,openCommunicationDialog:se,openIssue:ee}}},Va={class:"bg-white rounded-lg shadow-sm border"},Aa={key:0,class:"px-6 py-12 text-center text-gray-500"},ja=["onClick"],La=["onClick"],Ea={key:1,class:"max-w-xs"},Ba=["onClick"],Ua={class:"text-gray-500 text-sm mt-1 description-text cursor-help"},za={class:"text-sm font-medium text-gray-900 truncate block cursor-help"},Na={key:3,class:"flex flex-wrap gap-1"},Ha=["onMouseenter"],qa={key:1,class:"text-gray-400 text-sm"},Ja=["onMouseenter"],Ka=["title"],Wa={class:"truncate"},Qa={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},Ga={key:1,class:"text-gray-400 text-sm"},Xa={key:5,class:"flex flex-col"},Ya={class:"text-sm"},Za={class:"text-xs text-gray-400"},el={class:"flex gap-2"},tl={class:"text-sm"},sl={class:"font-semibold text-gray-900 mb-1"},ol={class:"text-gray-600 flex items-center gap-1"},rl={class:"text-xs text-gray-500 mt-1"},al={class:"text-sm"},ll={class:"flex flex-wrap gap-1"},nl={key:0,class:"flex items-center justify-center py-8"},il={key:1,class:"text-center py-8 text-gray-500"},ul={key:2,class:"space-y-4 p-4 max-h-96 overflow-y-auto"},cl={key:0,class:"mb-4 flex justify-end"},dl={class:"flex items-start justify-between mb-3"},pl={class:"flex-1"},gl={class:"flex items-center gap-2 mb-1"},ml={class:"font-medium text-gray-900 truncate"},vl={class:"text-sm text-gray-600 flex items-center gap-4"},fl={class:"prose prose-sm max-w-none"},hl=["innerHTML"],bl={class:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500 flex items-center justify-between"},yl={key:0,class:"text-green-600"};function xl(t,e,s,l,i,d){var O;const g=de("FeatherIcon"),b=de("ListHeaderItem"),m=de("ListHeader"),v=de("Avatar"),u=de("Tooltip"),_=de("ListRowItem"),y=de("ListRow"),x=de("ListRows"),f=de("Button"),h=de("ListSelectBanner"),$=de("ListView"),T=de("Badge"),I=de("Dialog");return n(),c("div",Va,[e[13]||(e[13]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(n(),c("div",Aa,e[5]||(e[5]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(n(),K($,{key:1,columns:l.columns,rows:l.transformedIssues,"row-key":"name",options:l.listOptions,"onUpdate:selections":l.handleSelections,class:"p-4"},{default:H(()=>[U(m,null,{default:H(()=>[(n(!0),c(W,null,X(l.columns,k=>(n(),K(b,{key:k.key,item:k},is({_:2},[k.icon?{name:"prefix",fn:H(({item:V})=>[U(g,{name:V.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,k.sortable?{name:"suffix",fn:H(()=>[o("button",{onClick:V=>l.handleColumnSort(k.key),class:N(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",l.getSortButtonClass(k.key)])},[U(g,{name:l.getSortIcon(k.key),class:N(["h-3 w-3",l.getSortIconClass(k.key)])},null,8,["name","class"])],10,ja)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),U(x,null,{default:H(()=>[(n(!0),c(W,null,X(l.transformedIssues,k=>(n(),K(y,{key:k.name,row:k},{default:H(({column:V,item:A})=>[U(_,{item:A,align:V.align},{prefix:H(()=>[V.key==="raised_by"?(n(),K(v,{key:0,size:"sm",label:l.getInitials(k.raised_by),class:"mr-3"},null,8,["label"])):D("",!0)]),default:H(()=>{var L,J;return[V.key==="name"?(n(),c("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:Me(M=>l.handleIssueClick(k),["prevent"])},S(l.formatIssueId(A)),9,La)):V.key==="subject"?(n(),c("div",Ea,[o("div",{class:"font-medium truncate cursor-pointer",onClick:M=>l.openCommunicationDialog(k)},S(k.subject),9,Ba),k.description?(n(),K(u,{key:0,text:l.stripHtml(k.description),placement:"top"},{default:H(()=>[o("div",Ua,S(l.stripHtml(k.description)),1)]),_:2},1032,["text"])):D("",!0)])):D("",!0),V.key==="raised_by"?(n(),K(u,{key:2,text:A||"-",placement:"top"},{default:H(()=>[o("span",za,S(A||"-"),1)]),_:2},1032,["text"])):V.key==="custom_users_assigned"?(n(),c("div",Na,[k.custom_users_assigned&&k.custom_users_assigned.length>0?(n(!0),c(W,{key:0},X(k.custom_users_assigned.filter(M=>M.user_assigned),M=>(n(),c("div",{key:M.name||M,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:Z=>l.showUserPopup(Z,M),onMouseleave:e[0]||(e[0]=(...Z)=>l.hideUserPopup&&l.hideUserPopup(...Z))},S(l.getInitials(M.user_assigned)),41,Ha)]))),128)):(n(),c("span",qa,"-"))])):V.key==="_user_tags"?(n(),c("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:M=>l.showTagsPopupFn(M,k._user_tags),onMouseleave:e[1]||(e[1]=(...M)=>l.hideTagsPopupFn&&l.hideTagsPopupFn(...M))},[k._user_tags&&k._user_tags.length>0?(n(),c(W,{key:0},[o("span",{style:Ie(l.getTagStyle(k._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:k._user_tags[0]},[o("span",Wa,S(k._user_tags[0]),1)],12,Ka),k._user_tags.length>1?(n(),c("span",Qa," +"+S(k._user_tags.length-1),1)):D("",!0)],64)):(n(),c("span",Ga,"-"))],40,Ja)):V.key==="creation"?(n(),c("div",Xa,[o("span",Ya,S(l.formatDate(A)),1),o("span",Za,S(l.formatTime(A)),1)])):V.key==="status"?(n(),c("span",{key:6,class:N([l.getStatusBadgeClass(((L=k.status)==null?void 0:L.label)||k.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},S(((J=k.status)==null?void 0:J.label)||k.status||"New"),3)):D("",!0)]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),U(h,null,{actions:H(({unselectAll:k})=>[o("div",el,[U(f,{variant:"ghost",label:"Delete"}),U(f,{variant:"ghost",label:"Unselect all",onClick:k},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),l.showPopup&&l.popupUser?(n(),c("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:Ie({left:l.popupPosition.x+"px",top:l.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",tl,[o("div",sl,S(l.popupUser.user_assigned||"Unknown User"),1),o("div",ol,[e[6]||(e[6]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),Y(" "+S(l.popupUser.team||"No Team"),1)]),o("div",rl," Assigned: "+S(l.formatDate(l.popupUser.assigned_date)),1)])],4)):D("",!0),l.showTagsPopup&&l.tagsPopupData?(n(),c("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:Ie({left:l.tagsPopupPosition.x+"px",top:l.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",al,[e[7]||(e[7]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",ll,[(n(!0),c(W,null,X(l.tagsPopupData,k=>(n(),c("span",{key:k,style:Ie(l.getTagStyle(k)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},S(k),5))),128))])])],4)):D("",!0),U(I,{modelValue:l.showCommunicationDialog,"onUpdate:modelValue":e[4]||(e[4]=k=>l.showCommunicationDialog=k),options:{title:`Communications - ${((O=l.selectedIssue)==null?void 0:O.name)||""}`,size:"xl"}},{body:H(()=>{var k;return[l.loadingCommunications?(n(),c("div",nl,e[8]||(e[8]=[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1),o("span",{class:"ml-2 text-gray-600"},"Loading communications...",-1)]))):l.communications.length===0?(n(),c("div",il,[U(g,{name:"mail",class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e[9]||(e[9]=o("p",null,"No communications found for this issue",-1))])):(n(),c("div",ul,[(k=l.selectedIssue)!=null&&k.name?(n(),c("div",cl,[o("button",{onClick:e[2]||(e[2]=(...V)=>l.openIssue&&l.openIssue(...V)),class:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2"},[U(g,{name:"external-link",class:"h-4 w-4"}),e[10]||(e[10]=Y(" Open Issue "))])])):D("",!0),(n(!0),c(W,null,X(l.communications,(V,A)=>(n(),c("div",{key:V.name,class:N(["border rounded-lg p-4 hover:bg-gray-50 transition-colors",{"border-blue-200 bg-blue-50":V.sent_or_received==="Sent","border-green-200 bg-green-50":V.sent_or_received==="Received"}])},[o("div",dl,[o("div",pl,[o("div",gl,[U(g,{name:V.sent_or_received==="Sent"?"arrow-up":"arrow-down",class:N(["h-4 w-4",{"text-blue-600":V.sent_or_received==="Sent","text-green-600":V.sent_or_received==="Received"}])},null,8,["name","class"]),o("h4",ml,S(V.subject||"No Subject"),1)]),o("div",vl,[o("span",null,S(V.sender||"-"),1),o("span",null,S(V.relative_time||l.formatDateTime(V.creation)),1),U(T,{label:V.sent_or_received,theme:l.getCommunicationStatusTheme(V.sent_or_received),variant:"subtle",size:"sm"},null,8,["label","theme"])])])]),o("div",fl,[o("div",{class:"text-gray-800 leading-relaxed whitespace-pre-wrap",innerHTML:l.sanitizeContent(V.content)||"No content"},null,8,hl)]),o("div",bl,[o("span",null,S(V.communication_medium||"Email")+" • "+S(l.formatDateTime(V.creation)),1),V.seen?(n(),c("span",yl,[U(g,{name:"check",class:"h-3 w-3 inline"}),e[11]||(e[11]=Y(" Seen "))])):D("",!0)])],2))),128))]))]}),actions:H(()=>[U(f,{variant:"ghost",onClick:e[3]||(e[3]=k=>l.showCommunicationDialog=!1)},{default:H(()=>e[12]||(e[12]=[Y(" Close ")])),_:1,__:[12]})]),_:1},8,["modelValue","options"])])}const wl=Be(Fa,[["render",xl],["__scopeId","data-v-61e2cf3d"]]),_l={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},kl={class:"flex items-start justify-between"},Cl={class:"flex items-start space-x-3"},Sl={class:"flex-shrink-0"},Il={class:"flex-1 min-w-0"},$l={class:"text-sm font-medium text-gray-900"},Tl={class:"text-sm text-gray-600 mt-1"},Pl={class:"text-xs text-gray-500 mt-1"},Rl=["onClick"],Ml={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(t){const e=d=>{const g="bg-white/95 border-l-4",b={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${g} ${b[d]||b.info}`},s=d=>{const g={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return g[d]||g.info},l=d=>{const g={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return g[d]||g.info},i=d=>{const b=new Date-d,m=Math.floor(b/6e4);if(m<1)return"Just now";if(m<60)return`${m}m ago`;const v=Math.floor(m/60);return v<24?`${v}h ago`:d.toLocaleDateString()};return(d,g)=>(n(),c("div",_l,[U(us,{name:"notification",tag:"div"},{default:H(()=>[(n(!0),c(W,null,X(t.notifications,b=>(n(),c("div",{key:b.id,class:N([e(b.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",kl,[o("div",Cl,[o("div",Sl,[U(w($e),{name:s(b.type),class:N([l(b.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",Il,[o("p",$l,S(b.title),1),o("p",Tl,S(b.message),1),o("p",Pl,S(i(b.timestamp)),1)])]),o("button",{onClick:m=>d.$emit("remove",b.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[U(w($e),{name:"x",class:"h-4 w-4"})],8,Rl)])],2))),128))]),_:1})]))}},Dl=Be(Ml,[["__scopeId","data-v-d57fd7d2"]]);function Ol(t,e){let s;return function(...i){const d=()=>{clearTimeout(s),t(...i)};clearTimeout(s),s=setTimeout(d,e)}}function Fl(){const t=F(""),e=F({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=F(""),l=Ol(x=>{s.value=x},300);xe(t,x=>{l(x)});const i=R(()=>{const x={};return s.value.trim()&&(x.subject=["like",`%${s.value.trim()}%`]),e.value.status&&(x.status=e.value.status),e.value.priority&&(x.priority=e.value.priority),e.value.assignee&&(x.raised_by=e.value.assignee),e.value.tags&&(x.issue_type=e.value.tags),x}),d=R(()=>e.value.sortBy||"creation desc"),g=new Map,b=x=>{if(!x||!Array.isArray(x))return[];const f=JSON.stringify({issuesLength:x.length,searchQuery:t.value.trim(),status:e.value.status,priority:e.value.priority,assignee:e.value.assignee,tags:e.value.tags,sortBy:e.value.sortBy});if(g.has(f))return g.get(f);let h=[...x];if(t.value.trim()){const T=t.value.toLowerCase().trim();h=h.filter(I=>{const O=(I.subject||"").toLowerCase(),k=(I.description||"").toLowerCase();return O.includes(T)||k.includes(T)})}e.value.status&&(h=h.filter(T=>T.status===e.value.status)),e.value.priority&&(h=h.filter(T=>T.priority===e.value.priority)),e.value.assignee&&(h=h.filter(T=>T.raised_by===e.value.assignee)),e.value.tags&&(h=h.filter(T=>T.issue_type===e.value.tags));const $=Pe({Critical:4,High:3,Medium:2,Low:1});if(h.sort((T,I)=>{const[O,k]=e.value.sortBy.split(" "),V=T[O]||"",A=I[O]||"";let L=0;return O==="creation"||O==="modified"?L=new Date(V)-new Date(A):O==="priority"?L=($[V]||0)-($[A]||0):L=V.toString().localeCompare(A.toString()),k==="desc"?-L:L}),g.size>50){const T=g.keys().next().value;g.delete(T)}return g.set(f,h),h};let m=null,v=null;const u=x=>{if(!x||!Array.isArray(x))return Pe([{label:"All Assignees",value:""}]);const f=x.map(T=>T.raised_by).filter(T=>T&&T.trim()).sort().join("|");if(m&&v===f)return m;const h=[...new Set(x.map(T=>T.raised_by).filter(T=>T&&T.trim()))],$=Pe([{label:"All Assignees",value:""},...h.map(T=>({label:T,value:T}))]);return m=$,v=f,$},_=()=>{t.value="",s.value="",e.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},y=R(()=>t.value.trim()!==""||e.value.status!==""||e.value.priority!==""||e.value.assignee!==""||e.value.tags!==""||e.value.sortBy!=="creation desc");return{searchQuery:t,filters:e,debouncedSearchQuery:s,apiFilters:i,sortOrder:d,hasActiveFilters:y,filterIssues:b,getAssigneeOptions:u,resetFilters:_}}function Vl(t,e){const s=cs(),l=F([]),i=F(!1),d=F(!1);let g=null;const b=d.value?15e3:2e3,m=()=>{g&&clearTimeout(g),g=setTimeout(()=>{_()},b)},v=()=>{if(!s||i.value)return;s.emit("doctype_subscribe","Issue"),s.off("list_update"),s.on("list_update",L=>{if((L==null?void 0:L.doctype)==="Issue"&&!h()){if(L.action==="insert"||L.action==="create"){console.log("📝 Skipping new issue creation update:",L.name);return}l.value.push(L),m()}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(L=>{s.on(L,J=>{if((J==null?void 0:J.doctype)!=="Issue"||h())return;const M={doctype:"Issue",name:J.name,action:L.includes("create")?"insert":L.includes("delete")?"delete":"update",modified_by:J.modified_by||J.owner,timestamp:new Date().toISOString()};if(M.action==="insert"){console.log("📝 Skipping new issue creation update:",J.name);return}l.value.push(M),m()})}),i.value=!0},u=()=>{if(!s||!i.value)return;s.emit("doctype_unsubscribe","Issue"),s.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(L=>{s.off(L)}),i.value=!1},_=()=>ce(this,null,function*(){if(!l.value.length)return;const A=window.location.hash||window.location.pathname;if(!A.includes("issue-tracker")&&!A.includes("issues")){l.value=[],u();return}const L=[...new Set(l.value.map(M=>M.name))],J=L.length;l.value=[];try{yield y(L),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:J,documents:L}}))}catch(M){console.error("Error updating individual rows, falling back to full refresh:",M);try{yield Le(),yield We()}catch(Z){console.error("Error in fallback refresh:",Z)}}}),y=A=>ce(this,null,function*(){try{const{activeResource:L,currentData:J}=x();if(!J||!Array.isArray(J)){console.log("📋 No current data available, falling back to custom refresh"),e&&typeof e=="function"&&(yield e());return}let M={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(t&&typeof t=="function")try{const G=t();G&&(M=be(be({},M),G))}catch(G){console.warn("Error getting current parameters, using defaults:",G)}const Z=J.map(G=>G.name),Q=A.filter(G=>Z.includes(G));if(Q.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${Q.length} visible issues:`,Q),yield f(Q,L,J)}catch(L){throw console.error("Error during targeted refresh:",L),e&&typeof e=="function"&&(yield e()),L}}),x=()=>Se.data&&Array.isArray(Se.data)&&Se.data.length>0?{activeResource:Se,currentData:Se.data,resourceType:"stat"}:{activeResource:Ee,currentData:Ee.data||[],resourceType:"main"},f=(A,L,J)=>ce(this,null,function*(){try{const Z=(yield Promise.all(A.map(Q=>ce(this,null,function*(){try{return yield Zs(Q),At.data}catch(G){return console.warn(`Failed to fetch updated issue ${Q}:`,G),null}})))).filter(Q=>Q!==null);if(Z.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),e&&typeof e=="function"&&(yield e());return}if(L.data&&Array.isArray(L.data))Z.forEach(Q=>{const G=L.data.findIndex(pe=>pe.name===Q.name);G!==-1&&Object.assign(L.data[G],Q)});else{const Q=[...J];Z.forEach(G=>{const pe=Q.findIndex(ne=>ne.name===G.name);pe!==-1&&(Q[pe]=G)}),L.data=Q}console.log(`🎯 Successfully updated ${Z.length} issues in current view`)}catch(M){console.error("Error updating visible issues in place:",M),e&&typeof e=="function"&&(yield e())}}),h=()=>!!document.hidden,$=F(!1),T=()=>{document.hidden?$.value=!0:$.value&&($.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),l.value.length>0?(console.log(`📋 Processing ${l.value.length} pending updates`),_()):I())},I=()=>{l.value=[];try{e&&typeof e=="function"?e():(Le(),We())}catch(A){console.error("Error during manual refresh:",A)}},O=()=>{v()},k=()=>{i.value=!1},V=A=>{console.error("Socket connection error:",A),i.value=!1};return Oe(()=>{s&&(s.on("connect",O),s.on("disconnect",k),s.on("connect_error",V),document.addEventListener("visibilitychange",T),s.connected&&v())}),Ge(()=>{s&&(s.off("connect",O),s.off("disconnect",k),s.off("connect_error",V)),document.removeEventListener("visibilitychange",T),u(),g&&clearTimeout(g)}),{pendingDocumentRefreshes:l,realtimeEventsSetup:i,setupRealtimeUpdates:v,disableRealtimeUpdates:u,manualRefresh:I,processDocumentRefreshes:_}}const Al={class:"min-h-screen bg-gray-50"},jl={class:"bg-white shadow-sm border-b"},Ll={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},El={class:"flex justify-between items-center py-4"},Bl={class:"flex items-center space-x-4"},Ul={class:"flex space-x-4"},zl={class:"flex items-center space-x-4"},Nl={class:"text-sm text-gray-600"},Hl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ql={class:"fixed top-20 right-4 flex flex-col space-y-2"},Jl=["title"],Kl={class:"relative"},Wl={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Xl={__name:"IssueTracker",setup(t){const{searchQuery:e,filters:s,debouncedSearchQuery:l,apiFilters:i,sortOrder:d,getAssigneeOptions:g}=Fl(),b=F(!1),m=F("team_tickets"),v=()=>{console.log("Refreshing current view:",{isUsingStatFilter:b.value,currentStatFilter:m.value,hasCustomFilters:M.value&&M.value.length>0});const B={limit_page_length:re.value,limit_start:(ie.value-1)*re.value,order_by:d.value};b.value?(M.value&&M.value.length>0&&(B.filters=JSON.stringify(M.value)),Promise.all([et(m.value,B),M.value&&M.value.length>0?Je(m.value,JSON.stringify(M.value)):Je(m.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(z=>{console.error("Error refreshing stat filter view:",z)})):Promise.all([Le(be({filters:JSON.stringify(M.value)},B)),We(JSON.stringify(M.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(z=>{console.error("Error refreshing regular filter view:",z)})},{pendingDocumentRefreshes:u,realtimeEventsSetup:_,manualRefresh:y}=Vl(()=>({filters:Ce.value,order_by:d.value,limit_page_length:re.value,limit_start:(ie.value-1)*re.value}),v),x=()=>{v()},f=F([]),h=B=>{f.value.push(be({id:Date.now()+Math.random()},B)),setTimeout(()=>{var z;$((z=f.value[f.value.length-1])==null?void 0:z.id)},5e3)},$=B=>{f.value=f.value.filter(z=>z.id!==B)},T=R(()=>b.value?Se.data||[]:Ee.data||[]),I=R(()=>b.value?jt.data||0:Vt.data||0),O=R(()=>b.value?Se.loading:Ee.loading),k=R(()=>T.value),V=R(()=>(d.value||"creation desc").split(" ")[0]),A=R(()=>(d.value||"creation desc").split(" ")[1]||"desc"),L=({field:B,direction:z})=>{const ue=`${B} ${z}`;s.value.sortBy=ue,ie.value=1,v()},J=B=>{},M=F([]),Z=B=>{console.log("Filters applied:",B),M.value=B,ie.value=1,B&&B.length>0?b.value?(console.log("Applying custom filters on top of card filter:",m.value),ne(m.value)):(console.log("Applying custom filters in regular mode"),Q()):(console.log("No filters applied, returning to default view"),G())},Q=()=>{b.value=!1,m.value="team_tickets",Promise.all([Le({filters:JSON.stringify(M.value),order_by:d.value,limit_page_length:re.value,limit_start:0}),We(JSON.stringify(M.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(B=>{console.error("Error applying custom filters:",B)})},G=()=>{b.value=!0,m.value="team_tickets",ne("team_tickets")},pe=B=>{console.log("Card clicked:",B,"Current filters:",M.value),b.value=!0,m.value=B,e.value="",ie.value=1,ne(B)},ne=B=>{const z={limit_page_length:re.value,limit_start:0,order_by:d.value};M.value&&M.value.length>0?(z.filters=JSON.stringify(M.value),console.log("Applying card filter with custom filters:",B,M.value)):console.log("Applying card filter without custom filters:",B),Promise.all([et(B,z),M.value&&M.value.length>0?Je(B,JSON.stringify(M.value)):Je(B)]).then(()=>{console.log("Card filter applied successfully")}).catch(ue=>{console.error("Error applying card filter:",ue)})},P=Ae(Pe(so())),j=Ae(Pe(oo())),q=Ae(Pe(ao()));let se=null,ee=0;const ke=R(()=>{const B=T.value.length;return se&&ee===B||(se=Pe(g(T.value)),ee=B),se}),ie=F(1),re=F(10),Fe=({page:B,itemsPerPage:z,offset:ue})=>{console.log("Page change:",{page:B,newItemsPerPage:z,offset:ue}),ie.value=B,re.value=z;const p={limit_page_length:z,limit_start:ue,order_by:d.value};b.value?(M.value&&M.value.length>0&&(p.filters=JSON.stringify(M.value)),et(m.value,p).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(r=>{console.error("Error during pagination (stat filter):",r)})):Le(be({filters:JSON.stringify(M.value)},p)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(r=>{console.error("Error during pagination (regular filter):",r)})},Ce=R(()=>{const B={};return s.value.status&&(B.status=s.value.status),s.value.priority&&(B.priority=s.value.priority),s.value.assignee&&(B.raised_by=s.value.assignee),s.value.tags&&(B.issue_type=s.value.tags),B});return Oe(()=>{console.log("IssueTracker mounted, initializing with default view"),b.value=!0,m.value="team_tickets",ne("team_tickets"),window.addEventListener("issueListUpdated",B=>{const{count:z,documents:ue}=B.detail;h({type:"info",title:"List Updated",message:`${z} issue${z>1?"s":""} updated: ${ue.slice(0,3).join(", ")}${ue.length>3?"...":""}`,timestamp:new Date})})}),Ge(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(B,z)=>{const ue=de("router-link");return n(),c("div",Al,[o("div",jl,[o("div",Ll,[o("div",El,[o("div",Bl,[z[7]||(z[7]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),o("nav",Ul,[U(ue,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:H(()=>z[5]||(z[5]=[Y(" Home ")])),_:1,__:[5]}),U(ue,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:H(()=>z[6]||(z[6]=[Y(" Issues ")])),_:1,__:[6]})])]),o("div",zl,[o("span",Nl,S(w(ft).user),1),U(w(fe),{onClick:z[0]||(z[0]=p=>w(ft).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:H(()=>z[8]||(z[8]=[Y(" Logout ")])),_:1,__:[8]})])])])]),o("div",Hl,[U(Ma,{issues:k.value,activeFilter:m.value,onFilterChanged:pe},null,8,["issues","activeFilter"]),U(pa,{searchQuery:w(e),"onUpdate:searchQuery":z[1]||(z[1]=p=>vt(e)?e.value=p:null),filters:w(s),"onUpdate:filters":z[2]||(z[2]=p=>vt(s)?s.value=p:null),statusOptions:q.value,priorityOptions:P.value,assigneeOptions:ke.value,tagsOptions:j.value,issues:T.value,filteredCount:I.value,onSuggestionSelected:J,onFiltersApplied:Z},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),U(wl,{issues:k.value,loading:O.value,sortField:V.value,sortDirection:A.value,onSort:L},null,8,["issues","loading","sortField","sortDirection"]),U(ka,{currentPage:ie.value,"onUpdate:currentPage":z[3]||(z[3]=p=>ie.value=p),itemsPerPage:re.value,"onUpdate:itemsPerPage":z[4]||(z[4]=p=>re.value=p),totalItems:I.value,onPageChange:Fe},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",ql,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:w(_)?"Real-time updates active":"Real-time updates disabled"},[o("div",Kl,[U(w($e),{name:w(_)?"wifi":"wifi-off",class:N(["h-5 w-5 transition-colors duration-200",w(_)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:N(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",w(_)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),w(u).length>0?(n(),c("div",Wl,S(w(u).length>9?"9+":w(u).length),1)):D("",!0)])],8,Jl),o("button",{onClick:x,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[U(w($e),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),U(Dl,{notifications:f.value,onRemove:$},null,8,["notifications"])])}}};export{Xl as default};
//# sourceMappingURL=IssueTracker-BjMLUsVM.js.map
