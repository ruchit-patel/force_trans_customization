var pt=Object.defineProperty,gt=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var qe=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var Ye=(r,s,t)=>s in r?pt(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,se=(r,s)=>{for(var t in s||(s={}))vt.call(s,t)&&Ye(r,t,s[t]);if(qe)for(var t of qe(s))ft.call(s,t)&&Ye(r,t,s[t]);return r},Ke=(r,s)=>gt(r,mt(s));var be=(r,s,t)=>new Promise((a,f)=>{var l=c=>{try{b(t.next(c))}catch(_){f(_)}},g=c=>{try{b(t.throw(c))}catch(_){f(_)}},b=c=>c.done?a(c.value):Promise.resolve(c.value).then(l,g);b((t=t.apply(r,s)).next())});import{g as yt,r as A,i as R,o as n,a as u,n as U,j as W,F as Y,f as J,t as P,b as o,k as D,l as ne,u as y,m as q,p as ve,q as le,v as bt,x as ce,y as fe,h as Ce,z as ze,A as G,B as ue,C as Se,d as N,w as V,D as ht,E as $e,T as _t,G as xt,H as wt,I as oe,J as kt,c as ee,K as Pe,L as Ee,M as ke,N as tt,O as We,P as Me,Q as ye,R as Ct,S as xe,U as Ue,e as re,V as St,W as $t,X as me,Y as Pt,Z as Qe,s as Ge}from"./index-s-EhdA1j.js";const It=["src","alt"],Tt=yt({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(r){const s=A(!1),t=r,a=R(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),f=R(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),l=R(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),g=R(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),b=R(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),c=R(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function _(v){v.type&&(s.value=!0)}return(v,T)=>(n(),u("div",{class:U(["relative inline-block shrink-0",[f.value,a.value]])},[v.image&&!s.value?(n(),u("img",{key:0,src:v.image,alt:v.label,class:U([a.value,"h-full w-full object-cover"]),onError:T[0]||(T[0]=I=>_(I))},null,42,It)):(n(),u("div",{key:1,class:U(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[l.value,a.value]])},[v.$slots.default?(n(),u("div",{key:0,class:U(c.value)},[W(v.$slots,"default")],2)):(n(),u(Y,{key:1},[J(P(v.label&&v.label[0]),1)],64))],2)),v.$slots.indicator?(n(),u("div",{key:2,class:U(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",g.value])},[o("div",{class:U(b.value)},[W(v.$slots,"indicator")],2)],2)):D("",!0)],2))}}),Rt={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ft={class:"text-xl font-medium"},Et={class:"mt-1 text-base text-ink-gray-5"},Lt={__name:"ListEmptyState",setup(r){const s=ne("list");return(t,a)=>(n(),u("div",Rt,[W(t.$slots,"default",{},()=>[o("div",Ft,P(y(s).options.emptyState.title),1),o("div",Et,P(y(s).options.emptyState.description),1),y(s).options.emptyState.button?(n(),q(y(le),ve({key:0},y(s).options.emptyState.button,{class:"mt-4"}),null,16)):D("",!0)])]))}};function st(r,s=!0){let t=s?"14px ":"",a=r.map(f=>{let l=f.width||1;return typeof l=="number"?l+"fr":l}).join(" ");return t+a}const He={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Mt={class:"truncate"},rt={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(r,{emit:s}){const t=r,a=s,f=A(null),l=A(null),g=R(()=>{if(typeof t.item.width=="string"){const v=parseInt(t.item.width);if(t.item.width.includes("rem"))return v*16;if(t.item.width.includes("px"))return v}return l.value.offsetWidth}),b=v=>{const T=v.clientX,I=g.value,S=w=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),f.value.style.backgroundColor="rgb(199 199 199)";let d=I+(w.clientX-T);t.item.width=`${d<50?50:d}px`,c(t.item.width)},x=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),f.value.style.backgroundColor="",window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",x)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",x)},c=bt(v=>{t.item.width=v,a("columnWidthUpdated")},t.debounce),_=ne("list");return(v,T)=>(n(),u("div",{ref_key:"columnRef",ref:l,class:U(["group relative flex items-center",r.item.align?y(He)[r.item.align]:"justify-between"])},[o("div",{class:U(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",v.$attrs.class])},[W(v.$slots,"prefix",ce(fe({item:r.item}))),W(v.$slots,"default",{},()=>[o("div",Mt,P(r.item.label),1)]),W(v.$slots,"suffix",ce(fe({item:r.item})))],2),y(_).options.resizeColumn?W(v.$slots,"resizer",ce(ve({key:0},{item:r.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:b},[o("div",{ref_key:"resizer",ref:f,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):D("",!0)],2))}},ot={__name:"ListHeader",emits:["columnWidthUpdated"],setup(r,{emit:s}){const t=s,a=ne("list");return(f,l)=>(n(),u("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ue({gridTemplateColumns:y(st)(y(a).columns,y(a).options.selectable)})},[y(a).options.selectable?(n(),q(ze,{key:0,class:"cursor-pointer duration-300",modelValue:y(a).allRowsSelected,onClick:Ce(y(a).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):D("",!0),W(f.$slots,"default",{},()=>[(n(!0),u(Y,null,G(y(a).columns,g=>(n(),q(rt,{key:g.key,item:g,onColumnWidthUpdated:b=>t("columnWidthUpdated",g)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Dt={class:"truncate text-base"},at={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(r){const s=r,t=R(()=>{var g,b;return(g=s.column)!=null&&g.getLabel?(b=s.column)==null?void 0:b.getLabel({row:s.row}):f(s.item).label||""}),a=R(()=>l.value.options.showTooltip?s.column.getTooltip?s.column.getTooltip(s.row):f(s.item).label:"");function f(g){return g&&typeof g=="object"?g:{label:g}}const l=ne("list");return(g,b)=>(n(),u("div",{class:U(["flex items-center space-x-2",y(He)[r.align]])},[W(g.$slots,"prefix",{},()=>[r.column.prefix?(n(),q(Se(typeof r.column.prefix=="function"?r.column.prefix({row:r.row}):r.column.prefix),{key:0})):D("",!0)]),N(y(ht),ce(fe(y(l).options.showTooltip?{text:a.value}:{text:""})),{default:V(()=>[W(g.$slots,"default",ce(fe({label:t.value})),()=>[o("div",Dt,P(t.value),1)])]),_:3},16),W(g.$slots,"suffix")],2))}},Ve={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(r){const s=r,t=ne("list"),a=R(()=>{var v;return(v=t.value.rows)!=null&&v.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===s.row[t.value.rowKey]:!1}),f=R(()=>t.value.selections.has(s.row[t.value.rowKey])),l=R(()=>t.value.options.enableActive&&t.value.activeRow.value===s.row.name),g=R(()=>t.value.options.getRowRoute||t.value.options.onRowClick),b=R(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),c=R(()=>{var I,S,x;if(!f.value)return"rounded";const v=[...t.value.selections];let T=(I=t.value.rows[0])!=null&&I.group?t.value.rows.map(w=>w.rows):[t.value.rows];for(let w of T){let d=w.findIndex(h=>h==s.row);if(d===-1)continue;let $=!v.includes((S=w[d+1])==null?void 0:S.name),m=!v.includes((x=w[d-1])==null?void 0:x.name);return($?"rounded-b ":"")+(m?"rounded-t":"")}}),_=(v,T)=>{t.value.options.onRowClick&&t.value.options.onRowClick(v,T),t.value.activeRow.value===v.name?t.value.activeRow.value=null:t.value.activeRow.value=v.name};return(v,T)=>(n(),q(Se(y(t).options.getRowRoute?"router-link":"div"),ve({class:[[c.value,f.value||l.value?"bg-surface-gray-2":"",g.value?"cursor-pointer":"",g.value?f.value||l.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:y(t).options.getRowRoute?y(t).options.getRowRoute(r.row):void 0,onClick:I=>_(r.row,I)}),{default:V(()=>[(n(),q(Se(y(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:V(()=>{var I,S;return[o("div",{class:"grid items-center space-x-4 px-2",style:ue({height:b.value,gridTemplateColumns:y(st)(y(t).columns,y(t).options.selectable)})},[y(t).options.selectable?(n(),u("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:T[1]||(T[1]=Ce(()=>{},["stop","prevent"])),onDblclick:T[2]||(T[2]=Ce(()=>{},["stop"]))},[N(ze,{modelValue:f.value,class:"cursor-pointer duration-300",onClick:T[0]||(T[0]=Ce(x=>y(t).toggleRow(r.row[y(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):D("",!0),(n(!0),u(Y,null,G(y(t).columns,(x,w)=>(n(),u("div",{key:x.key,class:U([y(He)[x.align],w==0?"text-ink-gray-9":"text-ink-gray-7"])},[W(v.$slots,"default",ve({ref_for:!0},{idx:w,column:x,item:r.row[x.key],isActive:l.value}),()=>[y(t).slots.cell?(n(),q(Se(y(t).slots.cell),ve({key:0,ref_for:!0},{column:x,row:r.row,item:r.row[x.key],align:x.align}),null,16)):(n(),q(at,{key:1,column:x,row:r.row,item:r.row[x.key],align:x.align},null,8,["column","row","item","align"]))])],2))),128))],4),a.value?D("",!0):(n(),u("div",{key:0,class:U(["h-px border-t",c.value==="rounded"||(S=(I=c.value)==null?void 0:I.includes)!=null&&S.call(I,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Ot={class:"h-full overflow-y-auto"},lt={__name:"ListRows",setup(r){const s=ne("list");return(t,a)=>(n(),u("div",Ot,[W(t.$slots,"default",{},()=>[(n(!0),u(Y,null,G(y(s).rows,f=>(n(),q(Ve,{key:f[y(s).rowKey],row:f},null,8,["row"]))),128))])]))}},jt={},At={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Bt(r,s){return n(),u("svg",At,s[0]||(s[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Nt=$e(jt,[["render",Bt]]),zt={class:"flex items-center"},Ut={class:"w-full py-1.5 pr-2"},Ht={key:1,class:"text-base font-medium leading-6"},Vt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(r){const s=r,t=ne("list");function a(){s.group.collapsed==null&&(s.group.collapsed=!1),s.group.collapsed=!s.group.collapsed}return(f,l)=>(n(),u(Y,null,[o("div",zt,[o("button",{onClick:a,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[N(Nt,{class:U(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[r.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),W(f.$slots,"default",{},()=>[o("div",Ut,[y(t).slots["group-header"]?(n(),q(Se(y(t).slots["group-header"]),ce(ve({key:0},{group:r.group})),null,16)):(n(),u("span",Ht,P(r.group.group),1))])])]),l[0]||(l[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},qt={key:0,class:"mb-5 mt-2"},Yt={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(r){const s=ne("list");return(t,a)=>r.group.collapsed?D("",!0):(n(),u("div",qt,[W(t.$slots,"default",{},()=>[(n(!0),u(Y,null,G(r.group.rows,f=>(n(),q(Ve,{key:f[y(s).rowKey],row:f},null,8,["row"]))),128))])]))}},Kt={class:"h-full overflow-y-auto"},Wt={__name:"ListGroups",setup(r){const s=ne("list");return(t,a)=>(n(),u("div",Kt,[(n(!0),u(Y,null,G(y(s).rows,f=>(n(),u("div",{key:f.group},[W(t.$slots,"default",{},()=>[N(Vt,{group:f},{default:V(()=>[t.$slots["group-header"]?W(t.$slots,"group-header",ve({key:0,ref_for:!0},{group:f})):D("",!0)]),_:2},1032,["group"]),N(Yt,{group:f},null,8,["group"])])]))),128))]))}},Qt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Gt={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Jt={class:"flex items-center space-x-3"},Xt={class:"mr-3"},Zt={class:"flex items-center space-x-1"},nt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(r){const s=ne("list");let t=R(()=>s.value.options.selectionText(s.value.selections.size));return(a,f)=>(n(),q(_t,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:V(()=>[y(s).selections.size?(n(),u("div",Qt,[o("div",{class:U(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",a.$attrs.class])},[W(a.$slots,"default",ce(fe({selections:y(s).selections,allRowsSelected:y(s).allRowsSelected,selectAll:()=>y(s).toggleAllRows(!0),unselectAll:()=>y(s).toggleAllRows(!1)})),()=>[o("div",Gt,[o("div",Jt,[N(ze,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,P(y(t)),1)]),o("div",Xt,[W(a.$slots,"actions",ce(fe({selections:y(s).selections,allRowsSelected:y(s).allRowsSelected,selectAll:()=>y(s).toggleAllRows(!0),unselectAll:()=>y(s).toggleAllRows(!1)})))])]),o("div",Zt,[N(y(le),{class:U(["w- text-ink-gray-7",y(s).allRowsSelected?"cursor-not-allowed":""]),disabled:y(s).allRowsSelected,variant:"ghost",onClick:f[0]||(f[0]=l=>y(s).toggleAllRows(!0))},{default:V(()=>f[2]||(f[2]=[J(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),N(y(le),{icon:"x",variant:"ghost",onClick:f[1]||(f[1]=l=>y(s).toggleAllRows(!1))})])])],2)])):D("",!0)]),_:3}))}}),es={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},ts=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(r,{expose:s,emit:t}){const a=r,f=xt();let l=wt(new Set),g=A(null);const b=t;oe(l,x=>{l.size&&(g.value=null),b("update:selections",x)}),oe(g,x=>{b("update:active-row",x)});let c=R(()=>{function x(d){return d===void 0?!0:d}function w(d){return d===void 0?!1:d}return{getRowRoute:a.options.getRowRoute||null,onRowClick:a.options.onRowClick||null,showTooltip:x(a.options.showTooltip),selectionText:a.options.selectionText||(d=>d===1?"1 row selected":`${d} rows selected`),enableActive:w(a.options.enableActive),selectable:x(a.options.selectable),resizeColumn:w(a.options.resizeColumn),rowHeight:a.options.rowHeight||40,emptyState:a.options.emptyState}});const _=R(()=>a.rows.length?T.value?l.size===a.rows.reduce((x,w)=>x+w.rows.length,0):l.size===a.rows.length:!1),v=R(()=>c.value.selectable);let T=R(()=>a.rows.every(x=>x.group&&x.rows&&Array.isArray(x.rows)));function I(x){l.delete(x)||l.add(x)}function S(x){if(!x||_.value){l.clear();return}if(T.value){a.rows.forEach(w=>{w.rows.forEach(d=>l.add(d[a.rowKey]))});return}a.rows.forEach(w=>l.add(w[a.rowKey]))}return kt("list",R(()=>({rowKey:a.rowKey,rows:a.rows,columns:a.columns,options:c.value,selections:l,activeRow:g,allRowsSelected:_.value,slots:f,toggleRow:I,toggleAllRows:S}))),s({selections:l,allRowsSelected:_,toggleRow:I,toggleAllRows:S}),(x,w)=>(n(),u("div",es,[o("div",{class:U(["flex w-max min-w-full flex-col overflow-y-hidden",x.$attrs.class]),style:ue(x.$attrs.style)},[W(x.$slots,"default",ce(fe({showGroupedRows:y(T),selectable:v.value})),()=>[N(ot),a.rows.length?(n(),u(Y,{key:0},[y(T)?(n(),q(Wt,{key:0})):(n(),q(lt,{key:1}))],64)):(n(),q(Lt,{key:1})),v.value?(n(),q(nt,{key:2})):D("",!0)])],6)]))}});function ss(a,f){return be(this,arguments,function*(r,s,t={}){s||(s={});let l=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},t.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(l["X-Frappe-CSRF-Token"]=window.csrf_token);let g=r.startsWith("/")?r:`/api/method/${r}`;const b=yield fetch(g,{method:"POST",headers:l,body:JSON.stringify(s)});if(b.ok){const c=yield b.json();if(c.docs||r==="login")return c;if(c.exc)try{console.groupCollapsed(r),console.log(`method: ${r}`),console.log("params:",s);let _=JSON.parse(c.exc);for(let v of _)console.log(v);console.groupEnd()}catch(_){console.warn("Error printing debug messages",_)}return c.message}else{let c=yield b.text(),_,v;try{_=JSON.parse(c)}catch(S){}let T=[[r,_.exc_type,_._error_message].filter(Boolean).join(" ")];if(_.exc){v=_.exc;try{v=JSON.parse(v)[0],console.log(v)}catch(S){}}let I=new Error(T.join(`
`));throw I.exc_type=_.exc_type,I.exc=v,I.status=b.status,I.messages=_._server_messages?JSON.parse(_._server_messages):[],I.messages=I.messages.concat(_.message),I.messages=I.messages.map(S=>{try{return JSON.parse(S).message}catch(x){return S}}),I.messages=I.messages.filter(Boolean),I.messages.length||(I.messages=_._error_message?[_._error_message]:["Internal Server Error"]),t.onError&&t.onError({response:b,status:b.status,error:I}),I}})}const we=ee({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(r){const s=r||{},t=s.limit_page_length||10,a=s.limit_start||0,f=s.filters||{},l=s.order_by||"creation desc";return{limit_page_length:t,limit_start:a,filters:f,order_by:l}},onError(r){console.error("Failed to fetch issues:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),it=ee({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(r){return{filters:(r||{}).filters||{}}},onError(r){console.error("Failed to fetch issues count:",r)}});function he(r={}){const s={limit_page_length:r.limit_page_length||10,limit_start:r.limit_start||0,filters:r.filters||{},order_by:r.order_by||"creation desc"};return we.reload(s)}function _e(r={}){return it.reload({filters:r})}ee({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(r){return{issue_name:r}},onError(r){console.error("Failed to fetch single issue:",r)},auto:!1});const rs=ee({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(r){console.error("Failed to fetch issue priorities:",r)},auto:!0}),os=ee({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(r){console.error("Failed to fetch issue types:",r)},auto:!0});ee({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(r){console.error("Failed to fetch projects:",r)},auto:!0});let Ie=null,Je=null,Te=null,Xe=null;function as(){const r=rs.data||[],s=JSON.stringify(r);if(Ie&&Je===s)return Ie;const t=[{label:"All Priority",value:""},...r.map(a=>({label:a.name,value:a.name}))];return Ie=Object.freeze(t),Je=s,Ie}function ls(){const r=os.data||[],s=JSON.stringify(r);if(Te&&Xe===s)return Te;const t=[{label:"All Types",value:""},...r.map(a=>({label:a.name,value:a.name}))];return Te=Object.freeze(t),Xe=s,Te}const ns=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function is(){return ns}const us=ee({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(r){console.error("Failed to fetch tag colors:",r)},auto:!0}),Re=new Map;let Ze=null;function Ae(r){const s=us.data||{},t=JSON.stringify(s);if(Ze!==t&&(Re.clear(),Ze=t),Re.has(r))return Re.get(r);const a=s[r]||null;return Re.set(r,a),a}const De=ee({url:"force_trans_customization.api.issues.issue_search",makeParams(r){const s=r||{};return{search_query:s.search_query||"",limit:s.limit||8}},onError(r){console.error("Failed to search issues:",r)},auto:!1});function cs(r,s=8){return!r||r.length<2?Promise.resolve(De.data||[]):De.reload({search_query:r,limit:s}).then(()=>De.data||[])}const Be=ee({url:"force_trans_customization.api.issues.filter_issues_by_suggestion",makeParams(r){const s=r||{};return{suggestion_type:s.suggestion_type||"",suggestion_value:s.suggestion_value||"",limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"}},onError(r){console.error("Failed to filter issues by suggestion:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),ut=ee({url:"force_trans_customization.api.issues.get_filtered_issues_count",makeParams(r){const s=r||{};return{suggestion_type:s.suggestion_type||"",suggestion_value:s.suggestion_value||""}},onError(r){console.error("Failed to get filtered issues count:",r)},auto:!1});function Oe(r,s,t={}){const a={suggestion_type:r,suggestion_value:s,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return Be.reload(a)}function et(r,s){return ut.reload({suggestion_type:r,suggestion_value:s})}const Ne=ee({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(r){const s=r||{};return{stat_type:s.stat_type||"team_tickets",limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"}},onError(r){console.error("Failed to filter issues by stat:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),ct=ee({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(r){return{stat_type:(r||{}).stat_type||"team_tickets"}},onError(r){console.error("Failed to get stat filter count:",r)},auto:!1});function Fe(r,s={}){const t={stat_type:r,limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"};return Ne.reload(t)}function je(r){return ct.reload({stat_type:r})}const ds={class:"relative w-full max-w-2xl mx-auto"},ps={class:"relative group"},gs=["placeholder"],ms={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},vs={key:1,class:"flex items-center pointer-events-none"},fs={key:2,class:"animate-spin"},ys={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},bs={class:"flex items-center justify-between"},hs={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},_s={class:"text-xs text-slate-500"},xs={key:0,class:"px-6 py-8 text-center"},ws=["onClick"],ks={class:"flex items-start space-x-4"},Cs={class:"flex-1 min-w-0"},Ss={class:"flex items-start justify-between"},$s={class:"flex-1 min-w-0"},Ps={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},Is=["innerHTML"],Ts={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Rs={key:0,class:"ml-2"},Fs={class:"flex-shrink-0 ml-4"},Es={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Ls={key:0,class:"flex items-center"},Ms={key:1,class:"flex items-center"},Ds={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Os={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(r,{expose:s,emit:t}){const a=r,f=t,l=A(null),g=A(a.modelValue),b=A(!1),c=A(!1),_=A(-1),v=A(!1),T=A(0),I=A(null),S=A([]);let x=null;oe(()=>a.modelValue,e=>{g.value=e}),oe(g,e=>{f("update:modelValue",e),f("search",e)});const w=A([]),d=e=>be(this,null,function*(){if(!e||e.length<2){w.value=[],c.value=!1,v.value=!1;return}try{v.value=!0;const i=performance.now(),E=yield cs(e,8);T.value=performance.now()-i,w.value=E||[],c.value=!0}catch(i){console.error("Search error:",i),w.value=[],c.value=!1}finally{v.value=!1}}),$=e=>{if(x&&clearTimeout(x),_.value=-1,!e||e.length<2){w.value=[],c.value=!1,v.value=!1;return}v.value=!0,x=setTimeout(()=>{d(e)},1e3)},m=()=>{$(g.value)},h=(e,i)=>{if(!e||!i)return e;const E=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),F=new RegExp(`(${E})`,"gi");return e.replace(F,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},L=e=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[e]||"bg-gray-100 text-gray-800 border border-gray-200",O=()=>{b.value=!0,B&&(clearTimeout(B),B=null),g.value.length>=2&&(w.value.length>0?c.value=!0:d(g.value))};let B=null;const K=()=>{b.value=!1,B=setTimeout(()=>{c.value=!1,B=null},200)},te=e=>{var i;if(c.value)switch(e.key){case"ArrowDown":e.preventDefault(),_.value=Math.min(_.value+1,w.value.length-1),ie();break;case"ArrowUp":e.preventDefault(),_.value=Math.max(_.value-1,-1),ie();break;case"Enter":e.preventDefault(),_.value>=0&&de(w.value[_.value]);break;case"Escape":ae(),(i=l.value)==null||i.blur();break}},de=e=>{g.value=e.name,ae();const E=`${window.location.origin}/app/issue/${e.name}`;window.open(E,"_blank"),f("suggestion-selected",e)},ge=()=>{var e;g.value="",ae(),(e=l.value)==null||e.focus()},ae=()=>{c.value=!1,_.value=-1},ie=()=>{if(_.value<0||!I.value||!S.value[_.value])return;const e=I.value,i=S.value[_.value];if(i){const E=e.getBoundingClientRect(),F=i.getBoundingClientRect(),H=F.top-E.top+e.scrollTop,p=H+F.height,C=e.scrollTop,z=e.clientHeight;H<C?e.scrollTop=H:p>C+z&&(e.scrollTop=p-z)}},pe=e=>{if(!e)return"";try{const i=new Date(e),E=new Date,F=Math.abs(E-i),H=Math.ceil(F/(1e3*60*60*24));return H===1?"Today":H===2?"Yesterday":H<=7?`${H-1} days ago`:i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:i.getFullYear()!==E.getFullYear()?"numeric":void 0})}catch(i){return console.error("Error formatting date:",i),e}},k=e=>{var i,E;(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),(i=l.value)==null||i.focus(),(E=l.value)==null||E.select())};return Pe(()=>{document.addEventListener("keydown",k)}),Ee(()=>{document.removeEventListener("keydown",k),x&&clearTimeout(x),B&&clearTimeout(B)}),s({focus:()=>{var e,i;(e=l.value)==null||e.focus(),(i=l.value)==null||i.select()},select:()=>{var e;return(e=l.value)==null?void 0:e.select()},$el:l}),(e,i)=>(n(),u("div",ds,[o("div",ps,[i[4]||(i[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ke(o("input",{ref_key:"searchInput",ref:l,type:"text","onUpdate:modelValue":i[0]||(i[0]=E=>g.value=E),onInput:m,onFocus:O,onBlur:K,onKeydown:te,placeholder:r.placeholder,class:U(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":b.value,"bg-slate-50/50":!b.value&&g.value}])},null,42,gs),[[tt,g.value]]),o("div",ms,[g.value?(n(),u("button",{key:0,onClick:ge,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},i[1]||(i[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):D("",!0),!g.value&&!b.value?(n(),u("div",vs,i[2]||(i[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),J("K ")],-1)]))):D("",!0),v.value?(n(),u("div",fs,i[3]||(i[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)])]),c.value?(n(),u("div",{key:0,class:U(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":c.value}])},[w.value.length>0?(n(),u("div",ys,[o("div",bs,[o("span",hs,P(w.value.length)+" Result"+P(w.value.length!==1?"s":""),1),o("span",_s,P(Math.round(T.value))+"ms ",1)])])):D("",!0),o("div",{ref_key:"suggestionsContainer",ref:I,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[w.value.length===0&&g.value.length>=2?(n(),u("div",xs,i[5]||(i[5]=[We('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):D("",!0),(n(!0),u(Y,null,G(w.value,(E,F)=>(n(),u("div",{key:E.name||F,ref_for:!0,ref:H=>S.value[F]=H,onClick:H=>de(E),class:U(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":F===_.value}])},[o("div",ks,[i[8]||(i[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",Cs,[o("div",Ss,[o("div",$s,[o("h4",Ps,[o("span",{innerHTML:h(E.subject||E.name,g.value)},null,8,Is)]),o("p",Ts,[J(" ID: "+P(E.name)+" ",1),E.customer?(n(),u("span",Rs,"• "+P(E.customer),1)):D("",!0)])]),o("div",Fs,[o("span",{class:U(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",L(E.status)])},P(E.status),3)])]),o("div",Es,[E.raised_by?(n(),u("div",Ls,[i[6]||(i[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),J(" "+P(E.raised_by),1)])):D("",!0),E.creation?(n(),u("div",Ms,[i[7]||(i[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),J(" "+P(pe(E.creation)),1)])):D("",!0)])])])],10,ws))),128))],512),g.value&&w.value.length>0?(n(),u("div",Ds,i[9]||(i[9]=[We('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):D("",!0)],2)):D("",!0),c.value?(n(),u("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:ae})):D("",!0)]))}},js=$e(Os,[["__scopeId","data-v-4969cdcf"]]),As={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Bs={class:"mb-6"},Ns={class:"relative max-w-2xl mx-auto"},zs={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Us={class:"border-t border-gray-200 pt-4"},Hs={class:"flex items-center justify-between"},Vs={class:"flex items-center space-x-3 flex-1"},qs={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Ys={key:0,class:"flex items-center space-x-2 flex-1 overflow-x-auto"},Ks={class:"text-gray-600 font-medium"},Ws={class:"text-gray-500"},Qs={key:1,class:"text-gray-900"},Gs=["onClick"],Js={key:0,class:"flex items-center space-x-2 ml-4"},Xs={key:0,class:"relative"},Zs={class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg"},er={class:"flex"},tr={class:"w-48 border-r border-gray-200 bg-gray-50"},sr={class:"max-h-64 overflow-y-auto"},rr=["onClick"],or={class:"flex-1 min-w-96"},ar={class:"p-4"},lr={key:0,class:"text-center py-8 text-gray-500"},nr={key:1,class:"space-y-3"},ir={class:"w-24 text-sm font-medium text-gray-700"},ur={class:"w-24"},cr=["onUpdate:modelValue","onChange"],dr=["value"],pr={class:"flex-1"},gr={key:0,class:"relative"},mr=["onUpdate:modelValue","onChange"],vr=["value"],fr={key:0,class:"absolute right-8 top-1/2 transform -translate-y-1/2"},yr=["onUpdate:modelValue","onChange"],br=["value"],hr=["onUpdate:modelValue","onInput","placeholder"],_r=["onClick"],xr={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},wr={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({status:"",priority:"",assignee:"",tags:"",sortBy:"creation"})},statusOptions:{type:Array,default:()=>[]},priorityOptions:{type:Array,default:()=>[]},assigneeOptions:{type:Array,default:()=>[]},tagsOptions:{type:Array,default:()=>[]},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected"],setup(r,{emit:s}){const t=r,a=s,f=A(t.searchQuery),l=A(se({},t.filters)),g=A(null),b=A(!1),c=A([]);let _=0;const v=R(()=>{const k=new Set;return t.issues.forEach(e=>{e._user_tags&&Array.isArray(e._user_tags)&&e._user_tags.forEach(i=>{i&&i.trim()&&k.add(i.trim())})}),Array.from(k).sort().map(e=>({label:e,value:e,color:Ae(e)}))}),T=R(()=>[{value:"subject",label:"Subject",description:"Filter by issue title",icon:"type",type:"text"},{value:"status",label:"Status",description:"Filter by issue status (New, In Review, etc.)",icon:"circle",type:"select"},{value:"priority",label:"Priority",description:"Filter by priority level",icon:"flag",type:"select"},{value:"issue_type",label:"Issue Type",description:"Filter by issue category",icon:"tag",type:"select"},{value:"raised_by",label:"Raised By (Email)",description:"Filter by who raised the issue",icon:"user",type:"text"},{value:"description",label:"Description",description:"Filter by issue description",icon:"file-text",type:"text"},{value:"customer",label:"Customer",description:"Filter by customer",icon:"building",type:"link"},{value:"customer_name",label:"Customer Name",description:"Filter by customer name",icon:"building",type:"text"},{value:"contact",label:"Contact",description:"Filter by contact person",icon:"user",type:"link"},{value:"lead",label:"Lead",description:"Filter by associated lead",icon:"user-plus",type:"link"},{value:"project",label:"Project",description:"Filter by project",icon:"folder",type:"link"},{value:"company",label:"Company",description:"Filter by company",icon:"building",type:"link"},{value:"service_level_agreement",label:"Service Level Agreement",description:"Filter by SLA",icon:"clock",type:"link"},{value:"agreement_status",label:"SLA Status",description:"Filter by SLA status",icon:"check-circle",type:"select"},{value:"response_by",label:"Response By",description:"Filter by response deadline",icon:"clock",type:"datetime"},{value:"sla_resolution_by",label:"Resolution By",description:"Filter by resolution deadline",icon:"clock",type:"datetime"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",description:"Filter by assigned CSM team",icon:"users",type:"link"},{value:"custom_users_assigned",label:"Users Assigned",description:"Filter by assigned users",icon:"user-check",type:"multiselect"},{value:"custom_labels",label:"Labels",description:"Filter by issue labels",icon:"tag",type:"multiselect"},{value:"creation",label:"Created Date",description:"Filter by creation date",icon:"calendar",type:"date"},{value:"modified",label:"Modified Date",description:"Filter by last modified date",icon:"clock",type:"date"},{value:"opening_date",label:"Opening Date",description:"Filter by opening date",icon:"calendar",type:"date"},{value:"opening_time",label:"Opening Time",description:"Filter by opening time",icon:"clock",type:"time"},{value:"sla_resolution_date",label:"Resolution Date",description:"Filter by resolution date",icon:"calendar",type:"datetime"},{value:"first_responded_on",label:"First Responded On",description:"Filter by first response date",icon:"clock",type:"datetime"},{value:"first_response_time",label:"First Response Time",description:"Filter by first response time",icon:"clock",type:"duration"},{value:"avg_response_time",label:"Average Response Time",description:"Filter by average response time",icon:"clock",type:"duration"},{value:"resolution_time",label:"Resolution Time",description:"Filter by resolution time",icon:"clock",type:"duration"},{value:"user_resolution_time",label:"User Resolution Time",description:"Filter by user resolution time",icon:"clock",type:"duration"},{value:"total_hold_time",label:"Total Hold Time",description:"Filter by total hold time",icon:"pause",type:"duration"},{value:"via_customer_portal",label:"Via Customer Portal",description:"Filter by customer portal origin",icon:"globe",type:"boolean"},{value:"naming_series",label:"Series",description:"Filter by naming series",icon:"hash",type:"text"},{value:"email_account",label:"Email Account",description:"Filter by email account",icon:"mail",type:"link"},{value:"issue_split_from",label:"Issue Split From",description:"Filter by parent issue",icon:"git-branch",type:"link"},{value:"_user_tags",label:"Tags",description:"Filter by user tags",icon:"tag",type:"tags"}]),I=R(()=>[{label:"Created Date (Newest)",value:"creation desc"},{label:"Created Date (Oldest)",value:"creation asc"},{label:"Modified Date (Newest)",value:"modified desc"},{label:"Modified Date (Oldest)",value:"modified asc"},{label:"Subject (A-Z)",value:"subject asc"},{label:"Subject (Z-A)",value:"subject desc"},{label:"Priority",value:"priority asc"},{label:"Status",value:"status asc"}]);oe(()=>t.searchQuery,k=>{f.value=k}),oe(()=>t.filters,k=>{l.value=se({},k)},{deep:!0});const S=k=>{(k.ctrlKey||k.metaKey)&&k.key==="k"&&(k.preventDefault(),x())},x=()=>{g.value&&(g.value.focus(),g.value.select())},w=k=>{f.value=k,a("update:searchQuery",k)},d=k=>{a("suggestion-selected",k)};R(()=>{let k=0;return l.value.status&&k++,l.value.priority&&k++,l.value.assignee&&k++,l.value.tags&&k++,l.value.sortBy!=="creation desc"&&k++,k}),R(()=>{const k=[];if(l.value.status){const e=t.statusOptions.find(i=>i.value===l.value.status);k.push({key:"status",label:"Status",value:(e==null?void 0:e.label)||l.value.status,colorClass:"bg-green-100 text-green-800 border-green-200"})}if(l.value.priority){const e=t.priorityOptions.find(i=>i.value===l.value.priority);k.push({key:"priority",label:"Priority",value:(e==null?void 0:e.label)||l.value.priority,colorClass:"bg-orange-100 text-orange-800 border-orange-200"})}if(l.value.assignee){const e=t.assigneeOptions.find(i=>i.value===l.value.assignee);k.push({key:"assignee",label:"Assignee",value:(e==null?void 0:e.label)||l.value.assignee,colorClass:"bg-blue-100 text-blue-800 border-blue-200"})}if(l.value.tags){const e=t.tagsOptions.find(i=>i.value===l.value.tags);k.push({key:"tags",label:"Tags",value:(e==null?void 0:e.label)||l.value.tags,colorClass:"bg-purple-100 text-purple-800 border-purple-200"})}if(l.value.sortBy!=="creation desc"){const e=I.value.find(i=>i.value===l.value.sortBy);k.push({key:"sortBy",label:"Sort",value:(e==null?void 0:e.label)||l.value.sortBy,colorClass:"bg-indigo-100 text-indigo-800 border-indigo-200"})}return k});const $=k=>{const e=T.value.find(E=>E.value===k);if(!e)return;const i={id:++_,field:k,operator:K(k),value:"",type:e.type};c.value.push(i),b.value=!1,O()},m=k=>{c.value.splice(k,1),O()},h=()=>{c.value=[],O()},L=k=>{O()},O=()=>{const k={};c.value.forEach(e=>{if(e.value){const i=e.field==="issue_type"?"tags":e.field==="raised_by"?"assignee":e.field;e.operator==="equals"||e.operator==="contains"?k[i]=e.value:e.operator==="not_equals"&&(k[i]=`!${e.value}`)}}),l.value=se(se({},l.value),k),a("update:filters",se({},l.value))},B=k=>{const e=T.value.find(i=>i.value===k);return(e==null?void 0:e.label)||k},K=k=>{const e=T.value.find(i=>i.value===k);return(e==null?void 0:e.type)==="select"?"equals":(e==null?void 0:e.type)==="text"?"like":(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"||(e==null?void 0:e.type)==="time"||(e==null?void 0:e.type)==="duration"||(e==null?void 0:e.type)==="boolean"||(e==null?void 0:e.type)==="link"?"equals":(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?"like":"equals"},te=k=>{const e=T.value.find(i=>i.value===k);return(e==null?void 0:e.type)==="select"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"In",value:"in"},{label:"Not In",value:"not_in"}]:(e==null?void 0:e.type)==="text"?[{label:"Like",value:"like"},{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Starts with",value:"starts_with"},{label:"Ends with",value:"ends_with"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"},{label:"Greater than or equal",value:"greater_than_equal"},{label:"Less than or equal",value:"less_than_equal"},{label:"Between",value:"between"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="time"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"}]:(e==null?void 0:e.type)==="duration"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="boolean"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"}]:(e==null?void 0:e.type)==="link"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Like",value:"like"},{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?[{label:"Like",value:"like"},{label:"Not Like",value:"not_like"},{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:[{label:"Equals",value:"equals"}]},de=k=>{const e=T.value.find(i=>i.value===k);return(e==null?void 0:e.type)==="select"||(e==null?void 0:e.type)==="tags"},ge=k=>{switch(k){case"status":return t.statusOptions;case"priority":return t.priorityOptions;case"raised_by":return t.assigneeOptions;case"issue_type":return t.tagsOptions;case"_user_tags":return v.value;default:return[]}},ae=k=>{var i,E,F;const e=T.value.find(H=>H.value===k);switch(k){case"subject":return"Enter issue title...";case"description":return"Enter description text...";case"raised_by":return"Enter email address...";case"customer_name":return"Enter customer name...";case"naming_series":return"Enter series (e.g., ISS-2025-)...";case"creation":case"modified":case"opening_date":case"sla_resolution_date":case"first_responded_on":return"YYYY-MM-DD or YYYY-MM-DD HH:MM:SS";case"response_by":case"sla_resolution_by":return"YYYY-MM-DD HH:MM:SS";case"opening_time":return"HH:MM:SS";case"first_response_time":case"avg_response_time":case"resolution_time":case"user_resolution_time":case"total_hold_time":return"Enter duration (e.g., 2:30:00 for 2h 30m)";case"customer":return"Enter customer name or ID...";case"contact":return"Enter contact name or ID...";case"lead":return"Enter lead name or ID...";case"project":return"Enter project name or ID...";case"company":return"Enter company name or ID...";case"service_level_agreement":return"Enter SLA name or ID...";case"custom_assigned_csm_team":return"Enter team name or ID...";case"email_account":return"Enter email account name...";case"issue_split_from":return"Enter parent issue ID...";case"via_customer_portal":return"Enter 1 for Yes, 0 for No";case"custom_users_assigned":return"Enter user names (comma separated)...";case"custom_labels":return"Enter labels (comma separated)...";case"_user_tags":return"Enter tags (comma separated)...";default:return(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"?"YYYY-MM-DD or YYYY-MM-DD HH:MM:SS":(e==null?void 0:e.type)==="time"?"HH:MM:SS":(e==null?void 0:e.type)==="duration"?"Enter duration (e.g., 2:30:00)":(e==null?void 0:e.type)==="boolean"?"Enter 1 for Yes, 0 for No":(e==null?void 0:e.type)==="link"?`Enter ${((i=e==null?void 0:e.label)==null?void 0:i.toLowerCase())||"value"} name or ID...`:(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?`Enter ${((E=e==null?void 0:e.label)==null?void 0:E.toLowerCase())||"values"} (comma separated)...`:`Enter ${((F=e==null?void 0:e.label)==null?void 0:F.toLowerCase())||"value"}...`}},ie=k=>{const e=Ae(k);if(e){const i=e.replace("#",""),E=parseInt(i.substr(0,2),16),F=parseInt(i.substr(2,2),16),H=parseInt(i.substr(4,2),16),p=`rgba(${E}, ${F}, ${H}, 0.1)`,C=`rgb(${Math.max(E-50,0)}, ${Math.max(F-50,0)}, ${Math.max(H-50,0)})`;return{backgroundColor:p,color:C,borderColor:C}}return{backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"}},pe=()=>{O(),b.value=!1};return Pe(()=>{document.addEventListener("keydown",S)}),Ee(()=>{document.removeEventListener("keydown",S)}),(k,e)=>(n(),u("div",As,[o("div",Bs,[o("div",Ns,[N(js,{ref_key:"searchBoxRef",ref:g,"model-value":f.value,"onUpdate:modelValue":w,onSuggestionSelected:d,issues:r.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),f.value?(n(),u("div",zs," Searching in "+P(r.filteredCount)+" issues ",1)):D("",!0)])]),o("div",Us,[o("div",Hs,[o("div",Vs,[o("button",{onClick:e[0]||(e[0]=i=>b.value=!b.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[e[2]||(e[2]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),e[3]||(e[3]=o("span",null,"Filters",-1)),c.value.length>0?(n(),u("span",qs,P(c.value.length),1)):D("",!0)]),c.value.length>0?(n(),u("div",Ys,[(n(!0),u(Y,null,G(c.value,(i,E)=>(n(),u("div",{key:i.id,class:"flex items-center space-x-1 bg-gray-100 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",Ks,P(B(i.field)),1),o("span",Ws,P(i.operator),1),i.field==="_user_tags"&&i.value?(n(),u("span",{key:0,style:ue(ie(i.value)),class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border"},P(i.value),5)):(n(),u("span",Qs,P(i.value),1)),o("button",{onClick:F=>m(E),class:"text-gray-400 hover:text-red-600 ml-1"},e[4]||(e[4]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Gs)]))),128))])):D("",!0)]),c.value.length>0?(n(),u("div",Js,[o("button",{onClick:h,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors"}," Clear Filters "),o("button",{onClick:pe,class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 transition-colors"}," Apply Filters ")])):D("",!0)])]),b.value?(n(),u("div",Xs,[o("div",Zs,[o("div",er,[o("div",tr,[e[5]||(e[5]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",sr,[(n(!0),u(Y,null,G(T.value,i=>(n(),u("button",{key:i.value,onClick:E=>$(i.value),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},P(i.label),9,rr))),128))])]),o("div",or,[o("div",ar,[c.value.length===0?(n(),u("div",lr,e[6]||(e[6]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(n(),u("div",nr,[(n(!0),u(Y,null,G(c.value,(i,E)=>(n(),u("div",{key:i.id,class:"flex items-center space-x-3 p-3 bg-gray-50 rounded border"},[o("div",ir,P(B(i.field)),1),o("div",ur,[ke(o("select",{"onUpdate:modelValue":F=>i.operator=F,onChange:F=>L(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[(n(!0),u(Y,null,G(te(i.field),F=>(n(),u("option",{key:F.value,value:F.value},P(F.label),9,dr))),128))],40,cr),[[Me,i.operator]])]),o("div",pr,[i.field==="_user_tags"?(n(),u("div",gr,[ke(o("select",{"onUpdate:modelValue":F=>i.value=F,onChange:F=>L(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[e[7]||(e[7]=o("option",{value:""},"Select tag...",-1)),(n(!0),u(Y,null,G(v.value,F=>(n(),u("option",{key:F.value,value:F.value},P(F.label),9,vr))),128))],40,mr),[[Me,i.value]]),i.value?(n(),u("div",fr,[o("span",{style:ue(ie(i.value)),class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border"},P(i.value),5)])):D("",!0)])):de(i.field)?ke((n(),u("select",{key:1,"onUpdate:modelValue":F=>i.value=F,onChange:F=>L(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[e[8]||(e[8]=o("option",{value:""},"Select...",-1)),(n(!0),u(Y,null,G(ge(i.field),F=>(n(),u("option",{key:F.value,value:F.value},P(F.label),9,br))),128))],40,yr)),[[Me,i.value]]):ke((n(),u("input",{key:2,"onUpdate:modelValue":F=>i.value=F,onInput:F=>L(),type:"text",placeholder:ae(i.field),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,hr)),[[tt,i.value]])]),o("button",{onClick:F=>m(E),class:"p-1 text-gray-400 hover:text-red-600 transition-colors"},e[9]||(e[9]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,_r)]))),128))])),c.value.length>0?(n(),u("div",xr,[o("button",{onClick:h,class:"text-sm text-gray-600 hover:text-gray-900 transition-colors"}," Clear Filters "),o("button",{onClick:pe,class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors"}," Apply Filters ")])):D("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:e[1]||(e[1]=i=>b.value=!1)})])):D("",!0)]))}},kr=$e(wr,[["__scopeId","data-v-0a7d2720"]]),Cr={class:"bg-white rounded-lg shadow-sm border mt-4"},Sr={class:"px-6 py-4 flex items-center justify-between"},$r={class:"text-sm text-gray-700"},Pr={key:0},Ir={key:1},Tr={key:0,class:"flex items-center space-x-2"},Rr={class:"flex items-center space-x-1"},Fr={key:1,class:"px-2 text-gray-500"},Er={key:2,class:"px-2 text-gray-500"},Lr={key:1,class:"flex items-center space-x-2"},Mr={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(r,{emit:s}){const t=r,a=s,f=A(t.itemsPerPage);oe(()=>t.itemsPerPage,m=>{f.value=m});const l=R(()=>Math.ceil(t.totalItems/t.itemsPerPage)),g=R(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),b=R(()=>{const m=t.currentPage*t.itemsPerPage;return Math.min(m,t.totalItems)}),c=R(()=>{const m=[],h=t.maxVisiblePages,L=t.currentPage,O=l.value;if(O<=h)for(let B=1;B<=O;B++)m.push(B);else{let B=Math.max(1,L-Math.floor(h/2)),K=Math.min(O,B+h-1);K-B+1<h&&(B=Math.max(1,K-h+1)),B>1&&(B=Math.max(2,B)),K<O&&(K=Math.min(O-1,K));for(let te=B;te<=K;te++)m.push(te)}return m}),_=R(()=>l.value>t.maxVisiblePages&&!c.value.includes(1)),v=R(()=>l.value>t.maxVisiblePages&&!c.value.includes(l.value)),T=R(()=>_.value&&c.value.length>0&&c.value[0]>2),I=R(()=>v.value&&c.value.length>0&&c.value[c.value.length-1]<l.value-1),S=R(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),x=m=>{m>=1&&m<=l.value&&m!==t.currentPage&&(a("update:currentPage",m),a("pageChange",{page:m,itemsPerPage:t.itemsPerPage,offset:(m-1)*t.itemsPerPage}))},w=()=>{t.currentPage>1&&x(t.currentPage-1)},d=()=>{t.currentPage<l.value&&x(t.currentPage+1)},$=()=>{const m=f.value;a("update:itemsPerPage",m);const h=(t.currentPage-1)*t.itemsPerPage+1,L=Math.ceil(h/m);a("pageChange",{page:L,itemsPerPage:m,offset:(L-1)*m})};return(m,h)=>(n(),u("div",Cr,[o("div",Sr,[o("div",$r,[r.totalItems>0?(n(),u("span",Pr," Showing "+P(g.value)+" to "+P(b.value)+" of "+P(r.totalItems)+" results ",1)):(n(),u("span",Ir," No results found "))]),l.value>1?(n(),u("div",Tr,[N(y(le),{theme:"gray",variant:"outline",size:"sm",disabled:r.currentPage===1,onClick:w},{prefix:V(()=>[N(y(ye),{name:"chevron-left",class:"h-4 w-4"})]),default:V(()=>[h[3]||(h[3]=J(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",Rr,[_.value?(n(),q(y(le),{key:0,theme:"gray",variant:"outline",size:"sm",class:U({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===1}),onClick:h[0]||(h[0]=L=>x(1))},{default:V(()=>h[4]||(h[4]=[J(" 1 ")])),_:1,__:[4]},8,["class"])):D("",!0),T.value?(n(),u("span",Fr,"...")):D("",!0),(n(!0),u(Y,null,G(c.value,L=>(n(),q(y(le),{key:L,theme:"gray",variant:"outline",size:"sm",class:U({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===L}),onClick:O=>x(L)},{default:V(()=>[J(P(L),1)]),_:2},1032,["class","onClick"]))),128)),I.value?(n(),u("span",Er,"...")):D("",!0),v.value?(n(),q(y(le),{key:3,theme:"gray",variant:"outline",size:"sm",class:U({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===l.value}),onClick:h[1]||(h[1]=L=>x(l.value))},{default:V(()=>[J(P(l.value),1)]),_:1},8,["class"])):D("",!0)]),N(y(le),{theme:"gray",variant:"outline",size:"sm",disabled:r.currentPage===l.value,onClick:d},{suffix:V(()=>[N(y(ye),{name:"chevron-right",class:"h-4 w-4"})]),default:V(()=>[h[5]||(h[5]=J(" Next "))]),_:1,__:[5]},8,["disabled"])])):D("",!0),r.showItemsPerPage?(n(),u("div",Lr,[h[6]||(h[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),N(y(Ct),{modelValue:f.value,"onUpdate:modelValue":h[2]||(h[2]=L=>f.value=L),options:S.value,onChange:$,class:"w-20"},null,8,["modelValue","options"])])):D("",!0)])]))}},Dr={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Or={class:"text-3xl font-bold text-gray-900"},jr={class:"text-3xl font-bold text-blue-600"},Ar={class:"text-3xl font-bold text-green-600"},Br={class:"text-3xl font-bold text-orange-600"},Nr={class:"text-3xl font-bold text-purple-600"},zr=3e4,Ur={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(r,{expose:s,emit:t}){const a=r,f=t,l=xe({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),g=R(()=>l.value.team_tickets),b=R(()=>l.value.open_tickets),c=R(()=>l.value.assigned_to_me),_=R(()=>l.value.actionable_tickets),v=R(()=>l.value.response_tickets);let T=null,I=0;const S=()=>be(this,null,function*(){const $=Date.now();if(T&&$-I<zr)return T;try{const m=yield ss("force_trans_customization.api.issues.get_issue_stats");return l.value=m,T=m,I=$,m}catch(m){return console.error("Error fetching issue stats:",m),l.value}});let x=null;const w=()=>{x&&clearTimeout(x),x=setTimeout(()=>{S()},500)};Pe(()=>{S()}),oe(()=>a.issues.length,()=>{w()});const d=$=>{f("filter-changed",$)};return s({refreshStats:S}),($,m)=>(n(),u("div",Dr,[o("div",{onClick:m[0]||(m[0]=h=>d("team_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Or,P(g.value),1),m[5]||(m[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:m[1]||(m[1]=h=>d("open_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",jr,P(b.value),1),m[6]||(m[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:m[2]||(m[2]=h=>d("assigned_to_me")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",Ar,P(c.value),1),m[7]||(m[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:m[3]||(m[3]=h=>d("actionable_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"])},[o("div",Br,P(_.value),1),m[8]||(m[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Actionable",-1))],2),o("div",{onClick:m[4]||(m[4]=h=>d("response_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"])},[o("div",Nr,P(v.value),1),m[9]||(m[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Response",-1))],2)]))}},Hr={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const r=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[r]||"gray"}},components:{Badge:Ue}},Vr={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const r=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[r]||"yellow"},priorityIndicatorClass(){const r=this.priority||"Medium";return{"bg-red-500":r==="Critical","bg-red-400":r==="High","bg-yellow-400":r==="Medium","bg-green-400":r==="Low"}}},components:{Badge:Ue}},qr={components:{ListView:ts,Avatar:Tt,Badge:Ue,Button:le,FeatherIcon:ye,ListHeader:ot,ListHeaderItem:rt,ListRow:Ve,ListRowItem:at,ListRows:lt,ListSelectBanner:nt,StatusBadge:Hr,PriorityBadge:Vr},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(r,{emit:s}){const t=A(!1),a=A(null),f=A({x:0,y:0}),l=A(!1),g=A({x:0,y:0}),b=A(null),c=p=>{if(!p||typeof p!="string")return"?";if(p.includes("@")){const C=p.split("@")[0];return C.includes(".")||C.includes("_")?C.split(/[._]/).map(X=>X[0]).join("").toUpperCase().slice(0,2):C.slice(0,2).toUpperCase()}return p.includes(" ")?p.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):p.slice(0,2).toUpperCase()},_=p=>{if(!p)return"";const C=p.match(/ISS-(\d{4}-\d+)/);return C?C[1]:p},v=p=>{if(!p)return"";const C=document.createElement("div");return C.innerHTML=p,C.textContent||C.innerText||""},T=p=>p?new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",I=p=>p?new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",S=p=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[p]||"gray",x=p=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[p]||"yellow",w=new Map,d=R(()=>r.issues.map(p=>{const C=p.name;if(w.has(C)){const X=w.get(C);if(X.originalStatus===p.status&&X.originalPriority===p.priority)return X.transformed}const z=Ke(se({},p),{status:{label:p.status||"New",color:S(p.status)},priority:{label:p.priority||"Medium",color:x(p.priority)}});return w.set(C,{transformed:z,originalStatus:p.status,originalPriority:p.priority}),z})),$=xe([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),m=xe({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:p=>{console.log("Row clicked:",p)}}),h=p=>{console.log("Selected rows:",p)},L=p=>{console.log("Issue clicked:",p);const z=`${window.location.origin}/app/issue/${p.name}`;window.open(z,"_blank")},O=p=>{const C=p||"New";return{"bg-blue-500":C==="New","bg-orange-500":C==="In Review","bg-yellow-500":C==="Waiting on Customer","bg-purple-500":C==="Confirmed","bg-blue-500":C==="In Transit","bg-gray-500":C==="In Transit Unmanaged","bg-green-500":C==="Delivered","bg-green-500":C==="Closed","bg-red-500":C==="Open","bg-orange-500":C==="Replied","bg-yellow-500":C==="On Hold","bg-green-500":C==="Resolved"}},B=p=>{const C=p||"Medium";return{"bg-red-500":C==="Critical"||C==="High","bg-yellow-500":C==="Medium","bg-green-500":C==="Low"}},K=p=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[p||"New"]||"bg-gray-100 text-gray-800",te=p=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[p||"Medium"]||"bg-yellow-100 text-yellow-800",de=p=>{const C=p||"Medium";return{"bg-red-500":C==="Critical","bg-red-400":C==="High","bg-yellow-400":C==="Medium","bg-green-400":C==="Low"}},ge=(p,C)=>{const z=p.target.getBoundingClientRect();f.value={x:z.left+z.width/2,y:z.top-10},a.value=C,t.value=!0},ae=()=>{t.value=!1,a.value=null},ie=(p,C)=>{if(!C||C.length===0)return;const z=p.target.getBoundingClientRect();g.value={x:z.left+z.width/2,y:z.top-10},b.value=C,l.value=!0},pe=()=>{l.value=!1,b.value=null},k=p=>{let C="asc";r.sortField===p&&(C=r.sortDirection==="asc"?"desc":"asc"),s("sort",{field:p,direction:C})},e=p=>r.sortField!==p?"arrow-up-down":r.sortDirection==="asc"?"arrow-up":"arrow-down",i=p=>r.sortField!==p?"text-gray-400":"text-blue-600",E=p=>r.sortField===p?"bg-blue-50":"",F=new Map;return{columns:$,listOptions:m,transformedIssues:d,handleSelections:h,handleIssueClick:L,getStatusColor:O,getPriorityColor:B,getStatusBadgeClass:K,getPriorityBadgeClass:te,getPriorityIndicatorClass:de,getInitials:c,formatIssueId:_,stripHtml:v,formatDate:T,formatTime:I,showPopup:t,popupUser:a,popupPosition:f,showUserPopup:ge,hideUserPopup:ae,handleColumnSort:k,getSortIcon:e,getSortIconClass:i,getSortButtonClass:E,getTagStyle:p=>{if(F.has(p))return F.get(p);const C=Ae(p);let z;if(C){const X=C.replace("#",""),Le=parseInt(X.substr(0,2),16),j=parseInt(X.substr(2,2),16),M=parseInt(X.substr(4,2),16),Q=`rgba(${Le}, ${j}, ${M}, 0.1)`,Z=`rgb(${Math.max(Le-50,0)}, ${Math.max(j-50,0)}, ${Math.max(M-50,0)})`;z={backgroundColor:Q,color:Z,borderColor:Z}}else z={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return F.set(p,z),z},showTagsPopup:l,tagsPopupPosition:g,tagsPopupData:b,showTagsPopupFn:ie,hideTagsPopupFn:pe}}},Yr={class:"bg-white rounded-lg shadow-sm border"},Kr={key:0,class:"px-6 py-12 text-center text-gray-500"},Wr=["onClick"],Qr=["onClick"],Gr={key:1,class:"max-w-xs"},Jr=["title"],Xr=["title"],Zr=["title"],eo={key:3,class:"flex flex-wrap gap-1"},to=["onMouseenter"],so={key:1,class:"text-gray-400 text-sm"},ro=["onMouseenter"],oo=["title"],ao={class:"truncate"},lo={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},no={key:1,class:"text-gray-400 text-sm"},io={key:5,class:"flex flex-col"},uo={class:"text-xs text-gray-400"},co={key:7},po={class:"flex gap-2"},go={class:"text-sm"},mo={class:"font-semibold text-gray-900 mb-1"},vo={class:"text-gray-600 flex items-center gap-1"},fo={class:"text-xs text-gray-500 mt-1"},yo={class:"text-sm"},bo={class:"flex flex-wrap gap-1"};function ho(r,s,t,a,f,l){const g=re("FeatherIcon"),b=re("ListHeaderItem"),c=re("ListHeader"),_=re("Avatar"),v=re("ListRowItem"),T=re("ListRow"),I=re("ListRows"),S=re("Button"),x=re("ListSelectBanner"),w=re("ListView");return n(),u("div",Yr,[s[5]||(s[5]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(n(),u("div",Kr,s[2]||(s[2]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(n(),q(w,{key:1,columns:a.columns,rows:a.transformedIssues,"row-key":"name",options:a.listOptions,"onUpdate:selections":a.handleSelections},{default:V(()=>[N(c,null,{default:V(()=>[(n(!0),u(Y,null,G(a.columns,d=>(n(),q(b,{key:d.key,item:d},St({_:2},[d.icon?{name:"prefix",fn:V(({item:$})=>[N(g,{name:$.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,d.sortable?{name:"suffix",fn:V(()=>[o("button",{onClick:$=>a.handleColumnSort(d.key),class:U(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",a.getSortButtonClass(d.key)])},[N(g,{name:a.getSortIcon(d.key),class:U(["h-3 w-3",a.getSortIconClass(d.key)])},null,8,["name","class"])],10,Wr)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),N(I,null,{default:V(()=>[(n(!0),u(Y,null,G(a.transformedIssues,d=>(n(),q(T,{key:d.name,row:d},{default:V(({column:$,item:m})=>[N(v,{item:m,align:$.align},{prefix:V(()=>[$.key==="raised_by"?(n(),q(_,{key:0,size:"sm",label:a.getInitials(d.raised_by),class:"mr-3"},null,8,["label"])):D("",!0)]),default:V(()=>{var h,L;return[$.key==="name"?(n(),u("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:Ce(O=>a.handleIssueClick(d),["prevent"])},P(a.formatIssueId(m)),9,Qr)):$.key==="subject"?(n(),u("div",Gr,[o("div",{class:"font-medium truncate",title:d.subject},P(d.subject),9,Jr),d.description?(n(),u("div",{key:0,class:"text-gray-500 text-xs mt-1 truncate",title:d.description},P(a.stripHtml(d.description)),9,Xr)):D("",!0)])):$.key==="raised_by"?(n(),u("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:m||"-"},P(m||"-"),9,Zr)):$.key==="custom_users_assigned"?(n(),u("div",eo,[d.custom_users_assigned&&d.custom_users_assigned.length>0?(n(!0),u(Y,{key:0},G(d.custom_users_assigned.filter(O=>O.user_assigned),O=>(n(),u("div",{key:O.name||O,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:B=>a.showUserPopup(B,O),onMouseleave:s[0]||(s[0]=(...B)=>a.hideUserPopup&&a.hideUserPopup(...B))},P(a.getInitials(O.user_assigned)),41,to)]))),128)):(n(),u("span",so,"-"))])):$.key==="_user_tags"?(n(),u("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:O=>a.showTagsPopupFn(O,d._user_tags),onMouseleave:s[1]||(s[1]=(...O)=>a.hideTagsPopupFn&&a.hideTagsPopupFn(...O))},[d._user_tags&&d._user_tags.length>0?(n(),u(Y,{key:0},[o("span",{style:ue(a.getTagStyle(d._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:d._user_tags[0]},[o("span",ao,P(d._user_tags[0]),1)],12,oo),d._user_tags.length>1?(n(),u("span",lo," +"+P(d._user_tags.length-1),1)):D("",!0)],64)):(n(),u("span",no,"-"))],40,ro)):$.key==="creation"?(n(),u("div",io,[o("span",null,P(a.formatDate(m)),1),o("span",uo,P(a.formatTime(m)),1)])):$.key==="status"?(n(),u("span",{key:6,class:U([a.getStatusBadgeClass(((h=d.status)==null?void 0:h.label)||d.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},P(((L=d.status)==null?void 0:L.label)||d.status||"New"),3)):(n(),u("span",co,P(m),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),N(x,null,{actions:V(({unselectAll:d})=>[o("div",po,[N(S,{variant:"ghost",label:"Delete"}),N(S,{variant:"ghost",label:"Unselect all",onClick:d},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),a.showPopup&&a.popupUser?(n(),u("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ue({left:a.popupPosition.x+"px",top:a.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",go,[o("div",mo,P(a.popupUser.user_assigned||"Unknown User"),1),o("div",vo,[s[3]||(s[3]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),J(" "+P(a.popupUser.team||"No Team"),1)]),o("div",fo," Assigned: "+P(a.formatDate(a.popupUser.assigned_date)),1)])],4)):D("",!0),a.showTagsPopup&&a.tagsPopupData?(n(),u("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:ue({left:a.tagsPopupPosition.x+"px",top:a.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",yo,[s[4]||(s[4]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",bo,[(n(!0),u(Y,null,G(a.tagsPopupData,d=>(n(),u("span",{key:d,style:ue(a.getTagStyle(d)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},P(d),5))),128))])])],4)):D("",!0)])}const _o=$e(qr,[["render",ho]]),xo={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},wo={class:"flex items-start justify-between"},ko={class:"flex items-start space-x-3"},Co={class:"flex-shrink-0"},So={class:"flex-1 min-w-0"},$o={class:"text-sm font-medium text-gray-900"},Po={class:"text-sm text-gray-600 mt-1"},Io={class:"text-xs text-gray-500 mt-1"},To=["onClick"],Ro={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(r){const s=l=>{const g="bg-white/95 border-l-4",b={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${g} ${b[l]||b.info}`},t=l=>{const g={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return g[l]||g.info},a=l=>{const g={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return g[l]||g.info},f=l=>{const b=new Date-l,c=Math.floor(b/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;const _=Math.floor(c/60);return _<24?`${_}h ago`:l.toLocaleDateString()};return(l,g)=>(n(),u("div",xo,[N($t,{name:"notification",tag:"div"},{default:V(()=>[(n(!0),u(Y,null,G(r.notifications,b=>(n(),u("div",{key:b.id,class:U([s(b.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",wo,[o("div",ko,[o("div",Co,[N(y(ye),{name:t(b.type),class:U([a(b.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",So,[o("p",$o,P(b.title),1),o("p",Po,P(b.message),1),o("p",Io,P(f(b.timestamp)),1)])]),o("button",{onClick:c=>l.$emit("remove",b.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[N(y(ye),{name:"x",class:"h-4 w-4"})],8,To)])],2))),128))]),_:1})]))}},Fo=$e(Ro,[["__scopeId","data-v-d57fd7d2"]]);function Eo(r,s){let t;return function(...f){const l=()=>{clearTimeout(t),r(...f)};clearTimeout(t),t=setTimeout(l,s)}}function Lo(){const r=A(""),s=A({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=A(""),a=Eo(S=>{t.value=S},300);oe(r,S=>{a(S)});const f=R(()=>{const S={};return t.value.trim()&&(S.subject=["like",`%${t.value.trim()}%`]),s.value.status&&(S.status=s.value.status),s.value.priority&&(S.priority=s.value.priority),s.value.assignee&&(S.raised_by=s.value.assignee),s.value.tags&&(S.issue_type=s.value.tags),S}),l=R(()=>s.value.sortBy||"creation desc"),g=new Map,b=S=>{if(!S||!Array.isArray(S))return[];const x=JSON.stringify({issuesLength:S.length,searchQuery:r.value.trim(),status:s.value.status,priority:s.value.priority,assignee:s.value.assignee,tags:s.value.tags,sortBy:s.value.sortBy});if(g.has(x))return g.get(x);let w=[...S];if(r.value.trim()){const $=r.value.toLowerCase().trim();w=w.filter(m=>{const h=(m.subject||"").toLowerCase(),L=(m.description||"").toLowerCase();return h.includes($)||L.includes($)})}s.value.status&&(w=w.filter($=>$.status===s.value.status)),s.value.priority&&(w=w.filter($=>$.priority===s.value.priority)),s.value.assignee&&(w=w.filter($=>$.raised_by===s.value.assignee)),s.value.tags&&(w=w.filter($=>$.issue_type===s.value.tags));const d=me({Critical:4,High:3,Medium:2,Low:1});if(w.sort(($,m)=>{const[h,L]=s.value.sortBy.split(" "),O=$[h]||"",B=m[h]||"";let K=0;return h==="creation"||h==="modified"?K=new Date(O)-new Date(B):h==="priority"?K=(d[O]||0)-(d[B]||0):K=O.toString().localeCompare(B.toString()),L==="desc"?-K:K}),g.size>50){const $=g.keys().next().value;g.delete($)}return g.set(x,w),w};let c=null,_=null;const v=S=>{if(!S||!Array.isArray(S))return me([{label:"All Assignees",value:""}]);const x=S.map($=>$.raised_by).filter($=>$&&$.trim()).sort().join("|");if(c&&_===x)return c;const w=[...new Set(S.map($=>$.raised_by).filter($=>$&&$.trim()))],d=me([{label:"All Assignees",value:""},...w.map($=>({label:$,value:$}))]);return c=d,_=x,d},T=()=>{r.value="",t.value="",s.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},I=R(()=>r.value.trim()!==""||s.value.status!==""||s.value.priority!==""||s.value.assignee!==""||s.value.tags!==""||s.value.sortBy!=="creation desc");return{searchQuery:r,filters:s,debouncedSearchQuery:t,apiFilters:f,sortOrder:l,hasActiveFilters:I,filterIssues:b,getAssigneeOptions:v,resetFilters:T}}function Mo(r,s){const t=Pt(),a=A([]),f=A(!1),l=A(!1);let g=null;const b=l.value?15e3:2e3,c=()=>{g&&clearTimeout(g),g=setTimeout(()=>{T()},b)},_=()=>{if(!t||f.value)return;t.emit("doctype_subscribe","Issue"),t.off("list_update"),t.on("list_update",h=>{(h==null?void 0:h.doctype)==="Issue"&&(S()||(a.value.push(h),c()))}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(h=>{t.on(h,L=>{if((L==null?void 0:L.doctype)!=="Issue"||S())return;const O={doctype:"Issue",name:L.name,action:h.includes("create")?"insert":h.includes("delete")?"delete":"update",modified_by:L.modified_by||L.owner,timestamp:new Date().toISOString()};a.value.push(O),c()})}),f.value=!0},v=()=>{if(!t||!f.value)return;t.emit("doctype_unsubscribe","Issue"),t.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(h=>{t.off(h)}),f.value=!1},T=()=>be(this,null,function*(){if(!a.value.length)return;const m=window.location.hash||window.location.pathname;if(!m.includes("issue-tracker")&&!m.includes("issues")){a.value=[],v();return}const h=[...new Set(a.value.map(O=>O.name))],L=h.length;a.value=[];try{yield I(h),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:L,documents:h}}))}catch(O){console.error("Error updating individual rows, falling back to full refresh:",O);try{yield he(),yield _e()}catch(B){console.error("Error in fallback refresh:",B)}}}),I=m=>be(this,null,function*(){try{if(s&&typeof s=="function"){yield s();return}if(!we.data||!Array.isArray(we.data))throw new Error("No issues data available");let h={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(r&&typeof r=="function")try{const L=r();L&&(h=se(se({},h),L))}catch(L){console.warn("Error getting current parameters, using defaults:",L)}yield we.reload(h)}catch(h){throw console.error("Error during targeted refresh:",h),h}}),S=()=>!!document.hidden,x=()=>{a.value=[];try{s&&typeof s=="function"?s():(he(),_e())}catch(m){console.error("Error during manual refresh:",m)}},w=()=>{_()},d=()=>{f.value=!1},$=m=>{console.error("Socket connection error:",m),f.value=!1};return Pe(()=>{t&&(t.on("connect",w),t.on("disconnect",d),t.on("connect_error",$),t.connected&&_())}),Ee(()=>{t&&(t.off("connect",w),t.off("disconnect",d),t.off("connect_error",$)),v(),g&&clearTimeout(g)}),{pendingDocumentRefreshes:a,realtimeEventsSetup:f,setupRealtimeUpdates:_,disableRealtimeUpdates:v,manualRefresh:x,processDocumentRefreshes:T}}const Do={class:"min-h-screen bg-gray-50"},Oo={class:"bg-white shadow-sm border-b"},jo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ao={class:"flex justify-between items-center py-4"},Bo={class:"flex items-center space-x-4"},No={class:"flex space-x-4"},zo={class:"flex items-center space-x-4"},Uo={class:"text-sm text-gray-600"},Ho={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Vo={class:"fixed top-20 right-4 flex flex-col space-y-2"},qo=["title"],Yo={class:"relative"},Ko={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Go={__name:"IssueTracker",setup(r){const{searchQuery:s,filters:t,debouncedSearchQuery:a,apiFilters:f,sortOrder:l,getAssigneeOptions:g}=Lo(),b=A(!1),c=A(null),_=A(!1),v=A("team_tickets"),T=()=>{const j={limit_page_length:p.value,limit_start:(H.value-1)*p.value,order_by:l.value};if(_.value)Fe(v.value,j),je(v.value);else if(b.value&&c.value){const M="name",Q=c.value.name;Oe(M,Q,j),et(M,Q)}else he(se({filters:z.value},j)),_e(z.value)},{pendingDocumentRefreshes:I,realtimeEventsSetup:S,manualRefresh:x}=Mo(()=>({filters:z.value,order_by:l.value,limit_page_length:p.value,limit_start:(H.value-1)*p.value}),T),w=()=>{T()},d=A([]),$=j=>{d.value.push(se({id:Date.now()+Math.random()},j)),setTimeout(()=>{var M;m((M=d.value[d.value.length-1])==null?void 0:M.id)},5e3)},m=j=>{d.value=d.value.filter(M=>M.id!==j)},h=R(()=>_.value?Ne.data||[]:b.value?Be.data||[]:we.data||[]),L=R(()=>_.value?ct.data||0:b.value?ut.data||0:it.data||0),O=R(()=>_.value?Ne.loading:b.value?Be.loading:we.loading),B=R(()=>h.value),K=R(()=>(l.value||"creation desc").split(" ")[0]),te=R(()=>(l.value||"creation desc").split(" ")[1]||"desc"),de=({field:j,direction:M})=>{const Q=`${j} ${M}`;t.value.sortBy=Q},ge=j=>{b.value=!0,c.value=j,s.value=j.subject||j.name,H.value=1;const M="name",Q=j.name;Oe(M,Q,{limit_page_length:p.value,limit_start:0,order_by:l.value}),et(M,Q)},ae=()=>{b.value=!1,c.value=null,s.value="",H.value=1,he({filters:z.value,order_by:l.value,limit_page_length:p.value,limit_start:0}),_e(z.value)},ie=j=>{b.value=!1,c.value=null,_.value=!0,v.value=j,s.value="",H.value=1,Fe(j,{limit_page_length:p.value,limit_start:0,order_by:l.value}),je(j)},pe=xe(me(as())),k=xe(me(ls())),e=xe(me(is()));let i=null,E=0;const F=R(()=>{const j=h.value.length;return i&&E===j||(i=me(g(h.value)),E=j),i}),H=A(1),p=A(10),C=({page:j,itemsPerPage:M,offset:Q})=>{if(H.value=j,p.value=M,_.value)Fe(v.value,{limit_page_length:M,limit_start:Q,order_by:l.value});else if(b.value&&c.value){const Z="name",dt=c.value.name;Oe(Z,dt,{limit_page_length:M,limit_start:Q,order_by:l.value})}else he({filters:z.value,order_by:l.value,limit_page_length:M,limit_start:Q}),_e(z.value)},z=R(()=>{const j={};return t.value.status&&(j.status=t.value.status),t.value.priority&&(j.priority=t.value.priority),t.value.assignee&&(j.raised_by=t.value.assignee),t.value.tags&&(j.issue_type=t.value.tags),j});let X=null;return oe([z,l],()=>{X&&clearTimeout(X),X=setTimeout(()=>{b.value&&(b.value=!1,c.value=null),_.value&&(_.value=!1,v.value="team_tickets"),H.value=1,he({filters:z.value,order_by:l.value,limit_page_length:p.value,limit_start:0}),_e(z.value)},300)},{deep:!0}),oe(s,j=>{!j&&b.value&&ae()}),Pe(()=>{_.value=!0,v.value="team_tickets",Fe("team_tickets",{limit_page_length:p.value,limit_start:0,order_by:l.value}),je("team_tickets"),window.addEventListener("issueListUpdated",j=>{const{count:M,documents:Q}=j.detail;$({type:"info",title:"List Updated",message:`${M} issue${M>1?"s":""} updated: ${Q.slice(0,3).join(", ")}${Q.length>3?"...":""}`,timestamp:new Date})})}),Ee(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(j,M)=>{const Q=re("router-link");return n(),u("div",Do,[o("div",Oo,[o("div",jo,[o("div",Ao,[o("div",Bo,[M[7]||(M[7]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),o("nav",No,[N(Q,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:V(()=>M[5]||(M[5]=[J(" Home ")])),_:1,__:[5]}),N(Q,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:V(()=>M[6]||(M[6]=[J(" Issues ")])),_:1,__:[6]})])]),o("div",zo,[o("span",Uo,P(y(Ge).user),1),N(y(le),{onClick:M[0]||(M[0]=Z=>y(Ge).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:V(()=>M[8]||(M[8]=[J(" Logout ")])),_:1,__:[8]})])])])]),o("div",Ho,[N(Ur,{issues:B.value,activeFilter:v.value,onFilterChanged:ie},null,8,["issues","activeFilter"]),N(kr,{searchQuery:y(s),"onUpdate:searchQuery":M[1]||(M[1]=Z=>Qe(s)?s.value=Z:null),filters:y(t),"onUpdate:filters":M[2]||(M[2]=Z=>Qe(t)?t.value=Z:null),statusOptions:e.value,priorityOptions:pe.value,assigneeOptions:F.value,tagsOptions:k.value,issues:h.value,filteredCount:L.value,onSuggestionSelected:ge},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),N(_o,{issues:B.value,loading:O.value,sortField:K.value,sortDirection:te.value,onSort:de},null,8,["issues","loading","sortField","sortDirection"]),N(Mr,{currentPage:H.value,"onUpdate:currentPage":M[3]||(M[3]=Z=>H.value=Z),itemsPerPage:p.value,"onUpdate:itemsPerPage":M[4]||(M[4]=Z=>p.value=Z),totalItems:L.value,onPageChange:C},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Vo,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:y(S)?"Real-time updates active":"Real-time updates disabled"},[o("div",Yo,[N(y(ye),{name:y(S)?"wifi":"wifi-off",class:U(["h-5 w-5 transition-colors duration-200",y(S)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:U(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",y(S)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),y(I).length>0?(n(),u("div",Ko,P(y(I).length>9?"9+":y(I).length),1)):D("",!0)])],8,qo),o("button",{onClick:w,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[N(y(ye),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),N(Fo,{notifications:d.value,onRemove:m},null,8,["notifications"])])}}};export{Go as default};
//# sourceMappingURL=IssueTracker-uO9c3bv1.js.map
