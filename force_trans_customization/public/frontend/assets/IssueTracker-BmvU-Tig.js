var Ht=Object.defineProperty,Kt=Object.defineProperties;var qt=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var mt=(e,t,s)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_e=(e,t)=>{for(var s in t||(t={}))vt.call(t,s)&&mt(e,s,t[s]);if(Qe)for(var s of Qe(t))ft.call(t,s)&&mt(e,s,t[s]);return e},rt=(e,t)=>Kt(e,qt(t));var Ge=(e,t)=>{var s={};for(var a in e)vt.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&Qe)for(var a of Qe(e))t.indexOf(a)<0&&ft.call(e,a)&&(s[a]=e[a]);return s};var ge=(e,t,s)=>new Promise((a,n)=>{var u=p=>{try{x(s.next(p))}catch(f){n(f)}},v=p=>{try{x(s.throw(p))}catch(f){n(f)}},x=p=>p.done?a(p.value):Promise.resolve(p.value).then(u,v);x((s=s.apply(e,t)).next())});import{r as L,o as je,w as Tt,a as re,d as Be,y as Jt,c as M,b as Wt,h as Qt,p as Pt,e as Gt,u as Xt,l as tt,H as ot,t as ut,f as Yt,g as Zt,N as ht,i as at,j as es,k as we,x as ts,m as be,n as ce,q as Me,v as ss,s as bt,_ as Rt,O as os,z as r,A as g,B as U,C as oe,F as Z,D as le,E as T,G as o,I as F,J as as,K as W,L as q,M as N,P as S,Q as Ce,R as Pe,S as xe,T as te,U as Ae,V as Le,W as ls,X as rs,Y as Ee,Z as pe,$ as ct,a0 as ke,a1 as Dt,a2 as Ne,a3 as ns,a4 as is,a5 as us,a6 as Se,a7 as Ie,a8 as fe,a9 as ye,aa as yt,ab as cs,ac as Te,ad as ds,ae as Ue,af as dt,ag as he,ah as gs,ai as ps,aj as Ve,ak as ms,al as xt,am as wt}from"./index-CTAKaKkk.js";function _t(e,t){if(e)return e;let s=t!=null?t:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function vs(e,t){let s=L(_t(e.value.type,e.value.as));return je(()=>{s.value=_t(e.value.type,e.value.as)}),Tt(()=>{var a;s.value||re(t)&&re(t)instanceof HTMLButtonElement&&!((a=re(t))!=null&&a.hasAttribute("type"))&&(s.value="button")}),s}let kt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Ct(e){var t,s;let a=(t=e.innerText)!=null?t:"",n=e.cloneNode(!0);if(!(n instanceof HTMLElement))return a;let u=!1;for(let x of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))x.remove(),u=!0;let v=u?(s=n.innerText)!=null?s:"":a;return kt.test(v)&&(v=v.replace(kt,"")),v}function fs(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let s=e.getAttribute("aria-labelledby");if(s){let a=s.split(" ").map(n=>{let u=document.getElementById(n);if(u){let v=u.getAttribute("aria-label");return typeof v=="string"?v.trim():Ct(u).trim()}return null}).filter(Boolean);if(a.length>0)return a.join(", ")}return Ct(e).trim()}function hs(e){let t=L(""),s=L("");return()=>{let a=re(e);if(!a)return"";let n=a.innerText;if(t.value===n)return s.value;let u=fs(a).trim().toLowerCase();return t.value=n,s.value=u,u}}var bs=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(bs||{}),ys=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ys||{});function xs(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Mt=Symbol("MenuContext");function lt(e){let t=we(Mt,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,lt),s}return t}let ws=Be({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:s}){let a=L(1),n=L(null),u=L(null),v=L([]),x=L(""),p=L(null),f=L(1);function c(_=k=>k){let k=p.value!==null?v.value[p.value]:null,h=os(_(v.value.slice()),P=>re(P.dataRef.domRef)),y=k?h.indexOf(k):null;return y===-1&&(y=null),{items:h,activeItemIndex:y}}let $={menuState:a,buttonRef:n,itemsRef:u,items:v,searchQuery:x,activeItemIndex:p,activationTrigger:f,closeMenu:()=>{a.value=1,p.value=null},openMenu:()=>a.value=0,goToItem(_,k,h){let y=c(),P=ts(_===be.Specific?{focus:be.Specific,id:k}:{focus:_},{resolveItems:()=>y.items,resolveActiveIndex:()=>y.activeItemIndex,resolveId:w=>w.id,resolveDisabled:w=>w.dataRef.disabled});x.value="",p.value=P,f.value=h!=null?h:1,v.value=y.items},search(_){let k=x.value!==""?0:1;x.value+=_.toLowerCase();let h=(p.value!==null?v.value.slice(p.value+k).concat(v.value.slice(0,p.value+k)):v.value).find(P=>P.dataRef.textValue.startsWith(x.value)&&!P.dataRef.disabled),y=h?v.value.indexOf(h):-1;y===-1||y===p.value||(p.value=y,f.value=1)},clearSearch(){x.value=""},registerItem(_,k){let h=c(y=>[...y,{id:_,dataRef:k}]);v.value=h.items,p.value=h.activeItemIndex,f.value=1},unregisterItem(_){let k=c(h=>{let y=h.findIndex(P=>P.id===_);return y!==-1&&h.splice(y,1),h});v.value=k.items,p.value=k.activeItemIndex,f.value=1}};return Jt([n,u],(_,k)=>{var h;$.closeMenu(),Wt(k,Qt.Loose)||(_.preventDefault(),(h=re(n))==null||h.focus())},M(()=>a.value===0)),Pt(Mt,$),Gt(M(()=>Xt(a.value,{0:tt.Open,1:tt.Closed}))),()=>{let _={open:a.value===0,close:$.closeMenu};return ot({ourProps:{},theirProps:e,slot:_,slots:t,attrs:s,name:"Menu"})}}}),_s=Be({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${ut()}`}},setup(e,{attrs:t,slots:s,expose:a}){let n=lt("MenuButton");a({el:n.buttonRef,$el:n.buttonRef});function u(f){switch(f.key){case ce.Space:case ce.Enter:case ce.ArrowDown:f.preventDefault(),f.stopPropagation(),n.openMenu(),Me(()=>{var c;(c=re(n.itemsRef))==null||c.focus({preventScroll:!0}),n.goToItem(be.First)});break;case ce.ArrowUp:f.preventDefault(),f.stopPropagation(),n.openMenu(),Me(()=>{var c;(c=re(n.itemsRef))==null||c.focus({preventScroll:!0}),n.goToItem(be.Last)});break}}function v(f){switch(f.key){case ce.Space:f.preventDefault();break}}function x(f){e.disabled||(n.menuState.value===0?(n.closeMenu(),Me(()=>{var c;return(c=re(n.buttonRef))==null?void 0:c.focus({preventScroll:!0})})):(f.preventDefault(),n.openMenu(),xs(()=>{var c;return(c=re(n.itemsRef))==null?void 0:c.focus({preventScroll:!0})})))}let p=vs(M(()=>({as:e.as,type:t.type})),n.buttonRef);return()=>{var f;let c={open:n.menuState.value===0},h=e,{id:$}=h,_=Ge(h,["id"]),k={ref:n.buttonRef,id:$,type:p.value,"aria-haspopup":"menu","aria-controls":(f=re(n.itemsRef))==null?void 0:f.id,"aria-expanded":n.menuState.value===0,onKeydown:u,onKeyup:v,onClick:x};return ot({ourProps:k,theirProps:_,slot:c,attrs:t,slots:s,name:"MenuButton"})}}}),ks=Be({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${ut()}`}},setup(e,{attrs:t,slots:s,expose:a}){let n=lt("MenuItems"),u=L(null);a({el:n.itemsRef,$el:n.itemsRef}),Yt({container:M(()=>re(n.itemsRef)),enabled:M(()=>n.menuState.value===0),accept(c){return c.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}});function v(c){var $;switch(u.value&&clearTimeout(u.value),c.key){case ce.Space:if(n.searchQuery.value!=="")return c.preventDefault(),c.stopPropagation(),n.search(c.key);case ce.Enter:if(c.preventDefault(),c.stopPropagation(),n.activeItemIndex.value!==null){let _=n.items.value[n.activeItemIndex.value];($=re(_.dataRef.domRef))==null||$.click()}n.closeMenu(),Rt(re(n.buttonRef));break;case ce.ArrowDown:return c.preventDefault(),c.stopPropagation(),n.goToItem(be.Next);case ce.ArrowUp:return c.preventDefault(),c.stopPropagation(),n.goToItem(be.Previous);case ce.Home:case ce.PageUp:return c.preventDefault(),c.stopPropagation(),n.goToItem(be.First);case ce.End:case ce.PageDown:return c.preventDefault(),c.stopPropagation(),n.goToItem(be.Last);case ce.Escape:c.preventDefault(),c.stopPropagation(),n.closeMenu(),Me(()=>{var _;return(_=re(n.buttonRef))==null?void 0:_.focus({preventScroll:!0})});break;case ce.Tab:c.preventDefault(),c.stopPropagation(),n.closeMenu(),Me(()=>ss(re(n.buttonRef),c.shiftKey?bt.Previous:bt.Next));break;default:c.key.length===1&&(n.search(c.key),u.value=setTimeout(()=>n.clearSearch(),350));break}}function x(c){switch(c.key){case ce.Space:c.preventDefault();break}}let p=Zt(),f=M(()=>p!==null?(p.value&tt.Open)===tt.Open:n.menuState.value===0);return()=>{var c,$;let _={open:n.menuState.value===0},P=e,{id:k}=P,h=Ge(P,["id"]),y={"aria-activedescendant":n.activeItemIndex.value===null||(c=n.items.value[n.activeItemIndex.value])==null?void 0:c.id,"aria-labelledby":($=re(n.buttonRef))==null?void 0:$.id,id:k,onKeydown:v,onKeyup:x,role:"menu",tabIndex:0,ref:n.itemsRef};return ot({ourProps:y,theirProps:h,slot:_,attrs:t,slots:s,features:ht.RenderStrategy|ht.Static,visible:f.value,name:"MenuItems"})}}}),Cs=Be({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${ut()}`}},setup(e,{slots:t,attrs:s,expose:a}){let n=lt("MenuItem"),u=L(null);a({el:u,$el:u});let v=M(()=>n.activeItemIndex.value!==null?n.items.value[n.activeItemIndex.value].id===e.id:!1),x=hs(u),p=M(()=>({disabled:e.disabled,get textValue(){return x()},domRef:u}));je(()=>n.registerItem(e.id,p)),at(()=>n.unregisterItem(e.id)),Tt(()=>{n.menuState.value===0&&v.value&&n.activationTrigger.value!==0&&Me(()=>{var y,P;return(P=(y=re(u))==null?void 0:y.scrollIntoView)==null?void 0:P.call(y,{block:"nearest"})})});function f(y){if(e.disabled)return y.preventDefault();n.closeMenu(),Rt(re(n.buttonRef))}function c(){if(e.disabled)return n.goToItem(be.Nothing);n.goToItem(be.Specific,e.id)}let $=es();function _(y){$.update(y)}function k(y){$.wasMoved(y)&&(e.disabled||v.value||n.goToItem(be.Specific,e.id,0))}function h(y){$.wasMoved(y)&&(e.disabled||v.value&&n.goToItem(be.Nothing))}return()=>{let{disabled:y}=e,P={active:v.value,disabled:y,close:n.closeMenu},D=e,{id:w}=D,C=Ge(D,["id"]);return ot({ourProps:{id:w,ref:u,role:"menuitem",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:c,onPointerenter:_,onMouseenter:_,onPointermove:k,onMousemove:k,onPointerleave:h,onMouseleave:h},theirProps:_e(_e({},s),C),slot:P,attrs:s,slots:t,name:"MenuItem"})}}});const Ss=["src","alt"],Is=Be({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(e){const t=L(!1),s=e,a=M(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),n=M(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),u=M(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),v=M(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),x=M(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),p=M(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function f(c){c.type&&(t.value=!0)}return(c,$)=>(r(),g("div",{class:U(["relative inline-block shrink-0",[n.value,a.value]])},[c.image&&!t.value?(r(),g("img",{key:0,src:c.image,alt:c.label,class:U([a.value,"h-full w-full object-cover"]),onError:$[0]||($[0]=_=>f(_))},null,42,Ss)):(r(),g("div",{key:1,class:U(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[u.value,a.value]])},[c.$slots.default?(r(),g("div",{key:0,class:U(p.value)},[oe(c.$slots,"default")],2)):(r(),g(Z,{key:1},[le(T(c.label&&c.label[0]),1)],64))],2)),c.$slots.indicator?(r(),g("div",{key:2,class:U(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",v.value])},[o("div",{class:U(x.value)},[oe(c.$slots,"indicator")],2)],2)):F("",!0)],2))}}),$s={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},Ts=["onClick"],Ps={class:"whitespace-nowrap text-ink-gray-7"},Rs=Be({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const t=as(),s=e,a=p=>{let f=()=>{p.route?t.push(p.route):p.onClick&&p.onClick()};return{label:p.label,icon:p.icon,component:p.component,onClick:f}},n=p=>(p||[]).filter(Boolean).filter(f=>f.condition?f.condition():!0).map(f=>a(f)),u=M(()=>{let p=[],f=null,c=0;for(let $ of s.options)if($!=null){if("group"in $){f&&(p.push(f),f=null);let _=rt(_e({key:c},$),{items:n($.items)});p.push(_)}else f||(f={key:c,group:"",hideLabel:!0,items:[]}),f.items.push(...n([$]));c++}return f&&p.push(f),p}),v=M(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),x=M(()=>s.placement==="left"?"bottom-start":s.placement==="right"?"bottom-end":s.placement==="center"?"bottom-center":"bottom");return(p,f)=>(r(),W(S(ws),{as:"div",class:"relative inline-block text-left"},{default:q(({open:c})=>[N(S(ls),{transition:v.value,show:c,placement:x.value},{target:q(()=>[N(S(_s),{as:"div"},{default:q(()=>[p.$slots.default?oe(p.$slots,"default",Ce(Pe({key:0},{open:c}))):(r(),W(S(xe),Pe({key:1,active:c},p.button),{default:q(()=>{var $;return[le(T(p.button?(($=p.button)==null?void 0:$.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:q(()=>[N(S(ks),{class:U(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":p.placement=="left","right-0 origin-top-right":p.placement=="right","inset-x-0 origin-top":p.placement=="center"}])},{default:q(()=>[(r(!0),g(Z,null,te(u.value,$=>(r(),g("div",{key:$.key,class:"p-1.5"},[$.group&&!$.hideLabel?(r(),g("div",$s,T($.group),1)):F("",!0),(r(!0),g(Z,null,te($.items,_=>(r(),W(S(Cs),{key:_.label},{default:q(({active:k})=>[_.component?(r(),W(Ae(_.component),{key:0,active:k},null,8,["active"])):(r(),g("button",{key:1,class:U([k?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:_.onClick},[_.icon&&typeof _.icon=="string"?(r(),W(Le,{key:0,name:_.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):_.icon?(r(),W(Ae(_.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):F("",!0),o("span",Ps,T(_.label),1)],10,Ts))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),Ds={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ms={class:"text-xl font-medium"},Ls={class:"mt-1 text-base text-ink-gray-5"},Os={__name:"ListEmptyState",setup(e){const t=we("list");return(s,a)=>(r(),g("div",Ds,[oe(s.$slots,"default",{},()=>[o("div",Ms,T(S(t).options.emptyState.title),1),o("div",Ls,T(S(t).options.emptyState.description),1),S(t).options.emptyState.button?(r(),W(S(xe),Pe({key:0},S(t).options.emptyState.button,{class:"mt-4"}),null,16)):F("",!0)])]))}};function Lt(e,t=!0){let s=t?"14px ":"",a=e.map(n=>{let u=n.width||1;return typeof u=="number"?u+"fr":u}).join(" ");return s+a}const gt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Fs={class:"truncate"},Ot={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=e,a=t,n=L(null),u=L(null),v=M(()=>{if(typeof s.item.width=="string"){const c=parseInt(s.item.width);if(s.item.width.includes("rem"))return c*16;if(s.item.width.includes("px"))return c}return u.value.offsetWidth}),x=c=>{const $=c.clientX,_=v.value,k=y=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),n.value.style.backgroundColor="rgb(199 199 199)";let P=_+(y.clientX-$);s.item.width=`${P<50?50:P}px`,p(s.item.width)},h=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),n.value.style.backgroundColor="",window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",h)};window.addEventListener("mousemove",k),window.addEventListener("mouseup",h)},p=rs(c=>{s.item.width=c,a("columnWidthUpdated")},s.debounce),f=we("list");return(c,$)=>(r(),g("div",{ref_key:"columnRef",ref:u,class:U(["group relative flex items-center",e.item.align?S(gt)[e.item.align]:"justify-between"])},[o("div",{class:U(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",c.$attrs.class])},[oe(c.$slots,"prefix",Ce(Ee({item:e.item}))),oe(c.$slots,"default",{},()=>[o("div",Fs,T(e.item.label),1)]),oe(c.$slots,"suffix",Ce(Ee({item:e.item})))],2),S(f).options.resizeColumn?oe(c.$slots,"resizer",Ce(Pe({key:0},{item:e.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:x},[o("div",{ref_key:"resizer",ref:n,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):F("",!0)],2))}},Ft={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=t,a=we("list");return(n,u)=>(r(),g("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ke({gridTemplateColumns:S(Lt)(S(a).columns,S(a).options.selectable)})},[S(a).options.selectable?(r(),W(ct,{key:0,class:"cursor-pointer duration-300",modelValue:S(a).allRowsSelected,onClick:pe(S(a).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):F("",!0),oe(n.$slots,"default",{},()=>[(r(!0),g(Z,null,te(S(a).columns,v=>(r(),W(Ot,{key:v.key,item:v,onColumnWidthUpdated:x=>s("columnWidthUpdated",v)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Vs={class:"truncate text-base"},Vt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const t=e,s=M(()=>{var v,x;return(v=t.column)!=null&&v.getLabel?(x=t.column)==null?void 0:x.getLabel({row:t.row}):n(t.item).label||""}),a=M(()=>u.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):n(t.item).label:"");function n(v){return v&&typeof v=="object"?v:{label:v}}const u=we("list");return(v,x)=>(r(),g("div",{class:U(["flex items-center space-x-2",S(gt)[e.align]])},[oe(v.$slots,"prefix",{},()=>[e.column.prefix?(r(),W(Ae(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):F("",!0)]),N(S(Dt),Ce(Ee(S(u).options.showTooltip?{text:a.value}:{text:""})),{default:q(()=>[oe(v.$slots,"default",Ce(Ee({label:s.value})),()=>[o("div",Vs,T(s.value),1)])]),_:3},16),oe(v.$slots,"suffix")],2))}},pt={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const t=e,s=we("list"),a=M(()=>{var c;return(c=s.value.rows)!=null&&c.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===t.row[s.value.rowKey]:!1}),n=M(()=>s.value.selections.has(t.row[s.value.rowKey])),u=M(()=>s.value.options.enableActive&&s.value.activeRow.value===t.row.name),v=M(()=>s.value.options.getRowRoute||s.value.options.onRowClick),x=M(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),p=M(()=>{var _,k,h;if(!n.value)return"rounded";const c=[...s.value.selections];let $=(_=s.value.rows[0])!=null&&_.group?s.value.rows.map(y=>y.rows):[s.value.rows];for(let y of $){let P=y.findIndex(D=>D==t.row);if(P===-1)continue;let w=!c.includes((k=y[P+1])==null?void 0:k.name),C=!c.includes((h=y[P-1])==null?void 0:h.name);return(w?"rounded-b ":"")+(C?"rounded-t":"")}}),f=(c,$)=>{s.value.options.onRowClick&&s.value.options.onRowClick(c,$),s.value.activeRow.value===c.name?s.value.activeRow.value=null:s.value.activeRow.value=c.name};return(c,$)=>(r(),W(Ae(S(s).options.getRowRoute?"router-link":"div"),Pe({class:[[p.value,n.value||u.value?"bg-surface-gray-2":"",v.value?"cursor-pointer":"",v.value?n.value||u.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:S(s).options.getRowRoute?S(s).options.getRowRoute(e.row):void 0,onClick:_=>f(e.row,_)}),{default:q(()=>[(r(),W(Ae(S(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:q(()=>{var _,k;return[o("div",{class:"grid items-center space-x-4 px-2",style:ke({height:x.value,gridTemplateColumns:S(Lt)(S(s).columns,S(s).options.selectable)})},[S(s).options.selectable?(r(),g("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:$[1]||($[1]=pe(()=>{},["stop","prevent"])),onDblclick:$[2]||($[2]=pe(()=>{},["stop"]))},[N(ct,{modelValue:n.value,class:"cursor-pointer duration-300",onClick:$[0]||($[0]=pe(h=>S(s).toggleRow(e.row[S(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):F("",!0),(r(!0),g(Z,null,te(S(s).columns,(h,y)=>(r(),g("div",{key:h.key,class:U([S(gt)[h.align],y==0?"text-ink-gray-9":"text-ink-gray-7"])},[oe(c.$slots,"default",Pe({ref_for:!0},{idx:y,column:h,item:e.row[h.key],isActive:u.value}),()=>[S(s).slots.cell?(r(),W(Ae(S(s).slots.cell),Pe({key:0,ref_for:!0},{column:h,row:e.row,item:e.row[h.key],align:h.align}),null,16)):(r(),W(Vt,{key:1,column:h,row:e.row,item:e.row[h.key],align:h.align},null,8,["column","row","item","align"]))])],2))),128))],4),a.value?F("",!0):(r(),g("div",{key:0,class:U(["h-px border-t",p.value==="rounded"||(k=(_=p.value)==null?void 0:_.includes)!=null&&k.call(_,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},As={class:"h-full overflow-y-auto"},At={__name:"ListRows",setup(e){const t=we("list");return(s,a)=>(r(),g("div",As,[oe(s.$slots,"default",{},()=>[(r(!0),g(Z,null,te(S(t).rows,n=>(r(),W(pt,{key:n[S(t).rowKey],row:n},null,8,["row"]))),128))])]))}},Es={},js={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Us(e,t){return r(),g("svg",js,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Bs=Ne(Es,[["render",Us]]),Ns={class:"flex items-center"},zs={class:"w-full py-1.5 pr-2"},Hs={key:1,class:"text-base font-medium leading-6"},Ks={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const t=e,s=we("list");function a(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(n,u)=>(r(),g(Z,null,[o("div",Ns,[o("button",{onClick:a,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[N(Bs,{class:U(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),oe(n.$slots,"default",{},()=>[o("div",zs,[S(s).slots["group-header"]?(r(),W(Ae(S(s).slots["group-header"]),Ce(Pe({key:0},{group:e.group})),null,16)):(r(),g("span",Hs,T(e.group.group),1))])])]),u[0]||(u[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},qs={key:0,class:"mb-5 mt-2"},Js={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const t=we("list");return(s,a)=>e.group.collapsed?F("",!0):(r(),g("div",qs,[oe(s.$slots,"default",{},()=>[(r(!0),g(Z,null,te(e.group.rows,n=>(r(),W(pt,{key:n[S(t).rowKey],row:n},null,8,["row"]))),128))])]))}},Ws={class:"h-full overflow-y-auto"},Qs={__name:"ListGroups",setup(e){const t=we("list");return(s,a)=>(r(),g("div",Ws,[(r(!0),g(Z,null,te(S(t).rows,n=>(r(),g("div",{key:n.group},[oe(s.$slots,"default",{},()=>[N(Ks,{group:n},{default:q(()=>[s.$slots["group-header"]?oe(s.$slots,"group-header",Pe({key:0,ref_for:!0},{group:n})):F("",!0)]),_:2},1032,["group"]),N(Js,{group:n},null,8,["group"])])]))),128))]))}},Gs={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Xs={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Ys={class:"flex items-center space-x-3"},Zs={class:"mr-3"},eo={class:"flex items-center space-x-1"},Et=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const t=we("list");let s=M(()=>t.value.options.selectionText(t.value.selections.size));return(a,n)=>(r(),W(ns,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:q(()=>[S(t).selections.size?(r(),g("div",Gs,[o("div",{class:U(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",a.$attrs.class])},[oe(a.$slots,"default",Ce(Ee({selections:S(t).selections,allRowsSelected:S(t).allRowsSelected,selectAll:()=>S(t).toggleAllRows(!0),unselectAll:()=>S(t).toggleAllRows(!1)})),()=>[o("div",Xs,[o("div",Ys,[N(ct,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,T(S(s)),1)]),o("div",Zs,[oe(a.$slots,"actions",Ce(Ee({selections:S(t).selections,allRowsSelected:S(t).allRowsSelected,selectAll:()=>S(t).toggleAllRows(!0),unselectAll:()=>S(t).toggleAllRows(!1)})))])]),o("div",eo,[N(S(xe),{class:U(["w- text-ink-gray-7",S(t).allRowsSelected?"cursor-not-allowed":""]),disabled:S(t).allRowsSelected,variant:"ghost",onClick:n[0]||(n[0]=u=>S(t).toggleAllRows(!0))},{default:q(()=>n[2]||(n[2]=[le(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),N(S(xe),{icon:"x",variant:"ghost",onClick:n[1]||(n[1]=u=>S(t).toggleAllRows(!1))})])])],2)])):F("",!0)]),_:3}))}}),to={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},so=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:t,emit:s}){const a=e,n=is();let u=us(new Set),v=L(null);const x=s;Se(u,h=>{u.size&&(v.value=null),x("update:selections",h)}),Se(v,h=>{x("update:active-row",h)});let p=M(()=>{function h(P){return P===void 0?!0:P}function y(P){return P===void 0?!1:P}return{getRowRoute:a.options.getRowRoute||null,onRowClick:a.options.onRowClick||null,showTooltip:h(a.options.showTooltip),selectionText:a.options.selectionText||(P=>P===1?"1 row selected":`${P} rows selected`),enableActive:y(a.options.enableActive),selectable:h(a.options.selectable),resizeColumn:y(a.options.resizeColumn),rowHeight:a.options.rowHeight||40,emptyState:a.options.emptyState}});const f=M(()=>a.rows.length?$.value?u.size===a.rows.reduce((h,y)=>h+y.rows.length,0):u.size===a.rows.length:!1),c=M(()=>p.value.selectable);let $=M(()=>a.rows.every(h=>h.group&&h.rows&&Array.isArray(h.rows)));function _(h){u.delete(h)||u.add(h)}function k(h){if(!h||f.value){u.clear();return}if($.value){a.rows.forEach(y=>{y.rows.forEach(P=>u.add(P[a.rowKey]))});return}a.rows.forEach(y=>u.add(y[a.rowKey]))}return Pt("list",M(()=>({rowKey:a.rowKey,rows:a.rows,columns:a.columns,options:p.value,selections:u,activeRow:v,allRowsSelected:f.value,slots:n,toggleRow:_,toggleAllRows:k}))),t({selections:u,allRowsSelected:f,toggleRow:_,toggleAllRows:k}),(h,y)=>(r(),g("div",to,[o("div",{class:U(["flex w-max min-w-full flex-col overflow-y-hidden",h.$attrs.class]),style:ke(h.$attrs.style)},[oe(h.$slots,"default",Ce(Ee({showGroupedRows:S($),selectable:c.value})),()=>[N(Ft),a.rows.length?(r(),g(Z,{key:0},[S($)?(r(),W(Qs,{key:0})):(r(),W(At,{key:1}))],64)):(r(),W(Os,{key:1})),c.value?(r(),W(Et,{key:2})):F("",!0)])],6)]))}});function oo(a,n){return ge(this,arguments,function*(e,t,s={}){t||(t={});let u=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},s.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(u["X-Frappe-CSRF-Token"]=window.csrf_token);let v=e.startsWith("/")?e:`/api/method/${e}`;const x=yield fetch(v,{method:"POST",headers:u,body:JSON.stringify(t)});if(x.ok){const p=yield x.json();if(p.docs||e==="login")return p;if(p.exc)try{console.groupCollapsed(e),console.log(`method: ${e}`),console.log("params:",t);let f=JSON.parse(p.exc);for(let c of f)console.log(c);console.groupEnd()}catch(f){console.warn("Error printing debug messages",f)}return p.message}else{let p=yield x.text(),f,c;try{f=JSON.parse(p)}catch(k){}let $=[[e,f.exc_type,f._error_message].filter(Boolean).join(" ")];if(f.exc){c=f.exc;try{c=JSON.parse(c)[0],console.log(c)}catch(k){}}let _=new Error($.join(`
`));throw _.exc_type=f.exc_type,_.exc=c,_.status=x.status,_.messages=f._server_messages?JSON.parse(f._server_messages):[],_.messages=_.messages.concat(f.message),_.messages=_.messages.map(k=>{try{return JSON.parse(k).message}catch(h){return k}}),_.messages=_.messages.filter(Boolean),_.messages.length||(_.messages=f._error_message?[f._error_message]:["Internal Server Error"]),s.onError&&s.onError({response:x,status:x.status,error:_}),_}})}const me=Ie({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(e){const t=e||{},s=t.limit_page_length||10,a=t.limit_start||0,n=t.filters||{},u=t.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:s,limit_start:a,filters:n,order_by:u}),{limit_page_length:s,limit_start:a,filters:n,order_by:u}},onError(e){console.error("Failed to fetch issues:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),jt=Ie({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(e){const t=e||{},s=t.filters||t||{};return console.log("issuesCountResource filters:",s),{filters:s}},onError(e){console.error("Failed to fetch issues count:",e)}});function Ke(e={}){const t={limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,filters:e.filters||{},order_by:e.order_by||"creation desc"};return console.log("reloadIssues with params:",t),me.reload(t)}function st(e={}){return console.log("getIssuesCount with filters:",e),jt.reload(e)}const Ut=Ie({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(e){return{issue_name:e}},onError(e){console.error("Failed to fetch single issue:",e)},auto:!1});function ao(e){return Ut.reload(e)}const lo=Ie({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(e){console.error("Failed to fetch issue priorities:",e)},auto:!0}),ro=Ie({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(e){console.error("Failed to fetch issue types:",e)},auto:!0});Ie({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(e){console.error("Failed to fetch projects:",e)},auto:!0});let Xe=null,St=null,Ye=null,It=null;function no(){const e=lo.data||[],t=JSON.stringify(e);if(Xe&&St===t)return Xe;const s=[{label:"All Priority",value:""},...e.map(a=>({label:a.name,value:a.name}))];return Xe=Object.freeze(s),St=t,Xe}function io(){const e=ro.data||[],t=JSON.stringify(e);if(Ye&&It===t)return Ye;const s=[{label:"All Types",value:""},...e.map(a=>({label:a.name,value:a.name}))];return Ye=Object.freeze(s),It=t,Ye}const uo=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function co(){return uo}const go=Ie({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(e){console.error("Failed to fetch tag colors:",e)},auto:!0}),Ze=new Map;let $t=null;function Bt(e){const t=go.data||{},s=JSON.stringify(t);if($t!==s&&(Ze.clear(),$t=s),Ze.has(e))return Ze.get(e);const a=t[e]||null;return Ze.set(e,a),a}const nt=Ie({url:"force_trans_customization.api.issues.issue_search",makeParams(e){const t=e||{};return{search_query:t.search_query||"",limit:t.limit||8}},onError(e){console.error("Failed to search issues:",e)},auto:!1});function po(e,t=8){return!e||e.length<2?Promise.resolve(nt.data||[]):nt.reload({search_query:e,limit:t}).then(()=>nt.data||[])}const ve=Ie({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to filter issues by stat:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),Nt=Ie({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to get stat filter count:",e)},auto:!1});function it(e,t={}){const s={stat_type:e,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),console.log("filterIssuesByStat params:",s),ve.reload(s)}function et(e,t=null){const s={stat_type:e};return t&&(s.filters=t),Nt.reload(s)}const mo={class:"relative w-full max-w-2xl mx-auto"},vo={class:"relative group"},fo=["placeholder"],ho={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},bo={key:1,class:"flex items-center pointer-events-none"},yo={key:2,class:"animate-spin"},xo={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},wo={class:"flex items-center justify-between"},_o={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},ko={class:"text-xs text-slate-500"},Co={key:0,class:"px-6 py-8 text-center"},So=["onClick"],Io={class:"flex items-start space-x-4"},$o={class:"flex-1 min-w-0"},To={class:"flex items-start justify-between"},Po={class:"flex-1 min-w-0"},Ro={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},Do=["innerHTML"],Mo={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Lo={key:0,class:"ml-2"},Oo={class:"flex-shrink-0 ml-4"},Fo={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Vo={key:0,class:"flex items-center"},Ao={key:1,class:"flex items-center"},Eo={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},jo={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(e,{expose:t,emit:s}){const a=e,n=s,u=L(null),v=L(a.modelValue),x=L(!1),p=L(!1),f=L(-1),c=L(!1),$=L(0),_=L(null),k=L([]);let h=null;Se(()=>a.modelValue,R=>{v.value=R}),Se(v,R=>{n("update:modelValue",R),n("search",R)});const y=L([]),P=R=>ge(this,null,function*(){if(!R||R.length<2){y.value=[],p.value=!1,c.value=!1;return}try{c.value=!0;const O=performance.now(),H=yield po(R,8);$.value=performance.now()-O,y.value=H||[],p.value=!0}catch(O){console.error("Search error:",O),y.value=[],p.value=!1}finally{c.value=!1}}),w=R=>{if(h&&clearTimeout(h),f.value=-1,!R||R.length<2){y.value=[],p.value=!1,c.value=!1;return}c.value=!0,h=setTimeout(()=>{P(R)},1e3)},C=()=>{w(v.value)},D=(R,O)=>{if(!R||!O)return R;const H=O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ue=new RegExp(`(${H})`,"gi");return R.replace(ue,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},z=R=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[R]||"bg-gray-100 text-gray-800 border border-gray-200",E=()=>{x.value=!0,j&&(clearTimeout(j),j=null),v.value.length>=2&&(y.value.length>0?p.value=!0:P(v.value))};let j=null;const B=()=>{x.value=!1,j=setTimeout(()=>{p.value=!1,j=null},200)},V=R=>{var O;if(p.value)switch(R.key){case"ArrowDown":R.preventDefault(),f.value=Math.min(f.value+1,y.value.length-1),X();break;case"ArrowUp":R.preventDefault(),f.value=Math.max(f.value-1,-1),X();break;case"Enter":R.preventDefault(),f.value>=0&&J(y.value[f.value]);break;case"Escape":ee(),(O=u.value)==null||O.blur();break}},J=R=>{v.value=R.name,ee();const H=`${window.location.origin}/app/issue/${R.name}`;window.open(H,"_blank"),n("suggestion-selected",R)},A=()=>{var R;v.value="",ee(),(R=u.value)==null||R.focus()},ee=()=>{p.value=!1,f.value=-1},X=()=>{if(f.value<0||!_.value||!k.value[f.value])return;const R=_.value,O=k.value[f.value];if(O){const H=R.getBoundingClientRect(),ue=O.getBoundingClientRect(),ae=ue.top-H.top+R.scrollTop,$e=ae+ue.height,Re=R.scrollTop,ne=R.clientHeight;ae<Re?R.scrollTop=ae:$e>Re+ne&&(R.scrollTop=$e-ne)}},Y=R=>{if(!R)return"";try{const O=new Date(R),H=new Date,ue=Math.abs(H-O),ae=Math.ceil(ue/(1e3*60*60*24));return ae===1?"Today":ae===2?"Yesterday":ae<=7?`${ae-1} days ago`:O.toLocaleDateString("en-US",{month:"short",day:"numeric",year:O.getFullYear()!==H.getFullYear()?"numeric":void 0})}catch(O){return console.error("Error formatting date:",O),R}},ie=R=>{var O,H;(R.metaKey||R.ctrlKey)&&R.key==="k"&&(R.preventDefault(),(O=u.value)==null||O.focus(),(H=u.value)==null||H.select())};return je(()=>{document.addEventListener("keydown",ie)}),at(()=>{document.removeEventListener("keydown",ie),h&&clearTimeout(h),j&&clearTimeout(j)}),t({focus:()=>{var R,O;(R=u.value)==null||R.focus(),(O=u.value)==null||O.select()},select:()=>{var R;return(R=u.value)==null?void 0:R.select()},$el:u}),(R,O)=>(r(),g("div",mo,[o("div",vo,[O[4]||(O[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),fe(o("input",{ref_key:"searchInput",ref:u,type:"text","onUpdate:modelValue":O[0]||(O[0]=H=>v.value=H),onInput:C,onFocus:E,onBlur:B,onKeydown:V,placeholder:e.placeholder,class:U(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":x.value,"bg-slate-50/50":!x.value&&v.value}])},null,42,fo),[[ye,v.value]]),o("div",ho,[v.value?(r(),g("button",{key:0,onClick:A,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},O[1]||(O[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):F("",!0),!v.value&&!x.value?(r(),g("div",bo,O[2]||(O[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),le("K ")],-1)]))):F("",!0),c.value?(r(),g("div",yo,O[3]||(O[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):F("",!0)])]),p.value?(r(),g("div",{key:0,class:U(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":p.value}])},[y.value.length>0?(r(),g("div",xo,[o("div",wo,[o("span",_o,T(y.value.length)+" Result"+T(y.value.length!==1?"s":""),1),o("span",ko,T(Math.round($.value))+"ms ",1)])])):F("",!0),o("div",{ref_key:"suggestionsContainer",ref:_,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[y.value.length===0&&v.value.length>=2?(r(),g("div",Co,O[5]||(O[5]=[yt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):F("",!0),(r(!0),g(Z,null,te(y.value,(H,ue)=>(r(),g("div",{key:H.name||ue,ref_for:!0,ref:ae=>k.value[ue]=ae,onClick:ae=>J(H),class:U(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":ue===f.value}])},[o("div",Io,[O[8]||(O[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",$o,[o("div",To,[o("div",Po,[o("h4",Ro,[o("span",{innerHTML:D(H.subject||H.name,v.value)},null,8,Do)]),o("p",Mo,[le(" ID: "+T(H.name)+" ",1),H.customer?(r(),g("span",Lo,"• "+T(H.customer),1)):F("",!0)])]),o("div",Oo,[o("span",{class:U(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",z(H.status)])},T(H.status),3)])]),o("div",Fo,[H.raised_by?(r(),g("div",Vo,[O[6]||(O[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),le(" "+T(H.raised_by),1)])):F("",!0),H.creation?(r(),g("div",Ao,[O[7]||(O[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),le(" "+T(Y(H.creation)),1)])):F("",!0)])])])],10,So))),128))],512),v.value&&y.value.length>0?(r(),g("div",Eo,O[9]||(O[9]=[yt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):F("",!0)],2)):F("",!0),p.value?(r(),g("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:ee})):F("",!0)]))}},Uo=Ne(jo,[["__scopeId","data-v-4969cdcf"]]),Bo={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},No={class:"mb-6"},zo={class:"relative max-w-2xl mx-auto"},Ho={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Ko={class:"border-t border-gray-200 pt-4"},qo={class:"flex items-center justify-between"},Jo={class:"flex items-center space-x-3 flex-1"},Wo={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Qo={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},Go={class:"text-green-800 font-medium"},Xo={class:"text-green-600"},Yo={class:"text-green-900"},Zo=["onClick"],ea={class:"flex items-center space-x-2 ml-4"},ta=["disabled"],sa={key:0,class:"flex items-center"},oa={key:1},aa={key:0,class:"relative"},la={class:"flex"},ra={class:"w-48 border-r border-gray-200 bg-gray-50"},na={class:"max-h-64 overflow-y-auto"},ia=["onClick"],ua={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},ca={class:"flex-1 min-w-96"},da={class:"p-4"},ga={key:0,class:"text-center py-8 text-gray-500"},pa={key:1,class:"space-y-4"},ma={class:"col-span-2 flex items-center"},va={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},fa={class:"col-span-2 flex items-center"},ha={class:"text-gray-700 font-medium truncate"},ba={class:"col-span-7"},ya=["onUpdate:modelValue","placeholder"],xa=["onUpdate:modelValue","placeholder"],wa={key:2,class:"space-y-2"},_a={key:0,class:"grid grid-cols-2 gap-2"},ka=["onUpdate:modelValue","onInput"],Ca=["onUpdate:modelValue","onInput"],Sa={key:1},Ia=["onUpdate:modelValue"],$a={key:3,class:"space-y-2"},Ta={key:0,class:"grid grid-cols-2 gap-2"},Pa=["onUpdate:modelValue","onInput"],Ra=["onUpdate:modelValue","onInput"],Da={key:1},Ma=["onUpdate:modelValue"],La={key:4,class:"relative"},Oa={key:0},Fa=["onUpdate:modelValue"],Va={value:""},Aa=["value"],Ea={key:1,class:"space-y-2"},ja={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ua=["onClick"],Ba={key:5,class:"space-y-2"},Na={class:"space-y-2"},za={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ha=["onClick"],Ka={class:"relative"},qa=["onUpdate:modelValue","onInput","onKeydown","placeholder"],Ja={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Wa={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Qa=["onClick"],Ga={class:"font-medium text-gray-900"},Xa={class:"text-xs text-gray-500"},Ya={key:6,class:"space-y-2"},Za={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},el=["onClick"],tl={class:"relative"},sl=["onUpdate:modelValue","onInput","onKeyup","onKeydown"],ol={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},al={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},ll=["onClick"],rl={class:"flex items-center justify-between"},nl={class:"font-medium text-gray-900"},il={class:"text-xs text-gray-500"},ul={class:"col-span-1 flex items-start justify-center pt-1"},cl=["onClick"],dl={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},gl=["disabled"],pl={key:0,class:"flex items-center"},ml={key:1},vl={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(e,{emit:t}){const s=e,a=t,n=L(s.searchQuery),u=L(!1),v=L([]),x=L([]);let p=0;const f=L(!1),c=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],$={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},_={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},k=M(()=>JSON.stringify(v.value)!==JSON.stringify(x.value)),h=l=>{const d=c.find(i=>i.value===l);return(d==null?void 0:d.type)||"text"},y=l=>{const d=c.find(i=>i.value===l);return(d==null?void 0:d.label)||l},P=l=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[l]||`Enter ${y(l).toLowerCase()}...`,w=l=>{const d=h(l);return _[d]||_.text},C=l=>$[l]||[],D=l=>l.displayValue?l.displayValue:Array.isArray(l.value)?l.value.join(", "):l.value,z=l=>l?typeof l=="string"?l.split(",").map(d=>d.trim()).filter(Boolean):l:[],E=(l,d)=>{const i=z(l.value);i.splice(d,1),l.value=i.join(", ")},j=l=>l?l.split(",").map(d=>d.trim()).filter(Boolean):[],B=(l,d)=>{const i=j(l.value);i.splice(d,1),l.value=i.join(", ")},V=(l,d)=>d.userDisplayMap&&d.userDisplayMap[l]?d.userDisplayMap[l]:l,J=(l,d)=>{const i=z(l.value);i.includes(d.value)||(i.push(d.value),l.value=i.join(", "),l.userDisplayMap||(l.userDisplayMap={}),l.userDisplayMap[d.value]=d.label),l.searchValue="",l.suggestions=[],l.selectedLinkIndex=-1},A=(l,d)=>{if(!l.suggestions||l.suggestions.length===0)return;const i=l.suggestions.length-1;(l.selectedLinkIndex===void 0||l.selectedLinkIndex===null)&&(l.selectedLinkIndex=-1),d==="down"?l.selectedLinkIndex=l.selectedLinkIndex<i?l.selectedLinkIndex+1:0:d==="up"&&(l.selectedLinkIndex=l.selectedLinkIndex>0?l.selectedLinkIndex-1:i),Y()},ee=l=>{l.selectedLinkIndex>=0&&l.suggestions&&l.suggestions[l.selectedLinkIndex]&&J(l,l.suggestions[l.selectedLinkIndex])},X=l=>{l.suggestions=[],l.selectedLinkIndex=-1},Y=l=>{Me(()=>{const d=document.querySelector('[ref="selectedLinkOption"]');d&&d.scrollIntoView({block:"nearest",behavior:"smooth"})})};let ie={};const R=(l,d)=>ge(this,null,function*(){l.loadingTags=!0;const i=l.selectedTagIndex;ie[l.id]&&clearTimeout(ie[l.id]),ie[l.id]=setTimeout(()=>ge(this,null,function*(){try{const Q=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:d||"",limit:15})});if(Q.ok){const I=yield Q.json();l.tagSuggestions=I.message||[],!l.tagSuggestions||l.tagSuggestions.length===0?l.selectedTagIndex=-1:i>=0&&i<l.tagSuggestions.length?l.selectedTagIndex=i:l.selectedTagIndex>=l.tagSuggestions.length&&(l.selectedTagIndex=Math.max(0,l.tagSuggestions.length-1))}}catch(Q){console.error("Tag search error:",Q),l.tagSuggestions=[]}finally{l.loadingTags=!1}}),300)}),O=(l,d)=>{const i=j(l.value);i.includes(d.value)||(i.push(d.value),l.value=i.join(", ")),l.tagInput="",l.tagSuggestions=[],l.selectedTagIndex=-1},H=(l,d)=>{if(!l.tagSuggestions||l.tagSuggestions.length===0)return;const i=l.tagSuggestions.length-1;(l.selectedTagIndex===void 0||l.selectedTagIndex===null)&&(l.selectedTagIndex=-1),d==="down"?l.selectedTagIndex=l.selectedTagIndex<i?l.selectedTagIndex+1:0:d==="up"&&(l.selectedTagIndex=l.selectedTagIndex>0?l.selectedTagIndex-1:i),$e()},ue=l=>{l.selectedTagIndex>=0&&l.tagSuggestions&&l.tagSuggestions[l.selectedTagIndex]&&O(l,l.tagSuggestions[l.selectedTagIndex])},ae=l=>{l.tagSuggestions=[],l.selectedTagIndex=-1},$e=l=>{Me(()=>{const d=document.querySelector('[ref="selectedTagOption"]');d&&d.scrollIntoView({block:"nearest",behavior:"smooth"})})},Re=l=>{const d=Bt(l);if(d){const i=d.startsWith("#")?d:`#${d}`,Q=i.replace("#",""),I=parseInt(Q.substr(0,2),16),se=parseInt(Q.substr(2,2),16),Fe=parseInt(Q.substr(4,2),16);return{backgroundColor:`rgba(${I}, ${se}, ${Fe}, 0.15)`,color:"#000000",borderColor:i,borderWidth:"1.5px"}}return{backgroundColor:"rgba(107, 114, 128, 0.1)",color:"#000000",borderColor:"rgba(107, 114, 128, 0.3)",borderWidth:"1px"}};let ne={};const de=(l,d)=>ge(this,null,function*(){l.searchValue=d,l.loading=!0;const i=l.selectedLinkIndex;ne[l.id]&&clearTimeout(ne[l.id]),ne[l.id]=setTimeout(()=>ge(this,null,function*(){try{let Q=[],I="";if(l.field==="customer"?I="/api/method/force_trans_customization.api.issues.search_customers":l.field==="contact"?I="/api/method/force_trans_customization.api.issues.search_contacts":l.field==="lead"?I="/api/method/force_trans_customization.api.issues.search_leads":l.field==="custom_assigned_csm_team"?I="/api/method/force_trans_customization.api.issues.search_user_groups":l.field==="custom_users_assigned"&&(I="/api/method/force_trans_customization.api.issues.search_users"),I){const se=yield fetch(I,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:d||"",limit:10,doctype_filter:l.field==="custom_users_assigned"?"User":void 0})});se.ok&&(Q=(yield se.json()).message||[])}l.suggestions=Q,!l.suggestions||l.suggestions.length===0?l.selectedLinkIndex=-1:i>=0&&i<l.suggestions.length?l.selectedLinkIndex=i:l.selectedLinkIndex>=l.suggestions.length&&(l.selectedLinkIndex=Math.max(0,l.suggestions.length-1))}catch(Q){console.error("Search error:",Q),l.suggestions=[]}finally{l.loading=!1}}),300)}),Oe=(l,d)=>w(l).map(Q=>({label:Q.label,onClick:()=>{d.operator!==Q.value&&(h(l)==="date"&&(Q.value==="between"?d.value&&!d.startValue&&(d.startValue=d.value,d.endValue=""):d.operator==="between"&&(d.startValue&&!d.value&&(d.value=d.startValue),d.startValue="",d.endValue="")),d.multiSelectValue=null,d.searchValue="",d.suggestions=[],d.searchOptions=[]),d.operator=Q.value}})),qe=(l,d)=>{var Q;return((Q=w(d).find(I=>I.value===l))==null?void 0:Q.label)||l},m=(l,d)=>{const Q=C(d).find(I=>I.value===l);return Q?Q.label:l},b=l=>{l.startValue&&l.endValue?l.value=`${l.startValue},${l.endValue}`:l.value=""},K=l=>{var I;const d=h(l);let i="equals";d==="link"?i="in":d==="tags"?i="has":i=((I=w(l)[0])==null?void 0:I.value)||"equals";const Q={id:++p,field:l,operator:i,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},selectedLinkIndex:-1,tagInput:"",tagSuggestions:[],loadingTags:!1,selectedTagIndex:-1};v.value.push(Q)},G=l=>{v.value.splice(l,1)},De=l=>{x.value.splice(l,1),Je()},ze=()=>ge(this,null,function*(){if(k.value){f.value=!0;try{x.value=JSON.parse(JSON.stringify(v.value)),Je(),u.value=!1}catch(l){console.error("Error applying filters:",l)}finally{setTimeout(()=>{f.value=!1},500)}}}),He=()=>{v.value=[],x.value=[],n.value="",a("update:searchQuery",""),a("update:filters",[]),a("filters-applied",[]),u.value=!1},Je=()=>{const l=x.value.filter(d=>d.value&&d.value.toString().trim()).map(d=>({field:d.field,operator:d.operator,value:d.value.toString().trim(),displayValue:d.displayValue||null}));console.log("Emitting filters:",l),a("update:filters",l),a("filters-applied",l)},We=l=>{n.value=l,a("update:searchQuery",l)},zt=l=>{a("suggestion-selected",l)};return Se(()=>s.searchQuery,l=>{n.value=l}),je(()=>{const l=localStorage.getItem("issue_filters");if(l)try{const d=JSON.parse(l);x.value=d.applied||[],v.value=d.pending||[]}catch(d){console.warn("Failed to parse saved filters:",d)}Se(()=>v.value,d=>{d.forEach(i=>{h(i.field)==="link"&&i.searchValue&&de(i,i.searchValue)})},{deep:!0})}),Se([x,v],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:x.value,pending:v.value}))},{deep:!0}),(l,d)=>(r(),g("div",Bo,[o("div",No,[o("div",zo,[N(Uo,{ref:"searchBoxRef","model-value":n.value,"onUpdate:modelValue":We,onSuggestionSelected:zt,issues:e.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),n.value?(r(),g("div",Ho," Searching in "+T(e.filteredCount)+" issues ",1)):F("",!0)])]),o("div",Ko,[o("div",qo,[o("div",Jo,[o("button",{onClick:d[0]||(d[0]=i=>u.value=!u.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[d[4]||(d[4]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),d[5]||(d[5]=o("span",null,"Filters",-1)),x.value.length>0?(r(),g("span",Wo,T(x.value.length),1)):F("",!0)]),x.value.length>0?(r(),g("div",Qo,[(r(!0),g(Z,null,te(x.value,(i,Q)=>(r(),g("div",{key:i.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",Go,T(y(i.field)),1),o("span",Xo,T(i.operator),1),o("span",Yo,T(D(i)),1),o("button",{onClick:I=>De(Q),class:"text-green-400 hover:text-red-600 ml-1"},d[6]||(d[6]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Zo)]))),128))])):F("",!0)]),o("div",ea,[x.value.length>0||n.value?(r(),g("button",{key:0,onClick:He,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):F("",!0),v.value.length>0?(r(),g("button",{key:1,onClick:ze,class:U(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",f.value?"bg-blue-500 text-white cursor-wait":k.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!k.value||f.value},[f.value?(r(),g("span",sa,d[7]||(d[7]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),le(" Applying... ")]))):(r(),g("span",oa,T(k.value?"Apply Filters":"Filters Applied"),1))],10,ta)):F("",!0)])])]),u.value?(r(),g("div",aa,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:d[2]||(d[2]=pe(()=>{},["stop"]))},[o("div",la,[o("div",ra,[d[8]||(d[8]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",na,[(r(),g(Z,null,te(c,i=>o("button",{key:i.value,onClick:pe(Q=>K(i.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,T(i.label),1),o("span",ua,T(i.type),1)],8,ia)),64))])]),o("div",ca,[o("div",da,[v.value.length===0?(r(),g("div",ga,d[9]||(d[9]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(r(),g("div",pa,[(r(!0),g(Z,null,te(v.value,(i,Q)=>(r(),g("div",{key:i.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",ma,[o("span",va,T(y(i.field)),1)]),o("div",fa,[N(S(Rs),{options:Oe(i.field,i),placement:"left"},{default:q(({open:I})=>[o("button",{class:U(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",I?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",ha,T(qe(i.operator,i.field)),1),d[10]||(d[10]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",ba,[h(i.field)==="text"?fe((r(),g("input",{key:0,"onUpdate:modelValue":I=>i.value=I,type:"text",placeholder:P(i.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,ya)),[[ye,i.value]]):h(i.field)==="email"?fe((r(),g("input",{key:1,"onUpdate:modelValue":I=>i.value=I,type:"email",placeholder:P(i.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,xa)),[[ye,i.value]]):h(i.field)==="datetime"?(r(),g("div",wa,[i.operator==="between"?(r(),g("div",_a,[o("div",null,[fe(o("input",{"onUpdate:modelValue":I=>i.startValue=I,type:"datetime-local",placeholder:"Start date and time",onInput:I=>b(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,ka),[[ye,i.startValue]]),d[11]||(d[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[fe(o("input",{"onUpdate:modelValue":I=>i.endValue=I,type:"datetime-local",placeholder:"End date and time",onInput:I=>b(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ca),[[ye,i.endValue]]),d[12]||(d[12]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(r(),g("div",Sa,[fe(o("input",{"onUpdate:modelValue":I=>i.value=I,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Ia),[[ye,i.value]]),d[13]||(d[13]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):h(i.field)==="date"?(r(),g("div",$a,[i.operator==="between"?(r(),g("div",Ta,[o("div",null,[fe(o("input",{"onUpdate:modelValue":I=>i.startValue=I,type:"date",onInput:I=>b(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Pa),[[ye,i.startValue]]),d[14]||(d[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[fe(o("input",{"onUpdate:modelValue":I=>i.endValue=I,type:"date",onInput:I=>b(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ra),[[ye,i.endValue]]),d[15]||(d[15]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(r(),g("div",Da,[fe(o("input",{"onUpdate:modelValue":I=>i.value=I,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Ma),[[ye,i.value]])]))])):h(i.field)==="select"?(r(),g("div",La,[i.isMultiSelect?(r(),g("div",Ea,[z(i.value).length>0?(r(),g("div",ja,[(r(!0),g(Z,null,te(z(i.value),(I,se)=>(r(),g("span",{key:se,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[le(T(m(I,i.field))+" ",1),o("button",{onClick:Fe=>E(i,se),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},d[16]||(d[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ua)]))),128))])):F("",!0)])):(r(),g("div",Oa,[i.field==="priority"||i.field==="status"||i.field==="issue_type"?fe((r(),g("select",{key:0,"onUpdate:modelValue":I=>i.value=I,onKeydown:d[1]||(d[1]=Te(pe(I=>I.target.blur(),["prevent"]),["enter"])),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Va,"Select "+T(y(i.field))+"...",1),(r(!0),g(Z,null,te(C(i.field),I=>(r(),g("option",{key:I.value,value:I.value},T(I.label),9,Aa))),128))],40,Fa)),[[cs,i.value]]):F("",!0)]))])):h(i.field)==="link"?(r(),g("div",Ba,[o("div",Na,[z(i.value).length>0?(r(),g("div",za,[(r(!0),g(Z,null,te(z(i.value),(I,se)=>(r(),g("span",{key:se,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[le(T(V(I,i))+" ",1),o("button",{onClick:Fe=>E(i,se),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},d[17]||(d[17]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ha)]))),128))])):F("",!0),o("div",Ka,[fe(o("input",{"onUpdate:modelValue":I=>i.searchValue=I,onInput:I=>de(i,i.searchValue),onKeydown:[Te(pe(I=>A(i,"up"),["prevent"]),["up"]),Te(pe(I=>A(i,"down"),["prevent"]),["down"]),Te(pe(I=>ee(i),["prevent"]),["enter"]),Te(I=>X(i),["escape"])],type:"text",placeholder:`Search and add ${y(i.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,qa),[[ye,i.searchValue]]),i.loading?(r(),g("div",Ja,d[18]||(d[18]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):F("",!0)]),i.suggestions&&i.suggestions.length>0&&i.searchValue?(r(),g("div",Wa,[(r(!0),g(Z,null,te(i.suggestions,(I,se)=>(r(),g("button",{key:se,onClick:Fe=>J(i,I),class:U(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",i.selectedLinkIndex===se?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:i.selectedLinkIndex===se?"selectedLinkOption":null},[o("div",Ga,T(I.label),1),o("div",Xa,T(I.subtitle),1)],10,Qa))),128))])):F("",!0)])])):h(i.field)==="tags"?(r(),g("div",Ya,[j(i.value).length>0?(r(),g("div",Za,[(r(!0),g(Z,null,te(j(i.value),(I,se)=>(r(),g("span",{key:se,style:ke(Re(I)),class:"inline-flex items-center px-2 py-1 text-xs rounded-full border transition-colors"},[le(T(I)+" ",1),o("button",{onClick:Fe=>B(i,se),class:"ml-1 hover:text-red-600 transition-colors"},d[19]||(d[19]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,el)],4))),128))])):F("",!0),o("div",tl,[fe(o("input",{"onUpdate:modelValue":I=>i.tagInput=I,onInput:I=>R(i,i.tagInput),onKeyup:Te(I=>ue(i),["enter"]),onKeydown:[Te(pe(I=>H(i,"up"),["prevent"]),["up"]),Te(pe(I=>H(i,"down"),["prevent"]),["down"]),Te(I=>ae(i),["escape"])],type:"text",placeholder:"Search and select tags from dropdown...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,sl),[[ye,i.tagInput]]),i.loadingTags?(r(),g("div",ol,d[20]||(d[20]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):F("",!0)]),i.tagSuggestions&&i.tagSuggestions.length>0?(r(),g("div",al,[(r(!0),g(Z,null,te(i.tagSuggestions,(I,se)=>(r(),g("button",{key:se,onClick:Fe=>O(i,I),class:U(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",i.selectedTagIndex===se?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:i.selectedTagIndex===se?"selectedTagOption":null},[o("div",rl,[o("div",null,[o("div",nl,T(I.label),1),o("div",il,T(I.subtitle),1)]),I.color?(r(),g("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:ke({backgroundColor:I.color})},null,4)):F("",!0)])],10,ll))),128))])):F("",!0),d[21]||(d[21]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags and select from dropdown only",-1))])):F("",!0)]),o("div",ul,[o("button",{onClick:I=>G(Q),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},d[22]||(d[22]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,cl)])]))),128))])),v.value.length>0?(r(),g("div",dl,[o("button",{onClick:He,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:ze,disabled:!k.value||f.value,class:U(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",f.value?"bg-gray-700 text-white cursor-wait":k.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[f.value?(r(),g("span",pl,d[23]||(d[23]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),le(" Applying... ")]))):(r(),g("span",ml,T(k.value?"Apply Filters":"Filters Applied"),1))],10,gl)])):F("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:d[3]||(d[3]=i=>u.value=!1)})])):F("",!0)]))}},fl=Ne(vl,[["__scopeId","data-v-f08aca36"]]),hl={class:"bg-white rounded-lg shadow-sm border mt-4"},bl={class:"px-6 py-4 flex items-center justify-between"},yl={class:"text-sm text-gray-700"},xl={key:0},wl={key:1},_l={key:0,class:"flex items-center space-x-2"},kl={class:"flex items-center space-x-1"},Cl={key:1,class:"px-2 text-gray-500"},Sl={key:2,class:"px-2 text-gray-500"},Il={key:1,class:"flex items-center space-x-2"},$l={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(e,{emit:t}){const s=e,a=t,n=L(s.itemsPerPage);Se(()=>s.itemsPerPage,C=>{n.value=C});const u=M(()=>Math.ceil(s.totalItems/s.itemsPerPage)),v=M(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),x=M(()=>{const C=s.currentPage*s.itemsPerPage;return Math.min(C,s.totalItems)}),p=M(()=>{const C=[],D=s.maxVisiblePages,z=s.currentPage,E=u.value;if(E<=D)for(let j=1;j<=E;j++)C.push(j);else{let j=Math.max(1,z-Math.floor(D/2)),B=Math.min(E,j+D-1);B-j+1<D&&(j=Math.max(1,B-D+1)),j>1&&(j=Math.max(2,j)),B<E&&(B=Math.min(E-1,B));for(let V=j;V<=B;V++)C.push(V)}return C}),f=M(()=>u.value>s.maxVisiblePages&&!p.value.includes(1)),c=M(()=>u.value>s.maxVisiblePages&&!p.value.includes(u.value)),$=M(()=>f.value&&p.value.length>0&&p.value[0]>2),_=M(()=>c.value&&p.value.length>0&&p.value[p.value.length-1]<u.value-1),k=M(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),h=C=>{C>=1&&C<=u.value&&C!==s.currentPage&&(a("update:currentPage",C),a("pageChange",{page:C,itemsPerPage:s.itemsPerPage,offset:(C-1)*s.itemsPerPage}))},y=()=>{s.currentPage>1&&h(s.currentPage-1)},P=()=>{s.currentPage<u.value&&h(s.currentPage+1)},w=()=>{const C=n.value;a("update:itemsPerPage",C);const D=(s.currentPage-1)*s.itemsPerPage+1,z=Math.ceil(D/C);a("pageChange",{page:z,itemsPerPage:C,offset:(z-1)*C})};return(C,D)=>(r(),g("div",hl,[o("div",bl,[o("div",yl,[e.totalItems>0?(r(),g("span",xl," Showing "+T(v.value)+" to "+T(x.value)+" of "+T(e.totalItems)+" results ",1)):(r(),g("span",wl," No results found "))]),u.value>1?(r(),g("div",_l,[N(S(xe),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===1,onClick:y},{prefix:q(()=>[N(S(Le),{name:"chevron-left",class:"h-4 w-4"})]),default:q(()=>[D[3]||(D[3]=le(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",kl,[f.value?(r(),W(S(xe),{key:0,theme:"gray",variant:"outline",size:"sm",class:U({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==1,"pagination-active-btn":e.currentPage===1}),onClick:D[0]||(D[0]=z=>h(1))},{default:q(()=>D[4]||(D[4]=[le(" 1 ")])),_:1,__:[4]},8,["class"])):F("",!0),$.value?(r(),g("span",Cl,"...")):F("",!0),(r(!0),g(Z,null,te(p.value,z=>(r(),W(S(xe),{key:z,theme:"gray",variant:"outline",size:"sm",class:U({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==z,"pagination-active-btn":e.currentPage===z}),onClick:E=>h(z)},{default:q(()=>[le(T(z),1)]),_:2},1032,["class","onClick"]))),128)),_.value?(r(),g("span",Sl,"...")):F("",!0),c.value?(r(),W(S(xe),{key:3,theme:"gray",variant:"outline",size:"sm",class:U({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==u.value,"pagination-active-btn":e.currentPage===u.value}),onClick:D[1]||(D[1]=z=>h(u.value))},{default:q(()=>[le(T(u.value),1)]),_:1},8,["class"])):F("",!0)]),N(S(xe),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===u.value,onClick:P},{suffix:q(()=>[N(S(Le),{name:"chevron-right",class:"h-4 w-4"})]),default:q(()=>[D[5]||(D[5]=le(" Next "))]),_:1,__:[5]},8,["disabled"])])):F("",!0),e.showItemsPerPage?(r(),g("div",Il,[D[6]||(D[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),N(S(ds),{modelValue:n.value,"onUpdate:modelValue":D[2]||(D[2]=z=>n.value=z),options:k.value,onChange:w,class:"w-20"},null,8,["modelValue","options"])])):F("",!0)])]))}},Tl=Ne($l,[["__scopeId","data-v-898deb80"]]),Pl={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Rl={class:"text-3xl font-bold text-gray-900"},Dl={class:"text-3xl font-bold text-blue-600"},Ml={class:"text-3xl font-bold text-green-600"},Ll={class:"text-3xl font-bold text-orange-600"},Ol={class:"text-3xl font-bold text-purple-600"},Fl=3e4,Vl={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(e,{expose:t,emit:s}){const a=e,n=s,u=Ue({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),v=M(()=>u.value.team_tickets),x=M(()=>u.value.open_tickets),p=M(()=>u.value.assigned_to_me),f=M(()=>u.value.actionable_tickets),c=M(()=>u.value.response_tickets);let $=null,_=0;const k=()=>ge(this,null,function*(){const w=Date.now();if($&&w-_<Fl)return $;try{const C=yield oo("force_trans_customization.api.issues.get_issue_stats");return u.value=C,$=C,_=w,C}catch(C){return console.error("Error fetching issue stats:",C),u.value}});let h=null;const y=()=>{h&&clearTimeout(h),h=setTimeout(()=>{k()},500)};je(()=>{k()}),Se(()=>a.issues.length,()=>{y()});const P=w=>{n("filter-changed",w)};return t({refreshStats:k}),(w,C)=>(r(),g("div",Pl,[o("div",{onClick:C[0]||(C[0]=D=>P("team_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Rl,T(v.value),1),C[5]||(C[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:C[1]||(C[1]=D=>P("open_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",Dl,T(x.value),1),C[6]||(C[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:C[2]||(C[2]=D=>P("assigned_to_me")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",Ml,T(p.value),1),C[7]||(C[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:C[3]||(C[3]=D=>P("actionable_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Tickets where customer awaits our reply"},[o("div",Ll,T(f.value),1),C[8]||(C[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:C[4]||(C[4]=D=>P("response_tickets")),class:U(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Tickets awaiting customer response"},[o("div",Ol,T(c.value),1),C[9]||(C[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Al={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const e=this.status||"New";return{New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[e]||"gray"}},components:{Badge:dt}},El={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const e=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[e]||"yellow"},priorityIndicatorClass(){const e=this.priority||"Medium";return{"bg-red-500":e==="Critical","bg-red-400":e==="High","bg-yellow-400":e==="Medium","bg-green-400":e==="Low"}}},components:{Badge:dt}},jl={components:{ListView:so,Avatar:Is,Badge:dt,Button:xe,FeatherIcon:Le,ListHeader:Ft,ListHeaderItem:Ot,ListRow:pt,ListRowItem:Vt,ListRows:At,ListSelectBanner:Et,StatusBadge:Al,PriorityBadge:El,Tooltip:Dt},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(e,{emit:t}){const s=L(!1),a=L(null),n=L({x:0,y:0}),u=L(!1),v=L({x:0,y:0}),x=L(null),p=L(!1),f=L({x:0,y:0}),c=L(null),$=m=>{if(!m||typeof m!="string")return"?";if(m.includes("@")){const b=m.split("@")[0];return b.includes(".")||b.includes("_")?b.split(/[._]/).map(G=>G[0]).join("").toUpperCase().slice(0,2):b.slice(0,2).toUpperCase()}return m.includes(" ")?m.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2):m.slice(0,2).toUpperCase()},_=m=>{if(!m)return"";const b=m.match(/ISS-(\d{4}-\d+)/);return b?b[1]:m},k=m=>{if(!m)return"";const b=document.createElement("div");return b.innerHTML=m,b.textContent||b.innerText||""},h=m=>m?new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",y=m=>m?new Date(m).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",P=m=>({New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[m]||"gray",w=m=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[m]||"yellow",C=new Map,D=M(()=>e.issues.map(m=>{const b=m.name;if(C.has(b)){const G=C.get(b);if(G.originalStatus===m.status&&G.originalPriority===m.priority&&G.originalSubject===m.subject&&G.originalUsersAssigned===JSON.stringify(m.custom_users_assigned)&&G.originalIsResponseExpected===m.custom_is_response_expected)return G.transformed}const K=rt(_e({},m),{status:{label:m.status||"New",color:P(m.status)},priority:{label:m.priority||"Medium",color:w(m.priority)}});return C.set(b,{transformed:K,originalStatus:m.status,originalPriority:m.priority,originalSubject:m.subject,originalUsersAssigned:JSON.stringify(m.custom_users_assigned),originalIsResponseExpected:m.custom_is_response_expected}),K})),z=Ue([{label:"Issue ID",key:"name",width:"90px",sortable:!0},{label:"Title",key:"subject",width:3,sortable:!0},{label:"Status",key:"status",width:"110px",sortable:!0},{label:"Raised By",key:"raised_by",width:"120px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"120px",sortable:!1},{label:"CSM Team",key:"custom_assigned_csm_team",width:"100px",sortable:!1},{label:"Tags",key:"_user_tags",width:"100px",sortable:!1},{label:"Created At",key:"creation",width:"90px",sortable:!0}]),E=Ue({showTooltip:!1,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No tickets found",description:"Try adjusting your search or filter criteria"},onRowClick:m=>{V(m)}}),j=m=>{console.log("Selected rows:",m)},B=m=>`${window.location.origin}/app/issue/${m.name}`,V=m=>{console.log("Issue clicked:",m);const b=B(m);window.open(b,"_blank")},J=m=>{const b=m||"New";return{"bg-blue-500":b==="New","bg-orange-500":b==="In Review","bg-purple-500":b==="Confirmed","bg-blue-500":b==="In Transit","bg-green-500":b==="Delivered","bg-green-500":b==="Closed","bg-red-500":b==="Open","bg-orange-500":b==="Replied","bg-yellow-500":b==="On Hold","bg-green-500":b==="Resolved"}},A=m=>{const b=m||"Medium";return{"bg-red-500":b==="Critical"||b==="High","bg-yellow-500":b==="Medium","bg-green-500":b==="Low"}},ee=m=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[m||"New"]||"bg-gray-100 text-gray-800",X=m=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[m||"Medium"]||"bg-yellow-100 text-yellow-800",Y=m=>{const b=m||"Medium";return{"bg-red-500":b==="Critical","bg-red-400":b==="High","bg-yellow-400":b==="Medium","bg-green-400":b==="Low"}},ie=(m,b)=>{const K=m.target.getBoundingClientRect();n.value={x:K.left+K.width/2,y:K.top-10},a.value=b,s.value=!0},R=()=>{s.value=!1,a.value=null},O=(m,b)=>{if(!b||b.length===0)return;const K=m.target.getBoundingClientRect();v.value={x:K.left+K.width/2,y:K.top-10},x.value=b,u.value=!0},H=()=>{u.value=!1,x.value=null},ue=(m,b)=>{if(!b||!b.subject)return;const K=m.currentTarget.getBoundingClientRect();f.value={x:K.left+K.width/2,y:K.top-10},c.value={subject:b.subject,description:b.description},p.value=!0},ae=()=>{p.value=!1,c.value=null},$e=m=>{let b="asc";e.sortField===m&&(b=e.sortDirection==="asc"?"desc":"asc"),t("sort",{field:m,direction:b})},Re=m=>e.sortField!==m?"arrow-up-down":e.sortDirection==="asc"?"arrow-up":"arrow-down",ne=m=>e.sortField!==m?"text-gray-400":"text-blue-600",de=m=>e.sortField===m?"bg-blue-50":"",Oe=new Map;return{columns:z,listOptions:E,transformedIssues:D,handleSelections:j,getIssueUrl:B,handleIssueClick:V,getStatusColor:J,getPriorityColor:A,getStatusBadgeClass:ee,getPriorityBadgeClass:X,getPriorityIndicatorClass:Y,getInitials:$,formatIssueId:_,stripHtml:k,formatDate:h,formatTime:y,showPopup:s,popupUser:a,popupPosition:n,showUserPopup:ie,hideUserPopup:R,handleColumnSort:$e,getSortIcon:Re,getSortIconClass:ne,getSortButtonClass:de,getTagStyle:m=>{if(Oe.has(m))return Oe.get(m);const b=Bt(m);let K;if(b){const G=b.replace("#",""),De=parseInt(G.substr(0,2),16),ze=parseInt(G.substr(2,2),16),He=parseInt(G.substr(4,2),16),Je=`rgba(${De}, ${ze}, ${He}, 0.1)`,We=`rgb(${Math.max(De-50,0)}, ${Math.max(ze-50,0)}, ${Math.max(He-50,0)})`;K={backgroundColor:Je,color:We,borderColor:We}}else K={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return Oe.set(m,K),K},showTagsPopup:u,tagsPopupPosition:v,tagsPopupData:x,showTagsPopupFn:O,hideTagsPopupFn:H,showIssueDetailsPopup:p,issueDetailsPopupPosition:f,issueDetailsPopupData:c,showIssueDetailsPopupFn:ue,hideIssueDetailsPopup:ae}}},Ul={class:"bg-white rounded-lg shadow-sm border"},Bl={key:0,class:"px-6 py-12 text-center text-gray-500"},Nl=["onClick"],zl=["href","onClick"],Hl=["onMouseenter"],Kl={class:"font-medium truncate"},ql={key:0,class:"relative"},Jl={class:"text-gray-500 text-sm mt-1 truncate max-w-xs"},Wl={class:"text-sm font-medium text-gray-900 truncate block"},Ql={key:3,class:"flex flex-wrap gap-1"},Gl=["onMouseenter"],Xl={key:1,class:"text-gray-400 text-sm"},Yl={class:"text-sm font-medium text-gray-900 truncate block"},Zl=["onMouseenter"],er=["title"],tr={class:"truncate"},sr={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},or={key:1,class:"text-gray-400 text-sm"},ar={key:6,class:"flex flex-col"},lr={class:"text-sm"},rr={class:"text-xs text-gray-400"},nr={key:8},ir={class:"flex gap-2"},ur={class:"text-sm"},cr={class:"font-semibold text-gray-900 mb-1"},dr={class:"text-gray-600 flex items-center gap-1"},gr={class:"text-xs text-gray-500 mt-1"},pr={class:"text-sm"},mr={class:"font-bold text-gray-900 mb-3"},vr={key:0,class:"text-gray-700 whitespace-pre-wrap max-h-48 overflow-y-auto"},fr={key:1,class:"text-gray-400 italic"},hr={class:"text-sm"},br={class:"flex flex-wrap gap-1"};function yr(e,t,s,a,n,u){const v=he("FeatherIcon"),x=he("ListHeaderItem"),p=he("ListHeader"),f=he("Avatar"),c=he("Tooltip"),$=he("ListRowItem"),_=he("ListRow"),k=he("ListRows"),h=he("Button"),y=he("ListSelectBanner"),P=he("ListView");return r(),g("div",Ul,[t[6]||(t[6]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(r(),g("div",Bl,t[3]||(t[3]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(r(),W(P,{key:1,columns:a.columns,rows:a.transformedIssues,"row-key":"name",options:a.listOptions,"onUpdate:selections":a.handleSelections,class:"p-4"},{default:q(()=>[N(p,null,{default:q(()=>[(r(!0),g(Z,null,te(a.columns,w=>(r(),W(x,{key:w.key,item:w},gs({_:2},[w.icon?{name:"prefix",fn:q(({item:C})=>[N(v,{name:C.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,w.sortable?{name:"suffix",fn:q(()=>[o("button",{onClick:C=>a.handleColumnSort(w.key),class:U(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",a.getSortButtonClass(w.key)])},[N(v,{name:a.getSortIcon(w.key),class:U(["h-3 w-3",a.getSortIconClass(w.key)])},null,8,["name","class"])],10,Nl)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),N(k,null,{default:q(()=>[(r(!0),g(Z,null,te(a.transformedIssues,w=>(r(),W(_,{key:w.name,row:w,class:U({"bg-orange-50 hover:bg-orange-100":w.custom_is_response_expected===1})},{default:q(({column:C,item:D})=>[N($,{item:D,align:C.align},{prefix:q(()=>[C.key==="raised_by"?(r(),W(f,{key:0,size:"sm",label:a.getInitials(w.raised_by),class:"mr-3"},null,8,["label"])):F("",!0)]),default:q(()=>{var z;return[C.key==="name"?(r(),g("a",{key:0,href:a.getIssueUrl(w),target:"_blank",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:pe(E=>a.handleIssueClick(w),["prevent"])},T(a.formatIssueId(D)),9,zl)):C.key==="subject"?(r(),g("div",{key:1,class:"max-w-xs cursor-pointer",onMouseenter:E=>a.showIssueDetailsPopupFn(E,w),onMouseleave:t[0]||(t[0]=(...E)=>a.hideIssueDetailsPopup&&a.hideIssueDetailsPopup(...E))},[o("div",Kl,T(w.subject),1),w.description&&w.description.length>0?(r(),g("div",ql,[o("div",Jl,T(a.stripHtml(w.description)),1)])):F("",!0)],40,Hl)):C.key==="raised_by"?(r(),W(c,{key:2,text:`Raised By: ${D||"Not assigned"}`},{default:q(()=>[o("span",Wl,T(D||"-"),1)]),_:2},1032,["text"])):C.key==="custom_users_assigned"?(r(),g("div",Ql,[w.custom_users_assigned&&w.custom_users_assigned.length>0?(r(!0),g(Z,{key:0},te(w.custom_users_assigned.filter(E=>E.user_assigned),E=>(r(),g("div",{key:E.name||E,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:j=>a.showUserPopup(j,E),onMouseleave:t[1]||(t[1]=(...j)=>a.hideUserPopup&&a.hideUserPopup(...j))},T(a.getInitials(E.user_assigned)),41,Gl)]))),128)):(r(),g("span",Xl,"-"))])):C.key==="custom_assigned_csm_team"?(r(),W(c,{key:4,text:`CSM Team: ${w.custom_assigned_csm_team||"Not assigned"}`},{default:q(()=>[o("span",Yl,T(w.custom_assigned_csm_team||"-"),1)]),_:2},1032,["text"])):C.key==="_user_tags"?(r(),g("div",{key:5,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:E=>a.showTagsPopupFn(E,w._user_tags),onMouseleave:t[2]||(t[2]=(...E)=>a.hideTagsPopupFn&&a.hideTagsPopupFn(...E))},[w._user_tags&&w._user_tags.length>0?(r(),g(Z,{key:0},[o("span",{style:ke(a.getTagStyle(w._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:w._user_tags[0]},[o("span",tr,T(w._user_tags[0]),1)],12,er),w._user_tags.length>1?(r(),g("span",sr," +"+T(w._user_tags.length-1),1)):F("",!0)],64)):(r(),g("span",or,"-"))],40,Zl)):C.key==="creation"?(r(),g("div",ar,[o("span",lr,T(a.formatDate(D)),1),o("span",rr,T(a.formatTime(D)),1)])):C.key==="status"?(r(),W(c,{key:7,text:`Status: ${((z=w.status)==null?void 0:z.label)||w.status||"New"}`},{default:q(()=>{var E,j;return[o("span",{class:U([a.getStatusBadgeClass(((E=w.status)==null?void 0:E.label)||w.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},T(((j=w.status)==null?void 0:j.label)||w.status||"New"),3)]}),_:2},1032,["text"])):(r(),g("span",nr,T(D),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row","class"]))),128))]),_:1}),N(y,null,{actions:q(({unselectAll:w})=>[o("div",ir,[N(h,{variant:"ghost",label:"Delete"}),N(h,{variant:"ghost",label:"Unselect all",onClick:w},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),a.showPopup&&a.popupUser&&typeof a.popupUser=="object"?(r(),g("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ke({left:a.popupPosition.x+"px",top:a.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",ur,[o("div",cr,T(a.popupUser.user_assigned||"Unknown User"),1),o("div",dr,[t[4]||(t[4]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),le(" "+T(a.popupUser.team||"No Team"),1)]),o("div",gr," Assigned: "+T(a.formatDate(a.popupUser.assigned_date)),1)])],4)):F("",!0),a.showIssueDetailsPopup&&a.issueDetailsPopupData?(r(),g("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-md",style:ke({left:a.issueDetailsPopupPosition.x+"px",top:a.issueDetailsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",pr,[o("div",mr,T(a.issueDetailsPopupData.subject),1),a.issueDetailsPopupData.description?(r(),g("div",vr,T(a.stripHtml(a.issueDetailsPopupData.description)),1)):(r(),g("div",fr," No description available "))])],4)):F("",!0),a.showTagsPopup&&a.tagsPopupData?(r(),g("div",{key:4,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:ke({left:a.tagsPopupPosition.x+"px",top:a.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",hr,[t[5]||(t[5]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",br,[(r(!0),g(Z,null,te(a.tagsPopupData,w=>(r(),g("span",{key:w,style:ke(a.getTagStyle(w)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},T(w),5))),128))])])],4)):F("",!0)])}const xr=Ne(jl,[["render",yr]]),wr={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},_r={class:"flex items-start justify-between"},kr={class:"flex items-start space-x-3"},Cr={class:"flex-shrink-0"},Sr={class:"flex-1 min-w-0"},Ir={class:"text-sm font-medium text-gray-900"},$r={class:"text-sm text-gray-600 mt-1"},Tr={class:"text-xs text-gray-500 mt-1"},Pr=["onClick"],Rr={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(e){const t=u=>{const v="bg-white/95 border-l-4",x={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${v} ${x[u]||x.info}`},s=u=>{const v={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return v[u]||v.info},a=u=>{const v={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return v[u]||v.info},n=u=>{const x=new Date-u,p=Math.floor(x/6e4);if(p<1)return"Just now";if(p<60)return`${p}m ago`;const f=Math.floor(p/60);return f<24?`${f}h ago`:u.toLocaleDateString()};return(u,v)=>(r(),g("div",wr,[N(ps,{name:"notification",tag:"div"},{default:q(()=>[(r(!0),g(Z,null,te(e.notifications,x=>(r(),g("div",{key:x.id,class:U([t(x.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",_r,[o("div",kr,[o("div",Cr,[N(S(Le),{name:s(x.type),class:U([a(x.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",Sr,[o("p",Ir,T(x.title),1),o("p",$r,T(x.message),1),o("p",Tr,T(n(x.timestamp)),1)])]),o("button",{onClick:p=>u.$emit("remove",x.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[N(S(Le),{name:"x",class:"h-4 w-4"})],8,Pr)])],2))),128))]),_:1})]))}},Dr=Ne(Rr,[["__scopeId","data-v-d57fd7d2"]]);function Mr(e,t){let s;return function(...n){const u=()=>{clearTimeout(s),e(...n)};clearTimeout(s),s=setTimeout(u,t)}}function Lr(){const e=L(""),t=L({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=L(""),a=Mr(k=>{s.value=k},300);Se(e,k=>{a(k)});const n=M(()=>{const k={};return s.value.trim()&&(k.subject=["like",`%${s.value.trim()}%`]),t.value.status&&(k.status=t.value.status),t.value.priority&&(k.priority=t.value.priority),t.value.assignee&&(k.raised_by=t.value.assignee),t.value.tags&&(k.issue_type=t.value.tags),k}),u=M(()=>t.value.sortBy||"creation desc"),v=new Map,x=k=>{if(!k||!Array.isArray(k))return[];const h=JSON.stringify({issuesLength:k.length,searchQuery:e.value.trim(),status:t.value.status,priority:t.value.priority,assignee:t.value.assignee,tags:t.value.tags,sortBy:t.value.sortBy});if(v.has(h))return v.get(h);let y=[...k];if(e.value.trim()){const w=e.value.toLowerCase().trim();y=y.filter(C=>{const D=(C.subject||"").toLowerCase(),z=(C.description||"").toLowerCase();return D.includes(w)||z.includes(w)})}t.value.status&&(y=y.filter(w=>w.status===t.value.status)),t.value.priority&&(y=y.filter(w=>w.priority===t.value.priority)),t.value.assignee&&(y=y.filter(w=>w.raised_by===t.value.assignee)),t.value.tags&&(y=y.filter(w=>w.issue_type===t.value.tags));const P=Ve({Critical:4,High:3,Medium:2,Low:1});if(y.sort((w,C)=>{const[D,z]=t.value.sortBy.split(" "),E=w[D]||"",j=C[D]||"";let B=0;return D==="creation"||D==="modified"?B=new Date(E)-new Date(j):D==="priority"?B=(P[E]||0)-(P[j]||0):B=E.toString().localeCompare(j.toString()),z==="desc"?-B:B}),v.size>50){const w=v.keys().next().value;v.delete(w)}return v.set(h,y),y};let p=null,f=null;const c=k=>{if(!k||!Array.isArray(k))return Ve([{label:"All Assignees",value:""}]);const h=k.map(w=>w.raised_by).filter(w=>w&&w.trim()).sort().join("|");if(p&&f===h)return p;const y=[...new Set(k.map(w=>w.raised_by).filter(w=>w&&w.trim()))],P=Ve([{label:"All Assignees",value:""},...y.map(w=>({label:w,value:w}))]);return p=P,f=h,P},$=()=>{e.value="",s.value="",t.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},_=M(()=>e.value.trim()!==""||t.value.status!==""||t.value.priority!==""||t.value.assignee!==""||t.value.tags!==""||t.value.sortBy!=="creation desc");return{searchQuery:e,filters:t,debouncedSearchQuery:s,apiFilters:n,sortOrder:u,hasActiveFilters:_,filterIssues:x,getAssigneeOptions:c,resetFilters:$}}function Or(e,t,s){const a=ms(),n=L([]),u=L(!1),v=L(!1);let x=null;const p=v.value?15e3:2e3,f=()=>{console.log(`⏰ Setting up debounced refresh with ${p}ms delay`),x&&(clearTimeout(x),console.log("🔄 Cleared existing debounce timer")),x=setTimeout(()=>{console.log("⏰ Debounce timer fired, calling processDocumentRefreshes"),_()},p)},c=()=>{if(!a||u.value)return;a.emit("doctype_subscribe","Issue"),a.off("list_update"),a.on("list_update",V=>{try{if(console.log("📡 Received list_update event:",V),(V==null?void 0:V.doctype)!=="Issue")return;if(P()){console.log("⏸️ Skipping realtime update (avoid condition met)");return}if(V.action==="insert"||V.action==="create"){console.log("📝 Skipping new issue creation update:",V.name);return}console.log("✅ Adding to pending refreshes:",V.name),n.value.push(V),f()}catch(J){console.error("❌ Error processing list_update event:",J)}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(V=>{a.on(V,J=>{if((J==null?void 0:J.doctype)!=="Issue"||P())return;const A={doctype:"Issue",name:J.name,action:V.includes("create")?"insert":V.includes("delete")?"delete":"update",modified_by:J.modified_by||J.owner,timestamp:new Date().toISOString()};if(A.action==="insert"){console.log("📝 Skipping new issue creation update:",J.name);return}n.value.push(A),f()})}),u.value=!0},$=()=>{if(!a||!u.value)return;a.emit("doctype_unsubscribe","Issue"),a.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(V=>{a.off(V)}),u.value=!1},_=()=>ge(this,null,function*(){if(console.log("🔄 processDocumentRefreshes called with",n.value.length,"pending refreshes"),!n.value.length){console.log("⏸️ No pending refreshes, returning early");return}const B=window.location.hash||window.location.pathname;if(console.log("🛣️ Current route:",B),!B.includes("issue-tracker")&&!B.includes("issues")&&!B.includes("frontend")){console.log("❌ Not on correct route, clearing pending refreshes and disabling updates"),n.value=[],$();return}console.log("✅ Route check passed, proceeding with refresh");const V=[...new Set(n.value.map(A=>A.name))],J=V.length;console.log(`🔄 Processing ${J} document refreshes:`,V),n.value=[];try{yield k(V),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:J,documents:V}})),console.log(`✅ Successfully processed ${J} document refreshes`)}catch(A){console.error("❌ Error updating individual rows, falling back to full refresh:",A);try{t&&typeof t=="function"?(console.log("🔄 Using custom refresh function for fallback"),yield t()):(console.log("🔄 Using default refresh functions for fallback"),yield Ke(),yield st()),console.log("✅ Fallback refresh completed successfully")}catch(ee){console.error("❌ Error in fallback refresh:",ee)}}}),k=B=>ge(this,null,function*(){try{const{activeResource:V,currentData:J}=h();if(!J||!Array.isArray(J)){console.log("📋 No current data available, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}let A={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(e&&typeof e=="function")try{const Y=e();Y&&(A=_e(_e({},A),Y))}catch(Y){console.warn("Error getting current parameters, using defaults:",Y)}const ee=J.map(Y=>Y.name),X=B.filter(Y=>ee.includes(Y));if(X.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${X.length} visible issues:`,X),yield y(X,V,J)}catch(V){throw console.error("Error during targeted refresh:",V),t&&typeof t=="function"&&(yield t()),V}}),h=()=>{if(s&&typeof s=="function")try{const ee=s();if(ee)return console.log(`📊 Using ${ee.resourceType} resource for updates (from parent)`),ee}catch(ee){console.warn("Error getting resource state from parent, falling back to detection:",ee)}const B=ve.data&&Array.isArray(ve.data)&&ve.data.length>0,V=me.data&&Array.isArray(me.data)&&me.data.length>0;if(B&&!V)return console.log("📊 Using statFilterResource for updates (only stat has data)"),{activeResource:ve,currentData:ve.data,resourceType:"stat"};if(V&&!B)return console.log("📋 Using issuesResource for updates (only issues has data)"),{activeResource:me,currentData:me.data,resourceType:"main"};const J=ve.lastLoaded||0,A=me.lastLoaded||0;return B&&J>=A?(console.log("📊 Using statFilterResource for updates (more recent)"),{activeResource:ve,currentData:ve.data,resourceType:"stat"}):(console.log("📋 Using issuesResource for updates (default)"),{activeResource:me,currentData:me.data||[],resourceType:"main"})},y=(B,V,J)=>ge(this,null,function*(){try{const ee=(yield Promise.all(B.map(X=>ge(this,null,function*(){try{return yield ao(X),Ut.data}catch(Y){return console.warn(`Failed to fetch updated issue ${X}:`,Y),null}})))).filter(X=>X!==null);if(ee.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}if(V.data&&Array.isArray(V.data))console.log(`🔄 Updating ${ee.length} issues in ${V.data.length} total issues`),ee.forEach(X=>{const Y=V.data.findIndex(ie=>ie.name===X.name);Y!==-1?(console.log(`✅ Updating issue at index ${Y}: ${X.name}`),Object.assign(V.data[Y],X)):console.warn(`⚠️ Issue ${X.name} not found in current data for update`)});else{console.warn("⚠️ activeResource.data is not an array, using fallback method");const X=[...J];ee.forEach(Y=>{const ie=X.findIndex(R=>R.name===Y.name);ie!==-1?(console.log(`✅ Updating issue at index ${ie}: ${Y.name} (fallback)`),X[ie]=Y):console.warn(`⚠️ Issue ${Y.name} not found in current data for update (fallback)`)}),V.data=X}console.log(`🎯 Successfully updated ${ee.length} issues in current view`)}catch(A){console.error("Error updating visible issues in place:",A),t&&typeof t=="function"&&(yield t())}}),P=()=>!!document.hidden,w=L(!1),C=()=>{document.hidden?w.value=!0:w.value&&(w.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),n.value.length>0?(console.log(`📋 Processing ${n.value.length} pending updates`),_()):D())},D=()=>{n.value=[];try{t&&typeof t=="function"?t():(Ke(),st())}catch(B){console.error("Error during manual refresh:",B)}},z=()=>{c()},E=()=>{u.value=!1},j=B=>{console.error("Socket connection error:",B),u.value=!1};return je(()=>{a&&(a.on("connect",z),a.on("disconnect",E),a.on("connect_error",j),document.addEventListener("visibilitychange",C),a.connected&&c())}),at(()=>{a&&(a.off("connect",z),a.off("disconnect",E),a.off("connect_error",j)),document.removeEventListener("visibilitychange",C),$(),x&&clearTimeout(x)}),{pendingDocumentRefreshes:n,realtimeEventsSetup:u,setupRealtimeUpdates:c,disableRealtimeUpdates:$,manualRefresh:D,processDocumentRefreshes:_}}const Fr={class:"min-h-screen bg-gray-50"},Vr={class:"bg-white shadow-sm border-b"},Ar={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Er={class:"flex justify-between items-center py-4"},jr={class:"flex items-center space-x-4"},Ur={class:"flex space-x-4"},Br={class:"flex items-center space-x-4"},Nr={class:"text-sm text-gray-600"},zr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Hr={class:"fixed top-20 right-4 flex flex-col space-y-2"},Kr=["title"],qr={class:"relative"},Jr={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Yr={__name:"IssueTracker",setup(e){const{searchQuery:t,filters:s,debouncedSearchQuery:a,apiFilters:n,sortOrder:u,getAssigneeOptions:v}=Lr(),x=L(!1),p=L("team_tickets"),f=L(null),c=()=>{console.log("Refreshing current view:",{isUsingStatFilter:x.value,currentStatFilter:p.value,hasCustomFilters:A.value&&A.value.length>0});const m={limit_page_length:de.value,limit_start:(ne.value-1)*de.value,order_by:u.value};x.value?(A.value&&A.value.length>0&&(m.filters=JSON.stringify(A.value)),Promise.all([it(p.value,m),A.value&&A.value.length>0?et(p.value,JSON.stringify(A.value)):et(p.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(b=>{console.error("Error refreshing stat filter view:",b)})):Promise.all([Ke(_e({filters:JSON.stringify(A.value)},m)),st(JSON.stringify(A.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(b=>{console.error("Error refreshing regular filter view:",b)})},{pendingDocumentRefreshes:$,realtimeEventsSetup:_,manualRefresh:k}=Or(()=>({filters:qe.value,order_by:u.value,limit_page_length:de.value,limit_start:(ne.value-1)*de.value}),c,()=>x.value?{activeResource:ve,currentData:ve.data||[],resourceType:"stat"}:{activeResource:me,currentData:me.data||[],resourceType:"main"}),h=()=>{c()},y=L([]),P=m=>{y.value.push(_e({id:Date.now()+Math.random()},m)),setTimeout(()=>{var b;w((b=y.value[y.value.length-1])==null?void 0:b.id)},5e3)},w=m=>{y.value=y.value.filter(b=>b.id!==m)},C=M(()=>x.value?ve.data||[]:me.data||[]),D=M(()=>x.value?Nt.data||0:jt.data||0),z=M(()=>x.value?ve.loading:me.loading),E=M(()=>C.value),j=M(()=>(u.value||"creation desc").split(" ")[0]),B=M(()=>(u.value||"creation desc").split(" ")[1]||"desc"),V=({field:m,direction:b})=>{const K=`${m} ${b}`;s.value.sortBy=K,ne.value=1,c()},J=m=>{},A=L([]),ee=m=>{console.log("Filters applied:",m),A.value=m,ne.value=1,m&&m.length>0?x.value?(console.log("Applying custom filters on top of card filter:",p.value),R(p.value)):(console.log("Applying custom filters in regular mode"),X()):(console.log("No filters applied, returning to default view"),Y())},X=()=>{x.value=!1,p.value="team_tickets",Promise.all([Ke({filters:JSON.stringify(A.value),order_by:u.value,limit_page_length:de.value,limit_start:0}),st(JSON.stringify(A.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(m=>{console.error("Error applying custom filters:",m)})},Y=()=>{x.value=!0,p.value="team_tickets",R("team_tickets")},ie=m=>{console.log("Card clicked:",m,"Current filters:",A.value),x.value=!0,p.value=m,t.value="",ne.value=1,R(m)},R=m=>{const b={limit_page_length:de.value,limit_start:0,order_by:u.value};A.value&&A.value.length>0?(b.filters=JSON.stringify(A.value),console.log("Applying card filter with custom filters:",m,A.value)):console.log("Applying card filter without custom filters:",m),Promise.all([it(m,b),A.value&&A.value.length>0?et(m,JSON.stringify(A.value)):et(m)]).then(()=>{console.log("Card filter applied successfully")}).catch(K=>{console.error("Error applying card filter:",K)})},O=Ue(Ve(no())),H=Ue(Ve(io())),ue=Ue(Ve(co()));let ae=null,$e=0;const Re=M(()=>{const m=C.value.length;return ae&&$e===m||(ae=Ve(v(C.value)),$e=m),ae}),ne=L(1),de=L(10),Oe=({page:m,itemsPerPage:b,offset:K})=>{console.log("Page change:",{page:m,newItemsPerPage:b,offset:K}),ne.value=m,de.value=b;const G={limit_page_length:b,limit_start:K,order_by:u.value};x.value?(A.value&&A.value.length>0&&(G.filters=JSON.stringify(A.value)),it(p.value,G).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(De=>{console.error("Error during pagination (stat filter):",De)})):Ke(_e({filters:JSON.stringify(A.value)},G)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(De=>{console.error("Error during pagination (regular filter):",De)})},qe=M(()=>{const m={};return s.value.status&&(m.status=s.value.status),s.value.priority&&(m.priority=s.value.priority),s.value.assignee&&(m.raised_by=s.value.assignee),s.value.tags&&(m.issue_type=s.value.tags),m});return je(()=>{console.log("IssueTracker mounted, initializing with default view"),x.value=!0,p.value="team_tickets",R("team_tickets"),window.addEventListener("issueListUpdated",m=>ge(this,null,function*(){const{count:b,documents:K}=m.detail;P({type:"info",title:"List Updated",message:`${b} issue${b>1?"s":""} updated: ${K.slice(0,3).join(", ")}${K.length>3?"...":""}`,timestamp:new Date}),console.log("🔄 List updated event received - refreshing only stat cards");try{f.value&&f.value.refreshStats&&(console.log("📊 Refreshing stat cards..."),yield f.value.refreshStats(),console.log("📊 Stat cards refreshed successfully")),console.log("✅ Stat cards refreshed after websocket update"),console.log("ℹ️  Individual row updates are handled automatically by the composable")}catch(G){console.error("❌ Error refreshing stat cards after websocket update:",G),P({type:"error",title:"Refresh Error",message:"Failed to refresh stat cards. Please refresh manually.",timestamp:new Date})}}))}),at(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(m,b)=>{const K=he("router-link");return r(),g("div",Fr,[o("div",Vr,[o("div",Ar,[o("div",Er,[o("div",jr,[b[8]||(b[8]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Ticket Tracker",-1)),o("nav",Ur,[N(K,{to:"/",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:q(()=>b[5]||(b[5]=[le(" Tickets ")])),_:1,__:[5]}),b[6]||(b[6]=o("a",{href:"/app/support",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Desk ",-1)),b[7]||(b[7]=o("a",{href:"/intro",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Wiki ",-1))])]),o("div",Br,[o("span",Nr,T(S(wt).user),1),N(S(xe),{onClick:b[0]||(b[0]=G=>S(wt).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:q(()=>b[9]||(b[9]=[le(" Logout ")])),_:1,__:[9]})])])])]),o("div",zr,[N(Vl,{ref_key:"issueStatsRef",ref:f,issues:E.value,activeFilter:p.value,onFilterChanged:ie},null,8,["issues","activeFilter"]),N(fl,{searchQuery:S(t),"onUpdate:searchQuery":b[1]||(b[1]=G=>xt(t)?t.value=G:null),filters:S(s),"onUpdate:filters":b[2]||(b[2]=G=>xt(s)?s.value=G:null),statusOptions:ue.value,priorityOptions:O.value,assigneeOptions:Re.value,tagsOptions:H.value,issues:C.value,filteredCount:D.value,onSuggestionSelected:J,onFiltersApplied:ee},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),N(xr,{issues:E.value,loading:z.value,sortField:j.value,sortDirection:B.value,onSort:V},null,8,["issues","loading","sortField","sortDirection"]),N(Tl,{currentPage:ne.value,"onUpdate:currentPage":b[3]||(b[3]=G=>ne.value=G),itemsPerPage:de.value,"onUpdate:itemsPerPage":b[4]||(b[4]=G=>de.value=G),totalItems:D.value,onPageChange:Oe},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Hr,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:S(_)?"Real-time updates active":"Real-time updates disabled"},[o("div",qr,[N(S(Le),{name:S(_)?"wifi":"wifi-off",class:U(["h-5 w-5 transition-colors duration-200",S(_)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:U(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",S(_)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),S($).length>0?(r(),g("div",Jr,T(S($).length>9?"9+":S($).length),1)):F("",!0)])],8,Kr),o("button",{onClick:h,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[N(S(Le),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),N(Dr,{notifications:y.value,onRemove:w},null,8,["notifications"])])}}};export{Yr as default};
//# sourceMappingURL=IssueTracker-BmvU-Tig.js.map
