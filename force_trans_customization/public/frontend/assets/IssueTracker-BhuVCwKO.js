var Ot=Object.defineProperty,At=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var at=(e,t,s)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_e=(e,t)=>{for(var s in t||(t={}))nt.call(t,s)&&at(e,s,t[s]);if(Be)for(var s of Be(t))it.call(t,s)&&at(e,s,t[s]);return e},Ye=(e,t)=>At(e,Vt(t));var Ne=(e,t)=>{var s={};for(var r in e)nt.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&Be)for(var r of Be(e))t.indexOf(r)<0&&it.call(e,r)&&(s[r]=e[r]);return s};var ge=(e,t,s)=>new Promise((r,a)=>{var n=g=>{try{h(s.next(g))}catch(f){a(f)}},m=g=>{try{h(s.throw(g))}catch(f){a(f)}},h=g=>g.done?r(g.value):Promise.resolve(g.value).then(n,m);h((s=s.apply(e,t)).next())});import{r as V,o as Oe,w as wt,a as ie,d as Le,y as Lt,c as M,b as Et,h as jt,p as _t,e as Ut,u as Bt,l as Ke,H as Qe,t as tt,f as Nt,g as zt,N as ut,i as Ge,j as Ht,k as we,x as Jt,m as he,n as ce,q as Ae,v as qt,s as ct,_ as kt,O as Kt,z as l,A as u,B as z,C as re,F as Z,D as ae,E as P,G as o,I as A,J as Wt,K as Q,L as W,M as N,P as _,Q as ke,R as $e,S as xe,T as se,U as Me,V as Pe,W as Qt,X as Gt,Y as Fe,Z as De,$ as st,a0 as Ie,a1 as Xt,a2 as je,a3 as Yt,a4 as Zt,a5 as es,a6 as Ce,a7 as Se,a8 as fe,a9 as be,aa as dt,ab as ts,ac as pt,ad as ss,ae as Ve,af as ot,ag as ye,ah as os,ai as rs,aj as Re,ak as ls,al as gt,am as mt}from"./index-w11ls19K.js";function vt(e,t){if(e)return e;let s=t!=null?t:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function as(e,t){let s=V(vt(e.value.type,e.value.as));return Oe(()=>{s.value=vt(e.value.type,e.value.as)}),wt(()=>{var r;s.value||ie(t)&&ie(t)instanceof HTMLButtonElement&&!((r=ie(t))!=null&&r.hasAttribute("type"))&&(s.value="button")}),s}let ft=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ht(e){var t,s;let r=(t=e.innerText)!=null?t:"",a=e.cloneNode(!0);if(!(a instanceof HTMLElement))return r;let n=!1;for(let h of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))h.remove(),n=!0;let m=n?(s=a.innerText)!=null?s:"":r;return ft.test(m)&&(m=m.replace(ft,"")),m}function ns(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let s=e.getAttribute("aria-labelledby");if(s){let r=s.split(" ").map(a=>{let n=document.getElementById(a);if(n){let m=n.getAttribute("aria-label");return typeof m=="string"?m.trim():ht(n).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ht(e).trim()}function is(e){let t=V(""),s=V("");return()=>{let r=ie(e);if(!r)return"";let a=r.innerText;if(t.value===a)return s.value;let n=ns(r).trim().toLowerCase();return t.value=a,s.value=n,n}}var us=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(us||{}),cs=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(cs||{});function ds(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Ct=Symbol("MenuContext");function Xe(e){let t=we(Ct,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Xe),s}return t}let ps=Le({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:s}){let r=V(1),a=V(null),n=V(null),m=V([]),h=V(""),g=V(null),f=V(1);function i(x=w=>w){let w=g.value!==null?m.value[g.value]:null,v=Kt(x(m.value.slice()),y=>ie(y.dataRef.domRef)),b=w?v.indexOf(w):null;return b===-1&&(b=null),{items:v,activeItemIndex:b}}let C={menuState:r,buttonRef:a,itemsRef:n,items:m,searchQuery:h,activeItemIndex:g,activationTrigger:f,closeMenu:()=>{r.value=1,g.value=null},openMenu:()=>r.value=0,goToItem(x,w,v){let b=i(),y=Jt(x===he.Specific?{focus:he.Specific,id:w}:{focus:x},{resolveItems:()=>b.items,resolveActiveIndex:()=>b.activeItemIndex,resolveId:$=>$.id,resolveDisabled:$=>$.dataRef.disabled});h.value="",g.value=y,f.value=v!=null?v:1,m.value=b.items},search(x){let w=h.value!==""?0:1;h.value+=x.toLowerCase();let v=(g.value!==null?m.value.slice(g.value+w).concat(m.value.slice(0,g.value+w)):m.value).find(y=>y.dataRef.textValue.startsWith(h.value)&&!y.dataRef.disabled),b=v?m.value.indexOf(v):-1;b===-1||b===g.value||(g.value=b,f.value=1)},clearSearch(){h.value=""},registerItem(x,w){let v=i(b=>[...b,{id:x,dataRef:w}]);m.value=v.items,g.value=v.activeItemIndex,f.value=1},unregisterItem(x){let w=i(v=>{let b=v.findIndex(y=>y.id===x);return b!==-1&&v.splice(b,1),v});m.value=w.items,g.value=w.activeItemIndex,f.value=1}};return Lt([a,n],(x,w)=>{var v;C.closeMenu(),Et(w,jt.Loose)||(x.preventDefault(),(v=ie(a))==null||v.focus())},M(()=>r.value===0)),_t(Ct,C),Ut(M(()=>Bt(r.value,{0:Ke.Open,1:Ke.Closed}))),()=>{let x={open:r.value===0,close:C.closeMenu};return Qe({ourProps:{},theirProps:e,slot:x,slots:t,attrs:s,name:"Menu"})}}}),gs=Le({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${tt()}`}},setup(e,{attrs:t,slots:s,expose:r}){let a=Xe("MenuButton");r({el:a.buttonRef,$el:a.buttonRef});function n(f){switch(f.key){case ce.Space:case ce.Enter:case ce.ArrowDown:f.preventDefault(),f.stopPropagation(),a.openMenu(),Ae(()=>{var i;(i=ie(a.itemsRef))==null||i.focus({preventScroll:!0}),a.goToItem(he.First)});break;case ce.ArrowUp:f.preventDefault(),f.stopPropagation(),a.openMenu(),Ae(()=>{var i;(i=ie(a.itemsRef))==null||i.focus({preventScroll:!0}),a.goToItem(he.Last)});break}}function m(f){switch(f.key){case ce.Space:f.preventDefault();break}}function h(f){e.disabled||(a.menuState.value===0?(a.closeMenu(),Ae(()=>{var i;return(i=ie(a.buttonRef))==null?void 0:i.focus({preventScroll:!0})})):(f.preventDefault(),a.openMenu(),ds(()=>{var i;return(i=ie(a.itemsRef))==null?void 0:i.focus({preventScroll:!0})})))}let g=as(M(()=>({as:e.as,type:t.type})),a.buttonRef);return()=>{var f;let i={open:a.menuState.value===0},v=e,{id:C}=v,x=Ne(v,["id"]),w={ref:a.buttonRef,id:C,type:g.value,"aria-haspopup":"menu","aria-controls":(f=ie(a.itemsRef))==null?void 0:f.id,"aria-expanded":a.menuState.value===0,onKeydown:n,onKeyup:m,onClick:h};return Qe({ourProps:w,theirProps:x,slot:i,attrs:t,slots:s,name:"MenuButton"})}}}),ms=Le({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${tt()}`}},setup(e,{attrs:t,slots:s,expose:r}){let a=Xe("MenuItems"),n=V(null);r({el:a.itemsRef,$el:a.itemsRef}),Nt({container:M(()=>ie(a.itemsRef)),enabled:M(()=>a.menuState.value===0),accept(i){return i.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:i.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(i){i.setAttribute("role","none")}});function m(i){var C;switch(n.value&&clearTimeout(n.value),i.key){case ce.Space:if(a.searchQuery.value!=="")return i.preventDefault(),i.stopPropagation(),a.search(i.key);case ce.Enter:if(i.preventDefault(),i.stopPropagation(),a.activeItemIndex.value!==null){let x=a.items.value[a.activeItemIndex.value];(C=ie(x.dataRef.domRef))==null||C.click()}a.closeMenu(),kt(ie(a.buttonRef));break;case ce.ArrowDown:return i.preventDefault(),i.stopPropagation(),a.goToItem(he.Next);case ce.ArrowUp:return i.preventDefault(),i.stopPropagation(),a.goToItem(he.Previous);case ce.Home:case ce.PageUp:return i.preventDefault(),i.stopPropagation(),a.goToItem(he.First);case ce.End:case ce.PageDown:return i.preventDefault(),i.stopPropagation(),a.goToItem(he.Last);case ce.Escape:i.preventDefault(),i.stopPropagation(),a.closeMenu(),Ae(()=>{var x;return(x=ie(a.buttonRef))==null?void 0:x.focus({preventScroll:!0})});break;case ce.Tab:i.preventDefault(),i.stopPropagation(),a.closeMenu(),Ae(()=>qt(ie(a.buttonRef),i.shiftKey?ct.Previous:ct.Next));break;default:i.key.length===1&&(a.search(i.key),n.value=setTimeout(()=>a.clearSearch(),350));break}}function h(i){switch(i.key){case ce.Space:i.preventDefault();break}}let g=zt(),f=M(()=>g!==null?(g.value&Ke.Open)===Ke.Open:a.menuState.value===0);return()=>{var i,C;let x={open:a.menuState.value===0},y=e,{id:w}=y,v=Ne(y,["id"]),b={"aria-activedescendant":a.activeItemIndex.value===null||(i=a.items.value[a.activeItemIndex.value])==null?void 0:i.id,"aria-labelledby":(C=ie(a.buttonRef))==null?void 0:C.id,id:w,onKeydown:m,onKeyup:h,role:"menu",tabIndex:0,ref:a.itemsRef};return Qe({ourProps:b,theirProps:v,slot:x,attrs:t,slots:s,features:ut.RenderStrategy|ut.Static,visible:f.value,name:"MenuItems"})}}}),vs=Le({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${tt()}`}},setup(e,{slots:t,attrs:s,expose:r}){let a=Xe("MenuItem"),n=V(null);r({el:n,$el:n});let m=M(()=>a.activeItemIndex.value!==null?a.items.value[a.activeItemIndex.value].id===e.id:!1),h=is(n),g=M(()=>({disabled:e.disabled,get textValue(){return h()},domRef:n}));Oe(()=>a.registerItem(e.id,g)),Ge(()=>a.unregisterItem(e.id)),wt(()=>{a.menuState.value===0&&m.value&&a.activationTrigger.value!==0&&Ae(()=>{var b,y;return(y=(b=ie(n))==null?void 0:b.scrollIntoView)==null?void 0:y.call(b,{block:"nearest"})})});function f(b){if(e.disabled)return b.preventDefault();a.closeMenu(),kt(ie(a.buttonRef))}function i(){if(e.disabled)return a.goToItem(he.Nothing);a.goToItem(he.Specific,e.id)}let C=Ht();function x(b){C.update(b)}function w(b){C.wasMoved(b)&&(e.disabled||m.value||a.goToItem(he.Specific,e.id,0))}function v(b){C.wasMoved(b)&&(e.disabled||m.value&&a.goToItem(he.Nothing))}return()=>{let{disabled:b}=e,y={active:m.value,disabled:b,close:a.closeMenu},F=e,{id:$}=F,S=Ne(F,["id"]);return Qe({ourProps:{id:$,ref:n,role:"menuitem",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:i,onPointerenter:x,onMouseenter:x,onPointermove:w,onMousemove:w,onPointerleave:v,onMouseleave:v},theirProps:_e(_e({},s),S),slot:y,attrs:s,slots:t,name:"MenuItem"})}}});const fs=["src","alt"],hs=Le({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(e){const t=V(!1),s=e,r=M(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),a=M(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),n=M(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),m=M(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),h=M(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),g=M(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function f(i){i.type&&(t.value=!0)}return(i,C)=>(l(),u("div",{class:z(["relative inline-block shrink-0",[a.value,r.value]])},[i.image&&!t.value?(l(),u("img",{key:0,src:i.image,alt:i.label,class:z([r.value,"h-full w-full object-cover"]),onError:C[0]||(C[0]=x=>f(x))},null,42,fs)):(l(),u("div",{key:1,class:z(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[n.value,r.value]])},[i.$slots.default?(l(),u("div",{key:0,class:z(g.value)},[re(i.$slots,"default")],2)):(l(),u(Z,{key:1},[ae(P(i.label&&i.label[0]),1)],64))],2)),i.$slots.indicator?(l(),u("div",{key:2,class:z(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",m.value])},[o("div",{class:z(h.value)},[re(i.$slots,"indicator")],2)],2)):A("",!0)],2))}}),bs={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},ys=["onClick"],xs={class:"whitespace-nowrap text-ink-gray-7"},ws=Le({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const t=Wt(),s=e,r=g=>{let f=()=>{g.route?t.push(g.route):g.onClick&&g.onClick()};return{label:g.label,icon:g.icon,component:g.component,onClick:f}},a=g=>(g||[]).filter(Boolean).filter(f=>f.condition?f.condition():!0).map(f=>r(f)),n=M(()=>{let g=[],f=null,i=0;for(let C of s.options)if(C!=null){if("group"in C){f&&(g.push(f),f=null);let x=Ye(_e({key:i},C),{items:a(C.items)});g.push(x)}else f||(f={key:i,group:"",hideLabel:!0,items:[]}),f.items.push(...a([C]));i++}return f&&g.push(f),g}),m=M(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),h=M(()=>s.placement==="left"?"bottom-start":s.placement==="right"?"bottom-end":s.placement==="center"?"bottom-center":"bottom");return(g,f)=>(l(),Q(_(ps),{as:"div",class:"relative inline-block text-left"},{default:W(({open:i})=>[N(_(Qt),{transition:m.value,show:i,placement:h.value},{target:W(()=>[N(_(gs),{as:"div"},{default:W(()=>[g.$slots.default?re(g.$slots,"default",ke($e({key:0},{open:i}))):(l(),Q(_(xe),$e({key:1,active:i},g.button),{default:W(()=>{var C;return[ae(P(g.button?((C=g.button)==null?void 0:C.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:W(()=>[N(_(ms),{class:z(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":g.placement=="left","right-0 origin-top-right":g.placement=="right","inset-x-0 origin-top":g.placement=="center"}])},{default:W(()=>[(l(!0),u(Z,null,se(n.value,C=>(l(),u("div",{key:C.key,class:"p-1.5"},[C.group&&!C.hideLabel?(l(),u("div",bs,P(C.group),1)):A("",!0),(l(!0),u(Z,null,se(C.items,x=>(l(),Q(_(vs),{key:x.label},{default:W(({active:w})=>[x.component?(l(),Q(Me(x.component),{key:0,active:w},null,8,["active"])):(l(),u("button",{key:1,class:z([w?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:x.onClick},[x.icon&&typeof x.icon=="string"?(l(),Q(Pe,{key:0,name:x.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):x.icon?(l(),Q(Me(x.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):A("",!0),o("span",xs,P(x.label),1)],10,ys))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),_s={class:"flex h-full w-full flex-col items-center justify-center text-base"},ks={class:"text-xl font-medium"},Cs={class:"mt-1 text-base text-ink-gray-5"},Ss={__name:"ListEmptyState",setup(e){const t=we("list");return(s,r)=>(l(),u("div",_s,[re(s.$slots,"default",{},()=>[o("div",ks,P(_(t).options.emptyState.title),1),o("div",Cs,P(_(t).options.emptyState.description),1),_(t).options.emptyState.button?(l(),Q(_(xe),$e({key:0},_(t).options.emptyState.button,{class:"mt-4"}),null,16)):A("",!0)])]))}};function St(e,t=!0){let s=t?"14px ":"",r=e.map(a=>{let n=a.width||1;return typeof n=="number"?n+"fr":n}).join(" ");return s+r}const rt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},$s={class:"truncate"},$t={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=e,r=t,a=V(null),n=V(null),m=M(()=>{if(typeof s.item.width=="string"){const i=parseInt(s.item.width);if(s.item.width.includes("rem"))return i*16;if(s.item.width.includes("px"))return i}return n.value.offsetWidth}),h=i=>{const C=i.clientX,x=m.value,w=b=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),a.value.style.backgroundColor="rgb(199 199 199)";let y=x+(b.clientX-C);s.item.width=`${y<50?50:y}px`,g(s.item.width)},v=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),a.value.style.backgroundColor="",window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",v)};window.addEventListener("mousemove",w),window.addEventListener("mouseup",v)},g=Gt(i=>{s.item.width=i,r("columnWidthUpdated")},s.debounce),f=we("list");return(i,C)=>(l(),u("div",{ref_key:"columnRef",ref:n,class:z(["group relative flex items-center",e.item.align?_(rt)[e.item.align]:"justify-between"])},[o("div",{class:z(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",i.$attrs.class])},[re(i.$slots,"prefix",ke(Fe({item:e.item}))),re(i.$slots,"default",{},()=>[o("div",$s,P(e.item.label),1)]),re(i.$slots,"suffix",ke(Fe({item:e.item})))],2),_(f).options.resizeColumn?re(i.$slots,"resizer",ke($e({key:0},{item:e.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:h},[o("div",{ref_key:"resizer",ref:a,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):A("",!0)],2))}},It={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=t,r=we("list");return(a,n)=>(l(),u("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Ie({gridTemplateColumns:_(St)(_(r).columns,_(r).options.selectable)})},[_(r).options.selectable?(l(),Q(st,{key:0,class:"cursor-pointer duration-300",modelValue:_(r).allRowsSelected,onClick:De(_(r).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):A("",!0),re(a.$slots,"default",{},()=>[(l(!0),u(Z,null,se(_(r).columns,m=>(l(),Q($t,{key:m.key,item:m,onColumnWidthUpdated:h=>s("columnWidthUpdated",m)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Is={class:"truncate text-base"},Pt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const t=e,s=M(()=>{var m,h;return(m=t.column)!=null&&m.getLabel?(h=t.column)==null?void 0:h.getLabel({row:t.row}):a(t.item).label||""}),r=M(()=>n.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):a(t.item).label:"");function a(m){return m&&typeof m=="object"?m:{label:m}}const n=we("list");return(m,h)=>(l(),u("div",{class:z(["flex items-center space-x-2",_(rt)[e.align]])},[re(m.$slots,"prefix",{},()=>[e.column.prefix?(l(),Q(Me(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):A("",!0)]),N(_(Xt),ke(Fe(_(n).options.showTooltip?{text:r.value}:{text:""})),{default:W(()=>[re(m.$slots,"default",ke(Fe({label:s.value})),()=>[o("div",Is,P(s.value),1)])]),_:3},16),re(m.$slots,"suffix")],2))}},lt={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const t=e,s=we("list"),r=M(()=>{var i;return(i=s.value.rows)!=null&&i.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===t.row[s.value.rowKey]:!1}),a=M(()=>s.value.selections.has(t.row[s.value.rowKey])),n=M(()=>s.value.options.enableActive&&s.value.activeRow.value===t.row.name),m=M(()=>s.value.options.getRowRoute||s.value.options.onRowClick),h=M(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),g=M(()=>{var x,w,v;if(!a.value)return"rounded";const i=[...s.value.selections];let C=(x=s.value.rows[0])!=null&&x.group?s.value.rows.map(b=>b.rows):[s.value.rows];for(let b of C){let y=b.findIndex(F=>F==t.row);if(y===-1)continue;let $=!i.includes((w=b[y+1])==null?void 0:w.name),S=!i.includes((v=b[y-1])==null?void 0:v.name);return($?"rounded-b ":"")+(S?"rounded-t":"")}}),f=(i,C)=>{s.value.options.onRowClick&&s.value.options.onRowClick(i,C),s.value.activeRow.value===i.name?s.value.activeRow.value=null:s.value.activeRow.value=i.name};return(i,C)=>(l(),Q(Me(_(s).options.getRowRoute?"router-link":"div"),$e({class:[[g.value,a.value||n.value?"bg-surface-gray-2":"",m.value?"cursor-pointer":"",m.value?a.value||n.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:_(s).options.getRowRoute?_(s).options.getRowRoute(e.row):void 0,onClick:x=>f(e.row,x)}),{default:W(()=>[(l(),Q(Me(_(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:W(()=>{var x,w;return[o("div",{class:"grid items-center space-x-4 px-2",style:Ie({height:h.value,gridTemplateColumns:_(St)(_(s).columns,_(s).options.selectable)})},[_(s).options.selectable?(l(),u("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:C[1]||(C[1]=De(()=>{},["stop","prevent"])),onDblclick:C[2]||(C[2]=De(()=>{},["stop"]))},[N(st,{modelValue:a.value,class:"cursor-pointer duration-300",onClick:C[0]||(C[0]=De(v=>_(s).toggleRow(e.row[_(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):A("",!0),(l(!0),u(Z,null,se(_(s).columns,(v,b)=>(l(),u("div",{key:v.key,class:z([_(rt)[v.align],b==0?"text-ink-gray-9":"text-ink-gray-7"])},[re(i.$slots,"default",$e({ref_for:!0},{idx:b,column:v,item:e.row[v.key],isActive:n.value}),()=>[_(s).slots.cell?(l(),Q(Me(_(s).slots.cell),$e({key:0,ref_for:!0},{column:v,row:e.row,item:e.row[v.key],align:v.align}),null,16)):(l(),Q(Pt,{key:1,column:v,row:e.row,item:e.row[v.key],align:v.align},null,8,["column","row","item","align"]))])],2))),128))],4),r.value?A("",!0):(l(),u("div",{key:0,class:z(["h-px border-t",g.value==="rounded"||(w=(x=g.value)==null?void 0:x.includes)!=null&&w.call(x,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Ps={class:"h-full overflow-y-auto"},Tt={__name:"ListRows",setup(e){const t=we("list");return(s,r)=>(l(),u("div",Ps,[re(s.$slots,"default",{},()=>[(l(!0),u(Z,null,se(_(t).rows,a=>(l(),Q(lt,{key:a[_(t).rowKey],row:a},null,8,["row"]))),128))])]))}},Ts={},Rs={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ms(e,t){return l(),u("svg",Rs,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Ds=je(Ts,[["render",Ms]]),Fs={class:"flex items-center"},Os={class:"w-full py-1.5 pr-2"},As={key:1,class:"text-base font-medium leading-6"},Vs={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const t=e,s=we("list");function r(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(a,n)=>(l(),u(Z,null,[o("div",Fs,[o("button",{onClick:r,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[N(Ds,{class:z(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),re(a.$slots,"default",{},()=>[o("div",Os,[_(s).slots["group-header"]?(l(),Q(Me(_(s).slots["group-header"]),ke($e({key:0},{group:e.group})),null,16)):(l(),u("span",As,P(e.group.group),1))])])]),n[0]||(n[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Ls={key:0,class:"mb-5 mt-2"},Es={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const t=we("list");return(s,r)=>e.group.collapsed?A("",!0):(l(),u("div",Ls,[re(s.$slots,"default",{},()=>[(l(!0),u(Z,null,se(e.group.rows,a=>(l(),Q(lt,{key:a[_(t).rowKey],row:a},null,8,["row"]))),128))])]))}},js={class:"h-full overflow-y-auto"},Us={__name:"ListGroups",setup(e){const t=we("list");return(s,r)=>(l(),u("div",js,[(l(!0),u(Z,null,se(_(t).rows,a=>(l(),u("div",{key:a.group},[re(s.$slots,"default",{},()=>[N(Vs,{group:a},{default:W(()=>[s.$slots["group-header"]?re(s.$slots,"group-header",$e({key:0,ref_for:!0},{group:a})):A("",!0)]),_:2},1032,["group"]),N(Es,{group:a},null,8,["group"])])]))),128))]))}},Bs={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Ns={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},zs={class:"flex items-center space-x-3"},Hs={class:"mr-3"},Js={class:"flex items-center space-x-1"},Rt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const t=we("list");let s=M(()=>t.value.options.selectionText(t.value.selections.size));return(r,a)=>(l(),Q(Yt,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:W(()=>[_(t).selections.size?(l(),u("div",Bs,[o("div",{class:z(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",r.$attrs.class])},[re(r.$slots,"default",ke(Fe({selections:_(t).selections,allRowsSelected:_(t).allRowsSelected,selectAll:()=>_(t).toggleAllRows(!0),unselectAll:()=>_(t).toggleAllRows(!1)})),()=>[o("div",Ns,[o("div",zs,[N(st,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,P(_(s)),1)]),o("div",Hs,[re(r.$slots,"actions",ke(Fe({selections:_(t).selections,allRowsSelected:_(t).allRowsSelected,selectAll:()=>_(t).toggleAllRows(!0),unselectAll:()=>_(t).toggleAllRows(!1)})))])]),o("div",Js,[N(_(xe),{class:z(["w- text-ink-gray-7",_(t).allRowsSelected?"cursor-not-allowed":""]),disabled:_(t).allRowsSelected,variant:"ghost",onClick:a[0]||(a[0]=n=>_(t).toggleAllRows(!0))},{default:W(()=>a[2]||(a[2]=[ae(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),N(_(xe),{icon:"x",variant:"ghost",onClick:a[1]||(a[1]=n=>_(t).toggleAllRows(!1))})])])],2)])):A("",!0)]),_:3}))}}),qs={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ks=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:t,emit:s}){const r=e,a=Zt();let n=es(new Set),m=V(null);const h=s;Ce(n,v=>{n.size&&(m.value=null),h("update:selections",v)}),Ce(m,v=>{h("update:active-row",v)});let g=M(()=>{function v(y){return y===void 0?!0:y}function b(y){return y===void 0?!1:y}return{getRowRoute:r.options.getRowRoute||null,onRowClick:r.options.onRowClick||null,showTooltip:v(r.options.showTooltip),selectionText:r.options.selectionText||(y=>y===1?"1 row selected":`${y} rows selected`),enableActive:b(r.options.enableActive),selectable:v(r.options.selectable),resizeColumn:b(r.options.resizeColumn),rowHeight:r.options.rowHeight||40,emptyState:r.options.emptyState}});const f=M(()=>r.rows.length?C.value?n.size===r.rows.reduce((v,b)=>v+b.rows.length,0):n.size===r.rows.length:!1),i=M(()=>g.value.selectable);let C=M(()=>r.rows.every(v=>v.group&&v.rows&&Array.isArray(v.rows)));function x(v){n.delete(v)||n.add(v)}function w(v){if(!v||f.value){n.clear();return}if(C.value){r.rows.forEach(b=>{b.rows.forEach(y=>n.add(y[r.rowKey]))});return}r.rows.forEach(b=>n.add(b[r.rowKey]))}return _t("list",M(()=>({rowKey:r.rowKey,rows:r.rows,columns:r.columns,options:g.value,selections:n,activeRow:m,allRowsSelected:f.value,slots:a,toggleRow:x,toggleAllRows:w}))),t({selections:n,allRowsSelected:f,toggleRow:x,toggleAllRows:w}),(v,b)=>(l(),u("div",qs,[o("div",{class:z(["flex w-max min-w-full flex-col overflow-y-hidden",v.$attrs.class]),style:Ie(v.$attrs.style)},[re(v.$slots,"default",ke(Fe({showGroupedRows:_(C),selectable:i.value})),()=>[N(It),r.rows.length?(l(),u(Z,{key:0},[_(C)?(l(),Q(Us,{key:0})):(l(),Q(Tt,{key:1}))],64)):(l(),Q(Ss,{key:1})),i.value?(l(),Q(Rt,{key:2})):A("",!0)])],6)]))}});function Ws(r,a){return ge(this,arguments,function*(e,t,s={}){t||(t={});let n=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},s.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(n["X-Frappe-CSRF-Token"]=window.csrf_token);let m=e.startsWith("/")?e:`/api/method/${e}`;const h=yield fetch(m,{method:"POST",headers:n,body:JSON.stringify(t)});if(h.ok){const g=yield h.json();if(g.docs||e==="login")return g;if(g.exc)try{console.groupCollapsed(e),console.log(`method: ${e}`),console.log("params:",t);let f=JSON.parse(g.exc);for(let i of f)console.log(i);console.groupEnd()}catch(f){console.warn("Error printing debug messages",f)}return g.message}else{let g=yield h.text(),f,i;try{f=JSON.parse(g)}catch(w){}let C=[[e,f.exc_type,f._error_message].filter(Boolean).join(" ")];if(f.exc){i=f.exc;try{i=JSON.parse(i)[0],console.log(i)}catch(w){}}let x=new Error(C.join(`
`));throw x.exc_type=f.exc_type,x.exc=i,x.status=h.status,x.messages=f._server_messages?JSON.parse(f._server_messages):[],x.messages=x.messages.concat(f.message),x.messages=x.messages.map(w=>{try{return JSON.parse(w).message}catch(v){return w}}),x.messages=x.messages.filter(Boolean),x.messages.length||(x.messages=f._error_message?[f._error_message]:["Internal Server Error"]),s.onError&&s.onError({response:h,status:h.status,error:x}),x}})}const me=Se({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(e){const t=e||{},s=t.limit_page_length||10,r=t.limit_start||0,a=t.filters||{},n=t.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:s,limit_start:r,filters:a,order_by:n}),{limit_page_length:s,limit_start:r,filters:a,order_by:n}},onError(e){console.error("Failed to fetch issues:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Mt=Se({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(e){const t=e||{},s=t.filters||t||{};return console.log("issuesCountResource filters:",s),{filters:s}},onError(e){console.error("Failed to fetch issues count:",e)}});function Ee(e={}){const t={limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,filters:e.filters||{},order_by:e.order_by||"creation desc"};return console.log("reloadIssues with params:",t),me.reload(t)}function We(e={}){return console.log("getIssuesCount with filters:",e),Mt.reload(e)}const Dt=Se({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(e){return{issue_name:e}},onError(e){console.error("Failed to fetch single issue:",e)},auto:!1});function Qs(e){return Dt.reload(e)}const Gs=Se({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(e){console.error("Failed to fetch issue priorities:",e)},auto:!0}),Xs=Se({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(e){console.error("Failed to fetch issue types:",e)},auto:!0});Se({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(e){console.error("Failed to fetch projects:",e)},auto:!0});let ze=null,bt=null,He=null,yt=null;function Ys(){const e=Gs.data||[],t=JSON.stringify(e);if(ze&&bt===t)return ze;const s=[{label:"All Priority",value:""},...e.map(r=>({label:r.name,value:r.name}))];return ze=Object.freeze(s),bt=t,ze}function Zs(){const e=Xs.data||[],t=JSON.stringify(e);if(He&&yt===t)return He;const s=[{label:"All Types",value:""},...e.map(r=>({label:r.name,value:r.name}))];return He=Object.freeze(s),yt=t,He}const eo=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function to(){return eo}const so=Se({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(e){console.error("Failed to fetch tag colors:",e)},auto:!0}),Je=new Map;let xt=null;function oo(e){const t=so.data||{},s=JSON.stringify(t);if(xt!==s&&(Je.clear(),xt=s),Je.has(e))return Je.get(e);const r=t[e]||null;return Je.set(e,r),r}const Ze=Se({url:"force_trans_customization.api.issues.issue_search",makeParams(e){const t=e||{};return{search_query:t.search_query||"",limit:t.limit||8}},onError(e){console.error("Failed to search issues:",e)},auto:!1});function ro(e,t=8){return!e||e.length<2?Promise.resolve(Ze.data||[]):Ze.reload({search_query:e,limit:t}).then(()=>Ze.data||[])}const ve=Se({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to filter issues by stat:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),Ft=Se({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to get stat filter count:",e)},auto:!1});function et(e,t={}){const s={stat_type:e,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),console.log("filterIssuesByStat params:",s),ve.reload(s)}function qe(e,t=null){const s={stat_type:e};return t&&(s.filters=t),Ft.reload(s)}const lo={class:"relative w-full max-w-2xl mx-auto"},ao={class:"relative group"},no=["placeholder"],io={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},uo={key:1,class:"flex items-center pointer-events-none"},co={key:2,class:"animate-spin"},po={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},go={class:"flex items-center justify-between"},mo={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},vo={class:"text-xs text-slate-500"},fo={key:0,class:"px-6 py-8 text-center"},ho=["onClick"],bo={class:"flex items-start space-x-4"},yo={class:"flex-1 min-w-0"},xo={class:"flex items-start justify-between"},wo={class:"flex-1 min-w-0"},_o={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},ko=["innerHTML"],Co={class:"text-xs text-slate-500 mt-1 line-clamp-2"},So={key:0,class:"ml-2"},$o={class:"flex-shrink-0 ml-4"},Io={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Po={key:0,class:"flex items-center"},To={key:1,class:"flex items-center"},Ro={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Mo={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(e,{expose:t,emit:s}){const r=e,a=s,n=V(null),m=V(r.modelValue),h=V(!1),g=V(!1),f=V(-1),i=V(!1),C=V(0),x=V(null),w=V([]);let v=null;Ce(()=>r.modelValue,R=>{m.value=R}),Ce(m,R=>{a("update:modelValue",R),a("search",R)});const b=V([]),y=R=>ge(this,null,function*(){if(!R||R.length<2){b.value=[],g.value=!1,i.value=!1;return}try{i.value=!0;const O=performance.now(),J=yield ro(R,8);C.value=performance.now()-O,b.value=J||[],g.value=!0}catch(O){console.error("Search error:",O),b.value=[],g.value=!1}finally{i.value=!1}}),$=R=>{if(v&&clearTimeout(v),f.value=-1,!R||R.length<2){b.value=[],g.value=!1,i.value=!1;return}i.value=!0,v=setTimeout(()=>{y(R)},1e3)},S=()=>{$(m.value)},F=(R,O)=>{if(!R||!O)return R;const J=O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),oe=new RegExp(`(${J})`,"gi");return R.replace(oe,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},H=R=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[R]||"bg-gray-100 text-gray-800 border border-gray-200",K=()=>{h.value=!0,U&&(clearTimeout(U),U=null),m.value.length>=2&&(b.value.length>0?g.value=!0:y(m.value))};let U=null;const B=()=>{h.value=!1,U=setTimeout(()=>{g.value=!1,U=null},200)},E=R=>{var O;if(g.value)switch(R.key){case"ArrowDown":R.preventDefault(),f.value=Math.min(f.value+1,b.value.length-1),G();break;case"ArrowUp":R.preventDefault(),f.value=Math.max(f.value-1,-1),G();break;case"Enter":R.preventDefault(),f.value>=0&&D(b.value[f.value]);break;case"Escape":ee(),(O=n.value)==null||O.blur();break}},D=R=>{m.value=R.name,ee();const J=`${window.location.origin}/app/issue/${R.name}`;window.open(J,"_blank"),a("suggestion-selected",R)},te=()=>{var R;m.value="",ee(),(R=n.value)==null||R.focus()},ee=()=>{g.value=!1,f.value=-1},G=()=>{if(f.value<0||!x.value||!w.value[f.value])return;const R=x.value,O=w.value[f.value];if(O){const J=R.getBoundingClientRect(),oe=O.getBoundingClientRect(),le=oe.top-J.top+R.scrollTop,k=le+oe.height,I=R.scrollTop,q=R.clientHeight;le<I?R.scrollTop=le:k>I+q&&(R.scrollTop=k-q)}},X=R=>{if(!R)return"";try{const O=new Date(R),J=new Date,oe=Math.abs(J-O),le=Math.ceil(oe/(1e3*60*60*24));return le===1?"Today":le===2?"Yesterday":le<=7?`${le-1} days ago`:O.toLocaleDateString("en-US",{month:"short",day:"numeric",year:O.getFullYear()!==J.getFullYear()?"numeric":void 0})}catch(O){return console.error("Error formatting date:",O),R}},ne=R=>{var O,J;(R.metaKey||R.ctrlKey)&&R.key==="k"&&(R.preventDefault(),(O=n.value)==null||O.focus(),(J=n.value)==null||J.select())};return Oe(()=>{document.addEventListener("keydown",ne)}),Ge(()=>{document.removeEventListener("keydown",ne),v&&clearTimeout(v),U&&clearTimeout(U)}),t({focus:()=>{var R,O;(R=n.value)==null||R.focus(),(O=n.value)==null||O.select()},select:()=>{var R;return(R=n.value)==null?void 0:R.select()},$el:n}),(R,O)=>(l(),u("div",lo,[o("div",ao,[O[4]||(O[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),fe(o("input",{ref_key:"searchInput",ref:n,type:"text","onUpdate:modelValue":O[0]||(O[0]=J=>m.value=J),onInput:S,onFocus:K,onBlur:B,onKeydown:E,placeholder:e.placeholder,class:z(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":h.value,"bg-slate-50/50":!h.value&&m.value}])},null,42,no),[[be,m.value]]),o("div",io,[m.value?(l(),u("button",{key:0,onClick:te,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},O[1]||(O[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):A("",!0),!m.value&&!h.value?(l(),u("div",uo,O[2]||(O[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),ae("K ")],-1)]))):A("",!0),i.value?(l(),u("div",co,O[3]||(O[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0)])]),g.value?(l(),u("div",{key:0,class:z(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":g.value}])},[b.value.length>0?(l(),u("div",po,[o("div",go,[o("span",mo,P(b.value.length)+" Result"+P(b.value.length!==1?"s":""),1),o("span",vo,P(Math.round(C.value))+"ms ",1)])])):A("",!0),o("div",{ref_key:"suggestionsContainer",ref:x,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[b.value.length===0&&m.value.length>=2?(l(),u("div",fo,O[5]||(O[5]=[dt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):A("",!0),(l(!0),u(Z,null,se(b.value,(J,oe)=>(l(),u("div",{key:J.name||oe,ref_for:!0,ref:le=>w.value[oe]=le,onClick:le=>D(J),class:z(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":oe===f.value}])},[o("div",bo,[O[8]||(O[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",yo,[o("div",xo,[o("div",wo,[o("h4",_o,[o("span",{innerHTML:F(J.subject||J.name,m.value)},null,8,ko)]),o("p",Co,[ae(" ID: "+P(J.name)+" ",1),J.customer?(l(),u("span",So,"• "+P(J.customer),1)):A("",!0)])]),o("div",$o,[o("span",{class:z(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",H(J.status)])},P(J.status),3)])]),o("div",Io,[J.raised_by?(l(),u("div",Po,[O[6]||(O[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),ae(" "+P(J.raised_by),1)])):A("",!0),J.creation?(l(),u("div",To,[O[7]||(O[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),ae(" "+P(X(J.creation)),1)])):A("",!0)])])])],10,ho))),128))],512),m.value&&b.value.length>0?(l(),u("div",Ro,O[9]||(O[9]=[dt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):A("",!0)],2)):A("",!0),g.value?(l(),u("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:ee})):A("",!0)]))}},Do=je(Mo,[["__scopeId","data-v-4969cdcf"]]),Fo={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Oo={class:"mb-6"},Ao={class:"relative max-w-2xl mx-auto"},Vo={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Lo={class:"border-t border-gray-200 pt-4"},Eo={class:"flex items-center justify-between"},jo={class:"flex items-center space-x-3 flex-1"},Uo={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Bo={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},No={class:"text-green-800 font-medium"},zo={class:"text-green-600"},Ho={class:"text-green-900"},Jo=["onClick"],qo={class:"flex items-center space-x-2 ml-4"},Ko=["disabled"],Wo={key:0,class:"flex items-center"},Qo={key:1},Go={key:0,class:"relative"},Xo={class:"flex"},Yo={class:"w-48 border-r border-gray-200 bg-gray-50"},Zo={class:"max-h-64 overflow-y-auto"},er=["onClick"],tr={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},sr={class:"flex-1 min-w-96"},or={class:"p-4"},rr={key:0,class:"text-center py-8 text-gray-500"},lr={key:1,class:"space-y-4"},ar={class:"col-span-2 flex items-center"},nr={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},ir={class:"col-span-2 flex items-center"},ur={class:"text-gray-700 font-medium truncate"},cr={class:"col-span-7"},dr=["onUpdate:modelValue","placeholder"],pr=["onUpdate:modelValue","placeholder"],gr={key:2,class:"space-y-2"},mr={key:0,class:"grid grid-cols-2 gap-2"},vr=["onUpdate:modelValue","onInput"],fr=["onUpdate:modelValue","onInput"],hr={key:1},br=["onUpdate:modelValue"],yr={key:3,class:"space-y-2"},xr={key:0,class:"grid grid-cols-2 gap-2"},wr=["onUpdate:modelValue","onInput"],_r=["onUpdate:modelValue","onInput"],kr={key:1},Cr=["onUpdate:modelValue"],Sr={key:4,class:"relative"},$r={key:0},Ir=["onUpdate:modelValue"],Pr={value:""},Tr=["value"],Rr={key:1,class:"space-y-2"},Mr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Dr=["onClick"],Fr={key:5,class:"space-y-2"},Or={class:"space-y-2"},Ar={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Vr=["onClick"],Lr={class:"relative"},Er=["onUpdate:modelValue","onInput","placeholder"],jr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Ur={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Br=["onClick"],Nr={class:"font-medium text-gray-900"},zr={class:"text-xs text-gray-500"},Hr={key:6,class:"space-y-2"},Jr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},qr=["onClick"],Kr={class:"relative"},Wr=["onUpdate:modelValue","onInput","onKeyup"],Qr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Gr={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Xr=["onClick"],Yr={class:"flex items-center justify-between"},Zr={class:"font-medium text-gray-900"},el={class:"text-xs text-gray-500"},tl={class:"col-span-1 flex items-start justify-center pt-1"},sl=["onClick"],ol={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},rl=["disabled"],ll={key:0,class:"flex items-center"},al={key:1},nl={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(e,{emit:t}){const s=e,r=t,a=V(s.searchQuery),n=V(!1),m=V([]),h=V([]);let g=0;const f=V(!1),i=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],C={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},x={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},w=M(()=>JSON.stringify(m.value)!==JSON.stringify(h.value)),v=c=>{const p=i.find(d=>d.value===c);return(p==null?void 0:p.type)||"text"},b=c=>{const p=i.find(d=>d.value===c);return(p==null?void 0:p.label)||c},y=c=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[c]||`Enter ${b(c).toLowerCase()}...`,$=c=>{const p=v(c);return x[p]||x.text},S=c=>C[c]||[],F=c=>c.displayValue?c.displayValue:Array.isArray(c.value)?c.value.join(", "):c.value,H=c=>c?typeof c=="string"?c.split(",").map(p=>p.trim()).filter(Boolean):c:[],K=(c,p)=>{const d=H(c.value);d.splice(p,1),c.value=d.join(", ")},U=c=>c?c.split(",").map(p=>p.trim()).filter(Boolean):[],B=(c,p)=>{const d=U(c.value);d.splice(p,1),c.value=d.join(", ")},E=(c,p)=>p.userDisplayMap&&p.userDisplayMap[c]?p.userDisplayMap[c]:c,D=(c,p)=>{const d=H(c.value);d.includes(p.value)||(d.push(p.value),c.value=d.join(", "),c.userDisplayMap||(c.userDisplayMap={}),c.userDisplayMap[p.value]=p.label),c.searchValue="",c.suggestions=[]};let te={};const ee=(c,p)=>ge(this,null,function*(){c.loadingTags=!0,te[c.id]&&clearTimeout(te[c.id]),te[c.id]=setTimeout(()=>ge(this,null,function*(){try{const d=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:p||"",limit:15})});if(d.ok){const Y=yield d.json();c.tagSuggestions=Y.message||[]}}catch(d){console.error("Tag search error:",d),c.tagSuggestions=[]}finally{c.loadingTags=!1}}),300)}),G=c=>{if(!c.tagInput||!c.tagInput.trim())return;const p=c.tagInput.replace(",","").trim(),d=U(c.value);p&&!d.includes(p)&&(d.push(p),c.value=d.join(", ")),c.tagInput="",c.tagSuggestions=[]},X=(c,p)=>{const d=U(c.value);d.includes(p.value)||(d.push(p.value),c.value=d.join(", ")),c.tagInput="",c.tagSuggestions=[]};let ne={};const R=(c,p)=>ge(this,null,function*(){c.searchValue=p,c.loading=!0,ne[c.id]&&clearTimeout(ne[c.id]),ne[c.id]=setTimeout(()=>ge(this,null,function*(){try{let d=[],Y="";if(c.field==="customer"?Y="/api/method/force_trans_customization.api.issues.search_customers":c.field==="contact"?Y="/api/method/force_trans_customization.api.issues.search_contacts":c.field==="lead"?Y="/api/method/force_trans_customization.api.issues.search_leads":c.field==="custom_assigned_csm_team"?Y="/api/method/force_trans_customization.api.issues.search_user_groups":c.field==="custom_users_assigned"&&(Y="/api/method/force_trans_customization.api.issues.search_users"),Y){const T=yield fetch(Y,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:p||"",limit:10,doctype_filter:c.field==="custom_users_assigned"?"User":void 0})});T.ok&&(d=(yield T.json()).message||[])}c.suggestions=d}catch(d){console.error("Search error:",d),c.suggestions=[]}finally{c.loading=!1}}),300)}),O=(c,p)=>$(c).map(Y=>({label:Y.label,onClick:()=>{p.operator!==Y.value&&(v(c)==="date"&&(Y.value==="between"?p.value&&!p.startValue&&(p.startValue=p.value,p.endValue=""):p.operator==="between"&&(p.startValue&&!p.value&&(p.value=p.startValue),p.startValue="",p.endValue="")),p.multiSelectValue=null,p.searchValue="",p.suggestions=[],p.searchOptions=[]),p.operator=Y.value}})),J=(c,p)=>{var Y;return((Y=$(p).find(T=>T.value===c))==null?void 0:Y.label)||c},oe=(c,p)=>{const Y=S(p).find(T=>T.value===c);return Y?Y.label:c},le=c=>{c.startValue&&c.endValue?c.value=`${c.startValue},${c.endValue}`:c.value=""},k=c=>{var T;const p=v(c);let d="equals";p==="link"?d="in":p==="tags"?d="has":d=((T=$(c)[0])==null?void 0:T.value)||"equals";const Y={id:++g,field:c,operator:d,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},tagInput:"",tagSuggestions:[],loadingTags:!1};m.value.push(Y)},I=c=>{m.value.splice(c,1)},q=c=>{h.value.splice(c,1),L()},ue=()=>ge(this,null,function*(){if(w.value){f.value=!0;try{h.value=JSON.parse(JSON.stringify(m.value)),L(),n.value=!1}catch(c){console.error("Error applying filters:",c)}finally{setTimeout(()=>{f.value=!1},500)}}}),Te=()=>{m.value=[],h.value=[],a.value="",r("update:searchQuery",""),r("update:filters",[]),r("filters-applied",[]),n.value=!1},L=()=>{const c=h.value.filter(p=>p.value&&p.value.toString().trim()).map(p=>({field:p.field,operator:p.operator,value:p.value.toString().trim(),displayValue:p.displayValue||null}));console.log("Emitting filters:",c),r("update:filters",c),r("filters-applied",c)},j=c=>{a.value=c,r("update:searchQuery",c)},de=c=>{r("suggestion-selected",c)};return Ce(()=>s.searchQuery,c=>{a.value=c}),Oe(()=>{const c=localStorage.getItem("issue_filters");if(c)try{const p=JSON.parse(c);h.value=p.applied||[],m.value=p.pending||[]}catch(p){console.warn("Failed to parse saved filters:",p)}Ce(()=>m.value,p=>{p.forEach(d=>{v(d.field)==="link"&&d.searchValue&&R(d,d.searchValue)})},{deep:!0})}),Ce([h,m],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:h.value,pending:m.value}))},{deep:!0}),(c,p)=>(l(),u("div",Fo,[o("div",Oo,[o("div",Ao,[N(Do,{ref:"searchBoxRef","model-value":a.value,"onUpdate:modelValue":j,onSuggestionSelected:de,issues:e.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),a.value?(l(),u("div",Vo," Searching in "+P(e.filteredCount)+" issues ",1)):A("",!0)])]),o("div",Lo,[o("div",Eo,[o("div",jo,[o("button",{onClick:p[0]||(p[0]=d=>n.value=!n.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[p[3]||(p[3]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),p[4]||(p[4]=o("span",null,"Filters",-1)),h.value.length>0?(l(),u("span",Uo,P(h.value.length),1)):A("",!0)]),h.value.length>0?(l(),u("div",Bo,[(l(!0),u(Z,null,se(h.value,(d,Y)=>(l(),u("div",{key:d.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",No,P(b(d.field)),1),o("span",zo,P(d.operator),1),o("span",Ho,P(F(d)),1),o("button",{onClick:T=>q(Y),class:"text-green-400 hover:text-red-600 ml-1"},p[5]||(p[5]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Jo)]))),128))])):A("",!0)]),o("div",qo,[h.value.length>0||a.value?(l(),u("button",{key:0,onClick:Te,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):A("",!0),m.value.length>0?(l(),u("button",{key:1,onClick:ue,class:z(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",f.value?"bg-blue-500 text-white cursor-wait":w.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!w.value||f.value},[f.value?(l(),u("span",Wo,p[6]||(p[6]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ae(" Applying... ")]))):(l(),u("span",Qo,P(w.value?"Apply Filters":"Filters Applied"),1))],10,Ko)):A("",!0)])])]),n.value?(l(),u("div",Go,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:p[1]||(p[1]=De(()=>{},["stop"]))},[o("div",Xo,[o("div",Yo,[p[7]||(p[7]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",Zo,[(l(),u(Z,null,se(i,d=>o("button",{key:d.value,onClick:De(Y=>k(d.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,P(d.label),1),o("span",tr,P(d.type),1)],8,er)),64))])]),o("div",sr,[o("div",or,[m.value.length===0?(l(),u("div",rr,p[8]||(p[8]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(l(),u("div",lr,[(l(!0),u(Z,null,se(m.value,(d,Y)=>(l(),u("div",{key:d.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",ar,[o("span",nr,P(b(d.field)),1)]),o("div",ir,[N(_(ws),{options:O(d.field,d),placement:"left"},{default:W(({open:T})=>[o("button",{class:z(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",T?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",ur,P(J(d.operator,d.field)),1),p[9]||(p[9]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",cr,[v(d.field)==="text"?fe((l(),u("input",{key:0,"onUpdate:modelValue":T=>d.value=T,type:"text",placeholder:y(d.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,dr)),[[be,d.value]]):v(d.field)==="email"?fe((l(),u("input",{key:1,"onUpdate:modelValue":T=>d.value=T,type:"email",placeholder:y(d.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,pr)),[[be,d.value]]):v(d.field)==="datetime"?(l(),u("div",gr,[d.operator==="between"?(l(),u("div",mr,[o("div",null,[fe(o("input",{"onUpdate:modelValue":T=>d.startValue=T,type:"datetime-local",placeholder:"Start date and time",onInput:T=>le(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,vr),[[be,d.startValue]]),p[10]||(p[10]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[fe(o("input",{"onUpdate:modelValue":T=>d.endValue=T,type:"datetime-local",placeholder:"End date and time",onInput:T=>le(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,fr),[[be,d.endValue]]),p[11]||(p[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(l(),u("div",hr,[fe(o("input",{"onUpdate:modelValue":T=>d.value=T,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,br),[[be,d.value]]),p[12]||(p[12]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):v(d.field)==="date"?(l(),u("div",yr,[d.operator==="between"?(l(),u("div",xr,[o("div",null,[fe(o("input",{"onUpdate:modelValue":T=>d.startValue=T,type:"date",onInput:T=>le(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,wr),[[be,d.startValue]]),p[13]||(p[13]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[fe(o("input",{"onUpdate:modelValue":T=>d.endValue=T,type:"date",onInput:T=>le(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,_r),[[be,d.endValue]]),p[14]||(p[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(l(),u("div",kr,[fe(o("input",{"onUpdate:modelValue":T=>d.value=T,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Cr),[[be,d.value]])]))])):v(d.field)==="select"?(l(),u("div",Sr,[d.isMultiSelect?(l(),u("div",Rr,[H(d.value).length>0?(l(),u("div",Mr,[(l(!0),u(Z,null,se(H(d.value),(T,pe)=>(l(),u("span",{key:pe,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[ae(P(oe(T,d.field))+" ",1),o("button",{onClick:Ue=>K(d,pe),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},p[15]||(p[15]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Dr)]))),128))])):A("",!0)])):(l(),u("div",$r,[d.field==="priority"||d.field==="status"||d.field==="issue_type"?fe((l(),u("select",{key:0,"onUpdate:modelValue":T=>d.value=T,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Pr,"Select "+P(b(d.field))+"...",1),(l(!0),u(Z,null,se(S(d.field),T=>(l(),u("option",{key:T.value,value:T.value},P(T.label),9,Tr))),128))],8,Ir)),[[ts,d.value]]):A("",!0)]))])):v(d.field)==="link"?(l(),u("div",Fr,[o("div",Or,[H(d.value).length>0?(l(),u("div",Ar,[(l(!0),u(Z,null,se(H(d.value),(T,pe)=>(l(),u("span",{key:pe,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[ae(P(E(T,d))+" ",1),o("button",{onClick:Ue=>K(d,pe),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},p[16]||(p[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Vr)]))),128))])):A("",!0),o("div",Lr,[fe(o("input",{"onUpdate:modelValue":T=>d.searchValue=T,onInput:T=>R(d,d.searchValue),type:"text",placeholder:`Search and add ${b(d.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Er),[[be,d.searchValue]]),d.loading?(l(),u("div",jr,p[17]||(p[17]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0)]),d.suggestions&&d.suggestions.length>0&&d.searchValue?(l(),u("div",Ur,[(l(!0),u(Z,null,se(d.suggestions,(T,pe)=>(l(),u("button",{key:pe,onClick:Ue=>D(d,T),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Nr,P(T.label),1),o("div",zr,P(T.subtitle),1)],8,Br))),128))])):A("",!0)])])):v(d.field)==="tags"?(l(),u("div",Hr,[U(d.value).length>0?(l(),u("div",Jr,[(l(!0),u(Z,null,se(U(d.value),(T,pe)=>(l(),u("span",{key:pe,class:"inline-flex items-center px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full border border-purple-200 hover:bg-purple-200 transition-colors"},[ae(P(T)+" ",1),o("button",{onClick:Ue=>B(d,pe),class:"ml-1 text-purple-600 hover:text-red-600 transition-colors"},p[18]||(p[18]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,qr)]))),128))])):A("",!0),o("div",Kr,[fe(o("input",{"onUpdate:modelValue":T=>d.tagInput=T,onInput:T=>ee(d,d.tagInput),onKeyup:[pt(T=>G(d),["enter"]),pt(T=>G(d),["comma"])],type:"text",placeholder:"Search and select tags or type new ones...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Wr),[[be,d.tagInput]]),d.loadingTags?(l(),u("div",Qr,p[19]||(p[19]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0)]),d.tagSuggestions&&d.tagSuggestions.length>0?(l(),u("div",Gr,[(l(!0),u(Z,null,se(d.tagSuggestions,(T,pe)=>(l(),u("button",{key:pe,onClick:Ue=>X(d,T),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Yr,[o("div",null,[o("div",Zr,P(T.label),1),o("div",el,P(T.subtitle),1)]),T.color?(l(),u("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:Ie({backgroundColor:T.color})},null,4)):A("",!0)])],8,Xr))),128))])):A("",!0),p[20]||(p[20]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags or press Enter/comma to create new tags",-1))])):A("",!0)]),o("div",tl,[o("button",{onClick:T=>I(Y),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},p[21]||(p[21]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,sl)])]))),128))])),m.value.length>0?(l(),u("div",ol,[o("button",{onClick:Te,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:ue,disabled:!w.value||f.value,class:z(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",f.value?"bg-gray-700 text-white cursor-wait":w.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[f.value?(l(),u("span",ll,p[22]||(p[22]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ae(" Applying... ")]))):(l(),u("span",al,P(w.value?"Apply Filters":"Filters Applied"),1))],10,rl)])):A("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:p[2]||(p[2]=d=>n.value=!1)})])):A("",!0)]))}},il=je(nl,[["__scopeId","data-v-00077ff0"]]),ul={class:"bg-white rounded-lg shadow-sm border mt-4"},cl={class:"px-6 py-4 flex items-center justify-between"},dl={class:"text-sm text-gray-700"},pl={key:0},gl={key:1},ml={key:0,class:"flex items-center space-x-2"},vl={class:"flex items-center space-x-1"},fl={key:1,class:"px-2 text-gray-500"},hl={key:2,class:"px-2 text-gray-500"},bl={key:1,class:"flex items-center space-x-2"},yl={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(e,{emit:t}){const s=e,r=t,a=V(s.itemsPerPage);Ce(()=>s.itemsPerPage,S=>{a.value=S});const n=M(()=>Math.ceil(s.totalItems/s.itemsPerPage)),m=M(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),h=M(()=>{const S=s.currentPage*s.itemsPerPage;return Math.min(S,s.totalItems)}),g=M(()=>{const S=[],F=s.maxVisiblePages,H=s.currentPage,K=n.value;if(K<=F)for(let U=1;U<=K;U++)S.push(U);else{let U=Math.max(1,H-Math.floor(F/2)),B=Math.min(K,U+F-1);B-U+1<F&&(U=Math.max(1,B-F+1)),U>1&&(U=Math.max(2,U)),B<K&&(B=Math.min(K-1,B));for(let E=U;E<=B;E++)S.push(E)}return S}),f=M(()=>n.value>s.maxVisiblePages&&!g.value.includes(1)),i=M(()=>n.value>s.maxVisiblePages&&!g.value.includes(n.value)),C=M(()=>f.value&&g.value.length>0&&g.value[0]>2),x=M(()=>i.value&&g.value.length>0&&g.value[g.value.length-1]<n.value-1),w=M(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),v=S=>{S>=1&&S<=n.value&&S!==s.currentPage&&(r("update:currentPage",S),r("pageChange",{page:S,itemsPerPage:s.itemsPerPage,offset:(S-1)*s.itemsPerPage}))},b=()=>{s.currentPage>1&&v(s.currentPage-1)},y=()=>{s.currentPage<n.value&&v(s.currentPage+1)},$=()=>{const S=a.value;r("update:itemsPerPage",S);const F=(s.currentPage-1)*s.itemsPerPage+1,H=Math.ceil(F/S);r("pageChange",{page:H,itemsPerPage:S,offset:(H-1)*S})};return(S,F)=>(l(),u("div",ul,[o("div",cl,[o("div",dl,[e.totalItems>0?(l(),u("span",pl," Showing "+P(m.value)+" to "+P(h.value)+" of "+P(e.totalItems)+" results ",1)):(l(),u("span",gl," No results found "))]),n.value>1?(l(),u("div",ml,[N(_(xe),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===1,onClick:b},{prefix:W(()=>[N(_(Pe),{name:"chevron-left",class:"h-4 w-4"})]),default:W(()=>[F[3]||(F[3]=ae(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",vl,[f.value?(l(),Q(_(xe),{key:0,theme:"gray",variant:"outline",size:"sm",class:z({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===1}),onClick:F[0]||(F[0]=H=>v(1))},{default:W(()=>F[4]||(F[4]=[ae(" 1 ")])),_:1,__:[4]},8,["class"])):A("",!0),C.value?(l(),u("span",fl,"...")):A("",!0),(l(!0),u(Z,null,se(g.value,H=>(l(),Q(_(xe),{key:H,theme:"gray",variant:"outline",size:"sm",class:z({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===H}),onClick:K=>v(H)},{default:W(()=>[ae(P(H),1)]),_:2},1032,["class","onClick"]))),128)),x.value?(l(),u("span",hl,"...")):A("",!0),i.value?(l(),Q(_(xe),{key:3,theme:"gray",variant:"outline",size:"sm",class:z({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===n.value}),onClick:F[1]||(F[1]=H=>v(n.value))},{default:W(()=>[ae(P(n.value),1)]),_:1},8,["class"])):A("",!0)]),N(_(xe),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===n.value,onClick:y},{suffix:W(()=>[N(_(Pe),{name:"chevron-right",class:"h-4 w-4"})]),default:W(()=>[F[5]||(F[5]=ae(" Next "))]),_:1,__:[5]},8,["disabled"])])):A("",!0),e.showItemsPerPage?(l(),u("div",bl,[F[6]||(F[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),N(_(ss),{modelValue:a.value,"onUpdate:modelValue":F[2]||(F[2]=H=>a.value=H),options:w.value,onChange:$,class:"w-20"},null,8,["modelValue","options"])])):A("",!0)])]))}},xl={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},wl={class:"text-3xl font-bold text-gray-900"},_l={class:"text-3xl font-bold text-blue-600"},kl={class:"text-3xl font-bold text-green-600"},Cl={class:"text-3xl font-bold text-orange-600"},Sl={class:"text-3xl font-bold text-purple-600"},$l=3e4,Il={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(e,{expose:t,emit:s}){const r=e,a=s,n=Ve({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),m=M(()=>n.value.team_tickets),h=M(()=>n.value.open_tickets),g=M(()=>n.value.assigned_to_me),f=M(()=>n.value.actionable_tickets),i=M(()=>n.value.response_tickets);let C=null,x=0;const w=()=>ge(this,null,function*(){const $=Date.now();if(C&&$-x<$l)return C;try{const S=yield Ws("force_trans_customization.api.issues.get_issue_stats");return n.value=S,C=S,x=$,S}catch(S){return console.error("Error fetching issue stats:",S),n.value}});let v=null;const b=()=>{v&&clearTimeout(v),v=setTimeout(()=>{w()},500)};Oe(()=>{w()}),Ce(()=>r.issues.length,()=>{b()});const y=$=>{a("filter-changed",$)};return t({refreshStats:w}),($,S)=>(l(),u("div",xl,[o("div",{onClick:S[0]||(S[0]=F=>y("team_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",wl,P(m.value),1),S[5]||(S[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:S[1]||(S[1]=F=>y("open_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",_l,P(h.value),1),S[6]||(S[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:S[2]||(S[2]=F=>y("assigned_to_me")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",kl,P(g.value),1),S[7]||(S[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:S[3]||(S[3]=F=>y("actionable_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Tickets where customer awaits our reply"},[o("div",Cl,P(f.value),1),S[8]||(S[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:S[4]||(S[4]=F=>y("response_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Tickets awaiting customer response"},[o("div",Sl,P(i.value),1),S[9]||(S[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Pl={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const e=this.status||"New";return{New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[e]||"gray"}},components:{Badge:ot}},Tl={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const e=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[e]||"yellow"},priorityIndicatorClass(){const e=this.priority||"Medium";return{"bg-red-500":e==="Critical","bg-red-400":e==="High","bg-yellow-400":e==="Medium","bg-green-400":e==="Low"}}},components:{Badge:ot}},Rl={components:{ListView:Ks,Avatar:hs,Badge:ot,Button:xe,FeatherIcon:Pe,ListHeader:It,ListHeaderItem:$t,ListRow:lt,ListRowItem:Pt,ListRows:Tt,ListSelectBanner:Rt,StatusBadge:Pl,PriorityBadge:Tl},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(e,{emit:t}){const s=V(!1),r=V(null),a=V({x:0,y:0}),n=V(!1),m=V({x:0,y:0}),h=V(null),g=k=>{if(!k||typeof k!="string")return"?";if(k.includes("@")){const I=k.split("@")[0];return I.includes(".")||I.includes("_")?I.split(/[._]/).map(ue=>ue[0]).join("").toUpperCase().slice(0,2):I.slice(0,2).toUpperCase()}return k.includes(" ")?k.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2):k.slice(0,2).toUpperCase()},f=k=>{if(!k)return"";const I=k.match(/ISS-(\d{4}-\d+)/);return I?I[1]:k},i=k=>{if(!k)return"";const I=document.createElement("div");return I.innerHTML=k,I.textContent||I.innerText||""},C=k=>k?new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",x=k=>k?new Date(k).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",w=k=>({New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[k]||"gray",v=k=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[k]||"yellow",b=new Map,y=M(()=>e.issues.map(k=>{const I=k.name;if(b.has(I)){const ue=b.get(I);if(ue.originalStatus===k.status&&ue.originalPriority===k.priority&&ue.originalSubject===k.subject&&ue.originalUsersAssigned===JSON.stringify(k.custom_users_assigned))return ue.transformed}const q=Ye(_e({},k),{status:{label:k.status||"New",color:w(k.status)},priority:{label:k.priority||"Medium",color:v(k.priority)}});return b.set(I,{transformed:q,originalStatus:k.status,originalPriority:k.priority,originalSubject:k.subject,originalUsersAssigned:JSON.stringify(k.custom_users_assigned)}),q})),$=Ve([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),S=Ve({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No tickets found",description:"Try adjusting your search or filter criteria"},onRowClick:k=>{console.log("Row clicked:",k)}}),F=k=>{console.log("Selected rows:",k)},H=k=>{console.log("Issue clicked:",k);const q=`${window.location.origin}/app/issue/${k.name}`;window.open(q,"_blank")},K=k=>{const I=k||"New";return{"bg-blue-500":I==="New","bg-orange-500":I==="In Review","bg-purple-500":I==="Confirmed","bg-blue-500":I==="In Transit","bg-green-500":I==="Delivered","bg-green-500":I==="Closed","bg-red-500":I==="Open","bg-orange-500":I==="Replied","bg-yellow-500":I==="On Hold","bg-green-500":I==="Resolved"}},U=k=>{const I=k||"Medium";return{"bg-red-500":I==="Critical"||I==="High","bg-yellow-500":I==="Medium","bg-green-500":I==="Low"}},B=k=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[k||"New"]||"bg-gray-100 text-gray-800",E=k=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[k||"Medium"]||"bg-yellow-100 text-yellow-800",D=k=>{const I=k||"Medium";return{"bg-red-500":I==="Critical","bg-red-400":I==="High","bg-yellow-400":I==="Medium","bg-green-400":I==="Low"}},te=(k,I)=>{const q=k.target.getBoundingClientRect();a.value={x:q.left+q.width/2,y:q.top-10},r.value=I,s.value=!0},ee=()=>{s.value=!1,r.value=null},G=(k,I)=>{if(!I||I.length===0)return;const q=k.target.getBoundingClientRect();m.value={x:q.left+q.width/2,y:q.top-10},h.value=I,n.value=!0},X=()=>{n.value=!1,h.value=null},ne=k=>{let I="asc";e.sortField===k&&(I=e.sortDirection==="asc"?"desc":"asc"),t("sort",{field:k,direction:I})},R=k=>e.sortField!==k?"arrow-up-down":e.sortDirection==="asc"?"arrow-up":"arrow-down",O=k=>e.sortField!==k?"text-gray-400":"text-blue-600",J=k=>e.sortField===k?"bg-blue-50":"",oe=new Map;return{columns:$,listOptions:S,transformedIssues:y,handleSelections:F,handleIssueClick:H,getStatusColor:K,getPriorityColor:U,getStatusBadgeClass:B,getPriorityBadgeClass:E,getPriorityIndicatorClass:D,getInitials:g,formatIssueId:f,stripHtml:i,formatDate:C,formatTime:x,showPopup:s,popupUser:r,popupPosition:a,showUserPopup:te,hideUserPopup:ee,handleColumnSort:ne,getSortIcon:R,getSortIconClass:O,getSortButtonClass:J,getTagStyle:k=>{if(oe.has(k))return oe.get(k);const I=oo(k);let q;if(I){const ue=I.replace("#",""),Te=parseInt(ue.substr(0,2),16),L=parseInt(ue.substr(2,2),16),j=parseInt(ue.substr(4,2),16),de=`rgba(${Te}, ${L}, ${j}, 0.1)`,c=`rgb(${Math.max(Te-50,0)}, ${Math.max(L-50,0)}, ${Math.max(j-50,0)})`;q={backgroundColor:de,color:c,borderColor:c}}else q={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return oe.set(k,q),q},showTagsPopup:n,tagsPopupPosition:m,tagsPopupData:h,showTagsPopupFn:G,hideTagsPopupFn:X}}},Ml={class:"bg-white rounded-lg shadow-sm border"},Dl={key:0,class:"px-6 py-12 text-center text-gray-500"},Fl=["onClick"],Ol=["onClick"],Al={key:1,class:"max-w-xs"},Vl=["title"],Ll=["title"],El=["title"],jl={key:3,class:"flex flex-wrap gap-1"},Ul=["onMouseenter"],Bl={key:1,class:"text-gray-400 text-sm"},Nl=["onMouseenter"],zl=["title"],Hl={class:"truncate"},Jl={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},ql={key:1,class:"text-gray-400 text-sm"},Kl={key:5,class:"flex flex-col"},Wl={class:"text-sm"},Ql={class:"text-xs text-gray-400"},Gl={key:7},Xl={class:"flex gap-2"},Yl={class:"text-sm"},Zl={class:"font-semibold text-gray-900 mb-1"},ea={class:"text-gray-600 flex items-center gap-1"},ta={class:"text-xs text-gray-500 mt-1"},sa={class:"text-sm"},oa={class:"flex flex-wrap gap-1"};function ra(e,t,s,r,a,n){const m=ye("FeatherIcon"),h=ye("ListHeaderItem"),g=ye("ListHeader"),f=ye("Avatar"),i=ye("ListRowItem"),C=ye("ListRow"),x=ye("ListRows"),w=ye("Button"),v=ye("ListSelectBanner"),b=ye("ListView");return l(),u("div",Ml,[t[5]||(t[5]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(l(),u("div",Dl,t[2]||(t[2]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(l(),Q(b,{key:1,columns:r.columns,rows:r.transformedIssues,"row-key":"name",options:r.listOptions,"onUpdate:selections":r.handleSelections,class:"p-4"},{default:W(()=>[N(g,null,{default:W(()=>[(l(!0),u(Z,null,se(r.columns,y=>(l(),Q(h,{key:y.key,item:y},os({_:2},[y.icon?{name:"prefix",fn:W(({item:$})=>[N(m,{name:$.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,y.sortable?{name:"suffix",fn:W(()=>[o("button",{onClick:$=>r.handleColumnSort(y.key),class:z(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",r.getSortButtonClass(y.key)])},[N(m,{name:r.getSortIcon(y.key),class:z(["h-3 w-3",r.getSortIconClass(y.key)])},null,8,["name","class"])],10,Fl)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),N(x,null,{default:W(()=>[(l(!0),u(Z,null,se(r.transformedIssues,y=>(l(),Q(C,{key:y.name,row:y},{default:W(({column:$,item:S})=>[N(i,{item:S,align:$.align},{prefix:W(()=>[$.key==="raised_by"?(l(),Q(f,{key:0,size:"sm",label:r.getInitials(y.raised_by),class:"mr-3"},null,8,["label"])):A("",!0)]),default:W(()=>{var F,H;return[$.key==="name"?(l(),u("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:De(K=>r.handleIssueClick(y),["prevent"])},P(r.formatIssueId(S)),9,Ol)):$.key==="subject"?(l(),u("div",Al,[o("div",{class:"font-medium truncate",title:y.subject},P(y.subject),9,Vl),y.description?(l(),u("div",{key:0,class:"text-gray-500 text-sm mt-1 truncate",title:y.description},P(r.stripHtml(y.description)),9,Ll)):A("",!0)])):$.key==="raised_by"?(l(),u("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:S||"-"},P(S||"-"),9,El)):$.key==="custom_users_assigned"?(l(),u("div",jl,[y.custom_users_assigned&&y.custom_users_assigned.length>0?(l(!0),u(Z,{key:0},se(y.custom_users_assigned.filter(K=>K.user_assigned),K=>(l(),u("div",{key:K.name||K,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:U=>r.showUserPopup(U,K),onMouseleave:t[0]||(t[0]=(...U)=>r.hideUserPopup&&r.hideUserPopup(...U))},P(r.getInitials(K.user_assigned)),41,Ul)]))),128)):(l(),u("span",Bl,"-"))])):$.key==="_user_tags"?(l(),u("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:K=>r.showTagsPopupFn(K,y._user_tags),onMouseleave:t[1]||(t[1]=(...K)=>r.hideTagsPopupFn&&r.hideTagsPopupFn(...K))},[y._user_tags&&y._user_tags.length>0?(l(),u(Z,{key:0},[o("span",{style:Ie(r.getTagStyle(y._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:y._user_tags[0]},[o("span",Hl,P(y._user_tags[0]),1)],12,zl),y._user_tags.length>1?(l(),u("span",Jl," +"+P(y._user_tags.length-1),1)):A("",!0)],64)):(l(),u("span",ql,"-"))],40,Nl)):$.key==="creation"?(l(),u("div",Kl,[o("span",Wl,P(r.formatDate(S)),1),o("span",Ql,P(r.formatTime(S)),1)])):$.key==="status"?(l(),u("span",{key:6,class:z([r.getStatusBadgeClass(((F=y.status)==null?void 0:F.label)||y.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},P(((H=y.status)==null?void 0:H.label)||y.status||"New"),3)):(l(),u("span",Gl,P(S),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),N(v,null,{actions:W(({unselectAll:y})=>[o("div",Xl,[N(w,{variant:"ghost",label:"Delete"}),N(w,{variant:"ghost",label:"Unselect all",onClick:y},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),r.showPopup&&r.popupUser?(l(),u("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:Ie({left:r.popupPosition.x+"px",top:r.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",Yl,[o("div",Zl,P(r.popupUser.user_assigned||"Unknown User"),1),o("div",ea,[t[3]||(t[3]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),ae(" "+P(r.popupUser.team||"No Team"),1)]),o("div",ta," Assigned: "+P(r.formatDate(r.popupUser.assigned_date)),1)])],4)):A("",!0),r.showTagsPopup&&r.tagsPopupData?(l(),u("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:Ie({left:r.tagsPopupPosition.x+"px",top:r.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",sa,[t[4]||(t[4]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",oa,[(l(!0),u(Z,null,se(r.tagsPopupData,y=>(l(),u("span",{key:y,style:Ie(r.getTagStyle(y)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},P(y),5))),128))])])],4)):A("",!0)])}const la=je(Rl,[["render",ra]]),aa={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},na={class:"flex items-start justify-between"},ia={class:"flex items-start space-x-3"},ua={class:"flex-shrink-0"},ca={class:"flex-1 min-w-0"},da={class:"text-sm font-medium text-gray-900"},pa={class:"text-sm text-gray-600 mt-1"},ga={class:"text-xs text-gray-500 mt-1"},ma=["onClick"],va={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(e){const t=n=>{const m="bg-white/95 border-l-4",h={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${m} ${h[n]||h.info}`},s=n=>{const m={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return m[n]||m.info},r=n=>{const m={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return m[n]||m.info},a=n=>{const h=new Date-n,g=Math.floor(h/6e4);if(g<1)return"Just now";if(g<60)return`${g}m ago`;const f=Math.floor(g/60);return f<24?`${f}h ago`:n.toLocaleDateString()};return(n,m)=>(l(),u("div",aa,[N(rs,{name:"notification",tag:"div"},{default:W(()=>[(l(!0),u(Z,null,se(e.notifications,h=>(l(),u("div",{key:h.id,class:z([t(h.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",na,[o("div",ia,[o("div",ua,[N(_(Pe),{name:s(h.type),class:z([r(h.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",ca,[o("p",da,P(h.title),1),o("p",pa,P(h.message),1),o("p",ga,P(a(h.timestamp)),1)])]),o("button",{onClick:g=>n.$emit("remove",h.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[N(_(Pe),{name:"x",class:"h-4 w-4"})],8,ma)])],2))),128))]),_:1})]))}},fa=je(va,[["__scopeId","data-v-d57fd7d2"]]);function ha(e,t){let s;return function(...a){const n=()=>{clearTimeout(s),e(...a)};clearTimeout(s),s=setTimeout(n,t)}}function ba(){const e=V(""),t=V({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=V(""),r=ha(w=>{s.value=w},300);Ce(e,w=>{r(w)});const a=M(()=>{const w={};return s.value.trim()&&(w.subject=["like",`%${s.value.trim()}%`]),t.value.status&&(w.status=t.value.status),t.value.priority&&(w.priority=t.value.priority),t.value.assignee&&(w.raised_by=t.value.assignee),t.value.tags&&(w.issue_type=t.value.tags),w}),n=M(()=>t.value.sortBy||"creation desc"),m=new Map,h=w=>{if(!w||!Array.isArray(w))return[];const v=JSON.stringify({issuesLength:w.length,searchQuery:e.value.trim(),status:t.value.status,priority:t.value.priority,assignee:t.value.assignee,tags:t.value.tags,sortBy:t.value.sortBy});if(m.has(v))return m.get(v);let b=[...w];if(e.value.trim()){const $=e.value.toLowerCase().trim();b=b.filter(S=>{const F=(S.subject||"").toLowerCase(),H=(S.description||"").toLowerCase();return F.includes($)||H.includes($)})}t.value.status&&(b=b.filter($=>$.status===t.value.status)),t.value.priority&&(b=b.filter($=>$.priority===t.value.priority)),t.value.assignee&&(b=b.filter($=>$.raised_by===t.value.assignee)),t.value.tags&&(b=b.filter($=>$.issue_type===t.value.tags));const y=Re({Critical:4,High:3,Medium:2,Low:1});if(b.sort(($,S)=>{const[F,H]=t.value.sortBy.split(" "),K=$[F]||"",U=S[F]||"";let B=0;return F==="creation"||F==="modified"?B=new Date(K)-new Date(U):F==="priority"?B=(y[K]||0)-(y[U]||0):B=K.toString().localeCompare(U.toString()),H==="desc"?-B:B}),m.size>50){const $=m.keys().next().value;m.delete($)}return m.set(v,b),b};let g=null,f=null;const i=w=>{if(!w||!Array.isArray(w))return Re([{label:"All Assignees",value:""}]);const v=w.map($=>$.raised_by).filter($=>$&&$.trim()).sort().join("|");if(g&&f===v)return g;const b=[...new Set(w.map($=>$.raised_by).filter($=>$&&$.trim()))],y=Re([{label:"All Assignees",value:""},...b.map($=>({label:$,value:$}))]);return g=y,f=v,y},C=()=>{e.value="",s.value="",t.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},x=M(()=>e.value.trim()!==""||t.value.status!==""||t.value.priority!==""||t.value.assignee!==""||t.value.tags!==""||t.value.sortBy!=="creation desc");return{searchQuery:e,filters:t,debouncedSearchQuery:s,apiFilters:a,sortOrder:n,hasActiveFilters:x,filterIssues:h,getAssigneeOptions:i,resetFilters:C}}function ya(e,t,s){const r=ls(),a=V([]),n=V(!1),m=V(!1);let h=null;const g=m.value?15e3:2e3,f=()=>{console.log(`⏰ Setting up debounced refresh with ${g}ms delay`),h&&(clearTimeout(h),console.log("🔄 Cleared existing debounce timer")),h=setTimeout(()=>{console.log("⏰ Debounce timer fired, calling processDocumentRefreshes"),x()},g)},i=()=>{if(!r||n.value)return;r.emit("doctype_subscribe","Issue"),r.off("list_update"),r.on("list_update",E=>{try{if(console.log("📡 Received list_update event:",E),(E==null?void 0:E.doctype)!=="Issue")return;if(y()){console.log("⏸️ Skipping realtime update (avoid condition met)");return}if(E.action==="insert"||E.action==="create"){console.log("📝 Skipping new issue creation update:",E.name);return}console.log("✅ Adding to pending refreshes:",E.name),a.value.push(E),f()}catch(D){console.error("❌ Error processing list_update event:",D)}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(E=>{r.on(E,D=>{if((D==null?void 0:D.doctype)!=="Issue"||y())return;const te={doctype:"Issue",name:D.name,action:E.includes("create")?"insert":E.includes("delete")?"delete":"update",modified_by:D.modified_by||D.owner,timestamp:new Date().toISOString()};if(te.action==="insert"){console.log("📝 Skipping new issue creation update:",D.name);return}a.value.push(te),f()})}),n.value=!0},C=()=>{if(!r||!n.value)return;r.emit("doctype_unsubscribe","Issue"),r.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(E=>{r.off(E)}),n.value=!1},x=()=>ge(this,null,function*(){if(console.log("🔄 processDocumentRefreshes called with",a.value.length,"pending refreshes"),!a.value.length){console.log("⏸️ No pending refreshes, returning early");return}const B=window.location.hash||window.location.pathname;if(console.log("🛣️ Current route:",B),!B.includes("issue-tracker")&&!B.includes("issues")&&!B.includes("frontend")){console.log("❌ Not on correct route, clearing pending refreshes and disabling updates"),a.value=[],C();return}console.log("✅ Route check passed, proceeding with refresh");const E=[...new Set(a.value.map(te=>te.name))],D=E.length;console.log(`🔄 Processing ${D} document refreshes:`,E),a.value=[];try{yield w(E),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:D,documents:E}})),console.log(`✅ Successfully processed ${D} document refreshes`)}catch(te){console.error("❌ Error updating individual rows, falling back to full refresh:",te);try{t&&typeof t=="function"?(console.log("🔄 Using custom refresh function for fallback"),yield t()):(console.log("🔄 Using default refresh functions for fallback"),yield Ee(),yield We()),console.log("✅ Fallback refresh completed successfully")}catch(ee){console.error("❌ Error in fallback refresh:",ee)}}}),w=B=>ge(this,null,function*(){try{const{activeResource:E,currentData:D}=v();if(!D||!Array.isArray(D)){console.log("📋 No current data available, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}let te={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(e&&typeof e=="function")try{const X=e();X&&(te=_e(_e({},te),X))}catch(X){console.warn("Error getting current parameters, using defaults:",X)}const ee=D.map(X=>X.name),G=B.filter(X=>ee.includes(X));if(G.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${G.length} visible issues:`,G),yield b(G,E,D)}catch(E){throw console.error("Error during targeted refresh:",E),t&&typeof t=="function"&&(yield t()),E}}),v=()=>{if(s&&typeof s=="function")try{const ee=s();if(ee)return console.log(`📊 Using ${ee.resourceType} resource for updates (from parent)`),ee}catch(ee){console.warn("Error getting resource state from parent, falling back to detection:",ee)}const B=ve.data&&Array.isArray(ve.data)&&ve.data.length>0,E=me.data&&Array.isArray(me.data)&&me.data.length>0;if(B&&!E)return console.log("📊 Using statFilterResource for updates (only stat has data)"),{activeResource:ve,currentData:ve.data,resourceType:"stat"};if(E&&!B)return console.log("📋 Using issuesResource for updates (only issues has data)"),{activeResource:me,currentData:me.data,resourceType:"main"};const D=ve.lastLoaded||0,te=me.lastLoaded||0;return B&&D>=te?(console.log("📊 Using statFilterResource for updates (more recent)"),{activeResource:ve,currentData:ve.data,resourceType:"stat"}):(console.log("📋 Using issuesResource for updates (default)"),{activeResource:me,currentData:me.data||[],resourceType:"main"})},b=(B,E,D)=>ge(this,null,function*(){try{const ee=(yield Promise.all(B.map(G=>ge(this,null,function*(){try{return yield Qs(G),Dt.data}catch(X){return console.warn(`Failed to fetch updated issue ${G}:`,X),null}})))).filter(G=>G!==null);if(ee.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}if(E.data&&Array.isArray(E.data))console.log(`🔄 Updating ${ee.length} issues in ${E.data.length} total issues`),ee.forEach(G=>{const X=E.data.findIndex(ne=>ne.name===G.name);X!==-1?(console.log(`✅ Updating issue at index ${X}: ${G.name}`),Object.assign(E.data[X],G)):console.warn(`⚠️ Issue ${G.name} not found in current data for update`)});else{console.warn("⚠️ activeResource.data is not an array, using fallback method");const G=[...D];ee.forEach(X=>{const ne=G.findIndex(R=>R.name===X.name);ne!==-1?(console.log(`✅ Updating issue at index ${ne}: ${X.name} (fallback)`),G[ne]=X):console.warn(`⚠️ Issue ${X.name} not found in current data for update (fallback)`)}),E.data=G}console.log(`🎯 Successfully updated ${ee.length} issues in current view`)}catch(te){console.error("Error updating visible issues in place:",te),t&&typeof t=="function"&&(yield t())}}),y=()=>!!document.hidden,$=V(!1),S=()=>{document.hidden?$.value=!0:$.value&&($.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),a.value.length>0?(console.log(`📋 Processing ${a.value.length} pending updates`),x()):F())},F=()=>{a.value=[];try{t&&typeof t=="function"?t():(Ee(),We())}catch(B){console.error("Error during manual refresh:",B)}},H=()=>{i()},K=()=>{n.value=!1},U=B=>{console.error("Socket connection error:",B),n.value=!1};return Oe(()=>{r&&(r.on("connect",H),r.on("disconnect",K),r.on("connect_error",U),document.addEventListener("visibilitychange",S),r.connected&&i())}),Ge(()=>{r&&(r.off("connect",H),r.off("disconnect",K),r.off("connect_error",U)),document.removeEventListener("visibilitychange",S),C(),h&&clearTimeout(h)}),{pendingDocumentRefreshes:a,realtimeEventsSetup:n,setupRealtimeUpdates:i,disableRealtimeUpdates:C,manualRefresh:F,processDocumentRefreshes:x}}const xa={class:"min-h-screen bg-gray-50"},wa={class:"bg-white shadow-sm border-b"},_a={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ka={class:"flex justify-between items-center py-4"},Ca={class:"flex items-center space-x-4"},Sa={class:"flex space-x-4"},$a={class:"flex items-center space-x-4"},Ia={class:"text-sm text-gray-600"},Pa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ta={class:"fixed top-20 right-4 flex flex-col space-y-2"},Ra=["title"],Ma={class:"relative"},Da={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Aa={__name:"IssueTracker",setup(e){const{searchQuery:t,filters:s,debouncedSearchQuery:r,apiFilters:a,sortOrder:n,getAssigneeOptions:m}=ba(),h=V(!1),g=V("team_tickets"),f=()=>{console.log("Refreshing current view:",{isUsingStatFilter:h.value,currentStatFilter:g.value,hasCustomFilters:D.value&&D.value.length>0});const L={limit_page_length:q.value,limit_start:(I.value-1)*q.value,order_by:n.value};h.value?(D.value&&D.value.length>0&&(L.filters=JSON.stringify(D.value)),Promise.all([et(g.value,L),D.value&&D.value.length>0?qe(g.value,JSON.stringify(D.value)):qe(g.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(j=>{console.error("Error refreshing stat filter view:",j)})):Promise.all([Ee(_e({filters:JSON.stringify(D.value)},L)),We(JSON.stringify(D.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(j=>{console.error("Error refreshing regular filter view:",j)})},{pendingDocumentRefreshes:i,realtimeEventsSetup:C,manualRefresh:x}=ya(()=>({filters:Te.value,order_by:n.value,limit_page_length:q.value,limit_start:(I.value-1)*q.value}),f,()=>h.value?{activeResource:ve,currentData:ve.data||[],resourceType:"stat"}:{activeResource:me,currentData:me.data||[],resourceType:"main"}),w=()=>{f()},v=V([]),b=L=>{v.value.push(_e({id:Date.now()+Math.random()},L)),setTimeout(()=>{var j;y((j=v.value[v.value.length-1])==null?void 0:j.id)},5e3)},y=L=>{v.value=v.value.filter(j=>j.id!==L)},$=M(()=>h.value?ve.data||[]:me.data||[]),S=M(()=>h.value?Ft.data||0:Mt.data||0),F=M(()=>h.value?ve.loading:me.loading),H=M(()=>$.value),K=M(()=>(n.value||"creation desc").split(" ")[0]),U=M(()=>(n.value||"creation desc").split(" ")[1]||"desc"),B=({field:L,direction:j})=>{const de=`${L} ${j}`;s.value.sortBy=de,I.value=1,f()},E=L=>{},D=V([]),te=L=>{console.log("Filters applied:",L),D.value=L,I.value=1,L&&L.length>0?h.value?(console.log("Applying custom filters on top of card filter:",g.value),ne(g.value)):(console.log("Applying custom filters in regular mode"),ee()):(console.log("No filters applied, returning to default view"),G())},ee=()=>{h.value=!1,g.value="team_tickets",Promise.all([Ee({filters:JSON.stringify(D.value),order_by:n.value,limit_page_length:q.value,limit_start:0}),We(JSON.stringify(D.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(L=>{console.error("Error applying custom filters:",L)})},G=()=>{h.value=!0,g.value="team_tickets",ne("team_tickets")},X=L=>{console.log("Card clicked:",L,"Current filters:",D.value),h.value=!0,g.value=L,t.value="",I.value=1,ne(L)},ne=L=>{const j={limit_page_length:q.value,limit_start:0,order_by:n.value};D.value&&D.value.length>0?(j.filters=JSON.stringify(D.value),console.log("Applying card filter with custom filters:",L,D.value)):console.log("Applying card filter without custom filters:",L),Promise.all([et(L,j),D.value&&D.value.length>0?qe(L,JSON.stringify(D.value)):qe(L)]).then(()=>{console.log("Card filter applied successfully")}).catch(de=>{console.error("Error applying card filter:",de)})},R=Ve(Re(Ys())),O=Ve(Re(Zs())),J=Ve(Re(to()));let oe=null,le=0;const k=M(()=>{const L=$.value.length;return oe&&le===L||(oe=Re(m($.value)),le=L),oe}),I=V(1),q=V(10),ue=({page:L,itemsPerPage:j,offset:de})=>{console.log("Page change:",{page:L,newItemsPerPage:j,offset:de}),I.value=L,q.value=j;const c={limit_page_length:j,limit_start:de,order_by:n.value};h.value?(D.value&&D.value.length>0&&(c.filters=JSON.stringify(D.value)),et(g.value,c).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(p=>{console.error("Error during pagination (stat filter):",p)})):Ee(_e({filters:JSON.stringify(D.value)},c)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(p=>{console.error("Error during pagination (regular filter):",p)})},Te=M(()=>{const L={};return s.value.status&&(L.status=s.value.status),s.value.priority&&(L.priority=s.value.priority),s.value.assignee&&(L.raised_by=s.value.assignee),s.value.tags&&(L.issue_type=s.value.tags),L});return Oe(()=>{console.log("IssueTracker mounted, initializing with default view"),h.value=!0,g.value="team_tickets",ne("team_tickets"),window.addEventListener("issueListUpdated",L=>{const{count:j,documents:de}=L.detail;b({type:"info",title:"List Updated",message:`${j} issue${j>1?"s":""} updated: ${de.slice(0,3).join(", ")}${de.length>3?"...":""}`,timestamp:new Date})})}),Ge(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(L,j)=>{const de=ye("router-link");return l(),u("div",xa,[o("div",wa,[o("div",_a,[o("div",ka,[o("div",Ca,[j[8]||(j[8]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Ticket Tracker",-1)),o("nav",Sa,[N(de,{to:"/",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:W(()=>j[5]||(j[5]=[ae(" Tickets ")])),_:1,__:[5]}),j[6]||(j[6]=o("a",{href:"/app/support",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Desk ",-1)),j[7]||(j[7]=o("a",{href:"/intro",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Wiki ",-1))])]),o("div",$a,[o("span",Ia,P(_(mt).user),1),N(_(xe),{onClick:j[0]||(j[0]=c=>_(mt).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:W(()=>j[9]||(j[9]=[ae(" Logout ")])),_:1,__:[9]})])])])]),o("div",Pa,[N(Il,{issues:H.value,activeFilter:g.value,onFilterChanged:X},null,8,["issues","activeFilter"]),N(il,{searchQuery:_(t),"onUpdate:searchQuery":j[1]||(j[1]=c=>gt(t)?t.value=c:null),filters:_(s),"onUpdate:filters":j[2]||(j[2]=c=>gt(s)?s.value=c:null),statusOptions:J.value,priorityOptions:R.value,assigneeOptions:k.value,tagsOptions:O.value,issues:$.value,filteredCount:S.value,onSuggestionSelected:E,onFiltersApplied:te},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),N(la,{issues:H.value,loading:F.value,sortField:K.value,sortDirection:U.value,onSort:B},null,8,["issues","loading","sortField","sortDirection"]),N(yl,{currentPage:I.value,"onUpdate:currentPage":j[3]||(j[3]=c=>I.value=c),itemsPerPage:q.value,"onUpdate:itemsPerPage":j[4]||(j[4]=c=>q.value=c),totalItems:S.value,onPageChange:ue},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Ta,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:_(C)?"Real-time updates active":"Real-time updates disabled"},[o("div",Ma,[N(_(Pe),{name:_(C)?"wifi":"wifi-off",class:z(["h-5 w-5 transition-colors duration-200",_(C)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:z(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",_(C)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),_(i).length>0?(l(),u("div",Da,P(_(i).length>9?"9+":_(i).length),1)):A("",!0)])],8,Ra),o("button",{onClick:w,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[N(_(Pe),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),N(fa,{notifications:v.value,onRemove:y},null,8,["notifications"])])}}};export{Aa as default};
//# sourceMappingURL=IssueTracker-BhuVCwKO.js.map
