var ds=Object.defineProperty,cs=Object.defineProperties;var ps=Object.getOwnPropertyDescriptors;var _t=Object.getOwnPropertySymbols;var fs=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable;var xt=(s,e,t)=>e in s?ds(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,oe=(s,e)=>{for(var t in e||(e={}))fs.call(e,t)&&xt(s,t,e[t]);if(_t)for(var t of _t(e))gs.call(e,t)&&xt(s,t,e[t]);return s},je=(s,e)=>cs(s,ps(e));var re=(s,e,t)=>new Promise((o,i)=>{var r=p=>{try{f(t.next(p))}catch(x){i(x)}},d=p=>{try{f(t.throw(p))}catch(x){i(x)}},f=p=>p.done?o(p.value):Promise.resolve(p.value).then(r,d);f((t=t.apply(s,e)).next())});import{i as ms,r as E,c as j,t as vs,u as At,a as ys,g as lt,b as Te,d as ee,w as Vt,m as Re,h as kt,S as Ct,e as be,p as Nt,f as Qe,j as ze,k as Ee,l as R,o as a,n as M,q as H,s as l,P as He,v as J,x as ie,V as hs,y as g,z as A,F as Z,A as ae,B as pe,C as we,D as bs,E as ws,G as Le,H as St,I as jt,J as _s,K as xs,L as ks,M as he,N as Ye,O as Cs,Q as Ss,R as Ut,T as Is,U as Ps,W as $s,X as Ts,Y as qs,Z as Ms,_ as Xe,$ as Be,a0 as Bs,a1 as Os,a2 as Ke,a3 as Rs,a4 as me,a5 as zt,a6 as Ds,a7 as dt,a8 as Fs,a9 as Es,aa as it,ab as Ls,ac as Ie,ad as D,ae as le,af as O,ag as n,ah as It,ai as As,aj as Vs,ak as ye,al as ke,am as Ns,an as js,ao as Pe,ap as Ae,aq as Us,ar as gt,as as qe,at as Ht,au as zs,av as Hs,aw as Ks,ax as Me,ay as Ce,az as $e,aA as Pt,aB as Ws,aC as Gs,aD as Ue,aE as mt,aF as Se,aG as Js,aH as Xs,aI as Qs,aJ as $t}from"./index-D6neGqae.js";import{c as Ys,_ as Zs}from"./ComposeEmailDialog-Bj9SiQLI.js";const eo=["INPUT","TEXTAREA"];function to(s,e,t,o={}){if(!e||o.enableIgnoredElement&&eo.includes(e.nodeName))return null;const{arrowKeyOptions:i="both",attributeName:r="[data-reka-collection-item]",itemsArray:d=[],loop:f=!0,dir:p="ltr",preventScroll:x=!0,focus:y=!1}=o,[h,_,S,k,P,$]=[s.key==="ArrowRight",s.key==="ArrowLeft",s.key==="ArrowUp",s.key==="ArrowDown",s.key==="Home",s.key==="End"],w=S||k,I=h||_;if(!P&&!$&&(!w&&!I||i==="vertical"&&I||i==="horizontal"&&w))return null;const C=t?Array.from(t.querySelectorAll(r)):d;if(!C.length)return null;x&&s.preventDefault();let F=null;return I||w?F=Kt(C,e,{goForward:w?k:p==="ltr"?h:_,loop:f}):P?F=C.at(0)||null:$&&(F=C.at(-1)||null),y&&(F==null||F.focus()),F}function Kt(s,e,t,o=s.length){if(--o===0)return null;const i=s.indexOf(e),r=t.goForward?i+1:i-1;if(!t.loop&&(r<0||r>=s.length))return null;const d=(r+s.length)%s.length,f=s[d];return f?f.hasAttribute("disabled")&&f.getAttribute("disabled")!=="false"?Kt(s,f,t,o):f:null}function vt(s){const e=ms({dir:E("ltr")});return j(()=>{var t;return(s==null?void 0:s.value)||((t=e.dir)==null?void 0:t.value)||"ltr"})}function so(s){return j(()=>{var e;return vs(s)?!!((e=At(s))!=null&&e.closest("form")):!0})}function oo(s){const e=ys("",1e3);return{search:e,handleTypeaheadSearch:(i,r)=>{e.value=e.value+i;{const d=lt(),f=r.map(_=>{var S,k,P,$;return je(oe({},_),{textValue:($=(P=(S=_.value)==null?void 0:S.textValue)!=null?P:(k=_.ref.textContent)==null?void 0:k.trim())!=null?$:""})}),p=f.find(_=>_.ref===d),x=f.map(_=>_.textValue),y=ro(x,e.value,p==null?void 0:p.textValue),h=f.find(_=>_.textValue===y);return h&&h.ref.focus(),h==null?void 0:h.ref}},resetTypeahead:()=>{e.value=""}}}function ao(s,e){return s.map((t,o)=>s[(e+o)%s.length])}function ro(s,e,t){const i=e.length>1&&Array.from(e).every(x=>x===e[0])?e[0]:e,r=t?s.indexOf(t):-1;let d=ao(s,Math.max(r,0));i.length===1&&(d=d.filter(x=>x!==t));const p=d.find(x=>x.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function ft(){const s=E(),e=j(()=>{var t,o;return["#text","#comment"].includes((t=s.value)==null?void 0:t.$el.nodeName)?(o=s.value)==null?void 0:o.$el.nextElementSibling:At(s)});return{primitiveElement:s,currentElement:e}}const Tt="data-reka-collection-item";function Wt(s={}){const{key:e="",isProvider:t=!1}=s,o=`${e}CollectionProvider`;let i;if(t){const y=E(new Map);i={collectionRef:E(),itemMap:y},Nt(o,i)}else i=Te(o);const r=(y=!1)=>{const h=i.collectionRef.value;if(!h)return[];const _=Array.from(h.querySelectorAll(`[${Tt}]`)),k=Array.from(i.itemMap.value.values()).sort((P,$)=>_.indexOf(P.ref)-_.indexOf($.ref));return y?k:k.filter(P=>P.ref.dataset.disabled!=="")},d=ee({name:"CollectionSlot",setup(y,{slots:h}){const{primitiveElement:_,currentElement:S}=ft();return be(S,()=>{i.collectionRef.value=S.value}),()=>kt(Ct,{ref:_},h)}}),f=ee({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(y,{slots:h,attrs:_}){const{primitiveElement:S,currentElement:k}=ft();return Vt(P=>{if(k.value){const $=Re(k.value);i.itemMap.value.set($,{ref:k.value,value:y.value}),P(()=>i.itemMap.value.delete($))}}),()=>kt(Ct,je(oe({},_),{[Tt]:"",ref:S}),h)}}),p=j(()=>Array.from(i.itemMap.value.values())),x=j(()=>i.itemMap.value.size);return{getItems:r,reactiveItems:p,itemMapSize:x,CollectionSlot:d,CollectionItem:f}}const no="rovingFocusGroup.onEntryFocus",lo={bubbles:!1,cancelable:!0};function io(s,e=!1){const t=lt();for(const o of s)if(o===t||(o.focus({preventScroll:e}),lt()!==t))return}const[Ni,uo]=Ee("RovingFocusGroup");var co=ee({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(s,{expose:e,emit:t}){const o=s,i=t,{loop:r,orientation:d,dir:f}=Qe(o),p=vt(f),x=ze(o,"currentTabStopId",i,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),y=E(!1),h=E(!1),_=E(0),{getItems:S,CollectionSlot:k}=Wt({isProvider:!0});function P(w){const I=!h.value;if(w.currentTarget&&w.target===w.currentTarget&&I&&!y.value){const C=new CustomEvent(no,lo);if(w.currentTarget.dispatchEvent(C),i("entryFocus",C),!C.defaultPrevented){const F=S().map(c=>c.ref).filter(c=>c.dataset.disabled!==""),U=F.find(c=>c.getAttribute("data-active")===""),V=F.find(c=>c.getAttribute("data-highlighted")===""),T=F.find(c=>c.id===x.value),N=[U,V,T,...F].filter(Boolean);io(N,o.preventScrollOnEntryFocus)}}h.value=!1}function $(){setTimeout(()=>{h.value=!1},1)}return e({getItems:S}),uo({loop:r,dir:p,orientation:d,currentTabStopId:x,onItemFocus:w=>{x.value=w},onItemShiftTab:()=>{y.value=!0},onFocusableItemAdd:()=>{_.value++},onFocusableItemRemove:()=>{_.value--}}),(w,I)=>(a(),R(l(k),null,{default:M(()=>[H(l(He),{tabindex:y.value||_.value===0?-1:0,"data-orientation":l(d),as:w.as,"as-child":w.asChild,dir:l(p),style:{outline:"none"},onMousedown:I[0]||(I[0]=C=>h.value=!0),onMouseup:$,onFocus:P,onBlur:I[1]||(I[1]=C=>y.value=!1)},{default:M(()=>[J(w.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),po=co,fo=ee({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const e=s,{primitiveElement:t,currentElement:o}=ft(),i=j(()=>{var r;return(r=e.checked)!=null?r:e.value});return be(i,(r,d)=>{if(!o.value)return;const f=o.value,p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"value").set;if(y&&r!==d){const h=new Event("input",{bubbles:!0}),_=new Event("change",{bubbles:!0});y.call(f,r),f.dispatchEvent(h),f.dispatchEvent(_)}}),(r,d)=>(a(),R(hs,ie({ref_key:"primitiveElement",ref:t},oe(oe({},e),r.$attrs),{as:"input"}),null,16))}}),qt=fo,go=ee({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const e=s,t=j(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),o=j(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((i,r)=>typeof i=="object"?Object.entries(i).map(([d,f])=>({name:`${e.name}[${r}][${d}]`,value:f})):{name:`${e.name}[${r}]`,value:i}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([i,r])=>({name:`${e.name}[${i}]`,value:r})):[]);return(i,r)=>(a(),g(Z,null,[A(" We render single input if it's required "),t.value?(a(),R(qt,ie({key:i.name},oe(oe({},e),i.$attrs),{name:i.name,value:i.value}),null,16,["name","value"])):(a(!0),g(Z,{key:1},ae(o.value,d=>(a(),R(qt,ie({key:d.name},{ref_for:!0},oe(oe({},e),i.$attrs),{name:d.name,value:d.value}),null,16,["name","value"]))),128))],2112))}}),mo=go,vo=ee({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s;return(t,o)=>(a(),R(l(bs),pe(we(e)),{default:M(()=>[J(t.$slots,"default")]),_:3},16))}}),Gt=vo;function yo(){const s=E(!1);return Le(()=>{St("keydown",()=>{s.value=!0},{capture:!0,passive:!0}),St(["pointerdown","pointermove"],()=>{s.value=!1},{capture:!0,passive:!0})}),s}const ho=ws(yo),[Ve,Jt]=Ee(["MenuRoot","MenuSub"],"MenuContext"),[Ze,bo]=Ee("MenuRoot");var wo=ee({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(s,{emit:e}){const t=s,o=e,{modal:i,dir:r}=Qe(t),d=vt(r),f=ze(t,"open",o),p=E(),x=ho();return Jt({open:f,onOpenChange:y=>{f.value=y},content:p,onContentChange:y=>{p.value=y}}),bo({onClose:()=>{f.value=!1},isUsingKeyboardRef:x,dir:d,modal:i}),(y,h)=>(a(),R(l(jt),null,{default:M(()=>[J(y.$slots,"default")]),_:3}))}}),_o=wo;const[yt,xo]=Ee("MenuContent");var ko=ee({__name:"MenuContentImpl",props:_s({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},oe({},Ps)),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(s,{emit:e}){const t=s,o=e,i=Ve(),r=Ze(),{trapFocus:d,disableOutsidePointerEvents:f,loop:p}=Qe(t);xs(),ks(f.value);const x=E(""),y=E(0),h=E(0),_=E(null),S=E("right"),k=E(0),P=E(null),$=E(),{forwardRef:w,currentElement:I}=he(),{handleTypeaheadSearch:C}=oo();be(I,c=>{i.onContentChange(c)}),Ye(()=>{window.clearTimeout(y.value)});function F(c){var W,Y;return S.value===((W=_.value)==null?void 0:W.side)&&$s(c,(Y=_.value)==null?void 0:Y.area)}function U(c){return re(this,null,function*(){var z;o("openAutoFocus",c),!c.defaultPrevented&&(c.preventDefault(),(z=I.value)==null||z.focus({preventScroll:!0}))})}function V(c){var Q,ue;if(c.defaultPrevented)return;const W=c.target.closest("[data-reka-menu-content]")===c.currentTarget,Y=c.ctrlKey||c.altKey||c.metaKey,te=c.key.length===1,ne=to(c,lt(),I.value,{loop:p.value,arrowKeyOptions:"vertical",dir:r==null?void 0:r.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(ne)return ne==null?void 0:ne.focus();if(c.code==="Space")return;const L=(ue=(Q=$.value)==null?void 0:Q.getItems())!=null?ue:[];if(W&&(c.key==="Tab"&&c.preventDefault(),!Y&&te&&C(c.key,L)),c.target!==I.value||!Ts.includes(c.key))return;c.preventDefault();const K=[...L.map(ce=>ce.ref)];qs.includes(c.key)&&K.reverse(),Ms(K)}function T(c){var z,W;(W=(z=c==null?void 0:c.currentTarget)==null?void 0:z.contains)!=null&&W.call(z,c.target)||(window.clearTimeout(y.value),x.value="")}function N(c){var Y;if(!Xe(c))return;const z=c.target,W=k.value!==c.clientX;if((Y=c==null?void 0:c.currentTarget)!=null&&Y.contains(z)&&W){const te=c.clientX>k.value?"right":"left";S.value=te,k.value=c.clientX}}return xo({onItemEnter:c=>!!F(c),onItemLeave:c=>{var z;F(c)||((z=I.value)==null||z.focus(),P.value=null)},onTriggerLeave:c=>!!F(c),searchRef:x,pointerGraceTimerRef:h,onPointerGraceIntentChange:c=>{_.value=c}}),(c,z)=>(a(),R(l(Is),{"as-child":"",trapped:l(d),onMountAutoFocus:U,onUnmountAutoFocus:z[7]||(z[7]=W=>o("closeAutoFocus",W))},{default:M(()=>[H(l(Cs),{"as-child":"","disable-outside-pointer-events":l(f),onEscapeKeyDown:z[2]||(z[2]=W=>o("escapeKeyDown",W)),onPointerDownOutside:z[3]||(z[3]=W=>o("pointerDownOutside",W)),onFocusOutside:z[4]||(z[4]=W=>o("focusOutside",W)),onInteractOutside:z[5]||(z[5]=W=>o("interactOutside",W)),onDismiss:z[6]||(z[6]=W=>o("dismiss"))},{default:M(()=>[H(l(po),{ref_key:"rovingFocusGroupRef",ref:$,"current-tab-stop-id":P.value,"onUpdate:currentTabStopId":z[0]||(z[0]=W=>P.value=W),"as-child":"",orientation:"vertical",dir:l(r).dir.value,loop:l(p),onEntryFocus:z[1]||(z[1]=W=>{o("entryFocus",W),l(r).isUsingKeyboardRef.value||W.preventDefault()})},{default:M(()=>[H(l(Ss),{ref:l(w),role:"menu",as:c.as,"as-child":c.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":l(Ut)(l(i).open.value),dir:l(r).dir.value,side:c.side,"side-offset":c.sideOffset,align:c.align,"align-offset":c.alignOffset,"avoid-collisions":c.avoidCollisions,"collision-boundary":c.collisionBoundary,"collision-padding":c.collisionPadding,"arrow-padding":c.arrowPadding,"prioritize-position":c.prioritizePosition,"position-strategy":c.positionStrategy,"update-position-strategy":c.updatePositionStrategy,sticky:c.sticky,"hide-when-detached":c.hideWhenDetached,reference:c.reference,onKeydown:V,onBlur:T,onPointermove:N},{default:M(()=>[J(c.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),ht=ko,Co=ee({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=yt(),{forwardRef:o}=he(),{CollectionItem:i}=Wt(),r=E(!1);function d(p){return re(this,null,function*(){if(!p.defaultPrevented&&Xe(p)){if(e.disabled)t.onItemLeave(p);else if(!t.onItemEnter(p)){const y=p.currentTarget;y==null||y.focus({preventScroll:!0})}}})}function f(p){return re(this,null,function*(){yield Be(),!p.defaultPrevented&&Xe(p)&&t.onItemLeave(p)})}return(p,x)=>(a(),R(l(i),{value:{textValue:p.textValue}},{default:M(()=>[H(l(He),ie({ref:l(o),role:"menuitem",tabindex:"-1"},p.$attrs,{as:p.as,"as-child":p.asChild,"aria-disabled":p.disabled||void 0,"data-disabled":p.disabled?"":void 0,"data-highlighted":r.value?"":void 0,onPointermove:d,onPointerleave:f,onFocus:x[0]||(x[0]=y=>re(this,null,function*(){yield Be(),!(y.defaultPrevented||p.disabled)&&(r.value=!0)})),onBlur:x[1]||(x[1]=y=>re(this,null,function*(){yield Be(),!y.defaultPrevented&&(r.value=!1)}))}),{default:M(()=>[J(p.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),Xt=Co,So=ee({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(s,{emit:e}){const t=s,o=e,{forwardRef:i,currentElement:r}=he(),d=Ze(),f=yt(),p=E(!1);function x(){return re(this,null,function*(){const y=r.value;if(!t.disabled&&y){const h=new CustomEvent(Os,{bubbles:!0,cancelable:!0});o("select",h),yield Be(),h.defaultPrevented?p.value=!1:d.onClose()}})}return(y,h)=>(a(),R(Xt,ie(t,{ref:l(i),onClick:x,onPointerdown:h[0]||(h[0]=()=>{p.value=!0}),onPointerup:h[1]||(h[1]=_=>re(this,null,function*(){var S;yield Be(),!_.defaultPrevented&&(p.value||(S=_.currentTarget)==null||S.click())})),onKeydown:h[2]||(h[2]=_=>re(this,null,function*(){const S=l(f).searchRef.value!=="";y.disabled||S&&_.key===" "||l(Bs).includes(_.key)&&(_.currentTarget.click(),_.preventDefault())}))}),{default:M(()=>[J(y.$slots,"default")]),_:3},16))}}),Io=So,Po=ee({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,o=e,i=Ke(t,o),r=Ve(),{forwardRef:d,currentElement:f}=he();return Rs(f),(p,x)=>(a(),R(ht,ie(l(i),{ref:l(d),"trap-focus":l(r).open.value,"disable-outside-pointer-events":l(r).open.value,"disable-outside-scroll":!0,onDismiss:x[0]||(x[0]=y=>l(r).onOpenChange(!1)),onFocusOutside:x[1]||(x[1]=me(y=>o("focusOutside",y),["prevent"]))}),{default:M(()=>[J(p.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),$o=Po,To=ee({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const i=Ke(s,e),r=Ve();return(d,f)=>(a(),R(ht,ie(l(i),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:f[0]||(f[0]=p=>l(r).onOpenChange(!1))}),{default:M(()=>[J(d.$slots,"default")]),_:3},16))}}),qo=To,Mo=ee({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const i=Ke(s,e),r=Ve(),d=Ze();return(f,p)=>(a(),R(l(zt),{present:f.forceMount||l(r).open.value},{default:M(()=>[l(d).modal.value?(a(),R($o,pe(ie({key:0},oe(oe({},f.$attrs),l(i)))),{default:M(()=>[J(f.$slots,"default")]),_:3},16)):(a(),R(qo,pe(ie({key:1},oe(oe({},f.$attrs),l(i)))),{default:M(()=>[J(f.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Bo=Mo,Oo=ee({__name:"MenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(s){const e=s;return(t,o)=>(a(),R(l(He),pe(we(e)),{default:M(()=>[J(t.$slots,"default")]),_:3},16))}}),Ro=Oo,Do=ee({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(t,o)=>(a(),R(l(Ds),pe(we(e)),{default:M(()=>[J(t.$slots,"default")]),_:3},16))}}),Fo=Do;const[Qt,Eo]=Ee("MenuSub");var Lo=ee({__name:"MenuSub",props:{open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(s,{emit:e}){const t=s,i=ze(t,"open",e,{defaultValue:!1,passive:t.open===void 0}),r=Ve(),d=E(),f=E();return Vt(p=>{(r==null?void 0:r.open.value)===!1&&(i.value=!1),p(()=>i.value=!1)}),Jt({open:i,onOpenChange:p=>{i.value=p},content:f,onContentChange:p=>{f.value=p}}),Eo({triggerId:"",contentId:"",trigger:d,onTriggerChange:p=>{d.value=p}}),(p,x)=>(a(),R(l(jt),null,{default:M(()=>[J(p.$slots,"default")]),_:3}))}}),Ao=Lo,Vo=ee({__name:"MenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1,default:!0},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const i=Ke(s,e),r=Ve(),d=Ze(),f=Qt(),{forwardRef:p,currentElement:x}=he();return f.contentId||(f.contentId=dt(void 0,"reka-menu-sub-content")),(y,h)=>(a(),R(l(zt),{present:y.forceMount||l(r).open.value},{default:M(()=>[H(ht,ie(l(i),{id:l(f).contentId,ref:l(p),"aria-labelledby":l(f).triggerId,align:"start",side:l(d).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:h[0]||(h[0]=me(_=>{var S;l(d).isUsingKeyboardRef.value&&((S=l(x))==null||S.focus())},["prevent"])),onCloseAutoFocus:h[1]||(h[1]=me(()=>{},["prevent"])),onFocusOutside:h[2]||(h[2]=_=>{_.defaultPrevented||_.target!==l(f).trigger.value&&l(r).onOpenChange(!1)}),onEscapeKeyDown:h[3]||(h[3]=_=>{l(d).onClose(),_.preventDefault()}),onKeydown:h[4]||(h[4]=_=>{var P,$;const S=(P=_.currentTarget)==null?void 0:P.contains(_.target),k=l(Fs)[l(d).dir.value].includes(_.key);S&&k&&(l(r).onOpenChange(!1),($=l(f).trigger.value)==null||$.focus(),_.preventDefault())})}),{default:M(()=>[J(y.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),No=Vo,jo=ee({__name:"MenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=Ve(),o=Ze(),i=Qt(),r=yt(),d=E(null);i.triggerId||(i.triggerId=dt(void 0,"reka-menu-sub-trigger"));function f(){d.value&&window.clearTimeout(d.value),d.value=null}Ye(()=>{f()});function p(h){!Xe(h)||r.onItemEnter(h)||!e.disabled&&!t.open.value&&!d.value&&(r.onPointerGraceIntentChange(null),d.value=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))}function x(h){return re(this,null,function*(){var S,k;if(!Xe(h))return;f();const _=(S=t.content.value)==null?void 0:S.getBoundingClientRect();if(_!=null&&_.width){const P=(k=t.content.value)==null?void 0:k.dataset.side,$=P==="right",w=$?-5:5,I=_[$?"left":"right"],C=_[$?"right":"left"];r.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:I,y:_.top},{x:C,y:_.top},{x:C,y:_.bottom},{x:I,y:_.bottom}],side:P}),window.clearTimeout(r.pointerGraceTimerRef.value),r.pointerGraceTimerRef.value=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(h))return;r.onPointerGraceIntentChange(null)}})}function y(h){return re(this,null,function*(){var S;const _=r.searchRef.value!=="";e.disabled||_&&h.key===" "||Es[o.dir.value].includes(h.key)&&(t.onOpenChange(!0),yield Be(),(S=t.content.value)==null||S.focus(),h.preventDefault())})}return(h,_)=>(a(),R(Gt,{"as-child":""},{default:M(()=>[H(Xt,ie(e,{id:l(i).triggerId,ref:S=>{var k;(k=l(i))==null||k.onTriggerChange(S==null?void 0:S.$el)},"aria-haspopup":"menu","aria-expanded":l(t).open.value,"aria-controls":l(i).contentId,"data-state":l(Ut)(l(t).open.value),onClick:_[0]||(_[0]=S=>re(this,null,function*(){e.disabled||S.defaultPrevented||(S.currentTarget.focus(),l(t).open.value||l(t).onOpenChange(!0))})),onPointermove:p,onPointerleave:x,onKeydown:y}),{default:M(()=>[J(h.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),Uo=jo;const[Yt,zo]=Ee("DropdownMenuRoot");var Ho=ee({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(s,{emit:e}){const t=s,o=e;he();const i=ze(t,"open",o,{defaultValue:t.defaultOpen,passive:t.open===void 0}),r=E(),{modal:d,dir:f}=Qe(t),p=vt(f);return zo({open:i,onOpenChange:x=>{i.value=x},onOpenToggle:()=>{i.value=!i.value},triggerId:"",triggerElement:r,contentId:"",modal:d,dir:p}),(x,y)=>(a(),R(l(_o),{open:l(i),"onUpdate:open":y[0]||(y[0]=h=>it(i)?i.value=h:null),dir:l(p),modal:l(d)},{default:M(()=>[J(x.$slots,"default",{open:l(i)})]),_:3},8,["open","dir","modal"]))}}),Ko=Ho,Wo=ee({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(s,{emit:e}){const i=Ke(s,e);he();const r=Yt(),d=E(!1);function f(p){p.defaultPrevented||(d.value||setTimeout(()=>{var x;(x=r.triggerElement.value)==null||x.focus()},0),d.value=!1,p.preventDefault())}return r.contentId||(r.contentId=dt(void 0,"reka-dropdown-menu-content")),(p,x)=>{var y;return a(),R(l(Bo),ie(l(i),{id:l(r).contentId,"aria-labelledby":(y=l(r))==null?void 0:y.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:f,onInteractOutside:x[0]||(x[0]=h=>{var P;if(h.defaultPrevented)return;const _=h.detail.originalEvent,S=_.button===0&&_.ctrlKey===!0,k=_.button===2||S;(!l(r).modal.value||k)&&(d.value=!0),(P=l(r).triggerElement.value)!=null&&P.contains(h.target)&&h.preventDefault()})}),{default:M(()=>[J(p.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),Go=Wo,Jo=ee({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(s,{emit:e}){const t=s,i=Ls(e);return he(),(r,d)=>(a(),R(l(Io),pe(we(oe(oe({},t),l(i)))),{default:M(()=>[J(r.$slots,"default")]),_:3},16))}}),Mt=Jo,Xo=ee({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s;return he(),(t,o)=>(a(),R(l(Ro),pe(we(e)),{default:M(()=>[J(t.$slots,"default")]),_:3},16))}}),Bt=Xo,Qo=ee({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(t,o)=>(a(),R(l(Fo),pe(we(e)),{default:M(()=>[J(t.$slots,"default")]),_:3},16))}}),Ot=Qo,Yo=ee({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(s,{emit:e}){var r;const t=s,i=ze(t,"open",e,{passive:t.open===void 0,defaultValue:(r=t.defaultOpen)!=null?r:!1});return he(),(d,f)=>(a(),R(l(Ao),{open:l(i),"onUpdate:open":f[0]||(f[0]=p=>it(i)?i.value=p:null)},{default:M(()=>[J(d.$slots,"default",{open:l(i)})]),_:3},8,["open"]))}}),Zo=Yo,ea=ee({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const i=Ke(s,e);return he(),(r,d)=>(a(),R(l(No),ie(l(i),{style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:M(()=>[J(r.$slots,"default")]),_:3},16))}}),ta=ea,sa=ee({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s;return he(),(t,o)=>(a(),R(l(Uo),pe(we(e)),{default:M(()=>[J(t.$slots,"default")]),_:3},16))}}),oa=sa,aa=ee({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const e=s,t=Yt(),{forwardRef:o,currentElement:i}=he();return Le(()=>{t.triggerElement=i}),t.triggerId||(t.triggerId=dt(void 0,"reka-dropdown-menu-trigger")),(r,d)=>(a(),R(l(Gt),{"as-child":""},{default:M(()=>[H(l(He),{id:l(t).triggerId,ref:l(o),type:r.as==="button"?"button":void 0,"as-child":e.asChild,as:r.as,"aria-haspopup":"menu","aria-expanded":l(t).open.value,"aria-controls":l(t).open.value?l(t).contentId:void 0,"data-disabled":r.disabled?"":void 0,disabled:r.disabled,"data-state":l(t).open.value?"open":"closed",onClick:d[0]||(d[0]=f=>re(this,null,function*(){var p;!r.disabled&&f.button===0&&f.ctrlKey===!1&&((p=l(t))==null||p.onOpenToggle(),yield Be(),l(t).open.value&&f.preventDefault())})),onKeydown:d[1]||(d[1]=Ie(f=>{r.disabled||(["Enter"," "].includes(f.key)&&l(t).onOpenToggle(),f.key==="ArrowDown"&&l(t).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())},["enter","space","arrow-down"]))},{default:M(()=>[J(r.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),ra=aa;const[na,la]=Ee("SwitchRoot");var ia=ee({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,o=e,{disabled:i}=Qe(t),r=ze(t,"modelValue",o,{defaultValue:t.defaultValue,passive:t.modelValue===void 0});function d(){i.value||(r.value=!r.value)}const{forwardRef:f,currentElement:p}=he(),x=so(p),y=j(()=>{var h;return t.id&&p.value?(h=document.querySelector(`[for="${t.id}"]`))==null?void 0:h.innerText:void 0});return la({modelValue:r,toggleCheck:d,disabled:i}),(h,_)=>(a(),R(l(He),ie(h.$attrs,{id:h.id,ref:l(f),role:"switch",type:h.as==="button"?"button":void 0,value:h.value,"aria-label":h.$attrs["aria-label"]||y.value,"aria-checked":l(r),"aria-required":h.required,"data-state":l(r)?"checked":"unchecked","data-disabled":l(i)?"":void 0,"as-child":h.asChild,as:h.as,disabled:l(i),onClick:d,onKeydown:Ie(me(d,["prevent"]),["enter"])}),{default:M(()=>[J(h.$slots,"default",{modelValue:l(r)}),l(x)&&h.name?(a(),R(l(mo),{key:0,type:"checkbox",name:h.name,disabled:l(i),required:h.required,value:h.value,checked:!!l(r)},null,8,["name","disabled","required","value","checked"])):A("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),ua=ia,da=ee({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const e=na();return he(),(t,o)=>{var i;return a(),R(l(He),{"data-state":(i=l(e).modelValue)!=null&&i.value?"checked":"unchecked","data-disabled":l(e).disabled.value?"":void 0,"as-child":t.asChild,as:t.as},{default:M(()=>[J(t.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),ca=da;const pa=["src","alt"],fa=ee({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(s){const e=E(!1),t=s,o=j(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),i=j(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),r=j(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),d=j(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),f=j(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),p=j(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function x(y){y.type&&(e.value=!0)}return(y,h)=>(a(),g("div",{class:D(["relative inline-block shrink-0",[i.value,o.value]])},[s.image&&!e.value?(a(),g("img",{key:0,src:s.image,alt:s.label,class:D([o.value,"h-full w-full object-cover"]),onError:h[0]||(h[0]=_=>x(_))},null,42,pa)):(a(),g("div",{key:1,class:D(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[r.value,o.value]])},[y.$slots.default?(a(),g("div",{key:0,class:D(p.value)},[J(y.$slots,"default")],2)):(a(),g(Z,{key:1},[le(O(s.label&&s.label[0]),1)],64))],2)),y.$slots.indicator?(a(),g("div",{key:2,class:D(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",d.value])},[n("div",{class:D(f.value)},[J(y.$slots,"indicator")],2)],2)):A("",!0)],2))}}),ga={class:"flex flex-col gap-1"},ma={class:"flex items-center"},va=["for"],ya={key:0,class:"max-w-xs text-p-sm text-ink-gray-7"},Rt="mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6",Dt=ee({__name:"Switch",props:It({size:{default:"sm"},label:{default:""},description:{default:""},disabled:{type:Boolean,default:!1},icon:{},labelClasses:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:It(["change"],["update:modelValue"]),setup(s,{emit:e}){const t=s,o=As(s,"modelValue"),i=e;be(o,y=>{i("change",y)});const r=Vs(),d=j(()=>["relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-transparent transition-colors duration-100 ease-in-out items-center","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3","disabled:cursor-not-allowed disabled:bg-surface-gray-3",o.value?"bg-surface-gray-7 enabled:hover:bg-surface-gray-6 active:bg-surface-gray-5 group-hover:enabled:bg-surface-gray-6":"bg-surface-gray-4 enabled:hover:bg-gray-400 active:bg-gray-500 group-hover:enabled:bg-gray-400",t.size==="md"?"h-5 w-8 border-[3px]":"h-4 w-[26px] border-2"]),f=j(()=>["pointer-events-none inline-block transform rounded-full bg-surface-white shadow ring-0 transition duration-100 ease-in-out",t.size==="md"?"h-3.5 w-3.5":"h-3 w-3",t.size==="md"?o.value?"translate-x-3 rtl:-translate-x-3":"translate-x-0":o.value?"translate-x-2.5 rtl:-translate-x-2.5":"translate-x-0"]),p=j(()=>["font-medium leading-normal",t.disabled&&!t.description?"text-ink-gray-4":"text-ink-gray-8",t.size==="md"?"text-lg":"text-base",t.labelClasses]),x=j(()=>{if(!t.label)return;const y=["flex justify-between"];return t.description?(y.push("items-start"),y.push(t.size==="md"?"px-3 space-x-3.5":"px-2.5 space-x-2.5")):(y.push("group items-center space-x-3 cursor-pointer rounded focus-visible:bg-surface-gray-2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3"),y.push(t.disabled?"cursor-not-allowed":"hover:bg-surface-gray-3 active:bg-surface-gray-4"),y.push(t.size==="md"?"px-3 py-1.5":"px-2.5 py-1.5")),y});return(y,h)=>(a(),g("div",{class:D(x.value)},[n("div",ga,[n("div",ma,[t.icon&&typeof t.icon=="string"?(a(),R(ye,{key:0,name:t.icon,class:D(Rt),"aria-hidden":"true"},null,8,["name"])):t.icon?(a(),R(ke(t.icon),{key:1,class:D(Rt)})):A("",!0),n("label",{class:D(p.value),for:l(r)},O(t.label),11,va)]),t.description?(a(),g("span",ya,O(t.description),1)):A("",!0)]),H(l(ua),{id:l(r),modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=_=>o.value=_),onKeyup:h[1]||(h[1]=Ie(me(_=>o.value=!o.value,["self"]),["space"])),class:D(d.value),disabled:t.disabled},{default:M(()=>[H(l(ca),{class:D(f.value)},null,8,["class"])]),_:1},8,["id","modelValue","class","disabled"])],2))}}),ha=ee({inheritAttrs:!1,__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"},side:{default:"bottom"},offset:{default:4}},setup(s){const e=E(!1);E(!0);const t=Ns(),o=js(),i=s;function r(){e.value=!1}const d=(C,F)=>{C.route?t.push(C.route):C.onClick&&C.onClick(F)},f=C=>je(oe({},C),{label:C.label,theme:C.theme||"gray",icon:C.icon,component:C.component,onClick:F=>d(C,F),submenu:C.submenu}),p=C=>C.theme==="red"?"text-ink-red-3":"text-ink-gray-6",x=C=>C.theme==="red"?"text-ink-red-3":"text-ink-gray-7",y=C=>C.theme==="red"?"focus:bg-surface-red-3 data-[highlighted]:bg-surface-red-3 data-[state=open]:bg-surface-red-3":"focus:bg-surface-gray-3 data-[highlighted]:bg-surface-gray-3 data-[state=open]:bg-surface-gray-3",h=C=>y(C)+" data-[state=open]:bg-surface-"+(C.theme==="red"?"red-3":"gray-3"),_=C=>{let F=[],U=null,V=0;for(let T of C)if(T!=null){if("group"in T){U&&(F.push(U),U=null);let N=je(oe({key:V},T),{items:k(T.items)});F.push(N)}else U||(U={key:V,group:"",hideLabel:!0,items:[]}),U.items.push(...k([T]));V++}return U&&F.push(U),F},S=C=>_(C),k=C=>(C||[]).filter(Boolean).filter(F=>F.condition?F.condition():!0).map(F=>f(F)),P=C=>C.items.some(F=>F.icon),$={dropdownContent:"min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none dropdown-content",groupContainer:"p-1.5",groupLabel:"flex h-7 items-center px-2 text-sm font-medium",itemLabel:"whitespace-nowrap",itemIcon:"mr-2 h-4 w-4 flex-shrink-0",itemIconPlaceholder:"mr-2 h-4 w-4 flex-shrink-0",chevronIcon:"ml-auto h-4 w-4 flex-shrink-0",itemButton:"group flex h-7 w-full items-center rounded px-2 text-base focus:outline-none",submenuTrigger:"group flex h-7 w-full items-center rounded px-2 text-base text-ink-gray-6 focus:outline-none"},w=j(()=>_(i.options)),I=j(()=>i.placement==="left"?"start":i.placement==="right"?"end":i.placement==="center"?"center":"start");return(C,F)=>(a(),R(l(Ko),{open:e.value,"onUpdate:open":F[0]||(F[0]=U=>e.value=U)},{default:M(({open:U})=>[H(l(ra),{"as-child":""},{default:M(()=>[C.$slots.default?J(C.$slots,"default",pe(ie({key:0},oe({open:U,close:r},l(o)))),void 0,!0):(a(),R(l(Pe),ie({key:1,active:!1},oe(oe({},s.button),l(o))),{default:M(()=>{var V;return[le(O(s.button?((V=s.button)==null?void 0:V.label)||null:"Options"),1)]}),_:1},16))]),_:2},1024),H(l(Ot),null,{default:M(()=>[H(l(Go),{class:D([$.dropdownContent,{"origin-top-left":s.placement=="left","origin-top-right":s.placement=="right","origin-top":s.placement=="center"}]),side:s.side,align:I.value,"side-offset":s.offset},{default:M(()=>[(a(!0),g(Z,null,ae(w.value,V=>(a(),g(Z,{key:V.key},[V.items.length?(a(),g("div",{key:0,class:D($.groupContainer)},[V.group&&!V.hideLabel?(a(),R(l(Bt),{key:0,class:D([$.groupLabel,x(V)])},{default:M(()=>[le(O(V.group),1)]),_:2},1032,["class"])):A("",!0),(a(!0),g(Z,null,ae(V.items,T=>(a(),g(Z,{key:T.label},[T.switch?(a(),g("div",{key:0,class:D($.itemButton)},[T.icon&&typeof T.icon=="string"?(a(),R(ye,{key:0,name:T.icon,class:D([$.itemIcon,p(T)]),"aria-hidden":"true"},null,8,["name","class"])):T.icon?(a(),R(ke(T.icon),{key:1,class:D([$.itemIcon,p(T)])},null,8,["class"])):A("",!0),n("span",{class:D([$.itemLabel,x(T)])},O(T.label),3),H(Dt,{class:"ml-auto","label-classes":"font-normal cursor-pointer",onChange:N=>{var c;return(c=T.onClick)==null?void 0:c.call(T,N)},"model-value":T.switchValue||!1},null,8,["onChange","model-value"])],2)):(a(),R(l(Mt),{key:1,"as-child":"",onSelect:T.onClick},{default:M(()=>[C.$slots.item?J(C.$slots,"item",ie({key:0,ref_for:!0},{item:T,close:r}),void 0,!0):T.component?(a(),R(ke(T.component),{key:1,active:!1})):T.submenu?(a(),R(l(Zo),{key:2},{default:M(()=>[H(l(oa),{"as-child":""},{default:M(()=>[n("button",{class:D([$.submenuTrigger,h(T)])},[T.icon&&typeof T.icon=="string"?(a(),R(ye,{key:0,name:T.icon,class:D([$.itemIcon,p(T)]),"aria-hidden":"true"},null,8,["name","class"])):T.icon?(a(),R(ke(T.icon),{key:1,class:D([$.itemIcon,p(T)])},null,8,["class"])):P(V)?(a(),g("div",{key:2,class:D($.itemIconPlaceholder)},null,2)):A("",!0),n("span",{class:D([$.itemLabel,x(T)])},O(T.label),3),H(ye,{name:"chevron-right",class:D([$.chevronIcon,p(T)]),"aria-hidden":"true"},null,8,["class"])],2)]),_:2},1024),H(l(Ot),null,{default:M(()=>[H(l(ta),{class:D($.dropdownContent),"side-offset":4},{default:M(()=>[(a(!0),g(Z,null,ae(S(T.submenu),N=>(a(),g("div",{key:N.key,class:D($.groupContainer)},[N.group&&!N.hideLabel?(a(),R(l(Bt),{key:0,class:D($.groupLabel)},{default:M(()=>[le(O(N.group),1)]),_:2},1032,["class"])):A("",!0),(a(!0),g(Z,null,ae(N.items,c=>(a(),g(Z,{key:c.label},[c.switch?(a(),g("div",{key:0,class:D($.itemButton)},[c.icon&&typeof c.icon=="string"?(a(),R(ye,{key:0,name:c.icon,class:D([$.itemIcon,p(c)]),"aria-hidden":"true"},null,8,["name","class"])):c.icon?(a(),R(ke(c.icon),{key:1,class:D([$.itemIcon,p(c)])},null,8,["class"])):A("",!0),n("span",{class:D([$.itemLabel,x(c)])},O(c.label),3),H(Dt,{class:"ml-auto","label-classes":"font-normal cursor-pointer",onChange:z=>{var W;return(W=c.onClick)==null?void 0:W.call(c,z)},"model-value":c.switchValue||!1},null,8,["onChange","model-value"])],2)):(a(),R(l(Mt),{key:1,"as-child":"",onSelect:z=>d(c,z)},{default:M(()=>[c.component?(a(),R(ke(c.component),{key:0,active:!1})):(a(),g("button",{key:1,class:D([$.itemButton,y(c)])},[c.icon&&typeof c.icon=="string"?(a(),R(ye,{key:0,name:c.icon,class:D([$.itemIcon,p(c)]),"aria-hidden":"true"},null,8,["name","class"])):c.icon?(a(),R(ke(c.icon),{key:1,class:D([$.itemIcon,p(c)])},null,8,["class"])):P(N)?(a(),g("div",{key:2,class:D($.itemIconPlaceholder)},null,2)):A("",!0),n("span",{class:D([$.itemLabel,x(c)])},O(c.label),3)],2))]),_:2},1032,["onSelect"]))],64))),128))],2))),128))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024)):(a(),g("button",{key:3,class:D([$.itemButton,y(T)])},[T.icon&&typeof T.icon=="string"?(a(),R(ye,{key:0,name:T.icon,class:D([$.itemIcon,p(T)]),"aria-hidden":"true"},null,8,["name","class"])):T.icon?(a(),R(ke(T.icon),{key:1,class:D([$.itemIcon,p(T)])},null,8,["class"])):P(V)?(a(),g("div",{key:2,class:D($.itemIconPlaceholder)},null,2)):A("",!0),n("span",{class:D([$.itemLabel,x(T)])},O(T.label),3)],2))]),_:2},1032,["onSelect"]))],64))),128))],2)):A("",!0)],64))),128))]),_:3},8,["class","side","align","side-offset"])]),_:3})]),_:3},8,["open"]))}}),ba=Ae(ha,[["__scopeId","data-v-37606d02"]]),wa={class:"flex h-full w-full flex-col items-center justify-center text-base"},_a={class:"text-xl font-medium text-ink-gray-8 mt-6"},xa={class:"mt-1 text-base text-ink-gray-5"},ka={__name:"ListEmptyState",setup(s){const e=Te("list");return(t,o)=>(a(),g("div",wa,[J(t.$slots,"default",{},()=>[n("div",_a,O(l(e).options.emptyState.title),1),n("div",xa,O(l(e).options.emptyState.description),1),l(e).options.emptyState.button?(a(),R(l(Pe),ie({key:0},l(e).options.emptyState.button,{class:"mt-4"}),null,16)):A("",!0)])]))}};function Zt(s,e=!0){let t=e?"14px ":"",o=s.map(i=>{let r=i.width||1;return typeof r=="number"?r+"fr":r}).join(" ");return t+o}const bt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Ca={class:"truncate"},es={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=s,o=e,i=E(null),r=E(null),d=j(()=>{if(typeof t.item.width=="string"){const y=parseInt(t.item.width);if(t.item.width.includes("rem"))return y*16;if(t.item.width.includes("px"))return y}return r.value.offsetWidth}),f=y=>{const h=y.clientX,_=d.value,S=P=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),i.value.style.backgroundColor="rgb(199 199 199)";let $=_+(P.clientX-h);t.item.width=`${$<50?50:$}px`,p(t.item.width)},k=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),i.value.style.backgroundColor="",window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",k)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",k)},p=Us(y=>{t.item.width=y,o("columnWidthUpdated")},t.debounce),x=Te("list");return(y,h)=>(a(),g("div",{ref_key:"columnRef",ref:r,class:D(["group relative flex items-center",s.item.align?l(bt)[s.item.align]:"justify-between"])},[n("div",{class:D(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",y.$attrs.class])},[J(y.$slots,"prefix",pe(we({item:s.item}))),J(y.$slots,"default",{},()=>[n("div",Ca,O(s.item.label),1)]),J(y.$slots,"suffix",pe(we({item:s.item})))],2),l(x).options.resizeColumn?J(y.$slots,"resizer",pe(ie({key:0},{item:s.item})),()=>[n("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:f},[n("div",{ref_key:"resizer",ref:i,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):A("",!0)],2))}},ts={__name:"ListHeader",emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=e,o=Te("list");return(i,r)=>(a(),g("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:qe({gridTemplateColumns:l(Zt)(l(o).columns,l(o).options.selectable)})},[l(o).options.selectable?(a(),R(gt,{key:0,class:"cursor-pointer duration-300",modelValue:l(o).allRowsSelected,onClick:me(l(o).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):A("",!0),J(i.$slots,"default",{},()=>[(a(!0),g(Z,null,ae(l(o).columns,d=>(a(),R(es,{key:d.key,item:d,onColumnWidthUpdated:f=>t("columnWidthUpdated",d)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Sa={class:"truncate text-base"},ss={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(s){const e=s,t=j(()=>{var d,f;return(d=e.column)!=null&&d.getLabel?(f=e.column)==null?void 0:f.getLabel({row:e.row}):i(e.item).label||""}),o=j(()=>r.value.options.showTooltip?e.column.getTooltip?e.column.getTooltip(e.row):i(e.item).label:"");function i(d){return d&&typeof d=="object"?d:{label:d}}const r=Te("list");return(d,f)=>(a(),g("div",{class:D(["flex items-center space-x-2",l(bt)[s.align]])},[J(d.$slots,"prefix",{},()=>[s.column.prefix?(a(),R(ke(typeof s.column.prefix=="function"?s.column.prefix({row:s.row}):s.column.prefix),{key:0})):A("",!0)]),H(l(Ht),pe(we(l(r).options.showTooltip?{text:o.value}:{text:""})),{default:M(()=>[J(d.$slots,"default",pe(we({label:t.value})),()=>[n("div",Sa,O(t.value),1)])]),_:3},16),J(d.$slots,"suffix")],2))}},wt={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(s){const e=s,t=Te("list"),o=j(()=>{var y;return(y=t.value.rows)!=null&&y.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===e.row[t.value.rowKey]:!1}),i=j(()=>t.value.selections.has(e.row[t.value.rowKey])),r=j(()=>t.value.options.enableActive&&t.value.activeRow.value===e.row.name),d=j(()=>t.value.options.getRowRoute||t.value.options.onRowClick),f=j(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),p=j(()=>{var _,S,k;if(!i.value)return"rounded";const y=[...t.value.selections];let h=(_=t.value.rows[0])!=null&&_.group?t.value.rows.map(P=>P.rows):[t.value.rows];for(let P of h){let $=P.findIndex(C=>C==e.row);if($===-1)continue;let w=!y.includes((S=P[$+1])==null?void 0:S.name),I=!y.includes((k=P[$-1])==null?void 0:k.name);return(w?"rounded-b ":"")+(I?"rounded-t":"")}}),x=(y,h)=>{t.value.options.onRowClick&&t.value.options.onRowClick(y,h),t.value.activeRow.value===y.name?t.value.activeRow.value=null:t.value.activeRow.value=y.name};return(y,h)=>(a(),R(ke(l(t).options.getRowRoute?"router-link":"div"),ie({class:[[p.value,i.value||r.value?"bg-surface-gray-2":"",d.value?"cursor-pointer":"",d.value?i.value||r.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:l(t).options.getRowRoute?l(t).options.getRowRoute(s.row):void 0,onClick:_=>x(s.row,_)}),{default:M(()=>[(a(),R(ke(l(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:M(()=>{var _,S;return[n("div",{class:"grid items-center space-x-4 px-2",style:qe({height:f.value,gridTemplateColumns:l(Zt)(l(t).columns,l(t).options.selectable)})},[l(t).options.selectable?(a(),g("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:h[1]||(h[1]=me(()=>{},["stop","prevent"])),onDblclick:h[2]||(h[2]=me(()=>{},["stop"]))},[H(gt,{modelValue:i.value,class:"cursor-pointer duration-300",onClick:h[0]||(h[0]=me(k=>l(t).toggleRow(s.row[l(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):A("",!0),(a(!0),g(Z,null,ae(l(t).columns,(k,P)=>(a(),g("div",{key:k.key,class:D([l(bt)[k.align],P==0?"text-ink-gray-9":"text-ink-gray-7"])},[J(y.$slots,"default",ie({ref_for:!0},{idx:P,column:k,item:s.row[k.key],isActive:r.value}),()=>[l(t).slots.cell?(a(),R(ke(l(t).slots.cell),ie({key:0,ref_for:!0},{column:k,row:s.row,item:s.row[k.key],align:k.align}),null,16)):(a(),R(ss,{key:1,column:k,row:s.row,item:s.row[k.key],align:k.align},null,8,["column","row","item","align"]))])],2))),128))],4),o.value?A("",!0):(a(),g("div",{key:0,class:D(["h-px border-t",p.value==="rounded"||(S=(_=p.value)==null?void 0:_.includes)!=null&&S.call(_,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Ia={class:"h-full overflow-y-auto"},os={__name:"ListRows",setup(s){const e=Te("list");return(t,o)=>(a(),g("div",Ia,[J(t.$slots,"default",{},()=>[(a(!0),g(Z,null,ae(l(e).rows,i=>(a(),R(wt,{key:i[l(e).rowKey],row:i},null,8,["row"]))),128))])]))}},Pa={},$a={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ta(s,e){return a(),g("svg",$a,[...e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)])])}const qa=Ae(Pa,[["render",Ta]]),Ma={class:"flex items-center"},Ba={class:"w-full py-1.5 pr-2"},Oa={key:1,class:"text-base font-medium leading-6"},Ra={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(s){const e=s,t=Te("list");function o(){e.group.collapsed==null&&(e.group.collapsed=!1),e.group.collapsed=!e.group.collapsed}return(i,r)=>(a(),g(Z,null,[n("div",Ma,[n("button",{onClick:o,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[H(qa,{class:D(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[s.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),J(i.$slots,"default",{},()=>[n("div",Ba,[l(t).slots["group-header"]?(a(),R(ke(l(t).slots["group-header"]),pe(ie({key:0},{group:s.group})),null,16)):(a(),g("span",Oa,O(s.group.group),1))])])]),r[0]||(r[0]=n("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Da={key:0,class:"mb-5 mt-2"},Fa={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(s){const e=Te("list");return(t,o)=>s.group.collapsed?A("",!0):(a(),g("div",Da,[J(t.$slots,"default",{},()=>[(a(!0),g(Z,null,ae(s.group.rows,i=>(a(),R(wt,{key:i[l(e).rowKey],row:i},null,8,["row"]))),128))])]))}},Ea={class:"h-full overflow-y-auto"},La={__name:"ListGroups",setup(s){const e=Te("list");return(t,o)=>(a(),g("div",Ea,[(a(!0),g(Z,null,ae(l(e).rows,i=>(a(),g("div",{key:i.group},[J(t.$slots,"default",{},()=>[H(Ra,{group:i},{default:M(()=>[t.$slots["group-header"]?J(t.$slots,"group-header",ie({key:0,ref_for:!0},{group:i})):A("",!0)]),_:2},1032,["group"]),H(Fa,{group:i},null,8,["group"])])]))),128))]))}},Aa={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Va={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Na={class:"flex items-center space-x-3"},ja={class:"mr-3"},Ua={class:"flex items-center space-x-1"},as=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(s){const e=Te("list");let t=j(()=>e.value.options.selectionText(e.value.selections.size));return(o,i)=>(a(),R(zs,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:M(()=>[l(e).selections.size?(a(),g("div",Aa,[n("div",{class:D(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",o.$attrs.class])},[J(o.$slots,"default",pe(we({selections:l(e).selections,allRowsSelected:l(e).allRowsSelected,selectAll:()=>l(e).toggleAllRows(!0),unselectAll:()=>l(e).toggleAllRows(!1)})),()=>[n("div",Va,[n("div",Na,[H(gt,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),n("div",null,O(l(t)),1)]),n("div",ja,[J(o.$slots,"actions",pe(we({selections:l(e).selections,allRowsSelected:l(e).allRowsSelected,selectAll:()=>l(e).toggleAllRows(!0),unselectAll:()=>l(e).toggleAllRows(!1)})))])]),n("div",Ua,[H(l(Pe),{class:D(["w- text-ink-gray-7",l(e).allRowsSelected?"cursor-not-allowed":""]),disabled:l(e).allRowsSelected,variant:"ghost",onClick:i[0]||(i[0]=r=>l(e).toggleAllRows(!0))},{default:M(()=>[...i[2]||(i[2]=[le(" Select all ",-1)])]),_:1},8,["disabled","class"]),H(l(Pe),{icon:"x",variant:"ghost",onClick:i[1]||(i[1]=r=>l(e).toggleAllRows(!1))})])])],2)])):A("",!0)]),_:3}))}}),za={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ha=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(s,{expose:e,emit:t}){const o=s,i=Hs();let r=Ks(new Set),d=E(null);const f=t;be(r,k=>{r.size&&(d.value=null),f("update:selections",k)}),be(d,k=>{f("update:active-row",k)});let p=j(()=>{function k($){return $===void 0?!0:$}function P($){return $===void 0?!1:$}return{getRowRoute:o.options.getRowRoute||null,onRowClick:o.options.onRowClick||null,showTooltip:k(o.options.showTooltip),selectionText:o.options.selectionText||($=>$===1?"1 row selected":`${$} rows selected`),enableActive:P(o.options.enableActive),selectable:k(o.options.selectable),resizeColumn:P(o.options.resizeColumn),rowHeight:o.options.rowHeight||40,emptyState:o.options.emptyState}});const x=j(()=>o.rows.length?h.value?r.size===o.rows.reduce((k,P)=>k+P.rows.length,0):r.size===o.rows.length:!1),y=j(()=>p.value.selectable);let h=j(()=>o.rows.every(k=>k.group&&k.rows&&Array.isArray(k.rows)));function _(k){r.delete(k)||r.add(k)}function S(k){if(!k||x.value){r.clear();return}if(h.value){o.rows.forEach(P=>{P.rows.forEach($=>r.add($[o.rowKey]))});return}o.rows.forEach(P=>r.add(P[o.rowKey]))}return Nt("list",j(()=>({rowKey:o.rowKey,rows:o.rows,columns:o.columns,options:p.value,selections:r,activeRow:d,allRowsSelected:x.value,slots:i,toggleRow:_,toggleAllRows:S}))),e({selections:r,allRowsSelected:x,toggleRow:_,toggleAllRows:S}),(k,P)=>(a(),g("div",za,[n("div",{class:D(["flex w-max min-w-full flex-col overflow-y-hidden",k.$attrs.class]),style:qe(k.$attrs.style)},[J(k.$slots,"default",pe(we({showGroupedRows:l(h),selectable:y.value})),()=>[H(ts),o.rows.length?(a(),g(Z,{key:0},[l(h)?(a(),R(La,{key:0})):(a(),R(os,{key:1}))],64)):(a(),R(ka,{key:1})),y.value?(a(),R(as,{key:2})):A("",!0)])],6)]))}}),_e=Me({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(s){const e=s||{},t=e.limit_page_length||10,o=e.limit_start||0,i=e.filters||{},r=e.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:t,limit_start:o,filters:i,order_by:r}),{limit_page_length:t,limit_start:o,filters:i,order_by:r}},onError(s){console.error("Failed to fetch issues:",s),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),rs=Me({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(s){const e=s||{},t=e.filters||e||{};return console.log("issuesCountResource filters:",t),{filters:t}},onError(s){console.error("Failed to fetch issues count:",s)}});function Je(s={}){const e={limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,filters:s.filters||{},order_by:s.order_by||"creation desc"};return console.log("reloadIssues with params:",e),_e.reload(e)}function ut(s={}){return console.log("getIssuesCount with filters:",s),rs.reload(s)}const ns=Me({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(s){return{issue_name:s}},onError(s){console.error("Failed to fetch single issue:",s)},auto:!1});function Ka(s){return ns.reload(s)}const Wa=Me({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(s){console.error("Failed to fetch issue priorities:",s)},auto:!0}),Ga=Me({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(s){console.error("Failed to fetch issue types:",s)},auto:!0});Me({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(s){console.error("Failed to fetch projects:",s)},auto:!0});let ot=null,Ft=null,at=null,Et=null;function Ja(){const s=Wa.data||[],e=JSON.stringify(s);if(ot&&Ft===e)return ot;const t=[{label:"All Priority",value:""},...s.map(o=>({label:o.name,value:o.name}))];return ot=Object.freeze(t),Ft=e,ot}function Xa(){const s=Ga.data||[],e=JSON.stringify(s);if(at&&Et===e)return at;const t=[{label:"All Types",value:""},...s.map(o=>({label:o.name,value:o.name}))];return at=Object.freeze(t),Et=e,at}const Qa=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function Ya(){return Qa}const Za=Me({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(s){console.error("Failed to fetch tag colors:",s)},auto:!0}),rt=new Map;let Lt=null;function ls(s){const e=Za.data||{},t=JSON.stringify(e);if(Lt!==t&&(rt.clear(),Lt=t),rt.has(s))return rt.get(s);const o=e[s]||null;return rt.set(s,o),o}const ct=Me({url:"force_trans_customization.api.issues.issue_search",makeParams(s){const e=s||{};return{search_query:e.search_query||"",limit:e.limit||8}},onError(s){console.error("Failed to search issues:",s)},auto:!1});function er(s,e=8){return!s||s.length<2?Promise.resolve(ct.data||[]):ct.reload({search_query:s,limit:e}).then(()=>ct.data||[])}const xe=Me({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(s){const e=s||{},t={stat_type:e.stat_type||"team_tickets",limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,order_by:e.order_by||"creation desc"};return e.filters&&(t.filters=e.filters),t},onError(s){console.error("Failed to filter issues by stat:",s),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),is=Me({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(s){const e=s||{},t={stat_type:e.stat_type||"team_tickets"};return e.filters&&(t.filters=e.filters),t},onError(s){console.error("Failed to get stat filter count:",s)},auto:!1});function pt(s,e={}){const t={stat_type:s,limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,order_by:e.order_by||"creation desc"};return e.filters&&(t.filters=e.filters),console.log("filterIssuesByStat params:",t),xe.reload(t)}function nt(s,e=null){const t={stat_type:s};return e&&(t.filters=e),is.reload(t)}const tr={class:"relative w-full max-w-2xl mx-auto"},sr={class:"relative group"},or=["placeholder"],ar={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},rr={key:1,class:"flex items-center pointer-events-none"},nr={key:2,class:"animate-spin"},lr={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},ir={class:"flex items-center justify-between"},ur={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},dr={class:"text-xs text-slate-500"},cr={key:0,class:"px-6 py-8 text-center"},pr=["onClick"],fr={class:"flex items-start space-x-4"},gr={class:"flex-1 min-w-0"},mr={class:"flex items-start justify-between"},vr={class:"flex-1 min-w-0"},yr={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},hr=["innerHTML"],br={class:"text-xs text-slate-500 mt-1 line-clamp-2"},wr={key:0,class:"ml-2"},_r={class:"flex-shrink-0 ml-4"},xr={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},kr={key:0,class:"flex items-center"},Cr={key:1,class:"flex items-center"},Sr={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Ir={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(s,{expose:e,emit:t}){const o=s,i=t,r=E(null),d=E(o.modelValue),f=E(!1),p=E(!1),x=E(-1),y=E(!1),h=E(0),_=E(null),S=E([]);let k=null;be(()=>o.modelValue,L=>{d.value=L}),be(d,L=>{i("update:modelValue",L),i("search",L)});const P=E([]),$=L=>re(this,null,function*(){if(!L||L.length<2){P.value=[],p.value=!1,y.value=!1;return}try{y.value=!0;const K=performance.now(),Q=yield er(L,8);h.value=performance.now()-K,P.value=Q||[],p.value=!0}catch(K){console.error("Search error:",K),P.value=[],p.value=!1}finally{y.value=!1}}),w=L=>{if(k&&clearTimeout(k),x.value=-1,!L||L.length<2){P.value=[],p.value=!1,y.value=!1;return}y.value=!0,k=setTimeout(()=>{$(L)},1e3)},I=()=>{w(d.value)},C=(L,K)=>{if(!L||!K)return L;const Q=K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ue=new RegExp(`(${Q})`,"gi");return L.replace(ue,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},F=L=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[L]||"bg-gray-100 text-gray-800 border border-gray-200",U=()=>{f.value=!0,V&&(clearTimeout(V),V=null),d.value.length>=2&&(P.value.length>0?p.value=!0:$(d.value))};let V=null;const T=()=>{f.value=!1,V=setTimeout(()=>{p.value=!1,V=null},200)},N=L=>{var K;if(p.value)switch(L.key){case"ArrowDown":L.preventDefault(),x.value=Math.min(x.value+1,P.value.length-1),Y();break;case"ArrowUp":L.preventDefault(),x.value=Math.max(x.value-1,-1),Y();break;case"Enter":L.preventDefault(),x.value>=0&&c(P.value[x.value]);break;case"Escape":W(),(K=r.value)==null||K.blur();break}},c=L=>{d.value=L.name,W();const Q=`${window.location.origin}/app/issue/${L.name}`;window.open(Q,"_blank"),i("suggestion-selected",L)},z=()=>{var L;d.value="",W(),(L=r.value)==null||L.focus()},W=()=>{p.value=!1,x.value=-1},Y=()=>{if(x.value<0||!_.value||!S.value[x.value])return;const L=_.value,K=S.value[x.value];if(K){const Q=L.getBoundingClientRect(),ue=K.getBoundingClientRect(),ce=ue.top-Q.top+L.scrollTop,Oe=ce+ue.height,ve=L.scrollTop,fe=L.clientHeight;ce<ve?L.scrollTop=ce:Oe>ve+fe&&(L.scrollTop=Oe-fe)}},te=L=>{if(!L)return"";try{const K=new Date(L),Q=new Date,ue=Math.abs(Q-K),ce=Math.ceil(ue/(1e3*60*60*24));return ce===1?"Today":ce===2?"Yesterday":ce<=7?`${ce-1} days ago`:K.toLocaleDateString("en-US",{month:"short",day:"numeric",year:K.getFullYear()!==Q.getFullYear()?"numeric":void 0})}catch(K){return console.error("Error formatting date:",K),L}},ne=L=>{var K,Q;(L.metaKey||L.ctrlKey)&&L.key==="k"&&(L.preventDefault(),(K=r.value)==null||K.focus(),(Q=r.value)==null||Q.select())};return Le(()=>{document.addEventListener("keydown",ne)}),Ye(()=>{document.removeEventListener("keydown",ne),k&&clearTimeout(k),V&&clearTimeout(V)}),e({focus:()=>{var L,K;(L=r.value)==null||L.focus(),(K=r.value)==null||K.select()},select:()=>{var L;return(L=r.value)==null?void 0:L.select()},$el:r}),(L,K)=>(a(),g("div",tr,[n("div",sr,[K[4]||(K[4]=n("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[n("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),Ce(n("input",{ref_key:"searchInput",ref:r,type:"text","onUpdate:modelValue":K[0]||(K[0]=Q=>d.value=Q),onInput:I,onFocus:U,onBlur:T,onKeydown:N,placeholder:s.placeholder,class:D(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":f.value,"bg-slate-50/50":!f.value&&d.value}])},null,42,or),[[$e,d.value]]),n("div",ar,[d.value?(a(),g("button",{key:0,onClick:z,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},[...K[1]||(K[1]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):A("",!0),!d.value&&!f.value?(a(),g("div",rr,[...K[2]||(K[2]=[n("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[n("span",{class:"text-xs"},"+"),le("K ")],-1)])])):A("",!0),y.value?(a(),g("div",nr,[...K[3]||(K[3]=[n("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):A("",!0)])]),p.value?(a(),g("div",{key:0,class:D(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":p.value}])},[P.value.length>0?(a(),g("div",lr,[n("div",ir,[n("span",ur,O(P.value.length)+" Result"+O(P.value.length!==1?"s":""),1),n("span",dr,O(Math.round(h.value))+"ms ",1)])])):A("",!0),n("div",{ref_key:"suggestionsContainer",ref:_,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[P.value.length===0&&d.value.length>=2?(a(),g("div",cr,[...K[5]||(K[5]=[Pt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)])])):A("",!0),(a(!0),g(Z,null,ae(P.value,(Q,ue)=>(a(),g("div",{key:Q.name||ue,ref_for:!0,ref:ce=>S.value[ue]=ce,onClick:ce=>c(Q),class:D(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":ue===x.value}])},[n("div",fr,[K[8]||(K[8]=n("div",{class:"flex-shrink-0 mt-0.5"},[n("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[n("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),n("div",gr,[n("div",mr,[n("div",vr,[n("h4",yr,[n("span",{innerHTML:C(Q.subject||Q.name,d.value)},null,8,hr)]),n("p",br,[le(" ID: "+O(Q.name)+" ",1),Q.customer?(a(),g("span",wr," "+O(Q.customer),1)):A("",!0)])]),n("div",_r,[n("span",{class:D(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",F(Q.status)])},O(Q.status),3)])]),n("div",xr,[Q.raised_by?(a(),g("div",kr,[K[6]||(K[6]=n("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),le(" "+O(Q.raised_by),1)])):A("",!0),Q.creation?(a(),g("div",Cr,[K[7]||(K[7]=n("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),le(" "+O(te(Q.creation)),1)])):A("",!0)])])])],10,pr))),128))],512),d.value&&P.value.length>0?(a(),g("div",Sr,[...K[9]||(K[9]=[Pt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf></kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf></kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)])])):A("",!0)],2)):A("",!0),p.value?(a(),g("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:W})):A("",!0)]))}},Pr=Ae(Ir,[["__scopeId","data-v-4969cdcf"]]),$r={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Tr={class:"mb-6"},qr={class:"relative max-w-2xl mx-auto"},Mr={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Br={class:"border-t border-gray-200 pt-4"},Or={class:"flex items-center justify-between"},Rr={class:"flex items-center space-x-3 flex-1"},Dr={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Fr={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},Er={class:"text-green-800 font-medium"},Lr={class:"text-green-600"},Ar={class:"text-green-900"},Vr=["onClick"],Nr={class:"flex items-center space-x-2 ml-4"},jr=["disabled"],Ur={key:0,class:"flex items-center"},zr={key:1},Hr={key:0,class:"relative"},Kr={class:"flex"},Wr={class:"w-48 border-r border-gray-200 bg-gray-50"},Gr={class:"max-h-64 overflow-y-auto"},Jr=["onClick"],Xr={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},Qr={class:"flex-1 min-w-96"},Yr={class:"p-4"},Zr={key:0,class:"text-center py-8 text-gray-500"},en={key:1,class:"space-y-4"},tn={class:"col-span-2 flex items-center"},sn={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},on={class:"col-span-2 flex items-center"},an={class:"text-gray-700 font-medium truncate"},rn={class:"col-span-7"},nn=["onUpdate:modelValue","placeholder"],ln=["onUpdate:modelValue","placeholder"],un={key:2,class:"space-y-2"},dn={key:0,class:"grid grid-cols-2 gap-2"},cn=["onUpdate:modelValue","onInput"],pn=["onUpdate:modelValue","onInput"],fn={key:1},gn=["onUpdate:modelValue"],mn={key:3,class:"space-y-2"},vn={key:0,class:"grid grid-cols-2 gap-2"},yn=["onUpdate:modelValue","onInput"],hn=["onUpdate:modelValue","onInput"],bn={key:1},wn=["onUpdate:modelValue"],_n={key:4,class:"relative"},xn={key:0},kn=["onUpdate:modelValue"],Cn={value:""},Sn=["value"],In={key:1,class:"space-y-2"},Pn={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},$n=["onClick"],Tn={key:5,class:"space-y-2"},qn={class:"space-y-2"},Mn={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Bn=["onClick"],On={class:"relative"},Rn=["onUpdate:modelValue","onInput","onKeydown","placeholder"],Dn={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Fn={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},En=["onClick"],Ln={class:"font-medium text-gray-900"},An={class:"text-xs text-gray-500"},Vn={key:6,class:"space-y-2"},Nn={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},jn=["onClick"],Un={class:"relative"},zn=["onUpdate:modelValue","onInput","onKeyup","onKeydown"],Hn={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Kn={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Wn=["onClick"],Gn={class:"flex items-center justify-between"},Jn={class:"font-medium text-gray-900"},Xn={class:"text-xs text-gray-500"},Qn={class:"col-span-1 flex items-start justify-center pt-1"},Yn=["onClick"],Zn={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},el=["disabled"],tl={key:0,class:"flex items-center"},sl={key:1},ol={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(s,{emit:e}){const t=s,o=e,i=E(t.searchQuery),r=E(!1),d=E([]),f=E([]);let p=0;const x=E(!1),y=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],h={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},_={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},S=j(()=>JSON.stringify(d.value)!==JSON.stringify(f.value)),k=u=>{const v=y.find(m=>m.value===u);return(v==null?void 0:v.type)||"text"},P=u=>{const v=y.find(m=>m.value===u);return(v==null?void 0:v.label)||u},$=u=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[u]||`Enter ${P(u).toLowerCase()}...`,w=u=>{const v=k(u);return _[v]||_.text},I=u=>h[u]||[],C=u=>u.displayValue?u.displayValue:Array.isArray(u.value)?u.value.join(", "):u.value,F=u=>u?typeof u=="string"?u.split(",").map(v=>v.trim()).filter(Boolean):u:[],U=(u,v)=>{const m=F(u.value);m.splice(v,1),u.value=m.join(", ")},V=u=>u?u.split(",").map(v=>v.trim()).filter(Boolean):[],T=(u,v)=>{const m=V(u.value);m.splice(v,1),u.value=m.join(", ")},N=(u,v)=>v.userDisplayMap&&v.userDisplayMap[u]?v.userDisplayMap[u]:u,c=(u,v)=>{const m=F(u.value);m.includes(v.value)||(m.push(v.value),u.value=m.join(", "),u.userDisplayMap||(u.userDisplayMap={}),u.userDisplayMap[v.value]=v.label),u.searchValue="",u.suggestions=[],u.selectedLinkIndex=-1},z=(u,v)=>{if(!u.suggestions||u.suggestions.length===0)return;const m=u.suggestions.length-1;(u.selectedLinkIndex===void 0||u.selectedLinkIndex===null)&&(u.selectedLinkIndex=-1),v==="down"?u.selectedLinkIndex=u.selectedLinkIndex<m?u.selectedLinkIndex+1:0:v==="up"&&(u.selectedLinkIndex=u.selectedLinkIndex>0?u.selectedLinkIndex-1:m),te()},W=u=>{u.selectedLinkIndex>=0&&u.suggestions&&u.suggestions[u.selectedLinkIndex]&&c(u,u.suggestions[u.selectedLinkIndex])},Y=u=>{u.suggestions=[],u.selectedLinkIndex=-1},te=u=>{Be(()=>{const v=document.querySelector('[ref="selectedLinkOption"]');v&&v.scrollIntoView({block:"nearest",behavior:"smooth"})})};let ne={};const L=(u,v)=>re(this,null,function*(){u.loadingTags=!0;const m=u.selectedTagIndex;ne[u.id]&&clearTimeout(ne[u.id]),ne[u.id]=setTimeout(()=>re(this,null,function*(){try{const se=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:v||"",limit:15})});if(se.ok){const q=yield se.json();u.tagSuggestions=q.message||[],!u.tagSuggestions||u.tagSuggestions.length===0?u.selectedTagIndex=-1:m>=0&&m<u.tagSuggestions.length?u.selectedTagIndex=m:u.selectedTagIndex>=u.tagSuggestions.length&&(u.selectedTagIndex=Math.max(0,u.tagSuggestions.length-1))}}catch(se){console.error("Tag search error:",se),u.tagSuggestions=[]}finally{u.loadingTags=!1}}),300)}),K=(u,v)=>{const m=V(u.value);m.includes(v.value)||(m.push(v.value),u.value=m.join(", ")),u.tagInput="",u.tagSuggestions=[],u.selectedTagIndex=-1},Q=(u,v)=>{if(!u.tagSuggestions||u.tagSuggestions.length===0)return;const m=u.tagSuggestions.length-1;(u.selectedTagIndex===void 0||u.selectedTagIndex===null)&&(u.selectedTagIndex=-1),v==="down"?u.selectedTagIndex=u.selectedTagIndex<m?u.selectedTagIndex+1:0:v==="up"&&(u.selectedTagIndex=u.selectedTagIndex>0?u.selectedTagIndex-1:m),Oe()},ue=u=>{u.selectedTagIndex>=0&&u.tagSuggestions&&u.tagSuggestions[u.selectedTagIndex]&&K(u,u.tagSuggestions[u.selectedTagIndex])},ce=u=>{u.tagSuggestions=[],u.selectedTagIndex=-1},Oe=u=>{Be(()=>{const v=document.querySelector('[ref="selectedTagOption"]');v&&v.scrollIntoView({block:"nearest",behavior:"smooth"})})},ve=u=>{const v=ls(u);if(v){const m=v.startsWith("#")?v:`#${v}`,se=m.replace("#",""),q=parseInt(se.substr(0,2),16),de=parseInt(se.substr(2,2),16),Fe=parseInt(se.substr(4,2),16);return{backgroundColor:`rgba(${q}, ${de}, ${Fe}, 0.15)`,color:"#000000",borderColor:m,borderWidth:"1.5px"}}return{backgroundColor:"rgba(107, 114, 128, 0.1)",color:"#000000",borderColor:"rgba(107, 114, 128, 0.3)",borderWidth:"1px"}};let fe={};const Ne=(u,v)=>re(this,null,function*(){u.searchValue=v,u.loading=!0;const m=u.selectedLinkIndex;fe[u.id]&&clearTimeout(fe[u.id]),fe[u.id]=setTimeout(()=>re(this,null,function*(){try{let se=[],q="";if(u.field==="customer"?q="/api/method/force_trans_customization.api.issues.search_customers":u.field==="contact"?q="/api/method/force_trans_customization.api.issues.search_contacts":u.field==="lead"?q="/api/method/force_trans_customization.api.issues.search_leads":u.field==="custom_assigned_csm_team"?q="/api/method/force_trans_customization.api.issues.search_user_groups":u.field==="custom_users_assigned"&&(q="/api/method/force_trans_customization.api.issues.search_users"),q){const de=yield fetch(q,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:v||"",limit:10,doctype_filter:u.field==="custom_users_assigned"?"User":void 0})});de.ok&&(se=(yield de.json()).message||[])}u.suggestions=se,!u.suggestions||u.suggestions.length===0?u.selectedLinkIndex=-1:m>=0&&m<u.suggestions.length?u.selectedLinkIndex=m:u.selectedLinkIndex>=u.suggestions.length&&(u.selectedLinkIndex=Math.max(0,u.suggestions.length-1))}catch(se){console.error("Search error:",se),u.suggestions=[]}finally{u.loading=!1}}),300)}),De=(u,v)=>w(u).map(se=>({label:se.label,onClick:()=>{v.operator!==se.value&&(k(u)==="date"&&(se.value==="between"?v.value&&!v.startValue&&(v.startValue=v.value,v.endValue=""):v.operator==="between"&&(v.startValue&&!v.value&&(v.value=v.startValue),v.startValue="",v.endValue="")),v.multiSelectValue=null,v.searchValue="",v.suggestions=[],v.searchOptions=[]),v.operator=se.value}})),G=(u,v)=>{var se;return((se=w(v).find(q=>q.value===u))==null?void 0:se.label)||u},b=(u,v)=>{const se=I(v).find(q=>q.value===u);return se?se.label:u},B=u=>{u.startValue&&u.endValue?u.value=`${u.startValue},${u.endValue}`:u.value=""},X=u=>{var q;const v=k(u);let m="equals";v==="link"?m="in":v==="tags"?m="has":m=((q=w(u)[0])==null?void 0:q.value)||"equals";const se={id:++p,field:u,operator:m,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},selectedLinkIndex:-1,tagInput:"",tagSuggestions:[],loadingTags:!1,selectedTagIndex:-1};d.value.push(se)},ge=u=>{d.value.splice(u,1)},et=u=>{f.value.splice(u,1),tt()},We=()=>re(this,null,function*(){if(S.value){x.value=!0;try{f.value=JSON.parse(JSON.stringify(d.value)),tt(),r.value=!1}catch(u){console.error("Error applying filters:",u)}finally{setTimeout(()=>{x.value=!1},500)}}}),Ge=()=>{d.value=[],f.value=[],i.value="",o("update:searchQuery",""),o("update:filters",[]),o("filters-applied",[]),r.value=!1},tt=()=>{const u=f.value.filter(v=>v.value&&v.value.toString().trim()).map(v=>({field:v.field,operator:v.operator,value:v.value.toString().trim(),displayValue:v.displayValue||null}));console.log("Emitting filters:",u),o("update:filters",u),o("filters-applied",u)},st=u=>{i.value=u,o("update:searchQuery",u)},us=u=>{o("suggestion-selected",u)};return be(()=>t.searchQuery,u=>{i.value=u}),Le(()=>{const u=localStorage.getItem("issue_filters");if(u)try{const v=JSON.parse(u);f.value=v.applied||[],d.value=v.pending||[]}catch(v){console.warn("Failed to parse saved filters:",v)}be(()=>d.value,v=>{v.forEach(m=>{k(m.field)==="link"&&m.searchValue&&Ne(m,m.searchValue)})},{deep:!0})}),be([f,d],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:f.value,pending:d.value}))},{deep:!0}),(u,v)=>(a(),g("div",$r,[n("div",Tr,[n("div",qr,[H(Pr,{ref:"searchBoxRef","model-value":i.value,"onUpdate:modelValue":st,onSuggestionSelected:us,issues:s.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),i.value?(a(),g("div",Mr," Searching in "+O(s.filteredCount)+" issues ",1)):A("",!0)])]),n("div",Br,[n("div",Or,[n("div",Rr,[n("button",{onClick:v[0]||(v[0]=m=>r.value=!r.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[v[4]||(v[4]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),v[5]||(v[5]=n("span",null,"Filters",-1)),f.value.length>0?(a(),g("span",Dr,O(f.value.length),1)):A("",!0)]),f.value.length>0?(a(),g("div",Fr,[(a(!0),g(Z,null,ae(f.value,(m,se)=>(a(),g("div",{key:m.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[n("span",Er,O(P(m.field)),1),n("span",Lr,O(m.operator),1),n("span",Ar,O(C(m)),1),n("button",{onClick:q=>et(se),class:"text-green-400 hover:text-red-600 ml-1"},[...v[6]||(v[6]=[n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Vr)]))),128))])):A("",!0)]),n("div",Nr,[f.value.length>0||i.value?(a(),g("button",{key:0,onClick:Ge,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):A("",!0),d.value.length>0?(a(),g("button",{key:1,onClick:We,class:D(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",x.value?"bg-blue-500 text-white cursor-wait":S.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!S.value||x.value},[x.value?(a(),g("span",Ur,[...v[7]||(v[7]=[n("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),le(" Applying... ",-1)])])):(a(),g("span",zr,O(S.value?"Apply Filters":"Filters Applied"),1))],10,jr)):A("",!0)])])]),r.value?(a(),g("div",Hr,[n("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:v[2]||(v[2]=me(()=>{},["stop"]))},[n("div",Kr,[n("div",Wr,[v[8]||(v[8]=n("div",{class:"p-3 border-b border-gray-200"},[n("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),n("div",Gr,[(a(),g(Z,null,ae(y,m=>n("button",{key:m.value,onClick:me(se=>X(m.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[n("span",null,O(m.label),1),n("span",Xr,O(m.type),1)],8,Jr)),64))])]),n("div",Qr,[n("div",Yr,[d.value.length===0?(a(),g("div",Zr,[...v[9]||(v[9]=[n("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)])])):(a(),g("div",en,[(a(!0),g(Z,null,ae(d.value,(m,se)=>(a(),g("div",{key:m.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[n("div",tn,[n("span",sn,O(P(m.field)),1)]),n("div",on,[H(l(ba),{options:De(m.field,m),placement:"left"},{default:M(({open:q})=>[n("button",{class:D(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",q?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[n("span",an,O(G(m.operator,m.field)),1),v[10]||(v[10]=n("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),n("div",rn,[k(m.field)==="text"?Ce((a(),g("input",{key:0,"onUpdate:modelValue":q=>m.value=q,type:"text",placeholder:$(m.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,nn)),[[$e,m.value]]):k(m.field)==="email"?Ce((a(),g("input",{key:1,"onUpdate:modelValue":q=>m.value=q,type:"email",placeholder:$(m.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,ln)),[[$e,m.value]]):k(m.field)==="datetime"?(a(),g("div",un,[m.operator==="between"?(a(),g("div",dn,[n("div",null,[Ce(n("input",{"onUpdate:modelValue":q=>m.startValue=q,type:"datetime-local",placeholder:"Start date and time",onInput:q=>B(m),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,cn),[[$e,m.startValue]]),v[11]||(v[11]=n("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),n("div",null,[Ce(n("input",{"onUpdate:modelValue":q=>m.endValue=q,type:"datetime-local",placeholder:"End date and time",onInput:q=>B(m),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,pn),[[$e,m.endValue]]),v[12]||(v[12]=n("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(a(),g("div",fn,[Ce(n("input",{"onUpdate:modelValue":q=>m.value=q,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,gn),[[$e,m.value]]),v[13]||(v[13]=n("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):k(m.field)==="date"?(a(),g("div",mn,[m.operator==="between"?(a(),g("div",vn,[n("div",null,[Ce(n("input",{"onUpdate:modelValue":q=>m.startValue=q,type:"date",onInput:q=>B(m),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,yn),[[$e,m.startValue]]),v[14]||(v[14]=n("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),n("div",null,[Ce(n("input",{"onUpdate:modelValue":q=>m.endValue=q,type:"date",onInput:q=>B(m),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,hn),[[$e,m.endValue]]),v[15]||(v[15]=n("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(a(),g("div",bn,[Ce(n("input",{"onUpdate:modelValue":q=>m.value=q,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,wn),[[$e,m.value]])]))])):k(m.field)==="select"?(a(),g("div",_n,[m.isMultiSelect?(a(),g("div",In,[F(m.value).length>0?(a(),g("div",Pn,[(a(!0),g(Z,null,ae(F(m.value),(q,de)=>(a(),g("span",{key:de,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[le(O(b(q,m.field))+" ",1),n("button",{onClick:Fe=>U(m,de),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},[...v[16]||(v[16]=[n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,$n)]))),128))])):A("",!0)])):(a(),g("div",xn,[m.field==="priority"||m.field==="status"||m.field==="issue_type"?Ce((a(),g("select",{key:0,"onUpdate:modelValue":q=>m.value=q,onKeydown:v[1]||(v[1]=Ie(me(q=>q.target.blur(),["prevent"]),["enter"])),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[n("option",Cn,"Select "+O(P(m.field))+"...",1),(a(!0),g(Z,null,ae(I(m.field),q=>(a(),g("option",{key:q.value,value:q.value},O(q.label),9,Sn))),128))],40,kn)),[[Ws,m.value]]):A("",!0)]))])):k(m.field)==="link"?(a(),g("div",Tn,[n("div",qn,[F(m.value).length>0?(a(),g("div",Mn,[(a(!0),g(Z,null,ae(F(m.value),(q,de)=>(a(),g("span",{key:de,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[le(O(N(q,m))+" ",1),n("button",{onClick:Fe=>U(m,de),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},[...v[17]||(v[17]=[n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Bn)]))),128))])):A("",!0),n("div",On,[Ce(n("input",{"onUpdate:modelValue":q=>m.searchValue=q,onInput:q=>Ne(m,m.searchValue),onKeydown:[Ie(me(q=>z(m,"up"),["prevent"]),["up"]),Ie(me(q=>z(m,"down"),["prevent"]),["down"]),Ie(me(q=>W(m),["prevent"]),["enter"]),Ie(q=>Y(m),["escape"])],type:"text",placeholder:`Search and add ${P(m.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Rn),[[$e,m.searchValue]]),m.loading?(a(),g("div",Dn,[...v[18]||(v[18]=[n("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):A("",!0)]),m.suggestions&&m.suggestions.length>0&&m.searchValue?(a(),g("div",Fn,[(a(!0),g(Z,null,ae(m.suggestions,(q,de)=>(a(),g("button",{key:de,onClick:Fe=>c(m,q),class:D(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",m.selectedLinkIndex===de?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:m.selectedLinkIndex===de?"selectedLinkOption":null},[n("div",Ln,O(q.label),1),n("div",An,O(q.subtitle),1)],10,En))),128))])):A("",!0)])])):k(m.field)==="tags"?(a(),g("div",Vn,[V(m.value).length>0?(a(),g("div",Nn,[(a(!0),g(Z,null,ae(V(m.value),(q,de)=>(a(),g("span",{key:de,style:qe(ve(q)),class:"inline-flex items-center px-2 py-1 text-xs rounded-full border transition-colors"},[le(O(q)+" ",1),n("button",{onClick:Fe=>T(m,de),class:"ml-1 hover:text-red-600 transition-colors"},[...v[19]||(v[19]=[n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,jn)],4))),128))])):A("",!0),n("div",Un,[Ce(n("input",{"onUpdate:modelValue":q=>m.tagInput=q,onInput:q=>L(m,m.tagInput),onKeyup:Ie(q=>ue(m),["enter"]),onKeydown:[Ie(me(q=>Q(m,"up"),["prevent"]),["up"]),Ie(me(q=>Q(m,"down"),["prevent"]),["down"]),Ie(q=>ce(m),["escape"])],type:"text",placeholder:"Search and select tags from dropdown...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,zn),[[$e,m.tagInput]]),m.loadingTags?(a(),g("div",Hn,[...v[20]||(v[20]=[n("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):A("",!0)]),m.tagSuggestions&&m.tagSuggestions.length>0?(a(),g("div",Kn,[(a(!0),g(Z,null,ae(m.tagSuggestions,(q,de)=>(a(),g("button",{key:de,onClick:Fe=>K(m,q),class:D(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",m.selectedTagIndex===de?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:m.selectedTagIndex===de?"selectedTagOption":null},[n("div",Gn,[n("div",null,[n("div",Jn,O(q.label),1),n("div",Xn,O(q.subtitle),1)]),q.color?(a(),g("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:qe({backgroundColor:q.color})},null,4)):A("",!0)])],10,Wn))),128))])):A("",!0),v[21]||(v[21]=n("p",{class:"text-xs text-gray-500 italic"},"Search existing tags and select from dropdown only",-1))])):A("",!0)]),n("div",Qn,[n("button",{onClick:q=>ge(se),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},[...v[22]||(v[22]=[n("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Yn)])]))),128))])),d.value.length>0?(a(),g("div",Zn,[n("button",{onClick:Ge,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),n("button",{onClick:We,disabled:!S.value||x.value,class:D(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",x.value?"bg-gray-700 text-white cursor-wait":S.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[x.value?(a(),g("span",tl,[...v[23]||(v[23]=[n("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),le(" Applying... ",-1)])])):(a(),g("span",sl,O(S.value?"Apply Filters":"Filters Applied"),1))],10,el)])):A("",!0)])])])]),n("div",{class:"fixed inset-0 z-40",onClick:v[3]||(v[3]=m=>r.value=!1)})])):A("",!0)]))}},al=Ae(ol,[["__scopeId","data-v-f08aca36"]]),rl={class:"bg-white rounded-lg shadow-sm border mt-4"},nl={class:"px-6 py-4 flex items-center justify-between"},ll={class:"text-sm text-gray-700"},il={key:0},ul={key:1},dl={key:0,class:"flex items-center space-x-2"},cl={class:"flex items-center space-x-1"},pl={key:1,class:"px-2 text-gray-500"},fl={key:2,class:"px-2 text-gray-500"},gl={key:1,class:"flex items-center space-x-2"},ml={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(s,{emit:e}){const t=s,o=e,i=E(t.itemsPerPage);be(()=>t.itemsPerPage,I=>{i.value=I});const r=j(()=>Math.ceil(t.totalItems/t.itemsPerPage)),d=j(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),f=j(()=>{const I=t.currentPage*t.itemsPerPage;return Math.min(I,t.totalItems)}),p=j(()=>{const I=[],C=t.maxVisiblePages,F=t.currentPage,U=r.value;if(U<=C)for(let V=1;V<=U;V++)I.push(V);else{let V=Math.max(1,F-Math.floor(C/2)),T=Math.min(U,V+C-1);T-V+1<C&&(V=Math.max(1,T-C+1)),V>1&&(V=Math.max(2,V)),T<U&&(T=Math.min(U-1,T));for(let N=V;N<=T;N++)I.push(N)}return I}),x=j(()=>r.value>t.maxVisiblePages&&!p.value.includes(1)),y=j(()=>r.value>t.maxVisiblePages&&!p.value.includes(r.value)),h=j(()=>x.value&&p.value.length>0&&p.value[0]>2),_=j(()=>y.value&&p.value.length>0&&p.value[p.value.length-1]<r.value-1),S=j(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),k=I=>{I>=1&&I<=r.value&&I!==t.currentPage&&(o("update:currentPage",I),o("pageChange",{page:I,itemsPerPage:t.itemsPerPage,offset:(I-1)*t.itemsPerPage}))},P=()=>{t.currentPage>1&&k(t.currentPage-1)},$=()=>{t.currentPage<r.value&&k(t.currentPage+1)},w=()=>{const I=i.value;o("update:itemsPerPage",I);const C=(t.currentPage-1)*t.itemsPerPage+1,F=Math.ceil(C/I);o("pageChange",{page:F,itemsPerPage:I,offset:(F-1)*I})};return(I,C)=>(a(),g("div",rl,[n("div",nl,[n("div",ll,[s.totalItems>0?(a(),g("span",il," Showing "+O(d.value)+" to "+O(f.value)+" of "+O(s.totalItems)+" results ",1)):(a(),g("span",ul," No results found "))]),r.value>1?(a(),g("div",dl,[H(l(Pe),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===1,onClick:P},{prefix:M(()=>[H(l(ye),{name:"chevron-left",class:"h-4 w-4"})]),default:M(()=>[C[3]||(C[3]=le(" Previous ",-1))]),_:1},8,["disabled"]),n("div",cl,[x.value?(a(),R(l(Pe),{key:0,theme:"gray",variant:"outline",size:"sm",class:D({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage!==1,"pagination-active-btn":s.currentPage===1}),onClick:C[0]||(C[0]=F=>k(1))},{default:M(()=>[...C[4]||(C[4]=[le(" 1 ",-1)])]),_:1},8,["class"])):A("",!0),h.value?(a(),g("span",pl,"...")):A("",!0),(a(!0),g(Z,null,ae(p.value,F=>(a(),R(l(Pe),{key:F,theme:"gray",variant:"outline",size:"sm",class:D({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage!==F,"pagination-active-btn":s.currentPage===F}),onClick:U=>k(F)},{default:M(()=>[le(O(F),1)]),_:2},1032,["class","onClick"]))),128)),_.value?(a(),g("span",fl,"...")):A("",!0),y.value?(a(),R(l(Pe),{key:3,theme:"gray",variant:"outline",size:"sm",class:D({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage!==r.value,"pagination-active-btn":s.currentPage===r.value}),onClick:C[1]||(C[1]=F=>k(r.value))},{default:M(()=>[le(O(r.value),1)]),_:1},8,["class"])):A("",!0)]),H(l(Pe),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===r.value,onClick:$},{suffix:M(()=>[H(l(ye),{name:"chevron-right",class:"h-4 w-4"})]),default:M(()=>[C[5]||(C[5]=le(" Next ",-1))]),_:1},8,["disabled"])])):A("",!0),s.showItemsPerPage?(a(),g("div",gl,[C[6]||(C[6]=n("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),H(l(Gs),{modelValue:i.value,"onUpdate:modelValue":C[2]||(C[2]=F=>i.value=F),options:S.value,onChange:w,class:"w-20"},null,8,["modelValue","options"])])):A("",!0)])]))}},vl=Ae(ml,[["__scopeId","data-v-898deb80"]]),yl={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},hl={class:"text-3xl font-bold text-gray-900"},bl={class:"text-3xl font-bold text-blue-600"},wl={class:"text-3xl font-bold text-green-600"},_l={class:"text-3xl font-bold text-orange-600"},xl={class:"text-3xl font-bold text-purple-600"},kl=3e4,Cl={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(s,{expose:e,emit:t}){const o=s,i=t,r=Ue({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),d=j(()=>r.value.team_tickets),f=j(()=>r.value.open_tickets),p=j(()=>r.value.assigned_to_me),x=j(()=>r.value.actionable_tickets),y=j(()=>r.value.response_tickets);let h=null,_=0;const S=()=>re(this,null,function*(){const w=Date.now();if(h&&w-_<kl)return h;try{const I=yield Ys("force_trans_customization.api.issues.get_issue_stats");return r.value=I,h=I,_=w,I}catch(I){return console.error("Error fetching issue stats:",I),r.value}});let k=null;const P=()=>{k&&clearTimeout(k),k=setTimeout(()=>{S()},500)};Le(()=>{S()}),be(()=>o.issues.length,()=>{P()});const $=w=>{i("filter-changed",w)};return e({refreshStats:S}),(w,I)=>(a(),g("div",yl,[n("div",{onClick:I[0]||(I[0]=C=>$("team_tickets")),class:D(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",s.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[n("div",hl,O(d.value),1),I[5]||(I[5]=n("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),n("div",{onClick:I[1]||(I[1]=C=>$("open_tickets")),class:D(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",s.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[n("div",bl,O(f.value),1),I[6]||(I[6]=n("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),n("div",{onClick:I[2]||(I[2]=C=>$("assigned_to_me")),class:D(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",s.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[n("div",wl,O(p.value),1),I[7]||(I[7]=n("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),n("div",{onClick:I[3]||(I[3]=C=>$("actionable_tickets")),class:D(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",s.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Tickets where customer awaits our reply"},[n("div",_l,O(x.value),1),I[8]||(I[8]=n("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),n("div",{onClick:I[4]||(I[4]=C=>$("response_tickets")),class:D(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",s.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Tickets awaiting customer response"},[n("div",xl,O(y.value),1),I[9]||(I[9]=n("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Sl={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const s=this.status||"New";return{New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[s]||"gray"}},components:{Badge:mt}},Il={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const s=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[s]||"yellow"},priorityIndicatorClass(){const s=this.priority||"Medium";return{"bg-red-500":s==="Critical","bg-red-400":s==="High","bg-yellow-400":s==="Medium","bg-green-400":s==="Low"}}},components:{Badge:mt}},Pl={components:{ListView:Ha,Avatar:fa,Badge:mt,Button:Pe,FeatherIcon:ye,ListHeader:ts,ListHeaderItem:es,ListRow:wt,ListRowItem:ss,ListRows:os,ListSelectBanner:as,StatusBadge:Sl,PriorityBadge:Il,Tooltip:Ht},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(s,{emit:e}){const t=E(!1),o=E(null),i=E({x:0,y:0}),r=E(!1),d=E({x:0,y:0}),f=E(null),p=E(!1),x=E({x:0,y:0}),y=E(null),h=b=>{if(!b||typeof b!="string")return"?";if(b.includes("@")){const B=b.split("@")[0];return B.includes(".")||B.includes("_")?B.split(/[._]/).map(ge=>ge[0]).join("").toUpperCase().slice(0,2):B.slice(0,2).toUpperCase()}return b.includes(" ")?b.split(" ").map(B=>B[0]).join("").toUpperCase().slice(0,2):b.slice(0,2).toUpperCase()},_=b=>{if(!b)return"";const B=b.match(/ISS-(\d{4}-\d+)/);return B?B[1]:b},S=b=>{if(!b)return"";const B=document.createElement("div");return B.innerHTML=b,B.textContent||B.innerText||""},k=b=>b?new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",P=b=>b?new Date(b).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",$=b=>({New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[b]||"gray",w=b=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[b]||"yellow",I=new Map,C=j(()=>s.issues.map(b=>{const B=b.name;if(I.has(B)){const ge=I.get(B);if(ge.originalStatus===b.status&&ge.originalPriority===b.priority&&ge.originalSubject===b.subject&&ge.originalUsersAssigned===JSON.stringify(b.custom_users_assigned)&&ge.originalIsResponseExpected===b.custom_is_response_expected)return ge.transformed}const X=je(oe({},b),{status:{label:b.status||"New",color:$(b.status)},priority:{label:b.priority||"Medium",color:w(b.priority)}});return I.set(B,{transformed:X,originalStatus:b.status,originalPriority:b.priority,originalSubject:b.subject,originalUsersAssigned:JSON.stringify(b.custom_users_assigned),originalIsResponseExpected:b.custom_is_response_expected}),X})),F=Ue([{label:"Issue ID",key:"name",width:"90px",sortable:!0},{label:"Title",key:"subject",width:3,sortable:!0},{label:"Status",key:"status",width:"110px",sortable:!0},{label:"Raised By",key:"raised_by",width:"120px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"120px",sortable:!1},{label:"CSM Team",key:"custom_assigned_csm_team",width:"100px",sortable:!1},{label:"Tags",key:"_user_tags",width:"100px",sortable:!1},{label:"Created At",key:"creation",width:"90px",sortable:!0}]),U=Ue({showTooltip:!1,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No tickets found",description:"Try adjusting your search or filter criteria"},onRowClick:b=>{N(b)}}),V=b=>{console.log("Selected rows:",b)},T=b=>`${window.location.origin}/app/issue/${b.name}`,N=b=>{console.log("Issue clicked:",b);const B=T(b);window.open(B,"_blank")},c=b=>{const B=b||"New";return{"bg-blue-500":B==="New","bg-orange-500":B==="In Review","bg-purple-500":B==="Confirmed","bg-blue-500":B==="In Transit","bg-green-500":B==="Delivered","bg-green-500":B==="Closed","bg-red-500":B==="Open","bg-orange-500":B==="Replied","bg-yellow-500":B==="On Hold","bg-green-500":B==="Resolved"}},z=b=>{const B=b||"Medium";return{"bg-red-500":B==="Critical"||B==="High","bg-yellow-500":B==="Medium","bg-green-500":B==="Low"}},W=b=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[b||"New"]||"bg-gray-100 text-gray-800",Y=b=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[b||"Medium"]||"bg-yellow-100 text-yellow-800",te=b=>{const B=b||"Medium";return{"bg-red-500":B==="Critical","bg-red-400":B==="High","bg-yellow-400":B==="Medium","bg-green-400":B==="Low"}},ne=(b,B)=>{const X=b.target.getBoundingClientRect();i.value={x:X.left+X.width/2,y:X.top-10},o.value=B,t.value=!0},L=()=>{t.value=!1,o.value=null},K=(b,B)=>{if(!B||B.length===0)return;const X=b.target.getBoundingClientRect();d.value={x:X.left+X.width/2,y:X.top-10},f.value=B,r.value=!0},Q=()=>{r.value=!1,f.value=null},ue=(b,B)=>{if(!B||!B.subject)return;const X=b.currentTarget.getBoundingClientRect();x.value={x:X.left+X.width/2,y:X.top-10},y.value={subject:B.subject,description:B.description},p.value=!0},ce=()=>{p.value=!1,y.value=null},Oe=b=>{let B="asc";s.sortField===b&&(B=s.sortDirection==="asc"?"desc":"asc"),e("sort",{field:b,direction:B})},ve=b=>s.sortField!==b?"arrow-up-down":s.sortDirection==="asc"?"arrow-up":"arrow-down",fe=b=>s.sortField!==b?"text-gray-400":"text-blue-600",Ne=b=>s.sortField===b?"bg-blue-50":"",De=new Map;return{columns:F,listOptions:U,transformedIssues:C,handleSelections:V,getIssueUrl:T,handleIssueClick:N,getStatusColor:c,getPriorityColor:z,getStatusBadgeClass:W,getPriorityBadgeClass:Y,getPriorityIndicatorClass:te,getInitials:h,formatIssueId:_,stripHtml:S,formatDate:k,formatTime:P,showPopup:t,popupUser:o,popupPosition:i,showUserPopup:ne,hideUserPopup:L,handleColumnSort:Oe,getSortIcon:ve,getSortIconClass:fe,getSortButtonClass:Ne,getTagStyle:b=>{if(De.has(b))return De.get(b);const B=ls(b);let X;if(B){const ge=B.replace("#",""),et=parseInt(ge.substr(0,2),16),We=parseInt(ge.substr(2,2),16),Ge=parseInt(ge.substr(4,2),16),tt=`rgba(${et}, ${We}, ${Ge}, 0.1)`,st=`rgb(${Math.max(et-50,0)}, ${Math.max(We-50,0)}, ${Math.max(Ge-50,0)})`;X={backgroundColor:tt,color:st,borderColor:st}}else X={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return De.set(b,X),X},showTagsPopup:r,tagsPopupPosition:d,tagsPopupData:f,showTagsPopupFn:K,hideTagsPopupFn:Q,showIssueDetailsPopup:p,issueDetailsPopupPosition:x,issueDetailsPopupData:y,showIssueDetailsPopupFn:ue,hideIssueDetailsPopup:ce}}},$l={class:"bg-white rounded-lg shadow-sm border"},Tl={key:0,class:"px-6 py-12 text-center text-gray-500"},ql=["onClick"],Ml=["href","onClick"],Bl=["onMouseenter"],Ol={class:"font-medium truncate"},Rl={key:0,class:"relative"},Dl={class:"text-gray-500 text-sm mt-1 truncate max-w-xs"},Fl={class:"text-sm font-medium text-gray-900 truncate block"},El={key:3,class:"flex flex-wrap gap-1"},Ll=["onMouseenter"],Al={key:1,class:"text-gray-400 text-sm"},Vl={class:"text-sm font-medium text-gray-900 truncate block"},Nl=["onMouseenter"],jl=["title"],Ul={class:"truncate"},zl={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},Hl={key:1,class:"text-gray-400 text-sm"},Kl={key:6,class:"flex flex-col"},Wl={class:"text-sm"},Gl={class:"text-xs text-gray-400"},Jl={key:8},Xl={class:"flex gap-2"},Ql={class:"text-sm"},Yl={class:"font-semibold text-gray-900 mb-1"},Zl={class:"text-gray-600 flex items-center gap-1"},ei={class:"text-xs text-gray-500 mt-1"},ti={class:"text-sm"},si={class:"font-bold text-gray-900 mb-3"},oi={key:0,class:"text-gray-700 whitespace-pre-wrap max-h-48 overflow-y-auto"},ai={key:1,class:"text-gray-400 italic"},ri={class:"text-sm"},ni={class:"flex flex-wrap gap-1"};function li(s,e,t,o,i,r){const d=Se("FeatherIcon"),f=Se("ListHeaderItem"),p=Se("ListHeader"),x=Se("Avatar"),y=Se("Tooltip"),h=Se("ListRowItem"),_=Se("ListRow"),S=Se("ListRows"),k=Se("Button"),P=Se("ListSelectBanner"),$=Se("ListView");return a(),g("div",$l,[e[6]||(e[6]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(a(),g("div",Tl,[...e[3]||(e[3]=[n("div",{class:"flex items-center justify-center"},[n("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),n("span",{class:"ml-2"},"Loading issues...")],-1)])])):(a(),R($,{key:1,columns:o.columns,rows:o.transformedIssues,"row-key":"name",options:o.listOptions,"onUpdate:selections":o.handleSelections,class:"p-4"},{default:M(()=>[H(p,null,{default:M(()=>[(a(!0),g(Z,null,ae(o.columns,w=>(a(),R(f,{key:w.key,item:w},Js({_:2},[w.icon?{name:"prefix",fn:M(({item:I})=>[H(d,{name:I.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,w.sortable?{name:"suffix",fn:M(()=>[n("button",{onClick:I=>o.handleColumnSort(w.key),class:D(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",o.getSortButtonClass(w.key)])},[H(d,{name:o.getSortIcon(w.key),class:D(["h-3 w-3",o.getSortIconClass(w.key)])},null,8,["name","class"])],10,ql)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),H(S,null,{default:M(()=>[(a(!0),g(Z,null,ae(o.transformedIssues,w=>(a(),R(_,{key:w.name,row:w,class:D({"bg-orange-50 hover:bg-orange-100":w.custom_is_response_expected===1})},{default:M(({column:I,item:C})=>[H(h,{item:C,align:I.align},{prefix:M(()=>[I.key==="raised_by"?(a(),R(x,{key:0,size:"sm",label:o.getInitials(w.raised_by),class:"mr-3"},null,8,["label"])):A("",!0)]),default:M(()=>{var F;return[I.key==="name"?(a(),g("a",{key:0,href:o.getIssueUrl(w),target:"_blank",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:me(U=>o.handleIssueClick(w),["prevent"])},O(o.formatIssueId(C)),9,Ml)):I.key==="subject"?(a(),g("div",{key:1,class:"max-w-xs cursor-pointer",onMouseenter:U=>o.showIssueDetailsPopupFn(U,w),onMouseleave:e[0]||(e[0]=(...U)=>o.hideIssueDetailsPopup&&o.hideIssueDetailsPopup(...U))},[n("div",Ol,O(w.subject),1),w.description&&w.description.length>0?(a(),g("div",Rl,[n("div",Dl,O(o.stripHtml(w.description)),1)])):A("",!0)],40,Bl)):I.key==="raised_by"?(a(),R(y,{key:2,text:`Raised By: ${C||"Not assigned"}`},{default:M(()=>[n("span",Fl,O(C||"-"),1)]),_:2},1032,["text"])):I.key==="custom_users_assigned"?(a(),g("div",El,[w.custom_users_assigned&&w.custom_users_assigned.length>0?(a(!0),g(Z,{key:0},ae(w.custom_users_assigned.filter(U=>U.user_assigned),U=>(a(),g("div",{key:U.name||U,class:"relative inline-block"},[n("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:V=>o.showUserPopup(V,U),onMouseleave:e[1]||(e[1]=(...V)=>o.hideUserPopup&&o.hideUserPopup(...V))},O(o.getInitials(U.user_assigned)),41,Ll)]))),128)):(a(),g("span",Al,"-"))])):I.key==="custom_assigned_csm_team"?(a(),R(y,{key:4,text:`CSM Team: ${w.custom_assigned_csm_team||"Not assigned"}`},{default:M(()=>[n("span",Vl,O(w.custom_assigned_csm_team||"-"),1)]),_:2},1032,["text"])):I.key==="_user_tags"?(a(),g("div",{key:5,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:U=>o.showTagsPopupFn(U,w._user_tags),onMouseleave:e[2]||(e[2]=(...U)=>o.hideTagsPopupFn&&o.hideTagsPopupFn(...U))},[w._user_tags&&w._user_tags.length>0?(a(),g(Z,{key:0},[n("span",{style:qe(o.getTagStyle(w._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:w._user_tags[0]},[n("span",Ul,O(w._user_tags[0]),1)],12,jl),w._user_tags.length>1?(a(),g("span",zl," +"+O(w._user_tags.length-1),1)):A("",!0)],64)):(a(),g("span",Hl,"-"))],40,Nl)):I.key==="creation"?(a(),g("div",Kl,[n("span",Wl,O(o.formatDate(C)),1),n("span",Gl,O(o.formatTime(C)),1)])):I.key==="status"?(a(),R(y,{key:7,text:`Status: ${((F=w.status)==null?void 0:F.label)||w.status||"New"}`},{default:M(()=>{var U,V;return[n("span",{class:D([o.getStatusBadgeClass(((U=w.status)==null?void 0:U.label)||w.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},O(((V=w.status)==null?void 0:V.label)||w.status||"New"),3)]}),_:2},1032,["text"])):(a(),g("span",Jl,O(C),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row","class"]))),128))]),_:1}),H(P,null,{actions:M(({unselectAll:w})=>[n("div",Xl,[H(k,{variant:"ghost",label:"Delete"}),H(k,{variant:"ghost",label:"Unselect all",onClick:w},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),o.showPopup&&o.popupUser&&typeof o.popupUser=="object"?(a(),g("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:qe({left:o.popupPosition.x+"px",top:o.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[n("div",Ql,[n("div",Yl,O(o.popupUser.user_assigned||"Unknown User"),1),n("div",Zl,[e[4]||(e[4]=n("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),le(" "+O(o.popupUser.team||"No Team"),1)]),n("div",ei," Assigned: "+O(o.formatDate(o.popupUser.assigned_date)),1)])],4)):A("",!0),o.showIssueDetailsPopup&&o.issueDetailsPopupData?(a(),g("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-md",style:qe({left:o.issueDetailsPopupPosition.x+"px",top:o.issueDetailsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[n("div",ti,[n("div",si,O(o.issueDetailsPopupData.subject),1),o.issueDetailsPopupData.description?(a(),g("div",oi,O(o.stripHtml(o.issueDetailsPopupData.description)),1)):(a(),g("div",ai," No description available "))])],4)):A("",!0),o.showTagsPopup&&o.tagsPopupData?(a(),g("div",{key:4,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:qe({left:o.tagsPopupPosition.x+"px",top:o.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[n("div",ri,[e[5]||(e[5]=n("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),n("div",ni,[(a(!0),g(Z,null,ae(o.tagsPopupData,w=>(a(),g("span",{key:w,style:qe(o.getTagStyle(w)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},O(w),5))),128))])])],4)):A("",!0)])}const ii=Ae(Pl,[["render",li]]),ui={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},di={class:"flex items-start justify-between"},ci={class:"flex items-start space-x-3"},pi={class:"flex-shrink-0"},fi={class:"flex-1 min-w-0"},gi={class:"text-sm font-medium text-gray-900"},mi={class:"text-sm text-gray-600 mt-1"},vi={class:"text-xs text-gray-500 mt-1"},yi=["onClick"],hi={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(s){const e=r=>{const d="bg-white/95 border-l-4",f={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${d} ${f[r]||f.info}`},t=r=>{const d={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return d[r]||d.info},o=r=>{const d={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return d[r]||d.info},i=r=>{const f=new Date-r,p=Math.floor(f/6e4);if(p<1)return"Just now";if(p<60)return`${p}m ago`;const x=Math.floor(p/60);return x<24?`${x}h ago`:r.toLocaleDateString()};return(r,d)=>(a(),g("div",ui,[H(Xs,{name:"notification",tag:"div"},{default:M(()=>[(a(!0),g(Z,null,ae(s.notifications,f=>(a(),g("div",{key:f.id,class:D([e(f.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[n("div",di,[n("div",ci,[n("div",pi,[H(l(ye),{name:t(f.type),class:D([o(f.type),"h-5 w-5"])},null,8,["name","class"])]),n("div",fi,[n("p",gi,O(f.title),1),n("p",mi,O(f.message),1),n("p",vi,O(i(f.timestamp)),1)])]),n("button",{onClick:p=>r.$emit("remove",f.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[H(l(ye),{name:"x",class:"h-4 w-4"})],8,yi)])],2))),128))]),_:1})]))}},bi=Ae(hi,[["__scopeId","data-v-d57fd7d2"]]);function wi(s,e){let t;return function(...i){const r=()=>{clearTimeout(t),s(...i)};clearTimeout(t),t=setTimeout(r,e)}}function _i(){const s=E(""),e=E({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=E(""),o=wi(S=>{t.value=S},300);be(s,S=>{o(S)});const i=j(()=>{const S={};return t.value.trim()&&(S.subject=["like",`%${t.value.trim()}%`]),e.value.status&&(S.status=e.value.status),e.value.priority&&(S.priority=e.value.priority),e.value.assignee&&(S.raised_by=e.value.assignee),e.value.tags&&(S.issue_type=e.value.tags),S}),r=j(()=>e.value.sortBy||"creation desc"),d=new Map,f=S=>{if(!S||!Array.isArray(S))return[];const k=JSON.stringify({issuesLength:S.length,searchQuery:s.value.trim(),status:e.value.status,priority:e.value.priority,assignee:e.value.assignee,tags:e.value.tags,sortBy:e.value.sortBy});if(d.has(k))return d.get(k);let P=[...S];if(s.value.trim()){const w=s.value.toLowerCase().trim();P=P.filter(I=>{const C=(I.subject||"").toLowerCase(),F=(I.description||"").toLowerCase();return C.includes(w)||F.includes(w)})}e.value.status&&(P=P.filter(w=>w.status===e.value.status)),e.value.priority&&(P=P.filter(w=>w.priority===e.value.priority)),e.value.assignee&&(P=P.filter(w=>w.raised_by===e.value.assignee)),e.value.tags&&(P=P.filter(w=>w.issue_type===e.value.tags));const $=Re({Critical:4,High:3,Medium:2,Low:1});if(P.sort((w,I)=>{const[C,F]=e.value.sortBy.split(" "),U=w[C]||"",V=I[C]||"";let T=0;return C==="creation"||C==="modified"?T=new Date(U)-new Date(V):C==="priority"?T=($[U]||0)-($[V]||0):T=U.toString().localeCompare(V.toString()),F==="desc"?-T:T}),d.size>50){const w=d.keys().next().value;d.delete(w)}return d.set(k,P),P};let p=null,x=null;const y=S=>{if(!S||!Array.isArray(S))return Re([{label:"All Assignees",value:""}]);const k=S.map(w=>w.raised_by).filter(w=>w&&w.trim()).sort().join("|");if(p&&x===k)return p;const P=[...new Set(S.map(w=>w.raised_by).filter(w=>w&&w.trim()))],$=Re([{label:"All Assignees",value:""},...P.map(w=>({label:w,value:w}))]);return p=$,x=k,$},h=()=>{s.value="",t.value="",e.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},_=j(()=>s.value.trim()!==""||e.value.status!==""||e.value.priority!==""||e.value.assignee!==""||e.value.tags!==""||e.value.sortBy!=="creation desc");return{searchQuery:s,filters:e,debouncedSearchQuery:t,apiFilters:i,sortOrder:r,hasActiveFilters:_,filterIssues:f,getAssigneeOptions:y,resetFilters:h}}function xi(s,e,t){const o=Qs(),i=E([]),r=E(!1),d=E(!1);let f=null;const p=d.value?15e3:2e3,x=()=>{console.log(` Setting up debounced refresh with ${p}ms delay`),f&&(clearTimeout(f),console.log(" Cleared existing debounce timer")),f=setTimeout(()=>{console.log(" Debounce timer fired, calling processDocumentRefreshes"),_()},p)},y=()=>{if(!o||r.value)return;o.emit("doctype_subscribe","Issue"),o.off("list_update"),o.on("list_update",N=>{try{if(console.log(" Received list_update event:",N),(N==null?void 0:N.doctype)!=="Issue")return;if($()){console.log(" Skipping realtime update (avoid condition met)");return}if(N.action==="insert"||N.action==="create"){console.log(" Skipping new issue creation update:",N.name);return}console.log(" Adding to pending refreshes:",N.name),i.value.push(N),x()}catch(c){console.error(" Error processing list_update event:",c)}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(N=>{o.on(N,c=>{if((c==null?void 0:c.doctype)!=="Issue"||$())return;const z={doctype:"Issue",name:c.name,action:N.includes("create")?"insert":N.includes("delete")?"delete":"update",modified_by:c.modified_by||c.owner,timestamp:new Date().toISOString()};if(z.action==="insert"){console.log(" Skipping new issue creation update:",c.name);return}i.value.push(z),x()})}),r.value=!0},h=()=>{if(!o||!r.value)return;o.emit("doctype_unsubscribe","Issue"),o.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(N=>{o.off(N)}),r.value=!1},_=()=>re(this,null,function*(){if(console.log(" processDocumentRefreshes called with",i.value.length,"pending refreshes"),!i.value.length){console.log(" No pending refreshes, returning early");return}const T=window.location.hash||window.location.pathname;if(console.log(" Current route:",T),!T.includes("issue-tracker")&&!T.includes("issues")&&!T.includes("frontend")){console.log(" Not on correct route, clearing pending refreshes and disabling updates"),i.value=[],h();return}console.log(" Route check passed, proceeding with refresh");const N=[...new Set(i.value.map(z=>z.name))],c=N.length;console.log(` Processing ${c} document refreshes:`,N),i.value=[];try{yield S(N),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:c,documents:N}})),console.log(` Successfully processed ${c} document refreshes`)}catch(z){console.error(" Error updating individual rows, falling back to full refresh:",z);try{e&&typeof e=="function"?(console.log(" Using custom refresh function for fallback"),yield e()):(console.log(" Using default refresh functions for fallback"),yield Je(),yield ut()),console.log(" Fallback refresh completed successfully")}catch(W){console.error(" Error in fallback refresh:",W)}}}),S=T=>re(this,null,function*(){try{const{activeResource:N,currentData:c}=k();if(!c||!Array.isArray(c)){console.log(" No current data available, falling back to custom refresh"),e&&typeof e=="function"&&(yield e());return}let z={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(s&&typeof s=="function")try{const te=s();te&&(z=oe(oe({},z),te))}catch(te){console.warn("Error getting current parameters, using defaults:",te)}const W=c.map(te=>te.name),Y=T.filter(te=>W.includes(te));if(Y.length===0){console.log(" Updated issues not visible on current page, skipping grid update");return}console.log(` Updating ${Y.length} visible issues:`,Y),yield P(Y,N,c)}catch(N){throw console.error("Error during targeted refresh:",N),e&&typeof e=="function"&&(yield e()),N}}),k=()=>{if(t&&typeof t=="function")try{const W=t();if(W)return console.log(` Using ${W.resourceType} resource for updates (from parent)`),W}catch(W){console.warn("Error getting resource state from parent, falling back to detection:",W)}const T=xe.data&&Array.isArray(xe.data)&&xe.data.length>0,N=_e.data&&Array.isArray(_e.data)&&_e.data.length>0;if(T&&!N)return console.log(" Using statFilterResource for updates (only stat has data)"),{activeResource:xe,currentData:xe.data,resourceType:"stat"};if(N&&!T)return console.log(" Using issuesResource for updates (only issues has data)"),{activeResource:_e,currentData:_e.data,resourceType:"main"};const c=xe.lastLoaded||0,z=_e.lastLoaded||0;return T&&c>=z?(console.log(" Using statFilterResource for updates (more recent)"),{activeResource:xe,currentData:xe.data,resourceType:"stat"}):(console.log(" Using issuesResource for updates (default)"),{activeResource:_e,currentData:_e.data||[],resourceType:"main"})},P=(T,N,c)=>re(this,null,function*(){try{const W=(yield Promise.all(T.map(Y=>re(this,null,function*(){try{return yield Ka(Y),ns.data}catch(te){return console.warn(`Failed to fetch updated issue ${Y}:`,te),null}})))).filter(Y=>Y!==null);if(W.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),e&&typeof e=="function"&&(yield e());return}if(N.data&&Array.isArray(N.data))console.log(` Updating ${W.length} issues in ${N.data.length} total issues`),W.forEach(Y=>{const te=N.data.findIndex(ne=>ne.name===Y.name);te!==-1?(console.log(` Updating issue at index ${te}: ${Y.name}`),Object.assign(N.data[te],Y)):console.warn(` Issue ${Y.name} not found in current data for update`)});else{console.warn(" activeResource.data is not an array, using fallback method");const Y=[...c];W.forEach(te=>{const ne=Y.findIndex(L=>L.name===te.name);ne!==-1?(console.log(` Updating issue at index ${ne}: ${te.name} (fallback)`),Y[ne]=te):console.warn(` Issue ${te.name} not found in current data for update (fallback)`)}),N.data=Y}console.log(` Successfully updated ${W.length} issues in current view`)}catch(z){console.error("Error updating visible issues in place:",z),e&&typeof e=="function"&&(yield e())}}),$=()=>!!document.hidden,w=E(!1),I=()=>{document.hidden?w.value=!0:w.value&&(w.value=!1,console.log(" Page came back into focus - refreshing Issue table"),i.value.length>0?(console.log(` Processing ${i.value.length} pending updates`),_()):C())},C=()=>{i.value=[];try{e&&typeof e=="function"?e():(Je(),ut())}catch(T){console.error("Error during manual refresh:",T)}},F=()=>{y()},U=()=>{r.value=!1},V=T=>{console.error("Socket connection error:",T),r.value=!1};return Le(()=>{o&&(o.on("connect",F),o.on("disconnect",U),o.on("connect_error",V),document.addEventListener("visibilitychange",I),o.connected&&y())}),Ye(()=>{o&&(o.off("connect",F),o.off("disconnect",U),o.off("connect_error",V)),document.removeEventListener("visibilitychange",I),h(),f&&clearTimeout(f)}),{pendingDocumentRefreshes:i,realtimeEventsSetup:r,setupRealtimeUpdates:y,disableRealtimeUpdates:h,manualRefresh:C,processDocumentRefreshes:_}}const ki={class:"min-h-screen bg-gray-50"},Ci={class:"bg-white shadow-sm border-b"},Si={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ii={class:"flex justify-between items-center py-4"},Pi={class:"flex items-center space-x-4"},$i={class:"flex space-x-4"},Ti={class:"flex items-center space-x-4"},qi={class:"text-sm text-gray-600"},Mi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Bi={class:"fixed top-20 right-4 flex flex-col space-y-2"},Oi=["title"],Ri={class:"relative"},Di={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},ji={__name:"IssueTracker",setup(s){const{searchQuery:e,filters:t,sortOrder:o,getAssigneeOptions:i}=_i(),r=E(!1),d=E("team_tickets"),f=E(null),p=()=>{console.log("Refreshing current view:",{isUsingStatFilter:r.value,currentStatFilter:d.value,hasCustomFilters:c.value&&c.value.length>0});const G={limit_page_length:fe.value,limit_start:(ve.value-1)*fe.value,order_by:o.value};r.value?(c.value&&c.value.length>0&&(G.filters=JSON.stringify(c.value)),Promise.all([pt(d.value,G),c.value&&c.value.length>0?nt(d.value,JSON.stringify(c.value)):nt(d.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(b=>{console.error("Error refreshing stat filter view:",b)})):Promise.all([Je(oe({filters:JSON.stringify(c.value)},G)),ut(JSON.stringify(c.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(b=>{console.error("Error refreshing regular filter view:",b)})},{pendingDocumentRefreshes:x,realtimeEventsSetup:y}=xi(()=>({filters:De.value,order_by:o.value,limit_page_length:fe.value,limit_start:(ve.value-1)*fe.value}),p,()=>r.value?{activeResource:xe,currentData:xe.data||[],resourceType:"stat"}:{activeResource:_e,currentData:_e.data||[],resourceType:"main"}),h=()=>{p()},_=E([]),S=E(!1),k=G=>{_.value.push(oe({id:Date.now()+Math.random()},G)),setTimeout(()=>{var b;P((b=_.value[_.value.length-1])==null?void 0:b.id)},5e3)},P=G=>{_.value=_.value.filter(b=>b.id!==G)},$=G=>{const b={sent:"Email Sent",scheduled:"Email Scheduled",draft_saved:"Draft Saved",send_failed:"Send Failed",draft_save_failed:"Save Failed"};k({type:G.type||"success",title:b[G.action]||"Email Action",message:G.message||`Email "${G.subject}" sent successfully to ${G.recipientCount} recipients`,timestamp:new Date}),G.type!=="error"&&(S.value=!1)},w=j(()=>r.value?xe.data||[]:_e.data||[]),I=j(()=>r.value?is.data||0:rs.data||0),C=j(()=>r.value?xe.loading:_e.loading),F=j(()=>w.value),U=j(()=>(o.value||"creation desc").split(" ")[0]),V=j(()=>(o.value||"creation desc").split(" ")[1]||"desc"),T=({field:G,direction:b})=>{const B=`${G} ${b}`;t.value.sortBy=B,ve.value=1,p()},N=G=>{},c=E([]),z=G=>{console.log("Filters applied:",G),c.value=G,ve.value=1,G&&G.length>0?r.value?(console.log("Applying custom filters on top of card filter:",d.value),ne(d.value)):(console.log("Applying custom filters in regular mode"),W()):(console.log("No filters applied, returning to default view"),Y())},W=()=>{r.value=!1,d.value="team_tickets",Promise.all([Je({filters:JSON.stringify(c.value),order_by:o.value,limit_page_length:fe.value,limit_start:0}),ut(JSON.stringify(c.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(G=>{console.error("Error applying custom filters:",G)})},Y=()=>{r.value=!0,d.value="team_tickets",ne("team_tickets")},te=G=>{console.log("Card clicked:",G,"Current filters:",c.value),r.value=!0,d.value=G,e.value="",ve.value=1,ne(G)},ne=G=>{const b={limit_page_length:fe.value,limit_start:0,order_by:o.value};c.value&&c.value.length>0?(b.filters=JSON.stringify(c.value),console.log("Applying card filter with custom filters:",G,c.value)):console.log("Applying card filter without custom filters:",G),Promise.all([pt(G,b),c.value&&c.value.length>0?nt(G,JSON.stringify(c.value)):nt(G)]).then(()=>{console.log("Card filter applied successfully")}).catch(B=>{console.error("Error applying card filter:",B)})},L=Ue(Re(Ja())),K=Ue(Re(Xa())),Q=Ue(Re(Ya()));let ue=null,ce=0;const Oe=j(()=>{const G=w.value.length;return ue&&ce===G||(ue=Re(i(w.value)),ce=G),ue}),ve=E(1),fe=E(10),Ne=({page:G,itemsPerPage:b,offset:B})=>{console.log("Page change:",{page:G,newItemsPerPage:b,offset:B}),ve.value=G,fe.value=b;const X={limit_page_length:b,limit_start:B,order_by:o.value};r.value?(c.value&&c.value.length>0&&(X.filters=JSON.stringify(c.value)),pt(d.value,X).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(ge=>{console.error("Error during pagination (stat filter):",ge)})):Je(oe({filters:JSON.stringify(c.value)},X)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(ge=>{console.error("Error during pagination (regular filter):",ge)})},De=j(()=>{const G={};return t.value.status&&(G.status=t.value.status),t.value.priority&&(G.priority=t.value.priority),t.value.assignee&&(G.raised_by=t.value.assignee),t.value.tags&&(G.issue_type=t.value.tags),G});return Le(()=>{console.log("IssueTracker mounted, initializing with default view"),r.value=!0,d.value="team_tickets",ne("team_tickets"),window.addEventListener("issueListUpdated",G=>re(this,null,function*(){const{count:b,documents:B}=G.detail;k({type:"info",title:"List Updated",message:`${b} issue${b>1?"s":""} updated: ${B.slice(0,3).join(", ")}${B.length>3?"...":""}`,timestamp:new Date}),console.log(" List updated event received - refreshing only stat cards");try{f.value&&f.value.refreshStats&&(console.log(" Refreshing stat cards..."),yield f.value.refreshStats(),console.log(" Stat cards refreshed successfully")),console.log(" Stat cards refreshed after websocket update"),console.log("  Individual row updates are handled automatically by the composable")}catch(X){console.error(" Error refreshing stat cards after websocket update:",X),k({type:"error",title:"Refresh Error",message:"Failed to refresh stat cards. Please refresh manually.",timestamp:new Date})}}))}),Ye(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(G,b)=>{const B=Se("router-link");return a(),g("div",ki,[n("div",Ci,[n("div",Si,[n("div",Ii,[n("div",Pi,[b[11]||(b[11]=n("h1",{class:"text-2xl font-bold text-gray-900"},"Ticket Tracker",-1)),n("nav",$i,[H(B,{to:"/",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium","active-class":"bg-blue-100 text-blue-700","inactive-class":"text-gray-600 hover:text-gray-900"},{default:M(()=>[...b[7]||(b[7]=[le(" Tickets ",-1)])]),_:1}),H(B,{to:"/sent-emails",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium","active-class":"bg-blue-100 text-blue-700","inactive-class":"text-gray-600 hover:text-gray-900"},{default:M(()=>[...b[8]||(b[8]=[le(" Sent Emails ",-1)])]),_:1}),b[9]||(b[9]=n("a",{href:"/app/support",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Desk ",-1)),b[10]||(b[10]=n("a",{href:"/intro",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Wiki ",-1))])]),n("div",Ti,[H(l(Pe),{onClick:b[0]||(b[0]=X=>S.value=!0),variant:"solid",size:"sm"},{prefix:M(()=>[H(l(ye),{name:"mail",class:"w-4 h-4"})]),default:M(()=>[b[12]||(b[12]=le(" Compose Email ",-1))]),_:1}),n("span",qi,O(l($t).user),1),H(l(Pe),{onClick:b[1]||(b[1]=X=>l($t).logout.submit()),variant:"outline",size:"sm"},{default:M(()=>[...b[13]||(b[13]=[le(" Logout ",-1)])]),_:1})])])])]),n("div",Mi,[H(Cl,{ref_key:"issueStatsRef",ref:f,issues:F.value,activeFilter:d.value,onFilterChanged:te},null,8,["issues","activeFilter"]),H(al,{searchQuery:l(e),"onUpdate:searchQuery":b[2]||(b[2]=X=>it(e)?e.value=X:null),filters:l(t),"onUpdate:filters":b[3]||(b[3]=X=>it(t)?t.value=X:null),statusOptions:Q.value,priorityOptions:L.value,assigneeOptions:Oe.value,tagsOptions:K.value,issues:w.value,filteredCount:I.value,onSuggestionSelected:N,onFiltersApplied:z},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),H(ii,{issues:F.value,loading:C.value,sortField:U.value,sortDirection:V.value,onSort:T},null,8,["issues","loading","sortField","sortDirection"]),H(vl,{currentPage:ve.value,"onUpdate:currentPage":b[4]||(b[4]=X=>ve.value=X),itemsPerPage:fe.value,"onUpdate:itemsPerPage":b[5]||(b[5]=X=>fe.value=X),totalItems:I.value,onPageChange:Ne},null,8,["currentPage","itemsPerPage","totalItems"]),n("div",Bi,[n("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:l(y)?"Real-time updates active":"Real-time updates disabled"},[n("div",Ri,[H(l(ye),{name:l(y)?"wifi":"wifi-off",class:D(["h-5 w-5 transition-colors duration-200",l(y)?"text-green-600":"text-red-500"])},null,8,["name","class"]),n("div",{class:D(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",l(y)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),l(x).length>0?(a(),g("div",Di,O(l(x).length>9?"9+":l(x).length),1)):A("",!0)])],8,Oi),n("button",{onClick:h,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[H(l(ye),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),H(bi,{notifications:_.value,onRemove:P},null,8,["notifications"]),H(Zs,{show:S.value,"onUpdate:show":b[6]||(b[6]=X=>S.value=X),onEmailSent:$},null,8,["show"])])}}};export{ji as default};
//# sourceMappingURL=IssueTracker-BGGOaH1G.js.map
