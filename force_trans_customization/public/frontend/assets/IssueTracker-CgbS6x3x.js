var At=Object.defineProperty,Vt=Object.defineProperties;var Et=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var lt=(e,t,s)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,xe=(e,t)=>{for(var s in t||(t={}))nt.call(t,s)&&lt(e,s,t[s]);if(Be)for(var s of Be(t))it.call(t,s)&&lt(e,s,t[s]);return e},Ye=(e,t)=>Vt(e,Et(t));var Ne=(e,t)=>{var s={};for(var r in e)nt.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&Be)for(var r of Be(e))t.indexOf(r)<0&&it.call(e,r)&&(s[r]=e[r]);return s};var de=(e,t,s)=>new Promise((r,l)=>{var u=g=>{try{b(s.next(g))}catch(f){l(f)}},m=g=>{try{b(s.throw(g))}catch(f){l(f)}},b=g=>g.done?r(g.value):Promise.resolve(g.value).then(u,m);b((s=s.apply(e,t)).next())});import{r as O,o as Fe,w as wt,a as re,d as Ve,y as Lt,c as F,b as jt,h as Ut,p as _t,e as Bt,u as Nt,l as Ke,H as Qe,t as tt,f as zt,g as Ht,N as ut,i as Ge,j as Jt,k as be,x as qt,m as ve,n as ue,q as Oe,v as Kt,s as ct,_ as kt,O as Wt,z as a,A as p,B as N,C as se,F as Y,D as oe,E as I,G as o,I as A,J as Qt,K as W,L as q,M as z,P as C,Q as we,R as $e,S as ye,T as te,U as Re,V as Pe,W as Gt,X as Xt,Y as Me,Z as De,$ as st,a0 as Se,a1 as Ct,a2 as je,a3 as Yt,a4 as Zt,a5 as es,a6 as _e,a7 as ke,a8 as me,a9 as he,aa as dt,ab as ts,ac as pt,ad as ss,ae as Ae,af as ot,ag as fe,ah as os,ai as rs,aj as Te,ak as as,al as gt,am as mt}from"./index-B1EDihsk.js";function ft(e,t){if(e)return e;let s=t!=null?t:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function ls(e,t){let s=O(ft(e.value.type,e.value.as));return Fe(()=>{s.value=ft(e.value.type,e.value.as)}),wt(()=>{var r;s.value||re(t)&&re(t)instanceof HTMLButtonElement&&!((r=re(t))!=null&&r.hasAttribute("type"))&&(s.value="button")}),s}let vt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ht(e){var t,s;let r=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return r;let u=!1;for(let b of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))b.remove(),u=!0;let m=u?(s=l.innerText)!=null?s:"":r;return vt.test(m)&&(m=m.replace(vt,"")),m}function ns(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let s=e.getAttribute("aria-labelledby");if(s){let r=s.split(" ").map(l=>{let u=document.getElementById(l);if(u){let m=u.getAttribute("aria-label");return typeof m=="string"?m.trim():ht(u).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ht(e).trim()}function is(e){let t=O(""),s=O("");return()=>{let r=re(e);if(!r)return"";let l=r.innerText;if(t.value===l)return s.value;let u=ns(r).trim().toLowerCase();return t.value=l,s.value=u,u}}var us=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(us||{}),cs=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(cs||{});function ds(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let St=Symbol("MenuContext");function Xe(e){let t=be(St,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Xe),s}return t}let ps=Ve({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:s}){let r=O(1),l=O(null),u=O(null),m=O([]),b=O(""),g=O(null),f=O(1);function c(w=_=>_){let _=g.value!==null?m.value[g.value]:null,v=Wt(w(m.value.slice()),D=>re(D.dataRef.domRef)),h=_?v.indexOf(_):null;return h===-1&&(h=null),{items:v,activeItemIndex:h}}let $={menuState:r,buttonRef:l,itemsRef:u,items:m,searchQuery:b,activeItemIndex:g,activationTrigger:f,closeMenu:()=>{r.value=1,g.value=null},openMenu:()=>r.value=0,goToItem(w,_,v){let h=c(),D=qt(w===ve.Specific?{focus:ve.Specific,id:_}:{focus:w},{resolveItems:()=>h.items,resolveActiveIndex:()=>h.activeItemIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});b.value="",g.value=D,f.value=v!=null?v:1,m.value=h.items},search(w){let _=b.value!==""?0:1;b.value+=w.toLowerCase();let v=(g.value!==null?m.value.slice(g.value+_).concat(m.value.slice(0,g.value+_)):m.value).find(D=>D.dataRef.textValue.startsWith(b.value)&&!D.dataRef.disabled),h=v?m.value.indexOf(v):-1;h===-1||h===g.value||(g.value=h,f.value=1)},clearSearch(){b.value=""},registerItem(w,_){let v=c(h=>[...h,{id:w,dataRef:_}]);m.value=v.items,g.value=v.activeItemIndex,f.value=1},unregisterItem(w){let _=c(v=>{let h=v.findIndex(D=>D.id===w);return h!==-1&&v.splice(h,1),v});m.value=_.items,g.value=_.activeItemIndex,f.value=1}};return Lt([l,u],(w,_)=>{var v;$.closeMenu(),jt(_,Ut.Loose)||(w.preventDefault(),(v=re(l))==null||v.focus())},F(()=>r.value===0)),_t(St,$),Bt(F(()=>Nt(r.value,{0:Ke.Open,1:Ke.Closed}))),()=>{let w={open:r.value===0,close:$.closeMenu};return Qe({ourProps:{},theirProps:e,slot:w,slots:t,attrs:s,name:"Menu"})}}}),gs=Ve({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${tt()}`}},setup(e,{attrs:t,slots:s,expose:r}){let l=Xe("MenuButton");r({el:l.buttonRef,$el:l.buttonRef});function u(f){switch(f.key){case ue.Space:case ue.Enter:case ue.ArrowDown:f.preventDefault(),f.stopPropagation(),l.openMenu(),Oe(()=>{var c;(c=re(l.itemsRef))==null||c.focus({preventScroll:!0}),l.goToItem(ve.First)});break;case ue.ArrowUp:f.preventDefault(),f.stopPropagation(),l.openMenu(),Oe(()=>{var c;(c=re(l.itemsRef))==null||c.focus({preventScroll:!0}),l.goToItem(ve.Last)});break}}function m(f){switch(f.key){case ue.Space:f.preventDefault();break}}function b(f){e.disabled||(l.menuState.value===0?(l.closeMenu(),Oe(()=>{var c;return(c=re(l.buttonRef))==null?void 0:c.focus({preventScroll:!0})})):(f.preventDefault(),l.openMenu(),ds(()=>{var c;return(c=re(l.itemsRef))==null?void 0:c.focus({preventScroll:!0})})))}let g=ls(F(()=>({as:e.as,type:t.type})),l.buttonRef);return()=>{var f;let c={open:l.menuState.value===0},v=e,{id:$}=v,w=Ne(v,["id"]),_={ref:l.buttonRef,id:$,type:g.value,"aria-haspopup":"menu","aria-controls":(f=re(l.itemsRef))==null?void 0:f.id,"aria-expanded":l.menuState.value===0,onKeydown:u,onKeyup:m,onClick:b};return Qe({ourProps:_,theirProps:w,slot:c,attrs:t,slots:s,name:"MenuButton"})}}}),ms=Ve({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${tt()}`}},setup(e,{attrs:t,slots:s,expose:r}){let l=Xe("MenuItems"),u=O(null);r({el:l.itemsRef,$el:l.itemsRef}),zt({container:F(()=>re(l.itemsRef)),enabled:F(()=>l.menuState.value===0),accept(c){return c.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}});function m(c){var $;switch(u.value&&clearTimeout(u.value),c.key){case ue.Space:if(l.searchQuery.value!=="")return c.preventDefault(),c.stopPropagation(),l.search(c.key);case ue.Enter:if(c.preventDefault(),c.stopPropagation(),l.activeItemIndex.value!==null){let w=l.items.value[l.activeItemIndex.value];($=re(w.dataRef.domRef))==null||$.click()}l.closeMenu(),kt(re(l.buttonRef));break;case ue.ArrowDown:return c.preventDefault(),c.stopPropagation(),l.goToItem(ve.Next);case ue.ArrowUp:return c.preventDefault(),c.stopPropagation(),l.goToItem(ve.Previous);case ue.Home:case ue.PageUp:return c.preventDefault(),c.stopPropagation(),l.goToItem(ve.First);case ue.End:case ue.PageDown:return c.preventDefault(),c.stopPropagation(),l.goToItem(ve.Last);case ue.Escape:c.preventDefault(),c.stopPropagation(),l.closeMenu(),Oe(()=>{var w;return(w=re(l.buttonRef))==null?void 0:w.focus({preventScroll:!0})});break;case ue.Tab:c.preventDefault(),c.stopPropagation(),l.closeMenu(),Oe(()=>Kt(re(l.buttonRef),c.shiftKey?ct.Previous:ct.Next));break;default:c.key.length===1&&(l.search(c.key),u.value=setTimeout(()=>l.clearSearch(),350));break}}function b(c){switch(c.key){case ue.Space:c.preventDefault();break}}let g=Ht(),f=F(()=>g!==null?(g.value&Ke.Open)===Ke.Open:l.menuState.value===0);return()=>{var c,$;let w={open:l.menuState.value===0},D=e,{id:_}=D,v=Ne(D,["id"]),h={"aria-activedescendant":l.activeItemIndex.value===null||(c=l.items.value[l.activeItemIndex.value])==null?void 0:c.id,"aria-labelledby":($=re(l.buttonRef))==null?void 0:$.id,id:_,onKeydown:m,onKeyup:b,role:"menu",tabIndex:0,ref:l.itemsRef};return Qe({ourProps:h,theirProps:v,slot:w,attrs:t,slots:s,features:ut.RenderStrategy|ut.Static,visible:f.value,name:"MenuItems"})}}}),fs=Ve({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${tt()}`}},setup(e,{slots:t,attrs:s,expose:r}){let l=Xe("MenuItem"),u=O(null);r({el:u,$el:u});let m=F(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),b=is(u),g=F(()=>({disabled:e.disabled,get textValue(){return b()},domRef:u}));Fe(()=>l.registerItem(e.id,g)),Ge(()=>l.unregisterItem(e.id)),wt(()=>{l.menuState.value===0&&m.value&&l.activationTrigger.value!==0&&Oe(()=>{var h,D;return(D=(h=re(u))==null?void 0:h.scrollIntoView)==null?void 0:D.call(h,{block:"nearest"})})});function f(h){if(e.disabled)return h.preventDefault();l.closeMenu(),kt(re(l.buttonRef))}function c(){if(e.disabled)return l.goToItem(ve.Nothing);l.goToItem(ve.Specific,e.id)}let $=Jt();function w(h){$.update(h)}function _(h){$.wasMoved(h)&&(e.disabled||m.value||l.goToItem(ve.Specific,e.id,0))}function v(h){$.wasMoved(h)&&(e.disabled||m.value&&l.goToItem(ve.Nothing))}return()=>{let{disabled:h}=e,D={active:m.value,disabled:h,close:l.closeMenu},M=e,{id:x}=M,k=Ne(M,["id"]);return Qe({ourProps:{id:x,ref:u,role:"menuitem",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:c,onPointerenter:w,onMouseenter:w,onPointermove:_,onMousemove:_,onPointerleave:v,onMouseleave:v},theirProps:xe(xe({},s),k),slot:D,attrs:s,slots:t,name:"MenuItem"})}}});const vs=["src","alt"],hs=Ve({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(e){const t=O(!1),s=e,r=F(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),l=F(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),u=F(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),m=F(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),b=F(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),g=F(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function f(c){c.type&&(t.value=!0)}return(c,$)=>(a(),p("div",{class:N(["relative inline-block shrink-0",[l.value,r.value]])},[c.image&&!t.value?(a(),p("img",{key:0,src:c.image,alt:c.label,class:N([r.value,"h-full w-full object-cover"]),onError:$[0]||($[0]=w=>f(w))},null,42,vs)):(a(),p("div",{key:1,class:N(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[u.value,r.value]])},[c.$slots.default?(a(),p("div",{key:0,class:N(g.value)},[se(c.$slots,"default")],2)):(a(),p(Y,{key:1},[oe(I(c.label&&c.label[0]),1)],64))],2)),c.$slots.indicator?(a(),p("div",{key:2,class:N(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",m.value])},[o("div",{class:N(b.value)},[se(c.$slots,"indicator")],2)],2)):A("",!0)],2))}}),ys={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},bs=["onClick"],xs={class:"whitespace-nowrap text-ink-gray-7"},ws=Ve({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const t=Qt(),s=e,r=g=>{let f=()=>{g.route?t.push(g.route):g.onClick&&g.onClick()};return{label:g.label,icon:g.icon,component:g.component,onClick:f}},l=g=>(g||[]).filter(Boolean).filter(f=>f.condition?f.condition():!0).map(f=>r(f)),u=F(()=>{let g=[],f=null,c=0;for(let $ of s.options)if($!=null){if("group"in $){f&&(g.push(f),f=null);let w=Ye(xe({key:c},$),{items:l($.items)});g.push(w)}else f||(f={key:c,group:"",hideLabel:!0,items:[]}),f.items.push(...l([$]));c++}return f&&g.push(f),g}),m=F(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),b=F(()=>s.placement==="left"?"bottom-start":s.placement==="right"?"bottom-end":s.placement==="center"?"bottom-center":"bottom");return(g,f)=>(a(),W(C(ps),{as:"div",class:"relative inline-block text-left"},{default:q(({open:c})=>[z(C(Gt),{transition:m.value,show:c,placement:b.value},{target:q(()=>[z(C(gs),{as:"div"},{default:q(()=>[g.$slots.default?se(g.$slots,"default",we($e({key:0},{open:c}))):(a(),W(C(ye),$e({key:1,active:c},g.button),{default:q(()=>{var $;return[oe(I(g.button?(($=g.button)==null?void 0:$.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:q(()=>[z(C(ms),{class:N(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":g.placement=="left","right-0 origin-top-right":g.placement=="right","inset-x-0 origin-top":g.placement=="center"}])},{default:q(()=>[(a(!0),p(Y,null,te(u.value,$=>(a(),p("div",{key:$.key,class:"p-1.5"},[$.group&&!$.hideLabel?(a(),p("div",ys,I($.group),1)):A("",!0),(a(!0),p(Y,null,te($.items,w=>(a(),W(C(fs),{key:w.label},{default:q(({active:_})=>[w.component?(a(),W(Re(w.component),{key:0,active:_},null,8,["active"])):(a(),p("button",{key:1,class:N([_?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:w.onClick},[w.icon&&typeof w.icon=="string"?(a(),W(Pe,{key:0,name:w.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):w.icon?(a(),W(Re(w.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):A("",!0),o("span",xs,I(w.label),1)],10,bs))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),_s={class:"flex h-full w-full flex-col items-center justify-center text-base"},ks={class:"text-xl font-medium"},Cs={class:"mt-1 text-base text-ink-gray-5"},Ss={__name:"ListEmptyState",setup(e){const t=be("list");return(s,r)=>(a(),p("div",_s,[se(s.$slots,"default",{},()=>[o("div",ks,I(C(t).options.emptyState.title),1),o("div",Cs,I(C(t).options.emptyState.description),1),C(t).options.emptyState.button?(a(),W(C(ye),$e({key:0},C(t).options.emptyState.button,{class:"mt-4"}),null,16)):A("",!0)])]))}};function $t(e,t=!0){let s=t?"14px ":"",r=e.map(l=>{let u=l.width||1;return typeof u=="number"?u+"fr":u}).join(" ");return s+r}const rt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},$s={class:"truncate"},It={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=e,r=t,l=O(null),u=O(null),m=F(()=>{if(typeof s.item.width=="string"){const c=parseInt(s.item.width);if(s.item.width.includes("rem"))return c*16;if(s.item.width.includes("px"))return c}return u.value.offsetWidth}),b=c=>{const $=c.clientX,w=m.value,_=h=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),l.value.style.backgroundColor="rgb(199 199 199)";let D=w+(h.clientX-$);s.item.width=`${D<50?50:D}px`,g(s.item.width)},v=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),l.value.style.backgroundColor="",window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",v)},g=Xt(c=>{s.item.width=c,r("columnWidthUpdated")},s.debounce),f=be("list");return(c,$)=>(a(),p("div",{ref_key:"columnRef",ref:u,class:N(["group relative flex items-center",e.item.align?C(rt)[e.item.align]:"justify-between"])},[o("div",{class:N(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",c.$attrs.class])},[se(c.$slots,"prefix",we(Me({item:e.item}))),se(c.$slots,"default",{},()=>[o("div",$s,I(e.item.label),1)]),se(c.$slots,"suffix",we(Me({item:e.item})))],2),C(f).options.resizeColumn?se(c.$slots,"resizer",we($e({key:0},{item:e.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:b},[o("div",{ref_key:"resizer",ref:l,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):A("",!0)],2))}},Pt={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=t,r=be("list");return(l,u)=>(a(),p("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Se({gridTemplateColumns:C($t)(C(r).columns,C(r).options.selectable)})},[C(r).options.selectable?(a(),W(st,{key:0,class:"cursor-pointer duration-300",modelValue:C(r).allRowsSelected,onClick:De(C(r).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):A("",!0),se(l.$slots,"default",{},()=>[(a(!0),p(Y,null,te(C(r).columns,m=>(a(),W(It,{key:m.key,item:m,onColumnWidthUpdated:b=>s("columnWidthUpdated",m)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Is={class:"truncate text-base"},Tt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const t=e,s=F(()=>{var m,b;return(m=t.column)!=null&&m.getLabel?(b=t.column)==null?void 0:b.getLabel({row:t.row}):l(t.item).label||""}),r=F(()=>u.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):l(t.item).label:"");function l(m){return m&&typeof m=="object"?m:{label:m}}const u=be("list");return(m,b)=>(a(),p("div",{class:N(["flex items-center space-x-2",C(rt)[e.align]])},[se(m.$slots,"prefix",{},()=>[e.column.prefix?(a(),W(Re(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):A("",!0)]),z(C(Ct),we(Me(C(u).options.showTooltip?{text:r.value}:{text:""})),{default:q(()=>[se(m.$slots,"default",we(Me({label:s.value})),()=>[o("div",Is,I(s.value),1)])]),_:3},16),se(m.$slots,"suffix")],2))}},at={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const t=e,s=be("list"),r=F(()=>{var c;return(c=s.value.rows)!=null&&c.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===t.row[s.value.rowKey]:!1}),l=F(()=>s.value.selections.has(t.row[s.value.rowKey])),u=F(()=>s.value.options.enableActive&&s.value.activeRow.value===t.row.name),m=F(()=>s.value.options.getRowRoute||s.value.options.onRowClick),b=F(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),g=F(()=>{var w,_,v;if(!l.value)return"rounded";const c=[...s.value.selections];let $=(w=s.value.rows[0])!=null&&w.group?s.value.rows.map(h=>h.rows):[s.value.rows];for(let h of $){let D=h.findIndex(M=>M==t.row);if(D===-1)continue;let x=!c.includes((_=h[D+1])==null?void 0:_.name),k=!c.includes((v=h[D-1])==null?void 0:v.name);return(x?"rounded-b ":"")+(k?"rounded-t":"")}}),f=(c,$)=>{s.value.options.onRowClick&&s.value.options.onRowClick(c,$),s.value.activeRow.value===c.name?s.value.activeRow.value=null:s.value.activeRow.value=c.name};return(c,$)=>(a(),W(Re(C(s).options.getRowRoute?"router-link":"div"),$e({class:[[g.value,l.value||u.value?"bg-surface-gray-2":"",m.value?"cursor-pointer":"",m.value?l.value||u.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:C(s).options.getRowRoute?C(s).options.getRowRoute(e.row):void 0,onClick:w=>f(e.row,w)}),{default:q(()=>[(a(),W(Re(C(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:q(()=>{var w,_;return[o("div",{class:"grid items-center space-x-4 px-2",style:Se({height:b.value,gridTemplateColumns:C($t)(C(s).columns,C(s).options.selectable)})},[C(s).options.selectable?(a(),p("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:$[1]||($[1]=De(()=>{},["stop","prevent"])),onDblclick:$[2]||($[2]=De(()=>{},["stop"]))},[z(st,{modelValue:l.value,class:"cursor-pointer duration-300",onClick:$[0]||($[0]=De(v=>C(s).toggleRow(e.row[C(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):A("",!0),(a(!0),p(Y,null,te(C(s).columns,(v,h)=>(a(),p("div",{key:v.key,class:N([C(rt)[v.align],h==0?"text-ink-gray-9":"text-ink-gray-7"])},[se(c.$slots,"default",$e({ref_for:!0},{idx:h,column:v,item:e.row[v.key],isActive:u.value}),()=>[C(s).slots.cell?(a(),W(Re(C(s).slots.cell),$e({key:0,ref_for:!0},{column:v,row:e.row,item:e.row[v.key],align:v.align}),null,16)):(a(),W(Tt,{key:1,column:v,row:e.row,item:e.row[v.key],align:v.align},null,8,["column","row","item","align"]))])],2))),128))],4),r.value?A("",!0):(a(),p("div",{key:0,class:N(["h-px border-t",g.value==="rounded"||(_=(w=g.value)==null?void 0:w.includes)!=null&&_.call(w,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Ps={class:"h-full overflow-y-auto"},Rt={__name:"ListRows",setup(e){const t=be("list");return(s,r)=>(a(),p("div",Ps,[se(s.$slots,"default",{},()=>[(a(!0),p(Y,null,te(C(t).rows,l=>(a(),W(at,{key:l[C(t).rowKey],row:l},null,8,["row"]))),128))])]))}},Ts={},Rs={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ds(e,t){return a(),p("svg",Rs,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Ms=je(Ts,[["render",Ds]]),Fs={class:"flex items-center"},Os={class:"w-full py-1.5 pr-2"},As={key:1,class:"text-base font-medium leading-6"},Vs={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const t=e,s=be("list");function r(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(l,u)=>(a(),p(Y,null,[o("div",Fs,[o("button",{onClick:r,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[z(Ms,{class:N(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),se(l.$slots,"default",{},()=>[o("div",Os,[C(s).slots["group-header"]?(a(),W(Re(C(s).slots["group-header"]),we($e({key:0},{group:e.group})),null,16)):(a(),p("span",As,I(e.group.group),1))])])]),u[0]||(u[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Es={key:0,class:"mb-5 mt-2"},Ls={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const t=be("list");return(s,r)=>e.group.collapsed?A("",!0):(a(),p("div",Es,[se(s.$slots,"default",{},()=>[(a(!0),p(Y,null,te(e.group.rows,l=>(a(),W(at,{key:l[C(t).rowKey],row:l},null,8,["row"]))),128))])]))}},js={class:"h-full overflow-y-auto"},Us={__name:"ListGroups",setup(e){const t=be("list");return(s,r)=>(a(),p("div",js,[(a(!0),p(Y,null,te(C(t).rows,l=>(a(),p("div",{key:l.group},[se(s.$slots,"default",{},()=>[z(Vs,{group:l},{default:q(()=>[s.$slots["group-header"]?se(s.$slots,"group-header",$e({key:0,ref_for:!0},{group:l})):A("",!0)]),_:2},1032,["group"]),z(Ls,{group:l},null,8,["group"])])]))),128))]))}},Bs={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Ns={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},zs={class:"flex items-center space-x-3"},Hs={class:"mr-3"},Js={class:"flex items-center space-x-1"},Dt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const t=be("list");let s=F(()=>t.value.options.selectionText(t.value.selections.size));return(r,l)=>(a(),W(Yt,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:q(()=>[C(t).selections.size?(a(),p("div",Bs,[o("div",{class:N(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",r.$attrs.class])},[se(r.$slots,"default",we(Me({selections:C(t).selections,allRowsSelected:C(t).allRowsSelected,selectAll:()=>C(t).toggleAllRows(!0),unselectAll:()=>C(t).toggleAllRows(!1)})),()=>[o("div",Ns,[o("div",zs,[z(st,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,I(C(s)),1)]),o("div",Hs,[se(r.$slots,"actions",we(Me({selections:C(t).selections,allRowsSelected:C(t).allRowsSelected,selectAll:()=>C(t).toggleAllRows(!0),unselectAll:()=>C(t).toggleAllRows(!1)})))])]),o("div",Js,[z(C(ye),{class:N(["w- text-ink-gray-7",C(t).allRowsSelected?"cursor-not-allowed":""]),disabled:C(t).allRowsSelected,variant:"ghost",onClick:l[0]||(l[0]=u=>C(t).toggleAllRows(!0))},{default:q(()=>l[2]||(l[2]=[oe(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),z(C(ye),{icon:"x",variant:"ghost",onClick:l[1]||(l[1]=u=>C(t).toggleAllRows(!1))})])])],2)])):A("",!0)]),_:3}))}}),qs={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ks=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:t,emit:s}){const r=e,l=Zt();let u=es(new Set),m=O(null);const b=s;_e(u,v=>{u.size&&(m.value=null),b("update:selections",v)}),_e(m,v=>{b("update:active-row",v)});let g=F(()=>{function v(D){return D===void 0?!0:D}function h(D){return D===void 0?!1:D}return{getRowRoute:r.options.getRowRoute||null,onRowClick:r.options.onRowClick||null,showTooltip:v(r.options.showTooltip),selectionText:r.options.selectionText||(D=>D===1?"1 row selected":`${D} rows selected`),enableActive:h(r.options.enableActive),selectable:v(r.options.selectable),resizeColumn:h(r.options.resizeColumn),rowHeight:r.options.rowHeight||40,emptyState:r.options.emptyState}});const f=F(()=>r.rows.length?$.value?u.size===r.rows.reduce((v,h)=>v+h.rows.length,0):u.size===r.rows.length:!1),c=F(()=>g.value.selectable);let $=F(()=>r.rows.every(v=>v.group&&v.rows&&Array.isArray(v.rows)));function w(v){u.delete(v)||u.add(v)}function _(v){if(!v||f.value){u.clear();return}if($.value){r.rows.forEach(h=>{h.rows.forEach(D=>u.add(D[r.rowKey]))});return}r.rows.forEach(h=>u.add(h[r.rowKey]))}return _t("list",F(()=>({rowKey:r.rowKey,rows:r.rows,columns:r.columns,options:g.value,selections:u,activeRow:m,allRowsSelected:f.value,slots:l,toggleRow:w,toggleAllRows:_}))),t({selections:u,allRowsSelected:f,toggleRow:w,toggleAllRows:_}),(v,h)=>(a(),p("div",qs,[o("div",{class:N(["flex w-max min-w-full flex-col overflow-y-hidden",v.$attrs.class]),style:Se(v.$attrs.style)},[se(v.$slots,"default",we(Me({showGroupedRows:C($),selectable:c.value})),()=>[z(Pt),r.rows.length?(a(),p(Y,{key:0},[C($)?(a(),W(Us,{key:0})):(a(),W(Rt,{key:1}))],64)):(a(),W(Ss,{key:1})),c.value?(a(),W(Dt,{key:2})):A("",!0)])],6)]))}});function Ws(r,l){return de(this,arguments,function*(e,t,s={}){t||(t={});let u=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},s.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(u["X-Frappe-CSRF-Token"]=window.csrf_token);let m=e.startsWith("/")?e:`/api/method/${e}`;const b=yield fetch(m,{method:"POST",headers:u,body:JSON.stringify(t)});if(b.ok){const g=yield b.json();if(g.docs||e==="login")return g;if(g.exc)try{console.groupCollapsed(e),console.log(`method: ${e}`),console.log("params:",t);let f=JSON.parse(g.exc);for(let c of f)console.log(c);console.groupEnd()}catch(f){console.warn("Error printing debug messages",f)}return g.message}else{let g=yield b.text(),f,c;try{f=JSON.parse(g)}catch(_){}let $=[[e,f.exc_type,f._error_message].filter(Boolean).join(" ")];if(f.exc){c=f.exc;try{c=JSON.parse(c)[0],console.log(c)}catch(_){}}let w=new Error($.join(`
`));throw w.exc_type=f.exc_type,w.exc=c,w.status=b.status,w.messages=f._server_messages?JSON.parse(f._server_messages):[],w.messages=w.messages.concat(f.message),w.messages=w.messages.map(_=>{try{return JSON.parse(_).message}catch(v){return _}}),w.messages=w.messages.filter(Boolean),w.messages.length||(w.messages=f._error_message?[f._error_message]:["Internal Server Error"]),s.onError&&s.onError({response:b,status:b.status,error:w}),w}})}const pe=ke({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(e){const t=e||{},s=t.limit_page_length||10,r=t.limit_start||0,l=t.filters||{},u=t.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:s,limit_start:r,filters:l,order_by:u}),{limit_page_length:s,limit_start:r,filters:l,order_by:u}},onError(e){console.error("Failed to fetch issues:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Mt=ke({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(e){const t=e||{},s=t.filters||t||{};return console.log("issuesCountResource filters:",s),{filters:s}},onError(e){console.error("Failed to fetch issues count:",e)}});function Le(e={}){const t={limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,filters:e.filters||{},order_by:e.order_by||"creation desc"};return console.log("reloadIssues with params:",t),pe.reload(t)}function We(e={}){return console.log("getIssuesCount with filters:",e),Mt.reload(e)}const Ft=ke({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(e){return{issue_name:e}},onError(e){console.error("Failed to fetch single issue:",e)},auto:!1});function Qs(e){return Ft.reload(e)}const Gs=ke({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(e){console.error("Failed to fetch issue priorities:",e)},auto:!0}),Xs=ke({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(e){console.error("Failed to fetch issue types:",e)},auto:!0});ke({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(e){console.error("Failed to fetch projects:",e)},auto:!0});let ze=null,yt=null,He=null,bt=null;function Ys(){const e=Gs.data||[],t=JSON.stringify(e);if(ze&&yt===t)return ze;const s=[{label:"All Priority",value:""},...e.map(r=>({label:r.name,value:r.name}))];return ze=Object.freeze(s),yt=t,ze}function Zs(){const e=Xs.data||[],t=JSON.stringify(e);if(He&&bt===t)return He;const s=[{label:"All Types",value:""},...e.map(r=>({label:r.name,value:r.name}))];return He=Object.freeze(s),bt=t,He}const eo=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function to(){return eo}const so=ke({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(e){console.error("Failed to fetch tag colors:",e)},auto:!0}),Je=new Map;let xt=null;function oo(e){const t=so.data||{},s=JSON.stringify(t);if(xt!==s&&(Je.clear(),xt=s),Je.has(e))return Je.get(e);const r=t[e]||null;return Je.set(e,r),r}const Ze=ke({url:"force_trans_customization.api.issues.issue_search",makeParams(e){const t=e||{};return{search_query:t.search_query||"",limit:t.limit||8}},onError(e){console.error("Failed to search issues:",e)},auto:!1});function ro(e,t=8){return!e||e.length<2?Promise.resolve(Ze.data||[]):Ze.reload({search_query:e,limit:t}).then(()=>Ze.data||[])}const ge=ke({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to filter issues by stat:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),Ot=ke({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to get stat filter count:",e)},auto:!1});function et(e,t={}){const s={stat_type:e,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),console.log("filterIssuesByStat params:",s),ge.reload(s)}function qe(e,t=null){const s={stat_type:e};return t&&(s.filters=t),Ot.reload(s)}const ao={class:"relative w-full max-w-2xl mx-auto"},lo={class:"relative group"},no=["placeholder"],io={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},uo={key:1,class:"flex items-center pointer-events-none"},co={key:2,class:"animate-spin"},po={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},go={class:"flex items-center justify-between"},mo={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},fo={class:"text-xs text-slate-500"},vo={key:0,class:"px-6 py-8 text-center"},ho=["onClick"],yo={class:"flex items-start space-x-4"},bo={class:"flex-1 min-w-0"},xo={class:"flex items-start justify-between"},wo={class:"flex-1 min-w-0"},_o={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},ko=["innerHTML"],Co={class:"text-xs text-slate-500 mt-1 line-clamp-2"},So={key:0,class:"ml-2"},$o={class:"flex-shrink-0 ml-4"},Io={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Po={key:0,class:"flex items-center"},To={key:1,class:"flex items-center"},Ro={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Do={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(e,{expose:t,emit:s}){const r=e,l=s,u=O(null),m=O(r.modelValue),b=O(!1),g=O(!1),f=O(-1),c=O(!1),$=O(0),w=O(null),_=O([]);let v=null;_e(()=>r.modelValue,T=>{m.value=T}),_e(m,T=>{l("update:modelValue",T),l("search",T)});const h=O([]),D=T=>de(this,null,function*(){if(!T||T.length<2){h.value=[],g.value=!1,c.value=!1;return}try{c.value=!0;const V=performance.now(),J=yield ro(T,8);$.value=performance.now()-V,h.value=J||[],g.value=!0}catch(V){console.error("Search error:",V),h.value=[],g.value=!1}finally{c.value=!1}}),x=T=>{if(v&&clearTimeout(v),f.value=-1,!T||T.length<2){h.value=[],g.value=!1,c.value=!1;return}c.value=!0,v=setTimeout(()=>{D(T)},1e3)},k=()=>{x(m.value)},M=(T,V)=>{if(!T||!V)return T;const J=V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),le=new RegExp(`(${J})`,"gi");return T.replace(le,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},H=T=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[T]||"bg-gray-100 text-gray-800 border border-gray-200",U=()=>{b.value=!0,j&&(clearTimeout(j),j=null),m.value.length>=2&&(h.value.length>0?g.value=!0:D(m.value))};let j=null;const B=()=>{b.value=!1,j=setTimeout(()=>{g.value=!1,j=null},200)},L=T=>{var V;if(g.value)switch(T.key){case"ArrowDown":T.preventDefault(),f.value=Math.min(f.value+1,h.value.length-1),G();break;case"ArrowUp":T.preventDefault(),f.value=Math.max(f.value-1,-1),G();break;case"Enter":T.preventDefault(),f.value>=0&&K(h.value[f.value]);break;case"Escape":Z(),(V=u.value)==null||V.blur();break}},K=T=>{m.value=T.name,Z();const J=`${window.location.origin}/app/issue/${T.name}`;window.open(J,"_blank"),l("suggestion-selected",T)},E=()=>{var T;m.value="",Z(),(T=u.value)==null||T.focus()},Z=()=>{g.value=!1,f.value=-1},G=()=>{if(f.value<0||!w.value||!_.value[f.value])return;const T=w.value,V=_.value[f.value];if(V){const J=T.getBoundingClientRect(),le=V.getBoundingClientRect(),ee=le.top-J.top+T.scrollTop,Ce=ee+le.height,Ie=T.scrollTop,ce=T.clientHeight;ee<Ie?T.scrollTop=ee:Ce>Ie+ce&&(T.scrollTop=Ce-ce)}},X=T=>{if(!T)return"";try{const V=new Date(T),J=new Date,le=Math.abs(J-V),ee=Math.ceil(le/(1e3*60*60*24));return ee===1?"Today":ee===2?"Yesterday":ee<=7?`${ee-1} days ago`:V.toLocaleDateString("en-US",{month:"short",day:"numeric",year:V.getFullYear()!==J.getFullYear()?"numeric":void 0})}catch(V){return console.error("Error formatting date:",V),T}},ae=T=>{var V,J;(T.metaKey||T.ctrlKey)&&T.key==="k"&&(T.preventDefault(),(V=u.value)==null||V.focus(),(J=u.value)==null||J.select())};return Fe(()=>{document.addEventListener("keydown",ae)}),Ge(()=>{document.removeEventListener("keydown",ae),v&&clearTimeout(v),j&&clearTimeout(j)}),t({focus:()=>{var T,V;(T=u.value)==null||T.focus(),(V=u.value)==null||V.select()},select:()=>{var T;return(T=u.value)==null?void 0:T.select()},$el:u}),(T,V)=>(a(),p("div",ao,[o("div",lo,[V[4]||(V[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),me(o("input",{ref_key:"searchInput",ref:u,type:"text","onUpdate:modelValue":V[0]||(V[0]=J=>m.value=J),onInput:k,onFocus:U,onBlur:B,onKeydown:L,placeholder:e.placeholder,class:N(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":b.value,"bg-slate-50/50":!b.value&&m.value}])},null,42,no),[[he,m.value]]),o("div",io,[m.value?(a(),p("button",{key:0,onClick:E,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},V[1]||(V[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):A("",!0),!m.value&&!b.value?(a(),p("div",uo,V[2]||(V[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),oe("K ")],-1)]))):A("",!0),c.value?(a(),p("div",co,V[3]||(V[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0)])]),g.value?(a(),p("div",{key:0,class:N(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":g.value}])},[h.value.length>0?(a(),p("div",po,[o("div",go,[o("span",mo,I(h.value.length)+" Result"+I(h.value.length!==1?"s":""),1),o("span",fo,I(Math.round($.value))+"ms ",1)])])):A("",!0),o("div",{ref_key:"suggestionsContainer",ref:w,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[h.value.length===0&&m.value.length>=2?(a(),p("div",vo,V[5]||(V[5]=[dt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):A("",!0),(a(!0),p(Y,null,te(h.value,(J,le)=>(a(),p("div",{key:J.name||le,ref_for:!0,ref:ee=>_.value[le]=ee,onClick:ee=>K(J),class:N(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":le===f.value}])},[o("div",yo,[V[8]||(V[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",bo,[o("div",xo,[o("div",wo,[o("h4",_o,[o("span",{innerHTML:M(J.subject||J.name,m.value)},null,8,ko)]),o("p",Co,[oe(" ID: "+I(J.name)+" ",1),J.customer?(a(),p("span",So,"• "+I(J.customer),1)):A("",!0)])]),o("div",$o,[o("span",{class:N(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",H(J.status)])},I(J.status),3)])]),o("div",Io,[J.raised_by?(a(),p("div",Po,[V[6]||(V[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),oe(" "+I(J.raised_by),1)])):A("",!0),J.creation?(a(),p("div",To,[V[7]||(V[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),oe(" "+I(X(J.creation)),1)])):A("",!0)])])])],10,ho))),128))],512),m.value&&h.value.length>0?(a(),p("div",Ro,V[9]||(V[9]=[dt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):A("",!0)],2)):A("",!0),g.value?(a(),p("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:Z})):A("",!0)]))}},Mo=je(Do,[["__scopeId","data-v-4969cdcf"]]),Fo={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Oo={class:"mb-6"},Ao={class:"relative max-w-2xl mx-auto"},Vo={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Eo={class:"border-t border-gray-200 pt-4"},Lo={class:"flex items-center justify-between"},jo={class:"flex items-center space-x-3 flex-1"},Uo={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Bo={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},No={class:"text-green-800 font-medium"},zo={class:"text-green-600"},Ho={class:"text-green-900"},Jo=["onClick"],qo={class:"flex items-center space-x-2 ml-4"},Ko=["disabled"],Wo={key:0,class:"flex items-center"},Qo={key:1},Go={key:0,class:"relative"},Xo={class:"flex"},Yo={class:"w-48 border-r border-gray-200 bg-gray-50"},Zo={class:"max-h-64 overflow-y-auto"},er=["onClick"],tr={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},sr={class:"flex-1 min-w-96"},or={class:"p-4"},rr={key:0,class:"text-center py-8 text-gray-500"},ar={key:1,class:"space-y-4"},lr={class:"col-span-2 flex items-center"},nr={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},ir={class:"col-span-2 flex items-center"},ur={class:"text-gray-700 font-medium truncate"},cr={class:"col-span-7"},dr=["onUpdate:modelValue","placeholder"],pr=["onUpdate:modelValue","placeholder"],gr={key:2,class:"space-y-2"},mr={key:0,class:"grid grid-cols-2 gap-2"},fr=["onUpdate:modelValue","onInput"],vr=["onUpdate:modelValue","onInput"],hr={key:1},yr=["onUpdate:modelValue"],br={key:3,class:"space-y-2"},xr={key:0,class:"grid grid-cols-2 gap-2"},wr=["onUpdate:modelValue","onInput"],_r=["onUpdate:modelValue","onInput"],kr={key:1},Cr=["onUpdate:modelValue"],Sr={key:4,class:"relative"},$r={key:0},Ir=["onUpdate:modelValue"],Pr={value:""},Tr=["value"],Rr={key:1,class:"space-y-2"},Dr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Mr=["onClick"],Fr={key:5,class:"space-y-2"},Or={class:"space-y-2"},Ar={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Vr=["onClick"],Er={class:"relative"},Lr=["onUpdate:modelValue","onInput","placeholder"],jr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Ur={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Br=["onClick"],Nr={class:"font-medium text-gray-900"},zr={class:"text-xs text-gray-500"},Hr={key:6,class:"space-y-2"},Jr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},qr=["onClick"],Kr={class:"relative"},Wr=["onUpdate:modelValue","onInput","onKeyup"],Qr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Gr={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Xr=["onClick"],Yr={class:"flex items-center justify-between"},Zr={class:"font-medium text-gray-900"},ea={class:"text-xs text-gray-500"},ta={class:"col-span-1 flex items-start justify-center pt-1"},sa=["onClick"],oa={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},ra=["disabled"],aa={key:0,class:"flex items-center"},la={key:1},na={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(e,{emit:t}){const s=e,r=t,l=O(s.searchQuery),u=O(!1),m=O([]),b=O([]);let g=0;const f=O(!1),c=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],$={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},w={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},_=F(()=>JSON.stringify(m.value)!==JSON.stringify(b.value)),v=n=>{const i=c.find(d=>d.value===n);return(i==null?void 0:i.type)||"text"},h=n=>{const i=c.find(d=>d.value===n);return(i==null?void 0:i.label)||n},D=n=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[n]||`Enter ${h(n).toLowerCase()}...`,x=n=>{const i=v(n);return w[i]||w.text},k=n=>$[n]||[],M=n=>n.displayValue?n.displayValue:Array.isArray(n.value)?n.value.join(", "):n.value,H=n=>n?typeof n=="string"?n.split(",").map(i=>i.trim()).filter(Boolean):n:[],U=(n,i)=>{const d=H(n.value);d.splice(i,1),n.value=d.join(", ")},j=n=>n?n.split(",").map(i=>i.trim()).filter(Boolean):[],B=(n,i)=>{const d=j(n.value);d.splice(i,1),n.value=d.join(", ")},L=(n,i)=>i.userDisplayMap&&i.userDisplayMap[n]?i.userDisplayMap[n]:n,K=(n,i)=>{const d=H(n.value);d.includes(i.value)||(d.push(i.value),n.value=d.join(", "),n.userDisplayMap||(n.userDisplayMap={}),n.userDisplayMap[i.value]=i.label),n.searchValue="",n.suggestions=[]};let E={};const Z=(n,i)=>de(this,null,function*(){n.loadingTags=!0,E[n.id]&&clearTimeout(E[n.id]),E[n.id]=setTimeout(()=>de(this,null,function*(){try{const d=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:i||"",limit:15})});if(d.ok){const Q=yield d.json();n.tagSuggestions=Q.message||[]}}catch(d){console.error("Tag search error:",d),n.tagSuggestions=[]}finally{n.loadingTags=!1}}),300)}),G=n=>{if(!n.tagInput||!n.tagInput.trim())return;const i=n.tagInput.replace(",","").trim(),d=j(n.value);i&&!d.includes(i)&&(d.push(i),n.value=d.join(", ")),n.tagInput="",n.tagSuggestions=[]},X=(n,i)=>{const d=j(n.value);d.includes(i.value)||(d.push(i.value),n.value=d.join(", ")),n.tagInput="",n.tagSuggestions=[]};let ae={};const T=(n,i)=>de(this,null,function*(){n.searchValue=i,n.loading=!0,ae[n.id]&&clearTimeout(ae[n.id]),ae[n.id]=setTimeout(()=>de(this,null,function*(){try{let d=[],Q="";if(n.field==="customer"?Q="/api/method/force_trans_customization.api.issues.search_customers":n.field==="contact"?Q="/api/method/force_trans_customization.api.issues.search_contacts":n.field==="lead"?Q="/api/method/force_trans_customization.api.issues.search_leads":n.field==="custom_assigned_csm_team"?Q="/api/method/force_trans_customization.api.issues.search_user_groups":n.field==="custom_users_assigned"&&(Q="/api/method/force_trans_customization.api.issues.search_users"),Q){const R=yield fetch(Q,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:i||"",limit:10,doctype_filter:n.field==="custom_users_assigned"?"User":void 0})});R.ok&&(d=(yield R.json()).message||[])}n.suggestions=d}catch(d){console.error("Search error:",d),n.suggestions=[]}finally{n.loading=!1}}),300)}),V=(n,i)=>x(n).map(Q=>({label:Q.label,onClick:()=>{i.operator!==Q.value&&(v(n)==="date"&&(Q.value==="between"?i.value&&!i.startValue&&(i.startValue=i.value,i.endValue=""):i.operator==="between"&&(i.startValue&&!i.value&&(i.value=i.startValue),i.startValue="",i.endValue="")),i.multiSelectValue=null,i.searchValue="",i.suggestions=[],i.searchOptions=[]),i.operator=Q.value}})),J=(n,i)=>{var Q;return((Q=x(i).find(R=>R.value===n))==null?void 0:Q.label)||n},le=(n,i)=>{const Q=k(i).find(R=>R.value===n);return Q?Q.label:n},ee=n=>{n.startValue&&n.endValue?n.value=`${n.startValue},${n.endValue}`:n.value=""},Ce=n=>{var R;const i=v(n);let d="equals";i==="link"?d="in":i==="tags"?d="has":d=((R=x(n)[0])==null?void 0:R.value)||"equals";const Q={id:++g,field:n,operator:d,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},tagInput:"",tagSuggestions:[],loadingTags:!1};m.value.push(Q)},Ie=n=>{m.value.splice(n,1)},ce=n=>{b.value.splice(n,1),S()},ne=()=>de(this,null,function*(){if(_.value){f.value=!0;try{b.value=JSON.parse(JSON.stringify(m.value)),S(),u.value=!1}catch(n){console.error("Error applying filters:",n)}finally{setTimeout(()=>{f.value=!1},500)}}}),Ee=()=>{m.value=[],b.value=[],l.value="",r("update:searchQuery",""),r("update:filters",[]),r("filters-applied",[]),u.value=!1},S=()=>{const n=b.value.filter(i=>i.value&&i.value.toString().trim()).map(i=>({field:i.field,operator:i.operator,value:i.value.toString().trim(),displayValue:i.displayValue||null}));console.log("Emitting filters:",n),r("update:filters",n),r("filters-applied",n)},y=n=>{l.value=n,r("update:searchQuery",n)},P=n=>{r("suggestion-selected",n)};return _e(()=>s.searchQuery,n=>{l.value=n}),Fe(()=>{const n=localStorage.getItem("issue_filters");if(n)try{const i=JSON.parse(n);b.value=i.applied||[],m.value=i.pending||[]}catch(i){console.warn("Failed to parse saved filters:",i)}_e(()=>m.value,i=>{i.forEach(d=>{v(d.field)==="link"&&d.searchValue&&T(d,d.searchValue)})},{deep:!0})}),_e([b,m],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:b.value,pending:m.value}))},{deep:!0}),(n,i)=>(a(),p("div",Fo,[o("div",Oo,[o("div",Ao,[z(Mo,{ref:"searchBoxRef","model-value":l.value,"onUpdate:modelValue":y,onSuggestionSelected:P,issues:e.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),l.value?(a(),p("div",Vo," Searching in "+I(e.filteredCount)+" issues ",1)):A("",!0)])]),o("div",Eo,[o("div",Lo,[o("div",jo,[o("button",{onClick:i[0]||(i[0]=d=>u.value=!u.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[i[3]||(i[3]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),i[4]||(i[4]=o("span",null,"Filters",-1)),b.value.length>0?(a(),p("span",Uo,I(b.value.length),1)):A("",!0)]),b.value.length>0?(a(),p("div",Bo,[(a(!0),p(Y,null,te(b.value,(d,Q)=>(a(),p("div",{key:d.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",No,I(h(d.field)),1),o("span",zo,I(d.operator),1),o("span",Ho,I(M(d)),1),o("button",{onClick:R=>ce(Q),class:"text-green-400 hover:text-red-600 ml-1"},i[5]||(i[5]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Jo)]))),128))])):A("",!0)]),o("div",qo,[b.value.length>0||l.value?(a(),p("button",{key:0,onClick:Ee,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):A("",!0),m.value.length>0?(a(),p("button",{key:1,onClick:ne,class:N(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",f.value?"bg-blue-500 text-white cursor-wait":_.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!_.value||f.value},[f.value?(a(),p("span",Wo,i[6]||(i[6]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),oe(" Applying... ")]))):(a(),p("span",Qo,I(_.value?"Apply Filters":"Filters Applied"),1))],10,Ko)):A("",!0)])])]),u.value?(a(),p("div",Go,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:i[1]||(i[1]=De(()=>{},["stop"]))},[o("div",Xo,[o("div",Yo,[i[7]||(i[7]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",Zo,[(a(),p(Y,null,te(c,d=>o("button",{key:d.value,onClick:De(Q=>Ce(d.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,I(d.label),1),o("span",tr,I(d.type),1)],8,er)),64))])]),o("div",sr,[o("div",or,[m.value.length===0?(a(),p("div",rr,i[8]||(i[8]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(a(),p("div",ar,[(a(!0),p(Y,null,te(m.value,(d,Q)=>(a(),p("div",{key:d.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",lr,[o("span",nr,I(h(d.field)),1)]),o("div",ir,[z(C(ws),{options:V(d.field,d),placement:"left"},{default:q(({open:R})=>[o("button",{class:N(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",R?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",ur,I(J(d.operator,d.field)),1),i[9]||(i[9]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",cr,[v(d.field)==="text"?me((a(),p("input",{key:0,"onUpdate:modelValue":R=>d.value=R,type:"text",placeholder:D(d.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,dr)),[[he,d.value]]):v(d.field)==="email"?me((a(),p("input",{key:1,"onUpdate:modelValue":R=>d.value=R,type:"email",placeholder:D(d.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,pr)),[[he,d.value]]):v(d.field)==="datetime"?(a(),p("div",gr,[d.operator==="between"?(a(),p("div",mr,[o("div",null,[me(o("input",{"onUpdate:modelValue":R=>d.startValue=R,type:"datetime-local",placeholder:"Start date and time",onInput:R=>ee(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,fr),[[he,d.startValue]]),i[10]||(i[10]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[me(o("input",{"onUpdate:modelValue":R=>d.endValue=R,type:"datetime-local",placeholder:"End date and time",onInput:R=>ee(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,vr),[[he,d.endValue]]),i[11]||(i[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(a(),p("div",hr,[me(o("input",{"onUpdate:modelValue":R=>d.value=R,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,yr),[[he,d.value]]),i[12]||(i[12]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):v(d.field)==="date"?(a(),p("div",br,[d.operator==="between"?(a(),p("div",xr,[o("div",null,[me(o("input",{"onUpdate:modelValue":R=>d.startValue=R,type:"date",onInput:R=>ee(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,wr),[[he,d.startValue]]),i[13]||(i[13]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[me(o("input",{"onUpdate:modelValue":R=>d.endValue=R,type:"date",onInput:R=>ee(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,_r),[[he,d.endValue]]),i[14]||(i[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(a(),p("div",kr,[me(o("input",{"onUpdate:modelValue":R=>d.value=R,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Cr),[[he,d.value]])]))])):v(d.field)==="select"?(a(),p("div",Sr,[d.isMultiSelect?(a(),p("div",Rr,[H(d.value).length>0?(a(),p("div",Dr,[(a(!0),p(Y,null,te(H(d.value),(R,ie)=>(a(),p("span",{key:ie,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[oe(I(le(R,d.field))+" ",1),o("button",{onClick:Ue=>U(d,ie),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},i[15]||(i[15]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Mr)]))),128))])):A("",!0)])):(a(),p("div",$r,[d.field==="priority"||d.field==="status"||d.field==="issue_type"?me((a(),p("select",{key:0,"onUpdate:modelValue":R=>d.value=R,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Pr,"Select "+I(h(d.field))+"...",1),(a(!0),p(Y,null,te(k(d.field),R=>(a(),p("option",{key:R.value,value:R.value},I(R.label),9,Tr))),128))],8,Ir)),[[ts,d.value]]):A("",!0)]))])):v(d.field)==="link"?(a(),p("div",Fr,[o("div",Or,[H(d.value).length>0?(a(),p("div",Ar,[(a(!0),p(Y,null,te(H(d.value),(R,ie)=>(a(),p("span",{key:ie,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[oe(I(L(R,d))+" ",1),o("button",{onClick:Ue=>U(d,ie),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},i[16]||(i[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Vr)]))),128))])):A("",!0),o("div",Er,[me(o("input",{"onUpdate:modelValue":R=>d.searchValue=R,onInput:R=>T(d,d.searchValue),type:"text",placeholder:`Search and add ${h(d.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Lr),[[he,d.searchValue]]),d.loading?(a(),p("div",jr,i[17]||(i[17]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0)]),d.suggestions&&d.suggestions.length>0&&d.searchValue?(a(),p("div",Ur,[(a(!0),p(Y,null,te(d.suggestions,(R,ie)=>(a(),p("button",{key:ie,onClick:Ue=>K(d,R),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Nr,I(R.label),1),o("div",zr,I(R.subtitle),1)],8,Br))),128))])):A("",!0)])])):v(d.field)==="tags"?(a(),p("div",Hr,[j(d.value).length>0?(a(),p("div",Jr,[(a(!0),p(Y,null,te(j(d.value),(R,ie)=>(a(),p("span",{key:ie,class:"inline-flex items-center px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full border border-purple-200 hover:bg-purple-200 transition-colors"},[oe(I(R)+" ",1),o("button",{onClick:Ue=>B(d,ie),class:"ml-1 text-purple-600 hover:text-red-600 transition-colors"},i[18]||(i[18]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,qr)]))),128))])):A("",!0),o("div",Kr,[me(o("input",{"onUpdate:modelValue":R=>d.tagInput=R,onInput:R=>Z(d,d.tagInput),onKeyup:[pt(R=>G(d),["enter"]),pt(R=>G(d),["comma"])],type:"text",placeholder:"Search and select tags or type new ones...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Wr),[[he,d.tagInput]]),d.loadingTags?(a(),p("div",Qr,i[19]||(i[19]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):A("",!0)]),d.tagSuggestions&&d.tagSuggestions.length>0?(a(),p("div",Gr,[(a(!0),p(Y,null,te(d.tagSuggestions,(R,ie)=>(a(),p("button",{key:ie,onClick:Ue=>X(d,R),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Yr,[o("div",null,[o("div",Zr,I(R.label),1),o("div",ea,I(R.subtitle),1)]),R.color?(a(),p("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:Se({backgroundColor:R.color})},null,4)):A("",!0)])],8,Xr))),128))])):A("",!0),i[20]||(i[20]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags or press Enter/comma to create new tags",-1))])):A("",!0)]),o("div",ta,[o("button",{onClick:R=>Ie(Q),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},i[21]||(i[21]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,sa)])]))),128))])),m.value.length>0?(a(),p("div",oa,[o("button",{onClick:Ee,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:ne,disabled:!_.value||f.value,class:N(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",f.value?"bg-gray-700 text-white cursor-wait":_.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[f.value?(a(),p("span",aa,i[22]||(i[22]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),oe(" Applying... ")]))):(a(),p("span",la,I(_.value?"Apply Filters":"Filters Applied"),1))],10,ra)])):A("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:i[2]||(i[2]=d=>u.value=!1)})])):A("",!0)]))}},ia=je(na,[["__scopeId","data-v-00077ff0"]]),ua={class:"bg-white rounded-lg shadow-sm border mt-4"},ca={class:"px-6 py-4 flex items-center justify-between"},da={class:"text-sm text-gray-700"},pa={key:0},ga={key:1},ma={key:0,class:"flex items-center space-x-2"},fa={class:"flex items-center space-x-1"},va={key:1,class:"px-2 text-gray-500"},ha={key:2,class:"px-2 text-gray-500"},ya={key:1,class:"flex items-center space-x-2"},ba={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(e,{emit:t}){const s=e,r=t,l=O(s.itemsPerPage);_e(()=>s.itemsPerPage,k=>{l.value=k});const u=F(()=>Math.ceil(s.totalItems/s.itemsPerPage)),m=F(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),b=F(()=>{const k=s.currentPage*s.itemsPerPage;return Math.min(k,s.totalItems)}),g=F(()=>{const k=[],M=s.maxVisiblePages,H=s.currentPage,U=u.value;if(U<=M)for(let j=1;j<=U;j++)k.push(j);else{let j=Math.max(1,H-Math.floor(M/2)),B=Math.min(U,j+M-1);B-j+1<M&&(j=Math.max(1,B-M+1)),j>1&&(j=Math.max(2,j)),B<U&&(B=Math.min(U-1,B));for(let L=j;L<=B;L++)k.push(L)}return k}),f=F(()=>u.value>s.maxVisiblePages&&!g.value.includes(1)),c=F(()=>u.value>s.maxVisiblePages&&!g.value.includes(u.value)),$=F(()=>f.value&&g.value.length>0&&g.value[0]>2),w=F(()=>c.value&&g.value.length>0&&g.value[g.value.length-1]<u.value-1),_=F(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),v=k=>{k>=1&&k<=u.value&&k!==s.currentPage&&(r("update:currentPage",k),r("pageChange",{page:k,itemsPerPage:s.itemsPerPage,offset:(k-1)*s.itemsPerPage}))},h=()=>{s.currentPage>1&&v(s.currentPage-1)},D=()=>{s.currentPage<u.value&&v(s.currentPage+1)},x=()=>{const k=l.value;r("update:itemsPerPage",k);const M=(s.currentPage-1)*s.itemsPerPage+1,H=Math.ceil(M/k);r("pageChange",{page:H,itemsPerPage:k,offset:(H-1)*k})};return(k,M)=>(a(),p("div",ua,[o("div",ca,[o("div",da,[e.totalItems>0?(a(),p("span",pa," Showing "+I(m.value)+" to "+I(b.value)+" of "+I(e.totalItems)+" results ",1)):(a(),p("span",ga," No results found "))]),u.value>1?(a(),p("div",ma,[z(C(ye),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===1,onClick:h},{prefix:q(()=>[z(C(Pe),{name:"chevron-left",class:"h-4 w-4"})]),default:q(()=>[M[3]||(M[3]=oe(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",fa,[f.value?(a(),W(C(ye),{key:0,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===1}),onClick:M[0]||(M[0]=H=>v(1))},{default:q(()=>M[4]||(M[4]=[oe(" 1 ")])),_:1,__:[4]},8,["class"])):A("",!0),$.value?(a(),p("span",va,"...")):A("",!0),(a(!0),p(Y,null,te(g.value,H=>(a(),W(C(ye),{key:H,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===H}),onClick:U=>v(H)},{default:q(()=>[oe(I(H),1)]),_:2},1032,["class","onClick"]))),128)),w.value?(a(),p("span",ha,"...")):A("",!0),c.value?(a(),W(C(ye),{key:3,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===u.value}),onClick:M[1]||(M[1]=H=>v(u.value))},{default:q(()=>[oe(I(u.value),1)]),_:1},8,["class"])):A("",!0)]),z(C(ye),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===u.value,onClick:D},{suffix:q(()=>[z(C(Pe),{name:"chevron-right",class:"h-4 w-4"})]),default:q(()=>[M[5]||(M[5]=oe(" Next "))]),_:1,__:[5]},8,["disabled"])])):A("",!0),e.showItemsPerPage?(a(),p("div",ya,[M[6]||(M[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),z(C(ss),{modelValue:l.value,"onUpdate:modelValue":M[2]||(M[2]=H=>l.value=H),options:_.value,onChange:x,class:"w-20"},null,8,["modelValue","options"])])):A("",!0)])]))}},xa={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},wa={class:"text-3xl font-bold text-gray-900"},_a={class:"text-3xl font-bold text-blue-600"},ka={class:"text-3xl font-bold text-green-600"},Ca={class:"text-3xl font-bold text-orange-600"},Sa={class:"text-3xl font-bold text-purple-600"},$a=3e4,Ia={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(e,{expose:t,emit:s}){const r=e,l=s,u=Ae({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),m=F(()=>u.value.team_tickets),b=F(()=>u.value.open_tickets),g=F(()=>u.value.assigned_to_me),f=F(()=>u.value.actionable_tickets),c=F(()=>u.value.response_tickets);let $=null,w=0;const _=()=>de(this,null,function*(){const x=Date.now();if($&&x-w<$a)return $;try{const k=yield Ws("force_trans_customization.api.issues.get_issue_stats");return u.value=k,$=k,w=x,k}catch(k){return console.error("Error fetching issue stats:",k),u.value}});let v=null;const h=()=>{v&&clearTimeout(v),v=setTimeout(()=>{_()},500)};Fe(()=>{_()}),_e(()=>r.issues.length,()=>{h()});const D=x=>{l("filter-changed",x)};return t({refreshStats:_}),(x,k)=>(a(),p("div",xa,[o("div",{onClick:k[0]||(k[0]=M=>D("team_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",wa,I(m.value),1),k[5]||(k[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:k[1]||(k[1]=M=>D("open_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",_a,I(b.value),1),k[6]||(k[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:k[2]||(k[2]=M=>D("assigned_to_me")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",ka,I(g.value),1),k[7]||(k[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:k[3]||(k[3]=M=>D("actionable_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Tickets where customer awaits our reply"},[o("div",Ca,I(f.value),1),k[8]||(k[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:k[4]||(k[4]=M=>D("response_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Tickets awaiting customer response"},[o("div",Sa,I(c.value),1),k[9]||(k[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Pa={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const e=this.status||"New";return{New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[e]||"gray"}},components:{Badge:ot}},Ta={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const e=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[e]||"yellow"},priorityIndicatorClass(){const e=this.priority||"Medium";return{"bg-red-500":e==="Critical","bg-red-400":e==="High","bg-yellow-400":e==="Medium","bg-green-400":e==="Low"}}},components:{Badge:ot}},Ra={components:{ListView:Ks,Avatar:hs,Badge:ot,Button:ye,FeatherIcon:Pe,ListHeader:Pt,ListHeaderItem:It,ListRow:at,ListRowItem:Tt,ListRows:Rt,ListSelectBanner:Dt,StatusBadge:Pa,PriorityBadge:Ta,Tooltip:Ct},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(e,{emit:t}){const s=O(!1),r=O(null),l=O({x:0,y:0}),u=O(!1),m=O({x:0,y:0}),b=O(null),g=O(!1),f=O({x:0,y:0}),c=O(null),$=S=>{if(!S||typeof S!="string")return"?";if(S.includes("@")){const y=S.split("@")[0];return y.includes(".")||y.includes("_")?y.split(/[._]/).map(n=>n[0]).join("").toUpperCase().slice(0,2):y.slice(0,2).toUpperCase()}return S.includes(" ")?S.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):S.slice(0,2).toUpperCase()},w=S=>{if(!S)return"";const y=S.match(/ISS-(\d{4}-\d+)/);return y?y[1]:S},_=S=>{if(!S)return"";const y=document.createElement("div");return y.innerHTML=S,y.textContent||y.innerText||""},v=S=>S?new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",h=S=>S?new Date(S).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",D=S=>({New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[S]||"gray",x=S=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[S]||"yellow",k=new Map,M=F(()=>e.issues.map(S=>{const y=S.name;if(k.has(y)){const n=k.get(y);if(n.originalStatus===S.status&&n.originalPriority===S.priority&&n.originalSubject===S.subject&&n.originalUsersAssigned===JSON.stringify(S.custom_users_assigned)&&n.originalIsResponseExpected===S.custom_is_response_expected)return n.transformed}const P=Ye(xe({},S),{status:{label:S.status||"New",color:D(S.status)},priority:{label:S.priority||"Medium",color:x(S.priority)}});return k.set(y,{transformed:P,originalStatus:S.status,originalPriority:S.priority,originalSubject:S.subject,originalUsersAssigned:JSON.stringify(S.custom_users_assigned),originalIsResponseExpected:S.custom_is_response_expected}),P})),H=Ae([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Raised By",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"150px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"100px",sortable:!0}]),U=Ae({showTooltip:!1,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No tickets found",description:"Try adjusting your search or filter criteria"},onRowClick:S=>{B(S)}}),j=S=>{console.log("Selected rows:",S)},B=S=>{console.log("Issue clicked:",S);const P=`${window.location.origin}/app/issue/${S.name}`;window.open(P,"_blank")},L=S=>{const y=S||"New";return{"bg-blue-500":y==="New","bg-orange-500":y==="In Review","bg-purple-500":y==="Confirmed","bg-blue-500":y==="In Transit","bg-green-500":y==="Delivered","bg-green-500":y==="Closed","bg-red-500":y==="Open","bg-orange-500":y==="Replied","bg-yellow-500":y==="On Hold","bg-green-500":y==="Resolved"}},K=S=>{const y=S||"Medium";return{"bg-red-500":y==="Critical"||y==="High","bg-yellow-500":y==="Medium","bg-green-500":y==="Low"}},E=S=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[S||"New"]||"bg-gray-100 text-gray-800",Z=S=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[S||"Medium"]||"bg-yellow-100 text-yellow-800",G=S=>{const y=S||"Medium";return{"bg-red-500":y==="Critical","bg-red-400":y==="High","bg-yellow-400":y==="Medium","bg-green-400":y==="Low"}},X=(S,y)=>{const P=S.target.getBoundingClientRect();l.value={x:P.left+P.width/2,y:P.top-10},r.value=y,s.value=!0},ae=()=>{s.value=!1,r.value=null},T=(S,y)=>{if(!y||y.length===0)return;const P=S.target.getBoundingClientRect();m.value={x:P.left+P.width/2,y:P.top-10},b.value=y,u.value=!0},V=()=>{u.value=!1,b.value=null},J=(S,y)=>{if(!y||!y.subject)return;const P=S.currentTarget.getBoundingClientRect();f.value={x:P.left+P.width/2,y:P.top-10},c.value={subject:y.subject,description:y.description},g.value=!0},le=()=>{g.value=!1,c.value=null},ee=S=>{let y="asc";e.sortField===S&&(y=e.sortDirection==="asc"?"desc":"asc"),t("sort",{field:S,direction:y})},Ce=S=>e.sortField!==S?"arrow-up-down":e.sortDirection==="asc"?"arrow-up":"arrow-down",Ie=S=>e.sortField!==S?"text-gray-400":"text-blue-600",ce=S=>e.sortField===S?"bg-blue-50":"",ne=new Map;return{columns:H,listOptions:U,transformedIssues:M,handleSelections:j,handleIssueClick:B,getStatusColor:L,getPriorityColor:K,getStatusBadgeClass:E,getPriorityBadgeClass:Z,getPriorityIndicatorClass:G,getInitials:$,formatIssueId:w,stripHtml:_,formatDate:v,formatTime:h,showPopup:s,popupUser:r,popupPosition:l,showUserPopup:X,hideUserPopup:ae,handleColumnSort:ee,getSortIcon:Ce,getSortIconClass:Ie,getSortButtonClass:ce,getTagStyle:S=>{if(ne.has(S))return ne.get(S);const y=oo(S);let P;if(y){const n=y.replace("#",""),i=parseInt(n.substr(0,2),16),d=parseInt(n.substr(2,2),16),Q=parseInt(n.substr(4,2),16),R=`rgba(${i}, ${d}, ${Q}, 0.1)`,ie=`rgb(${Math.max(i-50,0)}, ${Math.max(d-50,0)}, ${Math.max(Q-50,0)})`;P={backgroundColor:R,color:ie,borderColor:ie}}else P={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return ne.set(S,P),P},showTagsPopup:u,tagsPopupPosition:m,tagsPopupData:b,showTagsPopupFn:T,hideTagsPopupFn:V,showIssueDetailsPopup:g,issueDetailsPopupPosition:f,issueDetailsPopupData:c,showIssueDetailsPopupFn:J,hideIssueDetailsPopup:le}}},Da={class:"bg-white rounded-lg shadow-sm border"},Ma={key:0,class:"px-6 py-12 text-center text-gray-500"},Fa=["onClick"],Oa=["onClick"],Aa=["onMouseenter"],Va={class:"font-medium truncate"},Ea={key:0,class:"relative"},La={class:"text-gray-500 text-sm mt-1 truncate max-w-xs"},ja={class:"text-sm font-medium text-gray-900 truncate block"},Ua={key:3,class:"flex flex-wrap gap-1"},Ba=["onMouseenter"],Na={key:1,class:"text-gray-400 text-sm"},za=["onMouseenter"],Ha=["title"],Ja={class:"truncate"},qa={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},Ka={key:1,class:"text-gray-400 text-sm"},Wa={key:5,class:"flex flex-col"},Qa={class:"text-sm"},Ga={class:"text-xs text-gray-400"},Xa={key:7},Ya={class:"flex gap-2"},Za={class:"text-sm"},el={class:"font-semibold text-gray-900 mb-1"},tl={class:"text-gray-600 flex items-center gap-1"},sl={class:"text-xs text-gray-500 mt-1"},ol={class:"text-sm"},rl={class:"font-bold text-gray-900 mb-3"},al={key:0,class:"text-gray-700 whitespace-pre-wrap max-h-48 overflow-y-auto"},ll={key:1,class:"text-gray-400 italic"},nl={class:"text-sm"},il={class:"flex flex-wrap gap-1"};function ul(e,t,s,r,l,u){const m=fe("FeatherIcon"),b=fe("ListHeaderItem"),g=fe("ListHeader"),f=fe("Avatar"),c=fe("Tooltip"),$=fe("ListRowItem"),w=fe("ListRow"),_=fe("ListRows"),v=fe("Button"),h=fe("ListSelectBanner"),D=fe("ListView");return a(),p("div",Da,[t[6]||(t[6]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(a(),p("div",Ma,t[3]||(t[3]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(a(),W(D,{key:1,columns:r.columns,rows:r.transformedIssues,"row-key":"name",options:r.listOptions,"onUpdate:selections":r.handleSelections,class:"p-4"},{default:q(()=>[z(g,null,{default:q(()=>[(a(!0),p(Y,null,te(r.columns,x=>(a(),W(b,{key:x.key,item:x},os({_:2},[x.icon?{name:"prefix",fn:q(({item:k})=>[z(m,{name:k.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,x.sortable?{name:"suffix",fn:q(()=>[o("button",{onClick:k=>r.handleColumnSort(x.key),class:N(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",r.getSortButtonClass(x.key)])},[z(m,{name:r.getSortIcon(x.key),class:N(["h-3 w-3",r.getSortIconClass(x.key)])},null,8,["name","class"])],10,Fa)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),z(_,null,{default:q(()=>[(a(!0),p(Y,null,te(r.transformedIssues,x=>(a(),W(w,{key:x.name,row:x,class:N({"bg-orange-50 hover:bg-orange-100":x.custom_is_response_expected===1})},{default:q(({column:k,item:M})=>[z($,{item:M,align:k.align},{prefix:q(()=>[k.key==="raised_by"?(a(),W(f,{key:0,size:"sm",label:r.getInitials(x.raised_by),class:"mr-3"},null,8,["label"])):A("",!0)]),default:q(()=>{var H;return[k.key==="name"?(a(),p("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:De(U=>r.handleIssueClick(x),["prevent"])},I(r.formatIssueId(M)),9,Oa)):k.key==="subject"?(a(),p("div",{key:1,class:"max-w-xs cursor-pointer",onMouseenter:U=>r.showIssueDetailsPopupFn(U,x),onMouseleave:t[0]||(t[0]=(...U)=>r.hideIssueDetailsPopup&&r.hideIssueDetailsPopup(...U))},[o("div",Va,I(x.subject),1),x.description&&x.description.length>0?(a(),p("div",Ea,[o("div",La,I(r.stripHtml(x.description)),1)])):A("",!0)],40,Aa)):k.key==="raised_by"?(a(),W(c,{key:2,text:`Raised By: ${M||"Not assigned"}`},{default:q(()=>[o("span",ja,I(M||"-"),1)]),_:2},1032,["text"])):k.key==="custom_users_assigned"?(a(),p("div",Ua,[x.custom_users_assigned&&x.custom_users_assigned.length>0?(a(!0),p(Y,{key:0},te(x.custom_users_assigned.filter(U=>U.user_assigned),U=>(a(),p("div",{key:U.name||U,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:j=>r.showUserPopup(j,U),onMouseleave:t[1]||(t[1]=(...j)=>r.hideUserPopup&&r.hideUserPopup(...j))},I(r.getInitials(U.user_assigned)),41,Ba)]))),128)):(a(),p("span",Na,"-"))])):k.key==="_user_tags"?(a(),p("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:U=>r.showTagsPopupFn(U,x._user_tags),onMouseleave:t[2]||(t[2]=(...U)=>r.hideTagsPopupFn&&r.hideTagsPopupFn(...U))},[x._user_tags&&x._user_tags.length>0?(a(),p(Y,{key:0},[o("span",{style:Se(r.getTagStyle(x._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:x._user_tags[0]},[o("span",Ja,I(x._user_tags[0]),1)],12,Ha),x._user_tags.length>1?(a(),p("span",qa," +"+I(x._user_tags.length-1),1)):A("",!0)],64)):(a(),p("span",Ka,"-"))],40,za)):k.key==="creation"?(a(),p("div",Wa,[o("span",Qa,I(r.formatDate(M)),1),o("span",Ga,I(r.formatTime(M)),1)])):k.key==="status"?(a(),W(c,{key:6,text:`Status: ${((H=x.status)==null?void 0:H.label)||x.status||"New"}`},{default:q(()=>{var U,j;return[o("span",{class:N([r.getStatusBadgeClass(((U=x.status)==null?void 0:U.label)||x.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},I(((j=x.status)==null?void 0:j.label)||x.status||"New"),3)]}),_:2},1032,["text"])):(a(),p("span",Xa,I(M),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row","class"]))),128))]),_:1}),z(h,null,{actions:q(({unselectAll:x})=>[o("div",Ya,[z(v,{variant:"ghost",label:"Delete"}),z(v,{variant:"ghost",label:"Unselect all",onClick:x},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),r.showPopup&&r.popupUser&&typeof r.popupUser=="object"?(a(),p("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:Se({left:r.popupPosition.x+"px",top:r.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",Za,[o("div",el,I(r.popupUser.user_assigned||"Unknown User"),1),o("div",tl,[t[4]||(t[4]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),oe(" "+I(r.popupUser.team||"No Team"),1)]),o("div",sl," Assigned: "+I(r.formatDate(r.popupUser.assigned_date)),1)])],4)):A("",!0),r.showIssueDetailsPopup&&r.issueDetailsPopupData?(a(),p("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-md",style:Se({left:r.issueDetailsPopupPosition.x+"px",top:r.issueDetailsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",ol,[o("div",rl,I(r.issueDetailsPopupData.subject),1),r.issueDetailsPopupData.description?(a(),p("div",al,I(r.stripHtml(r.issueDetailsPopupData.description)),1)):(a(),p("div",ll," No description available "))])],4)):A("",!0),r.showTagsPopup&&r.tagsPopupData?(a(),p("div",{key:4,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:Se({left:r.tagsPopupPosition.x+"px",top:r.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",nl,[t[5]||(t[5]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",il,[(a(!0),p(Y,null,te(r.tagsPopupData,x=>(a(),p("span",{key:x,style:Se(r.getTagStyle(x)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},I(x),5))),128))])])],4)):A("",!0)])}const cl=je(Ra,[["render",ul]]),dl={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},pl={class:"flex items-start justify-between"},gl={class:"flex items-start space-x-3"},ml={class:"flex-shrink-0"},fl={class:"flex-1 min-w-0"},vl={class:"text-sm font-medium text-gray-900"},hl={class:"text-sm text-gray-600 mt-1"},yl={class:"text-xs text-gray-500 mt-1"},bl=["onClick"],xl={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(e){const t=u=>{const m="bg-white/95 border-l-4",b={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${m} ${b[u]||b.info}`},s=u=>{const m={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return m[u]||m.info},r=u=>{const m={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return m[u]||m.info},l=u=>{const b=new Date-u,g=Math.floor(b/6e4);if(g<1)return"Just now";if(g<60)return`${g}m ago`;const f=Math.floor(g/60);return f<24?`${f}h ago`:u.toLocaleDateString()};return(u,m)=>(a(),p("div",dl,[z(rs,{name:"notification",tag:"div"},{default:q(()=>[(a(!0),p(Y,null,te(e.notifications,b=>(a(),p("div",{key:b.id,class:N([t(b.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",pl,[o("div",gl,[o("div",ml,[z(C(Pe),{name:s(b.type),class:N([r(b.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",fl,[o("p",vl,I(b.title),1),o("p",hl,I(b.message),1),o("p",yl,I(l(b.timestamp)),1)])]),o("button",{onClick:g=>u.$emit("remove",b.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[z(C(Pe),{name:"x",class:"h-4 w-4"})],8,bl)])],2))),128))]),_:1})]))}},wl=je(xl,[["__scopeId","data-v-d57fd7d2"]]);function _l(e,t){let s;return function(...l){const u=()=>{clearTimeout(s),e(...l)};clearTimeout(s),s=setTimeout(u,t)}}function kl(){const e=O(""),t=O({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=O(""),r=_l(_=>{s.value=_},300);_e(e,_=>{r(_)});const l=F(()=>{const _={};return s.value.trim()&&(_.subject=["like",`%${s.value.trim()}%`]),t.value.status&&(_.status=t.value.status),t.value.priority&&(_.priority=t.value.priority),t.value.assignee&&(_.raised_by=t.value.assignee),t.value.tags&&(_.issue_type=t.value.tags),_}),u=F(()=>t.value.sortBy||"creation desc"),m=new Map,b=_=>{if(!_||!Array.isArray(_))return[];const v=JSON.stringify({issuesLength:_.length,searchQuery:e.value.trim(),status:t.value.status,priority:t.value.priority,assignee:t.value.assignee,tags:t.value.tags,sortBy:t.value.sortBy});if(m.has(v))return m.get(v);let h=[..._];if(e.value.trim()){const x=e.value.toLowerCase().trim();h=h.filter(k=>{const M=(k.subject||"").toLowerCase(),H=(k.description||"").toLowerCase();return M.includes(x)||H.includes(x)})}t.value.status&&(h=h.filter(x=>x.status===t.value.status)),t.value.priority&&(h=h.filter(x=>x.priority===t.value.priority)),t.value.assignee&&(h=h.filter(x=>x.raised_by===t.value.assignee)),t.value.tags&&(h=h.filter(x=>x.issue_type===t.value.tags));const D=Te({Critical:4,High:3,Medium:2,Low:1});if(h.sort((x,k)=>{const[M,H]=t.value.sortBy.split(" "),U=x[M]||"",j=k[M]||"";let B=0;return M==="creation"||M==="modified"?B=new Date(U)-new Date(j):M==="priority"?B=(D[U]||0)-(D[j]||0):B=U.toString().localeCompare(j.toString()),H==="desc"?-B:B}),m.size>50){const x=m.keys().next().value;m.delete(x)}return m.set(v,h),h};let g=null,f=null;const c=_=>{if(!_||!Array.isArray(_))return Te([{label:"All Assignees",value:""}]);const v=_.map(x=>x.raised_by).filter(x=>x&&x.trim()).sort().join("|");if(g&&f===v)return g;const h=[...new Set(_.map(x=>x.raised_by).filter(x=>x&&x.trim()))],D=Te([{label:"All Assignees",value:""},...h.map(x=>({label:x,value:x}))]);return g=D,f=v,D},$=()=>{e.value="",s.value="",t.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},w=F(()=>e.value.trim()!==""||t.value.status!==""||t.value.priority!==""||t.value.assignee!==""||t.value.tags!==""||t.value.sortBy!=="creation desc");return{searchQuery:e,filters:t,debouncedSearchQuery:s,apiFilters:l,sortOrder:u,hasActiveFilters:w,filterIssues:b,getAssigneeOptions:c,resetFilters:$}}function Cl(e,t,s){const r=as(),l=O([]),u=O(!1),m=O(!1);let b=null;const g=m.value?15e3:2e3,f=()=>{console.log(`⏰ Setting up debounced refresh with ${g}ms delay`),b&&(clearTimeout(b),console.log("🔄 Cleared existing debounce timer")),b=setTimeout(()=>{console.log("⏰ Debounce timer fired, calling processDocumentRefreshes"),w()},g)},c=()=>{if(!r||u.value)return;r.emit("doctype_subscribe","Issue"),r.off("list_update"),r.on("list_update",L=>{try{if(console.log("📡 Received list_update event:",L),(L==null?void 0:L.doctype)!=="Issue")return;if(D()){console.log("⏸️ Skipping realtime update (avoid condition met)");return}if(L.action==="insert"||L.action==="create"){console.log("📝 Skipping new issue creation update:",L.name);return}console.log("✅ Adding to pending refreshes:",L.name),l.value.push(L),f()}catch(K){console.error("❌ Error processing list_update event:",K)}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(L=>{r.on(L,K=>{if((K==null?void 0:K.doctype)!=="Issue"||D())return;const E={doctype:"Issue",name:K.name,action:L.includes("create")?"insert":L.includes("delete")?"delete":"update",modified_by:K.modified_by||K.owner,timestamp:new Date().toISOString()};if(E.action==="insert"){console.log("📝 Skipping new issue creation update:",K.name);return}l.value.push(E),f()})}),u.value=!0},$=()=>{if(!r||!u.value)return;r.emit("doctype_unsubscribe","Issue"),r.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(L=>{r.off(L)}),u.value=!1},w=()=>de(this,null,function*(){if(console.log("🔄 processDocumentRefreshes called with",l.value.length,"pending refreshes"),!l.value.length){console.log("⏸️ No pending refreshes, returning early");return}const B=window.location.hash||window.location.pathname;if(console.log("🛣️ Current route:",B),!B.includes("issue-tracker")&&!B.includes("issues")&&!B.includes("frontend")){console.log("❌ Not on correct route, clearing pending refreshes and disabling updates"),l.value=[],$();return}console.log("✅ Route check passed, proceeding with refresh");const L=[...new Set(l.value.map(E=>E.name))],K=L.length;console.log(`🔄 Processing ${K} document refreshes:`,L),l.value=[];try{yield _(L),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:K,documents:L}})),console.log(`✅ Successfully processed ${K} document refreshes`)}catch(E){console.error("❌ Error updating individual rows, falling back to full refresh:",E);try{t&&typeof t=="function"?(console.log("🔄 Using custom refresh function for fallback"),yield t()):(console.log("🔄 Using default refresh functions for fallback"),yield Le(),yield We()),console.log("✅ Fallback refresh completed successfully")}catch(Z){console.error("❌ Error in fallback refresh:",Z)}}}),_=B=>de(this,null,function*(){try{const{activeResource:L,currentData:K}=v();if(!K||!Array.isArray(K)){console.log("📋 No current data available, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}let E={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(e&&typeof e=="function")try{const X=e();X&&(E=xe(xe({},E),X))}catch(X){console.warn("Error getting current parameters, using defaults:",X)}const Z=K.map(X=>X.name),G=B.filter(X=>Z.includes(X));if(G.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${G.length} visible issues:`,G),yield h(G,L,K)}catch(L){throw console.error("Error during targeted refresh:",L),t&&typeof t=="function"&&(yield t()),L}}),v=()=>{if(s&&typeof s=="function")try{const Z=s();if(Z)return console.log(`📊 Using ${Z.resourceType} resource for updates (from parent)`),Z}catch(Z){console.warn("Error getting resource state from parent, falling back to detection:",Z)}const B=ge.data&&Array.isArray(ge.data)&&ge.data.length>0,L=pe.data&&Array.isArray(pe.data)&&pe.data.length>0;if(B&&!L)return console.log("📊 Using statFilterResource for updates (only stat has data)"),{activeResource:ge,currentData:ge.data,resourceType:"stat"};if(L&&!B)return console.log("📋 Using issuesResource for updates (only issues has data)"),{activeResource:pe,currentData:pe.data,resourceType:"main"};const K=ge.lastLoaded||0,E=pe.lastLoaded||0;return B&&K>=E?(console.log("📊 Using statFilterResource for updates (more recent)"),{activeResource:ge,currentData:ge.data,resourceType:"stat"}):(console.log("📋 Using issuesResource for updates (default)"),{activeResource:pe,currentData:pe.data||[],resourceType:"main"})},h=(B,L,K)=>de(this,null,function*(){try{const Z=(yield Promise.all(B.map(G=>de(this,null,function*(){try{return yield Qs(G),Ft.data}catch(X){return console.warn(`Failed to fetch updated issue ${G}:`,X),null}})))).filter(G=>G!==null);if(Z.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}if(L.data&&Array.isArray(L.data))console.log(`🔄 Updating ${Z.length} issues in ${L.data.length} total issues`),Z.forEach(G=>{const X=L.data.findIndex(ae=>ae.name===G.name);X!==-1?(console.log(`✅ Updating issue at index ${X}: ${G.name}`),Object.assign(L.data[X],G)):console.warn(`⚠️ Issue ${G.name} not found in current data for update`)});else{console.warn("⚠️ activeResource.data is not an array, using fallback method");const G=[...K];Z.forEach(X=>{const ae=G.findIndex(T=>T.name===X.name);ae!==-1?(console.log(`✅ Updating issue at index ${ae}: ${X.name} (fallback)`),G[ae]=X):console.warn(`⚠️ Issue ${X.name} not found in current data for update (fallback)`)}),L.data=G}console.log(`🎯 Successfully updated ${Z.length} issues in current view`)}catch(E){console.error("Error updating visible issues in place:",E),t&&typeof t=="function"&&(yield t())}}),D=()=>!!document.hidden,x=O(!1),k=()=>{document.hidden?x.value=!0:x.value&&(x.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),l.value.length>0?(console.log(`📋 Processing ${l.value.length} pending updates`),w()):M())},M=()=>{l.value=[];try{t&&typeof t=="function"?t():(Le(),We())}catch(B){console.error("Error during manual refresh:",B)}},H=()=>{c()},U=()=>{u.value=!1},j=B=>{console.error("Socket connection error:",B),u.value=!1};return Fe(()=>{r&&(r.on("connect",H),r.on("disconnect",U),r.on("connect_error",j),document.addEventListener("visibilitychange",k),r.connected&&c())}),Ge(()=>{r&&(r.off("connect",H),r.off("disconnect",U),r.off("connect_error",j)),document.removeEventListener("visibilitychange",k),$(),b&&clearTimeout(b)}),{pendingDocumentRefreshes:l,realtimeEventsSetup:u,setupRealtimeUpdates:c,disableRealtimeUpdates:$,manualRefresh:M,processDocumentRefreshes:w}}const Sl={class:"min-h-screen bg-gray-50"},$l={class:"bg-white shadow-sm border-b"},Il={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pl={class:"flex justify-between items-center py-4"},Tl={class:"flex items-center space-x-4"},Rl={class:"flex space-x-4"},Dl={class:"flex items-center space-x-4"},Ml={class:"text-sm text-gray-600"},Fl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ol={class:"fixed top-20 right-4 flex flex-col space-y-2"},Al=["title"],Vl={class:"relative"},El={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Ul={__name:"IssueTracker",setup(e){const{searchQuery:t,filters:s,debouncedSearchQuery:r,apiFilters:l,sortOrder:u,getAssigneeOptions:m}=kl(),b=O(!1),g=O("team_tickets"),f=O(null),c=()=>{console.log("Refreshing current view:",{isUsingStatFilter:b.value,currentStatFilter:g.value,hasCustomFilters:E.value&&E.value.length>0});const y={limit_page_length:ne.value,limit_start:(ce.value-1)*ne.value,order_by:u.value};b.value?(E.value&&E.value.length>0&&(y.filters=JSON.stringify(E.value)),Promise.all([et(g.value,y),E.value&&E.value.length>0?qe(g.value,JSON.stringify(E.value)):qe(g.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(P=>{console.error("Error refreshing stat filter view:",P)})):Promise.all([Le(xe({filters:JSON.stringify(E.value)},y)),We(JSON.stringify(E.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(P=>{console.error("Error refreshing regular filter view:",P)})},{pendingDocumentRefreshes:$,realtimeEventsSetup:w,manualRefresh:_}=Cl(()=>({filters:S.value,order_by:u.value,limit_page_length:ne.value,limit_start:(ce.value-1)*ne.value}),c,()=>b.value?{activeResource:ge,currentData:ge.data||[],resourceType:"stat"}:{activeResource:pe,currentData:pe.data||[],resourceType:"main"}),v=()=>{c()},h=O([]),D=y=>{h.value.push(xe({id:Date.now()+Math.random()},y)),setTimeout(()=>{var P;x((P=h.value[h.value.length-1])==null?void 0:P.id)},5e3)},x=y=>{h.value=h.value.filter(P=>P.id!==y)},k=F(()=>b.value?ge.data||[]:pe.data||[]),M=F(()=>b.value?Ot.data||0:Mt.data||0),H=F(()=>b.value?ge.loading:pe.loading),U=F(()=>k.value),j=F(()=>(u.value||"creation desc").split(" ")[0]),B=F(()=>(u.value||"creation desc").split(" ")[1]||"desc"),L=({field:y,direction:P})=>{const n=`${y} ${P}`;s.value.sortBy=n,ce.value=1,c()},K=y=>{},E=O([]),Z=y=>{console.log("Filters applied:",y),E.value=y,ce.value=1,y&&y.length>0?b.value?(console.log("Applying custom filters on top of card filter:",g.value),T(g.value)):(console.log("Applying custom filters in regular mode"),G()):(console.log("No filters applied, returning to default view"),X())},G=()=>{b.value=!1,g.value="team_tickets",Promise.all([Le({filters:JSON.stringify(E.value),order_by:u.value,limit_page_length:ne.value,limit_start:0}),We(JSON.stringify(E.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(y=>{console.error("Error applying custom filters:",y)})},X=()=>{b.value=!0,g.value="team_tickets",T("team_tickets")},ae=y=>{console.log("Card clicked:",y,"Current filters:",E.value),b.value=!0,g.value=y,t.value="",ce.value=1,T(y)},T=y=>{const P={limit_page_length:ne.value,limit_start:0,order_by:u.value};E.value&&E.value.length>0?(P.filters=JSON.stringify(E.value),console.log("Applying card filter with custom filters:",y,E.value)):console.log("Applying card filter without custom filters:",y),Promise.all([et(y,P),E.value&&E.value.length>0?qe(y,JSON.stringify(E.value)):qe(y)]).then(()=>{console.log("Card filter applied successfully")}).catch(n=>{console.error("Error applying card filter:",n)})},V=Ae(Te(Ys())),J=Ae(Te(Zs())),le=Ae(Te(to()));let ee=null,Ce=0;const Ie=F(()=>{const y=k.value.length;return ee&&Ce===y||(ee=Te(m(k.value)),Ce=y),ee}),ce=O(1),ne=O(10),Ee=({page:y,itemsPerPage:P,offset:n})=>{console.log("Page change:",{page:y,newItemsPerPage:P,offset:n}),ce.value=y,ne.value=P;const i={limit_page_length:P,limit_start:n,order_by:u.value};b.value?(E.value&&E.value.length>0&&(i.filters=JSON.stringify(E.value)),et(g.value,i).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(d=>{console.error("Error during pagination (stat filter):",d)})):Le(xe({filters:JSON.stringify(E.value)},i)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(d=>{console.error("Error during pagination (regular filter):",d)})},S=F(()=>{const y={};return s.value.status&&(y.status=s.value.status),s.value.priority&&(y.priority=s.value.priority),s.value.assignee&&(y.raised_by=s.value.assignee),s.value.tags&&(y.issue_type=s.value.tags),y});return Fe(()=>{console.log("IssueTracker mounted, initializing with default view"),b.value=!0,g.value="team_tickets",T("team_tickets"),window.addEventListener("issueListUpdated",y=>de(this,null,function*(){const{count:P,documents:n}=y.detail;D({type:"info",title:"List Updated",message:`${P} issue${P>1?"s":""} updated: ${n.slice(0,3).join(", ")}${n.length>3?"...":""}`,timestamp:new Date}),console.log("🔄 List updated event received - refreshing only stat cards");try{f.value&&f.value.refreshStats&&(console.log("📊 Refreshing stat cards..."),yield f.value.refreshStats(),console.log("📊 Stat cards refreshed successfully")),console.log("✅ Stat cards refreshed after websocket update"),console.log("ℹ️  Individual row updates are handled automatically by the composable")}catch(i){console.error("❌ Error refreshing stat cards after websocket update:",i),D({type:"error",title:"Refresh Error",message:"Failed to refresh stat cards. Please refresh manually.",timestamp:new Date})}}))}),Ge(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(y,P)=>{const n=fe("router-link");return a(),p("div",Sl,[o("div",$l,[o("div",Il,[o("div",Pl,[o("div",Tl,[P[8]||(P[8]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Ticket Tracker",-1)),o("nav",Rl,[z(n,{to:"/",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:q(()=>P[5]||(P[5]=[oe(" Tickets ")])),_:1,__:[5]}),P[6]||(P[6]=o("a",{href:"/app/support",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Desk ",-1)),P[7]||(P[7]=o("a",{href:"/intro",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Wiki ",-1))])]),o("div",Dl,[o("span",Ml,I(C(mt).user),1),z(C(ye),{onClick:P[0]||(P[0]=i=>C(mt).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:q(()=>P[9]||(P[9]=[oe(" Logout ")])),_:1,__:[9]})])])])]),o("div",Fl,[z(Ia,{ref_key:"issueStatsRef",ref:f,issues:U.value,activeFilter:g.value,onFilterChanged:ae},null,8,["issues","activeFilter"]),z(ia,{searchQuery:C(t),"onUpdate:searchQuery":P[1]||(P[1]=i=>gt(t)?t.value=i:null),filters:C(s),"onUpdate:filters":P[2]||(P[2]=i=>gt(s)?s.value=i:null),statusOptions:le.value,priorityOptions:V.value,assigneeOptions:Ie.value,tagsOptions:J.value,issues:k.value,filteredCount:M.value,onSuggestionSelected:K,onFiltersApplied:Z},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),z(cl,{issues:U.value,loading:H.value,sortField:j.value,sortDirection:B.value,onSort:L},null,8,["issues","loading","sortField","sortDirection"]),z(ba,{currentPage:ce.value,"onUpdate:currentPage":P[3]||(P[3]=i=>ce.value=i),itemsPerPage:ne.value,"onUpdate:itemsPerPage":P[4]||(P[4]=i=>ne.value=i),totalItems:M.value,onPageChange:Ee},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Ol,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:C(w)?"Real-time updates active":"Real-time updates disabled"},[o("div",Vl,[z(C(Pe),{name:C(w)?"wifi":"wifi-off",class:N(["h-5 w-5 transition-colors duration-200",C(w)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:N(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",C(w)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),C($).length>0?(a(),p("div",El,I(C($).length>9?"9+":C($).length),1)):A("",!0)])],8,Al),o("button",{onClick:v,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[z(C(Pe),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),z(wl,{notifications:h.value,onRemove:x},null,8,["notifications"])])}}};export{Ul as default};
//# sourceMappingURL=IssueTracker-CgbS6x3x.js.map
