var Te=Object.defineProperty,Le=Object.defineProperties;var Ae=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var he=(s,e,t)=>e in s?Te(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,te=(s,e)=>{for(var t in e||(e={}))Oe.call(e,t)&&he(s,t,e[t]);if(ve)for(var t of ve(e))Ue.call(e,t)&&he(s,t,e[t]);return s},we=(s,e)=>Le(s,Ae(e));import{g as je,r as j,i as b,o as a,a as m,n as T,j as O,F as E,f as z,t as $,b as i,k as A,l as q,u,m as L,p as Z,q as Q,v as Be,x as G,y as J,h as oe,z as pe,A as K,B as ue,C as le,d as P,w as S,D as Ve,E as ge,T as Me,G as De,H as ze,I as Y,J as Ee,K as He,L as se,M as ae,s as de,N as ce,e as D,O as Fe,P as Ne,c as ie,Q as xe,R as _e,S as We,U as be}from"./index-Ca-jeXhs.js";const Qe=["src","alt"],Ke=je({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(s){const e=j(!1),t=s,o=b(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),c=b(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),n=b(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),v=b(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),h=b(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),g=b(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function R(r){r.type&&(e.value=!0)}return(r,p)=>(a(),m("div",{class:T(["relative inline-block shrink-0",[c.value,o.value]])},[r.image&&!e.value?(a(),m("img",{key:0,src:r.image,alt:r.label,class:T([o.value,"h-full w-full object-cover"]),onError:p[0]||(p[0]=x=>R(x))},null,42,Qe)):(a(),m("div",{key:1,class:T(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[n.value,o.value]])},[r.$slots.default?(a(),m("div",{key:0,class:T(g.value)},[O(r.$slots,"default")],2)):(a(),m(E,{key:1},[z($(r.label&&r.label[0]),1)],64))],2)),r.$slots.indicator?(a(),m("div",{key:2,class:T(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",v.value])},[i("div",{class:T(h.value)},[O(r.$slots,"indicator")],2)],2)):A("",!0)],2))}}),qe={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ge={class:"text-xl font-medium"},Xe={class:"mt-1 text-base text-ink-gray-5"},Ze={__name:"ListEmptyState",setup(s){const e=q("list");return(t,o)=>(a(),m("div",qe,[O(t.$slots,"default",{},()=>[i("div",Ge,$(u(e).options.emptyState.title),1),i("div",Xe,$(u(e).options.emptyState.description),1),u(e).options.emptyState.button?(a(),L(u(Q),Z({key:0},u(e).options.emptyState.button,{class:"mt-4"}),null,16)):A("",!0)])]))}};function ke(s,e=!0){let t=e?"14px ":"",o=s.map(c=>{let n=c.width||1;return typeof n=="number"?n+"fr":n}).join(" ");return t+o}const fe={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Je={class:"truncate"},Ce={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=s,o=e,c=j(null),n=j(null),v=b(()=>{if(typeof t.item.width=="string"){const r=parseInt(t.item.width);if(t.item.width.includes("rem"))return r*16;if(t.item.width.includes("px"))return r}return n.value.offsetWidth}),h=r=>{const p=r.clientX,x=v.value,I=k=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),c.value.style.backgroundColor="rgb(199 199 199)";let _=x+(k.clientX-p);t.item.width=`${_<50?50:_}px`,g(t.item.width)},d=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),c.value.style.backgroundColor="",window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",d)};window.addEventListener("mousemove",I),window.addEventListener("mouseup",d)},g=Be(r=>{t.item.width=r,o("columnWidthUpdated")},t.debounce),R=q("list");return(r,p)=>(a(),m("div",{ref_key:"columnRef",ref:n,class:T(["group relative flex items-center",s.item.align?u(fe)[s.item.align]:"justify-between"])},[i("div",{class:T(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",r.$attrs.class])},[O(r.$slots,"prefix",G(J({item:s.item}))),O(r.$slots,"default",{},()=>[i("div",Je,$(s.item.label),1)]),O(r.$slots,"suffix",G(J({item:s.item})))],2),u(R).options.resizeColumn?O(r.$slots,"resizer",G(Z({key:0},{item:s.item})),()=>[i("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:h},[i("div",{ref_key:"resizer",ref:c,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):A("",!0)],2))}},Pe={__name:"ListHeader",emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=e,o=q("list");return(c,n)=>(a(),m("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ue({gridTemplateColumns:u(ke)(u(o).columns,u(o).options.selectable)})},[u(o).options.selectable?(a(),L(pe,{key:0,class:"cursor-pointer duration-300",modelValue:u(o).allRowsSelected,onClick:oe(u(o).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):A("",!0),O(c.$slots,"default",{},()=>[(a(!0),m(E,null,K(u(o).columns,v=>(a(),L(Ce,{key:v.key,item:v,onColumnWidthUpdated:h=>t("columnWidthUpdated",v)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Ye={class:"truncate text-base"},$e={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(s){const e=s,t=b(()=>{var v,h;return(v=e.column)!=null&&v.getLabel?(h=e.column)==null?void 0:h.getLabel({row:e.row}):c(e.item).label||""}),o=b(()=>n.value.options.showTooltip?e.column.getTooltip?e.column.getTooltip(e.row):c(e.item).label:"");function c(v){return v&&typeof v=="object"?v:{label:v}}const n=q("list");return(v,h)=>(a(),m("div",{class:T(["flex items-center space-x-2",u(fe)[s.align]])},[O(v.$slots,"prefix",{},()=>[s.column.prefix?(a(),L(le(typeof s.column.prefix=="function"?s.column.prefix({row:s.row}):s.column.prefix),{key:0})):A("",!0)]),P(u(Ve),G(J(u(n).options.showTooltip?{text:o.value}:{text:""})),{default:S(()=>[O(v.$slots,"default",G(J({label:t.value})),()=>[i("div",Ye,$(t.value),1)])]),_:3},16),O(v.$slots,"suffix")],2))}},ye={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(s){const e=s,t=q("list"),o=b(()=>{var r;return(r=t.value.rows)!=null&&r.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===e.row[t.value.rowKey]:!1}),c=b(()=>t.value.selections.has(e.row[t.value.rowKey])),n=b(()=>t.value.options.enableActive&&t.value.activeRow.value===e.row.name),v=b(()=>t.value.options.getRowRoute||t.value.options.onRowClick),h=b(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),g=b(()=>{var x,I,d;if(!c.value)return"rounded";const r=[...t.value.selections];let p=(x=t.value.rows[0])!=null&&x.group?t.value.rows.map(k=>k.rows):[t.value.rows];for(let k of p){let _=k.findIndex(C=>C==e.row);if(_===-1)continue;let f=!r.includes((I=k[_+1])==null?void 0:I.name),w=!r.includes((d=k[_-1])==null?void 0:d.name);return(f?"rounded-b ":"")+(w?"rounded-t":"")}}),R=(r,p)=>{t.value.options.onRowClick&&t.value.options.onRowClick(r,p),t.value.activeRow.value===r.name?t.value.activeRow.value=null:t.value.activeRow.value=r.name};return(r,p)=>(a(),L(le(u(t).options.getRowRoute?"router-link":"div"),Z({class:[[g.value,c.value||n.value?"bg-surface-gray-2":"",v.value?"cursor-pointer":"",v.value?c.value||n.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:u(t).options.getRowRoute?u(t).options.getRowRoute(s.row):void 0,onClick:x=>R(s.row,x)}),{default:S(()=>[(a(),L(le(u(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:S(()=>{var x,I;return[i("div",{class:"grid items-center space-x-4 px-2",style:ue({height:h.value,gridTemplateColumns:u(ke)(u(t).columns,u(t).options.selectable)})},[u(t).options.selectable?(a(),m("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:p[1]||(p[1]=oe(()=>{},["stop","prevent"])),onDblclick:p[2]||(p[2]=oe(()=>{},["stop"]))},[P(pe,{modelValue:c.value,class:"cursor-pointer duration-300",onClick:p[0]||(p[0]=oe(d=>u(t).toggleRow(s.row[u(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):A("",!0),(a(!0),m(E,null,K(u(t).columns,(d,k)=>(a(),m("div",{key:d.key,class:T([u(fe)[d.align],k==0?"text-ink-gray-9":"text-ink-gray-7"])},[O(r.$slots,"default",Z({ref_for:!0},{idx:k,column:d,item:s.row[d.key],isActive:n.value}),()=>[u(t).slots.cell?(a(),L(le(u(t).slots.cell),Z({key:0,ref_for:!0},{column:d,row:s.row,item:s.row[d.key],align:d.align}),null,16)):(a(),L($e,{key:1,column:d,row:s.row,item:s.row[d.key],align:d.align},null,8,["column","row","item","align"]))])],2))),128))],4),o.value?A("",!0):(a(),m("div",{key:0,class:T(["h-px border-t",g.value==="rounded"||(I=(x=g.value)==null?void 0:x.includes)!=null&&I.call(x,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},et={class:"h-full overflow-y-auto"},Re={__name:"ListRows",setup(s){const e=q("list");return(t,o)=>(a(),m("div",et,[O(t.$slots,"default",{},()=>[(a(!0),m(E,null,K(u(e).rows,c=>(a(),L(ye,{key:c[u(e).rowKey],row:c},null,8,["row"]))),128))])]))}},tt={},st={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function ot(s,e){return a(),m("svg",st,e[0]||(e[0]=[i("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const lt=ge(tt,[["render",ot]]),rt={class:"flex items-center"},nt={class:"w-full py-1.5 pr-2"},at={key:1,class:"text-base font-medium leading-6"},it={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(s){const e=s,t=q("list");function o(){e.group.collapsed==null&&(e.group.collapsed=!1),e.group.collapsed=!e.group.collapsed}return(c,n)=>(a(),m(E,null,[i("div",rt,[i("button",{onClick:o,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[P(lt,{class:T(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[s.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),O(c.$slots,"default",{},()=>[i("div",nt,[u(t).slots["group-header"]?(a(),L(le(u(t).slots["group-header"]),G(Z({key:0},{group:s.group})),null,16)):(a(),m("span",at,$(s.group.group),1))])])]),n[0]||(n[0]=i("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},ut={key:0,class:"mb-5 mt-2"},ct={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(s){const e=q("list");return(t,o)=>s.group.collapsed?A("",!0):(a(),m("div",ut,[O(t.$slots,"default",{},()=>[(a(!0),m(E,null,K(s.group.rows,c=>(a(),L(ye,{key:c[u(e).rowKey],row:c},null,8,["row"]))),128))])]))}},dt={class:"h-full overflow-y-auto"},mt={__name:"ListGroups",setup(s){const e=q("list");return(t,o)=>(a(),m("div",dt,[(a(!0),m(E,null,K(u(e).rows,c=>(a(),m("div",{key:c.group},[O(t.$slots,"default",{},()=>[P(it,{group:c},{default:S(()=>[t.$slots["group-header"]?O(t.$slots,"group-header",Z({key:0,ref_for:!0},{group:c})):A("",!0)]),_:2},1032,["group"]),P(ct,{group:c},null,8,["group"])])]))),128))]))}},pt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},gt={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},ft={class:"flex items-center space-x-3"},yt={class:"mr-3"},vt={class:"flex items-center space-x-1"},Ie=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(s){const e=q("list");let t=b(()=>e.value.options.selectionText(e.value.selections.size));return(o,c)=>(a(),L(Me,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:S(()=>[u(e).selections.size?(a(),m("div",pt,[i("div",{class:T(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",o.$attrs.class])},[O(o.$slots,"default",G(J({selections:u(e).selections,allRowsSelected:u(e).allRowsSelected,selectAll:()=>u(e).toggleAllRows(!0),unselectAll:()=>u(e).toggleAllRows(!1)})),()=>[i("div",gt,[i("div",ft,[P(pe,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),i("div",null,$(u(t)),1)]),i("div",yt,[O(o.$slots,"actions",G(J({selections:u(e).selections,allRowsSelected:u(e).allRowsSelected,selectAll:()=>u(e).toggleAllRows(!0),unselectAll:()=>u(e).toggleAllRows(!1)})))])]),i("div",vt,[P(u(Q),{class:T(["w- text-ink-gray-7",u(e).allRowsSelected?"cursor-not-allowed":""]),disabled:u(e).allRowsSelected,variant:"ghost",onClick:c[0]||(c[0]=n=>u(e).toggleAllRows(!0))},{default:S(()=>c[2]||(c[2]=[z(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),P(u(Q),{icon:"x",variant:"ghost",onClick:c[1]||(c[1]=n=>u(e).toggleAllRows(!1))})])])],2)])):A("",!0)]),_:3}))}}),ht={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},wt=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(s,{expose:e,emit:t}){const o=s,c=De();let n=ze(new Set),v=j(null);const h=t;Y(n,d=>{n.size&&(v.value=null),h("update:selections",d)}),Y(v,d=>{h("update:active-row",d)});let g=b(()=>{function d(_){return _===void 0?!0:_}function k(_){return _===void 0?!1:_}return{getRowRoute:o.options.getRowRoute||null,onRowClick:o.options.onRowClick||null,showTooltip:d(o.options.showTooltip),selectionText:o.options.selectionText||(_=>_===1?"1 row selected":`${_} rows selected`),enableActive:k(o.options.enableActive),selectable:d(o.options.selectable),resizeColumn:k(o.options.resizeColumn),rowHeight:o.options.rowHeight||40,emptyState:o.options.emptyState}});const R=b(()=>o.rows.length?p.value?n.size===o.rows.reduce((d,k)=>d+k.rows.length,0):n.size===o.rows.length:!1),r=b(()=>g.value.selectable);let p=b(()=>o.rows.every(d=>d.group&&d.rows&&Array.isArray(d.rows)));function x(d){n.delete(d)||n.add(d)}function I(d){if(!d||R.value){n.clear();return}if(p.value){o.rows.forEach(k=>{k.rows.forEach(_=>n.add(_[o.rowKey]))});return}o.rows.forEach(k=>n.add(k[o.rowKey]))}return Ee("list",b(()=>({rowKey:o.rowKey,rows:o.rows,columns:o.columns,options:g.value,selections:n,activeRow:v,allRowsSelected:R.value,slots:c,toggleRow:x,toggleAllRows:I}))),e({selections:n,allRowsSelected:R,toggleRow:x,toggleAllRows:I}),(d,k)=>(a(),m("div",ht,[i("div",{class:T(["flex w-max min-w-full flex-col overflow-y-hidden",d.$attrs.class]),style:ue(d.$attrs.style)},[O(d.$slots,"default",G(J({showGroupedRows:u(p),selectable:r.value})),()=>[P(Pe),o.rows.length?(a(),m(E,{key:0},[u(p)?(a(),L(mt,{key:0})):(a(),L(Re,{key:1}))],64)):(a(),L(Ze,{key:1})),r.value?(a(),L(Ie,{key:2})):A("",!0)])],6)]))}}),bt={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},xt={class:"flex flex-col sm:flex-row gap-4"},_t={class:"flex-1"},kt={class:"flex gap-2 flex-wrap"},Ct={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({status:"",priority:"",assignee:"",tags:"",sortBy:"creation"})},statusOptions:{type:Array,default:()=>[]},priorityOptions:{type:Array,default:()=>[]},assigneeOptions:{type:Array,default:()=>[]},tagsOptions:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters"],setup(s,{emit:e}){const t=s,o=e,c=j(t.searchQuery),n=j(te({},t.filters)),v=b(()=>[{label:"Created Date (Newest)",value:"creation desc"},{label:"Created Date (Oldest)",value:"creation asc"},{label:"Modified Date (Newest)",value:"modified desc"},{label:"Modified Date (Oldest)",value:"modified asc"},{label:"Subject (A-Z)",value:"subject asc"},{label:"Subject (Z-A)",value:"subject desc"},{label:"Priority",value:"priority asc"},{label:"Status",value:"status asc"}]);Y(()=>t.searchQuery,R=>{c.value=R}),Y(()=>t.filters,R=>{n.value=te({},R)},{deep:!0});const h=()=>{o("update:searchQuery",c.value)},g=()=>{o("update:filters",te({},n.value))};return(R,r)=>(a(),m("div",bt,[i("div",xt,[i("div",_t,[P(u(He),{modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=p=>c.value=p),placeholder:"Search",class:"w-full",onInput:h},null,8,["modelValue"])]),i("div",kt,[P(u(se),{modelValue:n.value.status,"onUpdate:modelValue":r[1]||(r[1]=p=>n.value.status=p),options:s.statusOptions,placeholder:"All Status",onChange:g},null,8,["modelValue","options"]),P(u(se),{modelValue:n.value.priority,"onUpdate:modelValue":r[2]||(r[2]=p=>n.value.priority=p),options:s.priorityOptions,placeholder:"All Priority",onChange:g},null,8,["modelValue","options"]),P(u(se),{modelValue:n.value.assignee,"onUpdate:modelValue":r[3]||(r[3]=p=>n.value.assignee=p),options:s.assigneeOptions,placeholder:"All Assignees",onChange:g},null,8,["modelValue","options"]),P(u(se),{modelValue:n.value.tags,"onUpdate:modelValue":r[4]||(r[4]=p=>n.value.tags=p),options:s.tagsOptions,placeholder:"All Tags",onChange:g},null,8,["modelValue","options"]),P(u(se),{modelValue:n.value.sortBy,"onUpdate:modelValue":r[5]||(r[5]=p=>n.value.sortBy=p),options:v.value,placeholder:"Sort By",onChange:g},null,8,["modelValue","options"]),P(u(Q),{theme:"blue",variant:"solid",size:"sm"},{default:S(()=>r[6]||(r[6]=[z(" New Issue ")])),_:1,__:[6]})])])]))}},Pt={class:"bg-white rounded-lg shadow-sm border mt-4"},$t={class:"px-6 py-4 flex items-center justify-between"},Rt={class:"text-sm text-gray-700"},It={key:0},St={key:1},Tt={key:0,class:"flex items-center space-x-2"},Lt={class:"flex items-center space-x-1"},At={key:1,class:"px-2 text-gray-500"},Ot={key:2,class:"px-2 text-gray-500"},Ut={key:1,class:"flex items-center space-x-2"},jt={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(s,{emit:e}){const t=s,o=e,c=j(t.itemsPerPage);Y(()=>t.itemsPerPage,w=>{c.value=w});const n=b(()=>Math.ceil(t.totalItems/t.itemsPerPage)),v=b(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),h=b(()=>{const w=t.currentPage*t.itemsPerPage;return Math.min(w,t.totalItems)}),g=b(()=>{const w=[],C=t.maxVisiblePages,U=t.currentPage,H=n.value;if(H<=C)for(let B=1;B<=H;B++)w.push(B);else{let B=Math.max(1,U-Math.floor(C/2)),F=Math.min(H,B+C-1);F-B+1<C&&(B=Math.max(1,F-C+1)),B>1&&(B=Math.max(2,B)),F<H&&(F=Math.min(H-1,F));for(let N=B;N<=F;N++)w.push(N)}return w}),R=b(()=>n.value>t.maxVisiblePages&&!g.value.includes(1)),r=b(()=>n.value>t.maxVisiblePages&&!g.value.includes(n.value)),p=b(()=>R.value&&g.value.length>0&&g.value[0]>2),x=b(()=>r.value&&g.value.length>0&&g.value[g.value.length-1]<n.value-1),I=b(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),d=w=>{w>=1&&w<=n.value&&w!==t.currentPage&&(o("update:currentPage",w),o("pageChange",{page:w,itemsPerPage:t.itemsPerPage,offset:(w-1)*t.itemsPerPage}))},k=()=>{t.currentPage>1&&d(t.currentPage-1)},_=()=>{t.currentPage<n.value&&d(t.currentPage+1)},f=()=>{const w=c.value;o("update:itemsPerPage",w);const C=(t.currentPage-1)*t.itemsPerPage+1,U=Math.ceil(C/w);o("pageChange",{page:U,itemsPerPage:w,offset:(U-1)*w})};return(w,C)=>(a(),m("div",Pt,[i("div",$t,[i("div",Rt,[s.totalItems>0?(a(),m("span",It," Showing "+$(v.value)+" to "+$(h.value)+" of "+$(s.totalItems)+" results ",1)):(a(),m("span",St," No results found "))]),n.value>1?(a(),m("div",Tt,[P(u(Q),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===1,onClick:k},{prefix:S(()=>[P(u(ae),{name:"chevron-left",class:"h-4 w-4"})]),default:S(()=>[C[3]||(C[3]=z(" Previous "))]),_:1,__:[3]},8,["disabled"]),i("div",Lt,[R.value?(a(),L(u(Q),{key:0,theme:"gray",variant:"outline",size:"sm",class:T({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===1}),onClick:C[0]||(C[0]=U=>d(1))},{default:S(()=>C[4]||(C[4]=[z(" 1 ")])),_:1,__:[4]},8,["class"])):A("",!0),p.value?(a(),m("span",At,"...")):A("",!0),(a(!0),m(E,null,K(g.value,U=>(a(),L(u(Q),{key:U,theme:"gray",variant:"outline",size:"sm",class:T({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===U}),onClick:H=>d(U)},{default:S(()=>[z($(U),1)]),_:2},1032,["class","onClick"]))),128)),x.value?(a(),m("span",Ot,"...")):A("",!0),r.value?(a(),L(u(Q),{key:3,theme:"gray",variant:"outline",size:"sm",class:T({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===n.value}),onClick:C[1]||(C[1]=U=>d(n.value))},{default:S(()=>[z($(n.value),1)]),_:1},8,["class"])):A("",!0)]),P(u(Q),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===n.value,onClick:_},{suffix:S(()=>[P(u(ae),{name:"chevron-right",class:"h-4 w-4"})]),default:S(()=>[C[5]||(C[5]=z(" Next "))]),_:1,__:[5]},8,["disabled"])])):A("",!0),s.showItemsPerPage?(a(),m("div",Ut,[C[6]||(C[6]=i("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),P(u(se),{modelValue:c.value,"onUpdate:modelValue":C[2]||(C[2]=U=>c.value=U),options:I.value,onChange:f,class:"w-20"},null,8,["modelValue","options"])])):A("",!0)])]))}},Bt={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Vt={class:"bg-white p-6 rounded-lg shadow-sm border"},Mt={class:"text-3xl font-bold text-gray-900"},Dt={class:"bg-white p-6 rounded-lg shadow-sm border"},zt={class:"text-3xl font-bold text-blue-600"},Et={class:"bg-white p-6 rounded-lg shadow-sm border"},Ht={class:"text-3xl font-bold text-green-600"},Ft={class:"bg-white p-6 rounded-lg shadow-sm border"},Nt={class:"text-3xl font-bold text-orange-600"},Wt={class:"bg-white p-6 rounded-lg shadow-sm border"},Qt={class:"text-3xl font-bold text-purple-600"},Kt={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]}},setup(s){const e=s,t=b(()=>e.issues.length),o=b(()=>e.issues.filter(h=>h.status==="Open").length),c=b(()=>e.issues.filter(h=>h.raised_by===de.user).length),n=b(()=>e.issues.filter(h=>["Open","Replied"].includes(h.status)).length),v=b(()=>e.issues.filter(h=>h.status==="Replied").length);return(h,g)=>(a(),m("div",Bt,[i("div",Vt,[i("div",Mt,$(t.value),1),g[0]||(g[0]=i("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))]),i("div",Dt,[i("div",zt,$(o.value),1),g[1]||(g[1]=i("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))]),i("div",Et,[i("div",Ht,$(c.value),1),g[2]||(g[2]=i("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))]),i("div",Ft,[i("div",Nt,$(n.value),1),g[3]||(g[3]=i("div",{class:"text-sm text-gray-600 mt-1"},"Actionable",-1))]),i("div",Wt,[i("div",Qt,$(v.value),1),g[4]||(g[4]=i("div",{class:"text-sm text-gray-600 mt-1"},"Response",-1))])]))}},qt={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const s=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[s]||"gray"}},components:{Badge:ce}},Gt={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const s=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[s]||"yellow"},priorityIndicatorClass(){const s=this.priority||"Medium";return{"bg-red-500":s==="Critical","bg-red-400":s==="High","bg-yellow-400":s==="Medium","bg-green-400":s==="Low"}}},components:{Badge:ce}},Xt={props:["issueType"],template:`
    <div v-if="issueType" class="flex items-center">
      <Badge :label="issueType" :theme="issueTypeTheme" variant="subtle" />
    </div>
    <span v-else class="text-gray-400 text-sm">-</span>
  `,computed:{issueTypeTheme(){const s=this.issueType;if(!s)return"gray";const e={Bug:"red",Feature:"blue",Enhancement:"green",Task:"purple",Support:"orange",Question:"yellow",Documentation:"gray"};for(const[t,o]of Object.entries(e))if(s.toLowerCase().includes(t.toLowerCase()))return o;return"gray"}},components:{Badge:ce}},Zt={components:{ListView:wt,Avatar:Ke,Badge:ce,Button:Q,FeatherIcon:ae,ListHeader:Pe,ListHeaderItem:Ce,ListRow:ye,ListRowItem:$e,ListRows:Re,ListSelectBanner:Ie,StatusBadge:qt,PriorityBadge:Gt,IssueTypeBadge:Xt},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(s,{emit:e}){const t=j(!1),o=j(null),c=j({x:0,y:0}),n=l=>{if(!l||typeof l!="string")return"?";if(l.includes("@")){const y=l.split("@")[0];return y.includes(".")||y.includes("_")?y.split(/[._]/).map(W=>W[0]).join("").toUpperCase().slice(0,2):y.slice(0,2).toUpperCase()}return l.includes(" ")?l.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):l.slice(0,2).toUpperCase()},v=l=>{if(!l)return"";const y=l.match(/ISS-(\d{4}-\d+)/);return y?y[1]:l},h=l=>{if(!l)return"";const y=document.createElement("div");return y.innerHTML=l,y.textContent||y.innerText||""},g=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",R=l=>l?new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",r=l=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[l]||"gray",p=l=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[l]||"yellow",x=b(()=>s.issues.map(l=>we(te({},l),{status:{label:l.status||"New",color:r(l.status)},priority:{label:l.priority||"Medium",color:p(l.priority)}}))),I=b(()=>[{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Priority",key:"priority",width:"130px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Project",key:"project",width:"120px",sortable:!0},{label:"Tags",key:"issue_type",width:"100px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),d=b(()=>({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:l=>{console.log("Row clicked:",l)}}));return{columns:I,listOptions:d,transformedIssues:x,handleSelections:l=>{console.log("Selected rows:",l)},handleIssueClick:l=>{console.log("Issue clicked:",l)},getStatusColor:l=>{const y=l||"New";return{"bg-blue-500":y==="New","bg-orange-500":y==="In Review","bg-yellow-500":y==="Waiting on Customer","bg-purple-500":y==="Confirmed","bg-blue-500":y==="In Transit","bg-gray-500":y==="In Transit Unmanaged","bg-green-500":y==="Delivered","bg-green-500":y==="Closed","bg-red-500":y==="Open","bg-orange-500":y==="Replied","bg-yellow-500":y==="On Hold","bg-green-500":y==="Resolved"}},getPriorityColor:l=>{const y=l||"Medium";return{"bg-red-500":y==="Critical"||y==="High","bg-yellow-500":y==="Medium","bg-green-500":y==="Low"}},getStatusBadgeClass:l=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[l||"New"]||"bg-gray-100 text-gray-800",getPriorityBadgeClass:l=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[l||"Medium"]||"bg-yellow-100 text-yellow-800",getPriorityIndicatorClass:l=>{const y=l||"Medium";return{"bg-red-500":y==="Critical","bg-red-400":y==="High","bg-yellow-400":y==="Medium","bg-green-400":y==="Low"}},getInitials:n,formatIssueId:v,stripHtml:h,formatDate:g,formatTime:R,showPopup:t,popupUser:o,popupPosition:c,showUserPopup:(l,y)=>{const X=l.target.getBoundingClientRect();c.value={x:X.left+X.width/2,y:X.top-10},o.value=y,t.value=!0},hideUserPopup:()=>{t.value=!1,o.value=null},handleColumnSort:l=>{let y="asc";s.sortField===l&&(y=s.sortDirection==="asc"?"desc":"asc"),e("sort",{field:l,direction:y})},getSortIcon:l=>s.sortField!==l?"arrow-up-down":s.sortDirection==="asc"?"arrow-up":"arrow-down",getSortIconClass:l=>s.sortField!==l?"text-gray-400":"text-blue-600",getSortButtonClass:l=>s.sortField===l?"bg-blue-50":""}}},Jt={class:"bg-white rounded-lg shadow-sm border"},Yt={key:0,class:"px-6 py-12 text-center text-gray-500"},es=["onClick"],ts=["onClick"],ss={key:1,class:"max-w-xs"},os=["title"],ls=["title"],rs=["title"],ns={key:3,class:"flex flex-wrap gap-1"},as=["onMouseenter"],is={key:1,class:"text-gray-400 text-sm"},us={key:4},cs={key:6,class:"flex flex-col"},ds={class:"text-xs text-gray-400"},ms={key:8,class:"flex items-center gap-2"},ps={key:9},gs={class:"flex gap-2"},fs={class:"text-sm"},ys={class:"font-semibold text-gray-900 mb-1"},vs={class:"text-gray-600 flex items-center gap-1"},hs={class:"text-xs text-gray-500 mt-1"};function ws(s,e,t,o,c,n){const v=D("FeatherIcon"),h=D("ListHeaderItem"),g=D("ListHeader"),R=D("Avatar"),r=D("IssueTypeBadge"),p=D("ListRowItem"),x=D("ListRow"),I=D("ListRows"),d=D("Button"),k=D("ListSelectBanner"),_=D("ListView");return a(),m("div",Jt,[e[3]||(e[3]=i("div",{class:"px-6 py-4 border-b border-gray-200"},[i("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(a(),m("div",Yt,e[1]||(e[1]=[i("div",{class:"flex items-center justify-center"},[i("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),i("span",{class:"ml-2"},"Loading issues...")],-1)]))):(a(),L(_,{key:1,columns:o.columns,rows:o.transformedIssues,"row-key":"name",options:o.listOptions,"onUpdate:selections":o.handleSelections},{default:S(()=>[P(g,null,{default:S(()=>[(a(!0),m(E,null,K(o.columns,f=>(a(),L(h,{key:f.key,item:f},Fe({_:2},[f.icon?{name:"prefix",fn:S(({item:w})=>[P(v,{name:w.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,f.sortable?{name:"suffix",fn:S(()=>[i("button",{onClick:w=>o.handleColumnSort(f.key),class:T(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",o.getSortButtonClass(f.key)])},[P(v,{name:o.getSortIcon(f.key),class:T(["h-3 w-3",o.getSortIconClass(f.key)])},null,8,["name","class"])],10,es)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),P(I,null,{default:S(()=>[(a(!0),m(E,null,K(o.transformedIssues,f=>(a(),L(x,{key:f.name,row:f},{default:S(({column:w,item:C})=>[P(p,{item:C,align:w.align},{prefix:S(()=>[w.key==="raised_by"?(a(),L(R,{key:0,size:"sm",label:o.getInitials(f.raised_by),class:"mr-3"},null,8,["label"])):A("",!0)]),default:S(()=>{var U,H,B,F,N;return[w.key==="name"?(a(),m("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:oe(V=>o.handleIssueClick(f),["prevent"])},$(o.formatIssueId(C)),9,ts)):w.key==="subject"?(a(),m("div",ss,[i("div",{class:"font-medium truncate",title:f.subject},$(f.subject),9,os),f.description?(a(),m("div",{key:0,class:"text-gray-500 text-xs mt-1 truncate",title:f.description},$(o.stripHtml(f.description)),9,ls)):A("",!0)])):w.key==="raised_by"?(a(),m("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:C||"-"},$(C||"-"),9,rs)):w.key==="custom_users_assigned"?(a(),m("div",ns,[f.custom_users_assigned&&f.custom_users_assigned.length>0?(a(!0),m(E,{key:0},K(f.custom_users_assigned.filter(V=>V.user_assigned),V=>(a(),m("div",{key:V.name||V,class:"relative inline-block"},[i("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:ee=>o.showUserPopup(ee,V),onMouseleave:e[0]||(e[0]=(...ee)=>o.hideUserPopup&&o.hideUserPopup(...ee))},$(o.getInitials(V.user_assigned)),41,as)]))),128)):(a(),m("span",is,"-"))])):w.key==="project"?(a(),m("span",us,$(C||"-"),1)):w.key==="issue_type"?(a(),L(r,{key:5,issueType:C},null,8,["issueType"])):w.key==="creation"?(a(),m("div",cs,[i("span",null,$(o.formatDate(C)),1),i("span",ds,$(o.formatTime(C)),1)])):w.key==="status"?(a(),m("span",{key:7,class:T([o.getStatusBadgeClass(((U=f.status)==null?void 0:U.label)||f.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},$(((H=f.status)==null?void 0:H.label)||f.status||"New"),3)):w.key==="priority"?(a(),m("div",ms,[i("div",{class:T([o.getPriorityIndicatorClass(((B=f.priority)==null?void 0:B.label)||f.priority||"Medium"),"w-2 h-2 rounded-full"])},null,2),i("span",{class:T([o.getPriorityBadgeClass(((F=f.priority)==null?void 0:F.label)||f.priority||"Medium"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},$(((N=f.priority)==null?void 0:N.label)||f.priority||"Medium"),3)])):(a(),m("span",ps,$(C),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),P(k,null,{actions:S(({unselectAll:f})=>[i("div",gs,[P(d,{variant:"ghost",label:"Delete"}),P(d,{variant:"ghost",label:"Unselect all",onClick:f},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),o.showPopup&&o.popupUser?(a(),m("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ue({left:o.popupPosition.x+"px",top:o.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[i("div",fs,[i("div",ys,$(o.popupUser.user_assigned||"Unknown User"),1),i("div",vs,[e[2]||(e[2]=i("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),z(" "+$(o.popupUser.team||"No Team"),1)]),i("div",hs," Assigned: "+$(o.formatDate(o.popupUser.assigned_date)),1)])],4)):A("",!0)])}const bs=ge(Zt,[["render",ws]]),xs={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},_s={class:"flex items-start justify-between"},ks={class:"flex items-start space-x-3"},Cs={class:"flex-shrink-0"},Ps={class:"flex-1 min-w-0"},$s={class:"text-sm font-medium text-gray-900"},Rs={class:"text-sm text-gray-600 mt-1"},Is={class:"text-xs text-gray-500 mt-1"},Ss=["onClick"],Ts={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(s){const e=n=>{const v="bg-white/95 border-l-4",h={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${v} ${h[n]||h.info}`},t=n=>{const v={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return v[n]||v.info},o=n=>{const v={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return v[n]||v.info},c=n=>{const h=new Date-n,g=Math.floor(h/6e4);if(g<1)return"Just now";if(g<60)return`${g}m ago`;const R=Math.floor(g/60);return R<24?`${R}h ago`:n.toLocaleDateString()};return(n,v)=>(a(),m("div",xs,[P(Ne,{name:"notification",tag:"div"},{default:S(()=>[(a(!0),m(E,null,K(s.notifications,h=>(a(),m("div",{key:h.id,class:T([e(h.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[i("div",_s,[i("div",ks,[i("div",Cs,[P(u(ae),{name:t(h.type),class:T([o(h.type),"h-5 w-5"])},null,8,["name","class"])]),i("div",Ps,[i("p",$s,$(h.title),1),i("p",Rs,$(h.message),1),i("p",Is,$(c(h.timestamp)),1)])]),i("button",{onClick:g=>n.$emit("remove",h.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[P(u(ae),{name:"x",class:"h-4 w-4"})],8,Ss)])],2))),128))]),_:1})]))}},Ls=ge(Ts,[["__scopeId","data-v-d57fd7d2"]]);function As(s,e){let t;return function(...c){const n=()=>{clearTimeout(t),s(...c)};clearTimeout(t),t=setTimeout(n,e)}}function Os(){const s=j(""),e=j({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=j(""),o=As(r=>{t.value=r},300);Y(s,r=>{o(r)});const c=b(()=>{const r={};return t.value.trim()&&(r.subject=["like",`%${t.value.trim()}%`]),e.value.status&&(r.status=e.value.status),e.value.priority&&(r.priority=e.value.priority),e.value.assignee&&(r.raised_by=e.value.assignee),e.value.tags&&(r.issue_type=e.value.tags),r}),n=b(()=>e.value.sortBy||"creation desc"),v=r=>{if(!r||!Array.isArray(r))return[];let p=[...r];if(s.value.trim()){const x=s.value.toLowerCase().trim();p=p.filter(I=>{const d=(I.subject||"").toLowerCase(),k=(I.description||"").toLowerCase();return d.includes(x)||k.includes(x)})}return e.value.status&&(p=p.filter(x=>x.status===e.value.status)),e.value.priority&&(p=p.filter(x=>x.priority===e.value.priority)),e.value.assignee&&(p=p.filter(x=>x.raised_by===e.value.assignee)),e.value.tags&&(p=p.filter(x=>x.issue_type===e.value.tags)),p.sort((x,I)=>{const[d,k]=e.value.sortBy.split(" "),_=x[d]||"",f=I[d]||"";let w=0;if(d==="creation"||d==="modified")w=new Date(_)-new Date(f);else if(d==="priority"){const C={Critical:4,High:3,Medium:2,Low:1};w=(C[_]||0)-(C[f]||0)}else w=_.toString().localeCompare(f.toString());return k==="desc"?-w:w}),p},h=r=>{if(!r||!Array.isArray(r))return[{label:"All Assignees",value:""}];const p=[...new Set(r.map(x=>x.raised_by).filter(x=>x&&x.trim()))];return[{label:"All Assignees",value:""},...p.map(x=>({label:x,value:x}))]},g=()=>{s.value="",t.value="",e.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},R=b(()=>s.value.trim()!==""||e.value.status!==""||e.value.priority!==""||e.value.assignee!==""||e.value.tags!==""||e.value.sortBy!=="creation desc");return{searchQuery:s,filters:e,debouncedSearchQuery:t,apiFilters:c,sortOrder:n,hasActiveFilters:R,filterIssues:v,getAssigneeOptions:h,resetFilters:g}}const me=ie({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(s){const e=s||{},t=e.limit_page_length||10,o=e.limit_start||0,c=e.filters||{},n=e.order_by||"creation desc";return{limit_page_length:t,limit_start:o,filters:c,order_by:n}},onError(s){console.error("Failed to fetch issues:",s),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Se=ie({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(s){return{filters:(s||{}).filters||{}}},onError(s){console.error("Failed to fetch issues count:",s)}});function re(s={}){const e={limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,filters:s.filters||{},order_by:s.order_by||"creation desc"};return me.reload(e)}function ne(s={}){return Se.reload({filters:s})}const Us=ie({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(s){console.error("Failed to fetch issue priorities:",s)},auto:!0}),js=ie({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(s){console.error("Failed to fetch issue types:",s)},auto:!0});ie({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(s){console.error("Failed to fetch projects:",s)},auto:!0});function Bs(){const s=Us.data||[];return[{label:"All Priority",value:""},...s.map(e=>({label:e.name,value:e.name}))]}function Vs(){const s=js.data||[];return[{label:"All Types",value:""},...s.map(e=>({label:e.name,value:e.name}))]}function Ms(){return[{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]}function Ds(){const s=We(),e=j([]),t=j(!1),o=j(!1);let c=null;const n=o.value?15e3:2e3,v=()=>{c&&clearTimeout(c),c=setTimeout(()=>{R()},n)},h=()=>{if(!s||t.value)return;console.log("Setting up realtime updates for Issue doctype"),s.emit("doctype_subscribe","Issue"),console.log("Emitted doctype_subscribe for Issue"),s.onAny((_,...f)=>{console.log("Socket received event:",_,f)}),s.off("list_update"),s.on("list_update",_=>{if(console.log("Received list_update event:",_),(_==null?void 0:_.doctype)!=="Issue"){console.log("Skipping list_update - not for Issue doctype");return}if(console.log("Processing list_update for Issue:",_),r()){console.log("Skipping realtime update due to current state");return}e.value.push(_),console.log("Added to pending refreshes, total pending:",e.value.length),v()}),["doc_update","doc_insert","doc_delete","doc_cancel"].forEach(_=>{s.on(_,f=>{if((f==null?void 0:f.doctype)!=="Issue"||(console.log(`Received ${_} for Issue:`,f),r()))return;const w={doctype:"Issue",name:f.name,action:_.replace("doc_",""),modified_by:f.modified_by,timestamp:new Date().toISOString()};e.value.push(w),v()})}),t.value=!0,console.log("Realtime events setup completed for Issue doctype")},g=()=>{if(!s||!t.value)return;console.log("Disabling realtime updates for Issue doctype"),s.emit("doctype_unsubscribe","Issue"),s.off("list_update"),["doc_update","doc_insert","doc_delete","doc_cancel"].forEach(_=>{s.off(_)}),t.value=!1},R=()=>{if(!e.value.length)return;console.log("Processing document refreshes:",e.value.length,"pending");const k=window.location.hash||window.location.pathname;if(!k.includes("issue-tracker")&&!k.includes("issues")){console.log("User not on issue list page, clearing pending refreshes"),e.value=[],g();return}const _=[...new Set(e.value.map(w=>w.name))],f=_.length;console.log("Refreshing issues for documents:",_),e.value=[];try{re(),ne(),console.log("Issue list refreshed successfully"),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:f,documents:_}}))}catch(w){console.error("Error refreshing issue list:",w)}},r=()=>!!document.hidden,p=()=>{console.log("Manual refresh triggered"),e.value=[];try{re(),ne()}catch(k){console.error("Error during manual refresh:",k)}},x=()=>{console.log("Socket connected, setting up realtime updates"),h()},I=()=>{console.log("Socket disconnected, disabling realtime updates"),t.value=!1},d=k=>{console.error("Socket connection error:",k),t.value=!1};return xe(()=>{if(!s){console.warn("Socket not available, realtime updates disabled");return}s.on("connect",x),s.on("disconnect",I),s.on("connect_error",d),s.connected&&h()}),_e(()=>{s&&(s.off("connect",x),s.off("disconnect",I),s.off("connect_error",d)),g(),c&&clearTimeout(c)}),{pendingDocumentRefreshes:e,realtimeEventsSetup:t,setupRealtimeUpdates:h,disableRealtimeUpdates:g,manualRefresh:p,processDocumentRefreshes:R}}const zs={class:"min-h-screen bg-gray-50"},Es={class:"bg-white shadow-sm border-b"},Hs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Fs={class:"flex justify-between items-center py-4"},Ns={class:"flex items-center space-x-4"},Ws={class:"flex space-x-4"},Qs={class:"flex items-center space-x-4"},Ks={class:"text-sm text-gray-600"},qs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Gs={class:"fixed top-20 right-4 w-64"},Xs={class:"bg-white rounded-lg shadow-sm border p-4"},Zs={class:"flex items-center justify-between"},Js={class:"text-sm font-medium text-gray-900 flex items-center"},Ys={class:"text-xs text-gray-500 mt-1"},eo={key:0,class:"text-xs text-orange-600 mt-1"},oo={__name:"IssueTracker",setup(s){const{searchQuery:e,filters:t,debouncedSearchQuery:o,apiFilters:c,sortOrder:n,getAssigneeOptions:v}=Os(),{pendingDocumentRefreshes:h,realtimeEventsSetup:g,manualRefresh:R}=Ds(),r=j([]),p=M=>{r.value.push(te({id:Date.now()+Math.random()},M)),setTimeout(()=>{var l;x((l=r.value[r.value.length-1])==null?void 0:l.id)},5e3)},x=M=>{r.value=r.value.filter(l=>l.id!==M)},I=b(()=>me.data||[]),d=b(()=>Se.data||0),k=b(()=>me.loading),_=b(()=>I.value),f=b(()=>(n.value||"creation desc").split(" ")[0]),w=b(()=>(n.value||"creation desc").split(" ")[1]||"desc"),C=({field:M,direction:l})=>{const y=`${M} ${l}`;t.value.sortBy=y},U=b(()=>Bs()),H=b(()=>Vs()),B=b(()=>Ms()),F=b(()=>v(I.value)),N=j(1),V=j(10),ee=({page:M,itemsPerPage:l,offset:y})=>{N.value=M,V.value=l,re({filters:c.value,order_by:n.value,limit_page_length:l,limit_start:y}),ne(c.value)};return Y([o,c,n],()=>{N.value=1,re({filters:c.value,order_by:n.value,limit_page_length:V.value,limit_start:0}),ne(c.value)},{deep:!0}),xe(()=>{re({filters:c.value,order_by:n.value,limit_page_length:V.value,limit_start:0}),ne(c.value),window.addEventListener("issueListUpdated",M=>{const{count:l,documents:y}=M.detail;p({type:"info",title:"List Updated",message:`${l} issue${l>1?"s":""} updated: ${y.slice(0,3).join(", ")}${y.length>3?"...":""}`,timestamp:new Date})})}),_e(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(M,l)=>{const y=D("router-link"),X=D("Button");return a(),m("div",zs,[i("div",Es,[i("div",Hs,[i("div",Fs,[i("div",Ns,[l[8]||(l[8]=i("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),i("nav",Ws,[P(y,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:S(()=>l[6]||(l[6]=[z(" Home ")])),_:1,__:[6]}),P(y,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:S(()=>l[7]||(l[7]=[z(" Issues ")])),_:1,__:[7]})])]),i("div",Qs,[i("span",Ks,$(u(de).user),1),P(X,{onClick:l[0]||(l[0]=W=>u(de).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:S(()=>l[9]||(l[9]=[z(" Logout ")])),_:1,__:[9]})])])])]),i("div",qs,[P(Kt,{issues:_.value},null,8,["issues"]),P(Ct,{searchQuery:u(e),"onUpdate:searchQuery":l[1]||(l[1]=W=>be(e)?e.value=W:null),filters:u(t),"onUpdate:filters":l[2]||(l[2]=W=>be(t)?t.value=W:null),statusOptions:B.value,priorityOptions:U.value,assigneeOptions:F.value,tagsOptions:H.value},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions"]),P(bs,{issues:_.value,loading:k.value,sortField:f.value,sortDirection:w.value,onSort:C},null,8,["issues","loading","sortField","sortDirection"]),P(jt,{currentPage:N.value,"onUpdate:currentPage":l[3]||(l[3]=W=>N.value=W),itemsPerPage:V.value,"onUpdate:itemsPerPage":l[4]||(l[4]=W=>V.value=W),totalItems:d.value,onPageChange:ee},null,8,["currentPage","itemsPerPage","totalItems"]),i("div",Gs,[i("div",Xs,[i("div",Zs,[i("h3",Js,[i("div",{class:T([u(g)?"bg-green-500 animate-pulse":"bg-red-500","w-2 h-2 rounded-full mr-2"])},null,2),l[10]||(l[10]=z(" List Updates "))]),i("button",{onClick:l[5]||(l[5]=(...W)=>u(R)&&u(R)(...W)),class:"text-xs text-blue-600 hover:text-blue-800",title:"Manual refresh"}," Refresh ")]),i("p",Ys,$(u(g)?"Listening for list_update events":"Realtime updates disabled"),1),u(h)>0?(a(),m("p",eo,$(u(h))+" updates pending... ",1)):A("",!0)])])]),P(Ls,{notifications:r.value,onRemove:x},null,8,["notifications"])])}}};export{oo as default};
//# sourceMappingURL=IssueTracker-C9BiENNj.js.map
