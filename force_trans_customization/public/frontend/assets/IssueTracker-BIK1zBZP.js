var Dt=Object.defineProperty,At=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var lt=(e,s,t)=>s in e?Dt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,we=(e,s)=>{for(var t in s||(s={}))nt.call(s,t)&&lt(e,t,s[t]);if(Ue)for(var t of Ue(s))it.call(s,t)&&lt(e,t,s[t]);return e},Ye=(e,s)=>At(e,Vt(s));var Ne=(e,s)=>{var t={};for(var r in e)nt.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&Ue)for(var r of Ue(e))s.indexOf(r)<0&&it.call(e,r)&&(t[r]=e[r]);return t};var pe=(e,s,t)=>new Promise((r,l)=>{var i=m=>{try{y(t.next(m))}catch(f){l(f)}},g=m=>{try{y(t.throw(m))}catch(f){l(f)}},y=m=>m.done?r(m.value):Promise.resolve(m.value).then(i,g);y((t=t.apply(e,s)).next())});import{r as A,i as Oe,j as xt,k as ae,g as Ve,y as jt,l as M,m as Et,n as Lt,p as _t,q as Bt,v as Ut,x as Ke,H as Qe,z as tt,A as Nt,B as zt,N as ut,C as Ge,D as Ht,E as ye,F as Jt,G as ve,I as ue,J as De,K as qt,L as ct,M as kt,O as Kt,o as a,a as u,P as N,Q as oe,R as Y,f as se,t as P,b as o,S as D,T as Wt,U as W,w as K,d as U,u as _,V as xe,W as Ce,X as be,Y as ee,Z as Re,$ as $e,a0 as Qt,a1 as Gt,a2 as Fe,h as Me,a3 as st,a4 as Ie,a5 as Xt,a6 as Le,a7 as Yt,a8 as Zt,a9 as es,aa as _e,c as ke,ab as me,ac as fe,ad as dt,ae as ts,af as pt,ag as ss,ah as Ae,ai as ot,e as he,aj as os,ak as rs,al as Te,am as as,an as gt,s as mt}from"./index-CALwhDOP.js";function vt(e,s){if(e)return e;let t=s!=null?s:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function ls(e,s){let t=A(vt(e.value.type,e.value.as));return Oe(()=>{t.value=vt(e.value.type,e.value.as)}),xt(()=>{var r;t.value||ae(s)&&ae(s)instanceof HTMLButtonElement&&!((r=ae(s))!=null&&r.hasAttribute("type"))&&(t.value="button")}),t}let ft=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ht(e){var s,t;let r=(s=e.innerText)!=null?s:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return r;let i=!1;for(let y of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))y.remove(),i=!0;let g=i?(t=l.innerText)!=null?t:"":r;return ft.test(g)&&(g=g.replace(ft,"")),g}function ns(e){let s=e.getAttribute("aria-label");if(typeof s=="string")return s.trim();let t=e.getAttribute("aria-labelledby");if(t){let r=t.split(" ").map(l=>{let i=document.getElementById(l);if(i){let g=i.getAttribute("aria-label");return typeof g=="string"?g.trim():ht(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ht(e).trim()}function is(e){let s=A(""),t=A("");return()=>{let r=ae(e);if(!r)return"";let l=r.innerText;if(s.value===l)return t.value;let i=ns(r).trim().toLowerCase();return s.value=l,t.value=i,i}}var us=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(us||{}),cs=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(cs||{});function ds(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Ct=Symbol("MenuContext");function Xe(e){let s=ye(Ct,null);if(s===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Xe),t}return s}let ps=Ve({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:s,attrs:t}){let r=A(1),l=A(null),i=A(null),g=A([]),y=A(""),m=A(null),f=A(1);function n(w=x=>x){let x=m.value!==null?g.value[m.value]:null,v=Kt(w(g.value.slice()),b=>ae(b.dataRef.domRef)),h=x?v.indexOf(x):null;return h===-1&&(h=null),{items:v,activeItemIndex:h}}let C={menuState:r,buttonRef:l,itemsRef:i,items:g,searchQuery:y,activeItemIndex:m,activationTrigger:f,closeMenu:()=>{r.value=1,m.value=null},openMenu:()=>r.value=0,goToItem(w,x,v){let h=n(),b=Jt(w===ve.Specific?{focus:ve.Specific,id:x}:{focus:w},{resolveItems:()=>h.items,resolveActiveIndex:()=>h.activeItemIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});y.value="",m.value=b,f.value=v!=null?v:1,g.value=h.items},search(w){let x=y.value!==""?0:1;y.value+=w.toLowerCase();let v=(m.value!==null?g.value.slice(m.value+x).concat(g.value.slice(0,m.value+x)):g.value).find(b=>b.dataRef.textValue.startsWith(y.value)&&!b.dataRef.disabled),h=v?g.value.indexOf(v):-1;h===-1||h===m.value||(m.value=h,f.value=1)},clearSearch(){y.value=""},registerItem(w,x){let v=n(h=>[...h,{id:w,dataRef:x}]);g.value=v.items,m.value=v.activeItemIndex,f.value=1},unregisterItem(w){let x=n(v=>{let h=v.findIndex(b=>b.id===w);return h!==-1&&v.splice(h,1),v});g.value=x.items,m.value=x.activeItemIndex,f.value=1}};return jt([l,i],(w,x)=>{var v;C.closeMenu(),Et(x,Lt.Loose)||(w.preventDefault(),(v=ae(l))==null||v.focus())},M(()=>r.value===0)),_t(Ct,C),Bt(M(()=>Ut(r.value,{0:Ke.Open,1:Ke.Closed}))),()=>{let w={open:r.value===0,close:C.closeMenu};return Qe({ourProps:{},theirProps:e,slot:w,slots:s,attrs:t,name:"Menu"})}}}),gs=Ve({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${tt()}`}},setup(e,{attrs:s,slots:t,expose:r}){let l=Xe("MenuButton");r({el:l.buttonRef,$el:l.buttonRef});function i(f){switch(f.key){case ue.Space:case ue.Enter:case ue.ArrowDown:f.preventDefault(),f.stopPropagation(),l.openMenu(),De(()=>{var n;(n=ae(l.itemsRef))==null||n.focus({preventScroll:!0}),l.goToItem(ve.First)});break;case ue.ArrowUp:f.preventDefault(),f.stopPropagation(),l.openMenu(),De(()=>{var n;(n=ae(l.itemsRef))==null||n.focus({preventScroll:!0}),l.goToItem(ve.Last)});break}}function g(f){switch(f.key){case ue.Space:f.preventDefault();break}}function y(f){e.disabled||(l.menuState.value===0?(l.closeMenu(),De(()=>{var n;return(n=ae(l.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(f.preventDefault(),l.openMenu(),ds(()=>{var n;return(n=ae(l.itemsRef))==null?void 0:n.focus({preventScroll:!0})})))}let m=ls(M(()=>({as:e.as,type:s.type})),l.buttonRef);return()=>{var f;let n={open:l.menuState.value===0},v=e,{id:C}=v,w=Ne(v,["id"]),x={ref:l.buttonRef,id:C,type:m.value,"aria-haspopup":"menu","aria-controls":(f=ae(l.itemsRef))==null?void 0:f.id,"aria-expanded":l.menuState.value===0,onKeydown:i,onKeyup:g,onClick:y};return Qe({ourProps:x,theirProps:w,slot:n,attrs:s,slots:t,name:"MenuButton"})}}}),ms=Ve({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${tt()}`}},setup(e,{attrs:s,slots:t,expose:r}){let l=Xe("MenuItems"),i=A(null);r({el:l.itemsRef,$el:l.itemsRef}),Nt({container:M(()=>ae(l.itemsRef)),enabled:M(()=>l.menuState.value===0),accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});function g(n){var C;switch(i.value&&clearTimeout(i.value),n.key){case ue.Space:if(l.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),l.search(n.key);case ue.Enter:if(n.preventDefault(),n.stopPropagation(),l.activeItemIndex.value!==null){let w=l.items.value[l.activeItemIndex.value];(C=ae(w.dataRef.domRef))==null||C.click()}l.closeMenu(),kt(ae(l.buttonRef));break;case ue.ArrowDown:return n.preventDefault(),n.stopPropagation(),l.goToItem(ve.Next);case ue.ArrowUp:return n.preventDefault(),n.stopPropagation(),l.goToItem(ve.Previous);case ue.Home:case ue.PageUp:return n.preventDefault(),n.stopPropagation(),l.goToItem(ve.First);case ue.End:case ue.PageDown:return n.preventDefault(),n.stopPropagation(),l.goToItem(ve.Last);case ue.Escape:n.preventDefault(),n.stopPropagation(),l.closeMenu(),De(()=>{var w;return(w=ae(l.buttonRef))==null?void 0:w.focus({preventScroll:!0})});break;case ue.Tab:n.preventDefault(),n.stopPropagation(),l.closeMenu(),De(()=>qt(ae(l.buttonRef),n.shiftKey?ct.Previous:ct.Next));break;default:n.key.length===1&&(l.search(n.key),i.value=setTimeout(()=>l.clearSearch(),350));break}}function y(n){switch(n.key){case ue.Space:n.preventDefault();break}}let m=zt(),f=M(()=>m!==null?(m.value&Ke.Open)===Ke.Open:l.menuState.value===0);return()=>{var n,C;let w={open:l.menuState.value===0},b=e,{id:x}=b,v=Ne(b,["id"]),h={"aria-activedescendant":l.activeItemIndex.value===null||(n=l.items.value[l.activeItemIndex.value])==null?void 0:n.id,"aria-labelledby":(C=ae(l.buttonRef))==null?void 0:C.id,id:x,onKeydown:g,onKeyup:y,role:"menu",tabIndex:0,ref:l.itemsRef};return Qe({ourProps:h,theirProps:v,slot:w,attrs:s,slots:t,features:ut.RenderStrategy|ut.Static,visible:f.value,name:"MenuItems"})}}}),vs=Ve({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${tt()}`}},setup(e,{slots:s,attrs:t,expose:r}){let l=Xe("MenuItem"),i=A(null);r({el:i,$el:i});let g=M(()=>l.activeItemIndex.value!==null?l.items.value[l.activeItemIndex.value].id===e.id:!1),y=is(i),m=M(()=>({disabled:e.disabled,get textValue(){return y()},domRef:i}));Oe(()=>l.registerItem(e.id,m)),Ge(()=>l.unregisterItem(e.id)),xt(()=>{l.menuState.value===0&&g.value&&l.activationTrigger.value!==0&&De(()=>{var h,b;return(b=(h=ae(i))==null?void 0:h.scrollIntoView)==null?void 0:b.call(h,{block:"nearest"})})});function f(h){if(e.disabled)return h.preventDefault();l.closeMenu(),kt(ae(l.buttonRef))}function n(){if(e.disabled)return l.goToItem(ve.Nothing);l.goToItem(ve.Specific,e.id)}let C=Ht();function w(h){C.update(h)}function x(h){C.wasMoved(h)&&(e.disabled||g.value||l.goToItem(ve.Specific,e.id,0))}function v(h){C.wasMoved(h)&&(e.disabled||g.value&&l.goToItem(ve.Nothing))}return()=>{let{disabled:h}=e,b={active:g.value,disabled:h,close:l.closeMenu},F=e,{id:I}=F,S=Ne(F,["id"]);return Qe({ourProps:{id:I,ref:i,role:"menuitem",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:n,onPointerenter:w,onMouseenter:w,onPointermove:x,onMousemove:x,onPointerleave:v,onMouseleave:v},theirProps:we(we({},t),S),slot:b,attrs:t,slots:s,name:"MenuItem"})}}});const fs=["src","alt"],hs=Ve({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(e){const s=A(!1),t=e,r=M(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),l=M(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),i=M(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),g=M(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),y=M(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),m=M(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function f(n){n.type&&(s.value=!0)}return(n,C)=>(a(),u("div",{class:N(["relative inline-block shrink-0",[l.value,r.value]])},[n.image&&!s.value?(a(),u("img",{key:0,src:n.image,alt:n.label,class:N([r.value,"h-full w-full object-cover"]),onError:C[0]||(C[0]=w=>f(w))},null,42,fs)):(a(),u("div",{key:1,class:N(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[i.value,r.value]])},[n.$slots.default?(a(),u("div",{key:0,class:N(m.value)},[oe(n.$slots,"default")],2)):(a(),u(Y,{key:1},[se(P(n.label&&n.label[0]),1)],64))],2)),n.$slots.indicator?(a(),u("div",{key:2,class:N(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",g.value])},[o("div",{class:N(y.value)},[oe(n.$slots,"indicator")],2)],2)):D("",!0)],2))}}),bs={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},ys=["onClick"],ws={class:"whitespace-nowrap text-ink-gray-7"},xs=Ve({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const s=Wt(),t=e,r=m=>{let f=()=>{m.route?s.push(m.route):m.onClick&&m.onClick()};return{label:m.label,icon:m.icon,component:m.component,onClick:f}},l=m=>(m||[]).filter(Boolean).filter(f=>f.condition?f.condition():!0).map(f=>r(f)),i=M(()=>{let m=[],f=null,n=0;for(let C of t.options)if(C!=null){if("group"in C){f&&(m.push(f),f=null);let w=Ye(we({key:n},C),{items:l(C.items)});m.push(w)}else f||(f={key:n,group:"",hideLabel:!0,items:[]}),f.items.push(...l([C]));n++}return f&&m.push(f),m}),g=M(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),y=M(()=>t.placement==="left"?"bottom-start":t.placement==="right"?"bottom-end":t.placement==="center"?"bottom-center":"bottom");return(m,f)=>(a(),W(_(ps),{as:"div",class:"relative inline-block text-left"},{default:K(({open:n})=>[U(_(Qt),{transition:g.value,show:n,placement:y.value},{target:K(()=>[U(_(gs),{as:"div"},{default:K(()=>[m.$slots.default?oe(m.$slots,"default",xe(Ce({key:0},{open:n}))):(a(),W(_(be),Ce({key:1,active:n},m.button),{default:K(()=>{var C;return[se(P(m.button?((C=m.button)==null?void 0:C.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:K(()=>[U(_(ms),{class:N(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":m.placement=="left","right-0 origin-top-right":m.placement=="right","inset-x-0 origin-top":m.placement=="center"}])},{default:K(()=>[(a(!0),u(Y,null,ee(i.value,C=>(a(),u("div",{key:C.key,class:"p-1.5"},[C.group&&!C.hideLabel?(a(),u("div",bs,P(C.group),1)):D("",!0),(a(!0),u(Y,null,ee(C.items,w=>(a(),W(_(vs),{key:w.label},{default:K(({active:x})=>[w.component?(a(),W(Re(w.component),{key:0,active:x},null,8,["active"])):(a(),u("button",{key:1,class:N([x?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:w.onClick},[w.icon&&typeof w.icon=="string"?(a(),W($e,{key:0,name:w.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):w.icon?(a(),W(Re(w.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):D("",!0),o("span",ws,P(w.label),1)],10,ys))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),_s={class:"flex h-full w-full flex-col items-center justify-center text-base"},ks={class:"text-xl font-medium"},Cs={class:"mt-1 text-base text-ink-gray-5"},Ss={__name:"ListEmptyState",setup(e){const s=ye("list");return(t,r)=>(a(),u("div",_s,[oe(t.$slots,"default",{},()=>[o("div",ks,P(_(s).options.emptyState.title),1),o("div",Cs,P(_(s).options.emptyState.description),1),_(s).options.emptyState.button?(a(),W(_(be),Ce({key:0},_(s).options.emptyState.button,{class:"mt-4"}),null,16)):D("",!0)])]))}};function St(e,s=!0){let t=s?"14px ":"",r=e.map(l=>{let i=l.width||1;return typeof i=="number"?i+"fr":i}).join(" ");return t+r}const rt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Is={class:"truncate"},It={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:s}){const t=e,r=s,l=A(null),i=A(null),g=M(()=>{if(typeof t.item.width=="string"){const n=parseInt(t.item.width);if(t.item.width.includes("rem"))return n*16;if(t.item.width.includes("px"))return n}return i.value.offsetWidth}),y=n=>{const C=n.clientX,w=g.value,x=h=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),l.value.style.backgroundColor="rgb(199 199 199)";let b=w+(h.clientX-C);t.item.width=`${b<50?50:b}px`,m(t.item.width)},v=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),l.value.style.backgroundColor="",window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",v)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",v)},m=Gt(n=>{t.item.width=n,r("columnWidthUpdated")},t.debounce),f=ye("list");return(n,C)=>(a(),u("div",{ref_key:"columnRef",ref:i,class:N(["group relative flex items-center",e.item.align?_(rt)[e.item.align]:"justify-between"])},[o("div",{class:N(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",n.$attrs.class])},[oe(n.$slots,"prefix",xe(Fe({item:e.item}))),oe(n.$slots,"default",{},()=>[o("div",Is,P(e.item.label),1)]),oe(n.$slots,"suffix",xe(Fe({item:e.item})))],2),_(f).options.resizeColumn?oe(n.$slots,"resizer",xe(Ce({key:0},{item:e.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:y},[o("div",{ref_key:"resizer",ref:l,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):D("",!0)],2))}},$t={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:s}){const t=s,r=ye("list");return(l,i)=>(a(),u("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:Ie({gridTemplateColumns:_(St)(_(r).columns,_(r).options.selectable)})},[_(r).options.selectable?(a(),W(st,{key:0,class:"cursor-pointer duration-300",modelValue:_(r).allRowsSelected,onClick:Me(_(r).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):D("",!0),oe(l.$slots,"default",{},()=>[(a(!0),u(Y,null,ee(_(r).columns,g=>(a(),W(It,{key:g.key,item:g,onColumnWidthUpdated:y=>t("columnWidthUpdated",g)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},$s={class:"truncate text-base"},Pt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const s=e,t=M(()=>{var g,y;return(g=s.column)!=null&&g.getLabel?(y=s.column)==null?void 0:y.getLabel({row:s.row}):l(s.item).label||""}),r=M(()=>i.value.options.showTooltip?s.column.getTooltip?s.column.getTooltip(s.row):l(s.item).label:"");function l(g){return g&&typeof g=="object"?g:{label:g}}const i=ye("list");return(g,y)=>(a(),u("div",{class:N(["flex items-center space-x-2",_(rt)[e.align]])},[oe(g.$slots,"prefix",{},()=>[e.column.prefix?(a(),W(Re(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):D("",!0)]),U(_(Xt),xe(Fe(_(i).options.showTooltip?{text:r.value}:{text:""})),{default:K(()=>[oe(g.$slots,"default",xe(Fe({label:t.value})),()=>[o("div",$s,P(t.value),1)])]),_:3},16),oe(g.$slots,"suffix")],2))}},at={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const s=e,t=ye("list"),r=M(()=>{var n;return(n=t.value.rows)!=null&&n.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===s.row[t.value.rowKey]:!1}),l=M(()=>t.value.selections.has(s.row[t.value.rowKey])),i=M(()=>t.value.options.enableActive&&t.value.activeRow.value===s.row.name),g=M(()=>t.value.options.getRowRoute||t.value.options.onRowClick),y=M(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),m=M(()=>{var w,x,v;if(!l.value)return"rounded";const n=[...t.value.selections];let C=(w=t.value.rows[0])!=null&&w.group?t.value.rows.map(h=>h.rows):[t.value.rows];for(let h of C){let b=h.findIndex(F=>F==s.row);if(b===-1)continue;let I=!n.includes((x=h[b+1])==null?void 0:x.name),S=!n.includes((v=h[b-1])==null?void 0:v.name);return(I?"rounded-b ":"")+(S?"rounded-t":"")}}),f=(n,C)=>{t.value.options.onRowClick&&t.value.options.onRowClick(n,C),t.value.activeRow.value===n.name?t.value.activeRow.value=null:t.value.activeRow.value=n.name};return(n,C)=>(a(),W(Re(_(t).options.getRowRoute?"router-link":"div"),Ce({class:[[m.value,l.value||i.value?"bg-surface-gray-2":"",g.value?"cursor-pointer":"",g.value?l.value||i.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:_(t).options.getRowRoute?_(t).options.getRowRoute(e.row):void 0,onClick:w=>f(e.row,w)}),{default:K(()=>[(a(),W(Re(_(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:K(()=>{var w,x;return[o("div",{class:"grid items-center space-x-4 px-2",style:Ie({height:y.value,gridTemplateColumns:_(St)(_(t).columns,_(t).options.selectable)})},[_(t).options.selectable?(a(),u("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:C[1]||(C[1]=Me(()=>{},["stop","prevent"])),onDblclick:C[2]||(C[2]=Me(()=>{},["stop"]))},[U(st,{modelValue:l.value,class:"cursor-pointer duration-300",onClick:C[0]||(C[0]=Me(v=>_(t).toggleRow(e.row[_(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):D("",!0),(a(!0),u(Y,null,ee(_(t).columns,(v,h)=>(a(),u("div",{key:v.key,class:N([_(rt)[v.align],h==0?"text-ink-gray-9":"text-ink-gray-7"])},[oe(n.$slots,"default",Ce({ref_for:!0},{idx:h,column:v,item:e.row[v.key],isActive:i.value}),()=>[_(t).slots.cell?(a(),W(Re(_(t).slots.cell),Ce({key:0,ref_for:!0},{column:v,row:e.row,item:e.row[v.key],align:v.align}),null,16)):(a(),W(Pt,{key:1,column:v,row:e.row,item:e.row[v.key],align:v.align},null,8,["column","row","item","align"]))])],2))),128))],4),r.value?D("",!0):(a(),u("div",{key:0,class:N(["h-px border-t",m.value==="rounded"||(x=(w=m.value)==null?void 0:w.includes)!=null&&x.call(w,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Ps={class:"h-full overflow-y-auto"},Tt={__name:"ListRows",setup(e){const s=ye("list");return(t,r)=>(a(),u("div",Ps,[oe(t.$slots,"default",{},()=>[(a(!0),u(Y,null,ee(_(s).rows,l=>(a(),W(at,{key:l[_(s).rowKey],row:l},null,8,["row"]))),128))])]))}},Ts={},Rs={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ms(e,s){return a(),u("svg",Rs,s[0]||(s[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Fs=Le(Ts,[["render",Ms]]),Os={class:"flex items-center"},Ds={class:"w-full py-1.5 pr-2"},As={key:1,class:"text-base font-medium leading-6"},Vs={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const s=e,t=ye("list");function r(){s.group.collapsed==null&&(s.group.collapsed=!1),s.group.collapsed=!s.group.collapsed}return(l,i)=>(a(),u(Y,null,[o("div",Os,[o("button",{onClick:r,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[U(Fs,{class:N(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),oe(l.$slots,"default",{},()=>[o("div",Ds,[_(t).slots["group-header"]?(a(),W(Re(_(t).slots["group-header"]),xe(Ce({key:0},{group:e.group})),null,16)):(a(),u("span",As,P(e.group.group),1))])])]),i[0]||(i[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},js={key:0,class:"mb-5 mt-2"},Es={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const s=ye("list");return(t,r)=>e.group.collapsed?D("",!0):(a(),u("div",js,[oe(t.$slots,"default",{},()=>[(a(!0),u(Y,null,ee(e.group.rows,l=>(a(),W(at,{key:l[_(s).rowKey],row:l},null,8,["row"]))),128))])]))}},Ls={class:"h-full overflow-y-auto"},Bs={__name:"ListGroups",setup(e){const s=ye("list");return(t,r)=>(a(),u("div",Ls,[(a(!0),u(Y,null,ee(_(s).rows,l=>(a(),u("div",{key:l.group},[oe(t.$slots,"default",{},()=>[U(Vs,{group:l},{default:K(()=>[t.$slots["group-header"]?oe(t.$slots,"group-header",Ce({key:0,ref_for:!0},{group:l})):D("",!0)]),_:2},1032,["group"]),U(Es,{group:l},null,8,["group"])])]))),128))]))}},Us={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Ns={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},zs={class:"flex items-center space-x-3"},Hs={class:"mr-3"},Js={class:"flex items-center space-x-1"},Rt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const s=ye("list");let t=M(()=>s.value.options.selectionText(s.value.selections.size));return(r,l)=>(a(),W(Yt,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:K(()=>[_(s).selections.size?(a(),u("div",Us,[o("div",{class:N(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",r.$attrs.class])},[oe(r.$slots,"default",xe(Fe({selections:_(s).selections,allRowsSelected:_(s).allRowsSelected,selectAll:()=>_(s).toggleAllRows(!0),unselectAll:()=>_(s).toggleAllRows(!1)})),()=>[o("div",Ns,[o("div",zs,[U(st,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,P(_(t)),1)]),o("div",Hs,[oe(r.$slots,"actions",xe(Fe({selections:_(s).selections,allRowsSelected:_(s).allRowsSelected,selectAll:()=>_(s).toggleAllRows(!0),unselectAll:()=>_(s).toggleAllRows(!1)})))])]),o("div",Js,[U(_(be),{class:N(["w- text-ink-gray-7",_(s).allRowsSelected?"cursor-not-allowed":""]),disabled:_(s).allRowsSelected,variant:"ghost",onClick:l[0]||(l[0]=i=>_(s).toggleAllRows(!0))},{default:K(()=>l[2]||(l[2]=[se(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),U(_(be),{icon:"x",variant:"ghost",onClick:l[1]||(l[1]=i=>_(s).toggleAllRows(!1))})])])],2)])):D("",!0)]),_:3}))}}),qs={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Ks=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:s,emit:t}){const r=e,l=Zt();let i=es(new Set),g=A(null);const y=t;_e(i,v=>{i.size&&(g.value=null),y("update:selections",v)}),_e(g,v=>{y("update:active-row",v)});let m=M(()=>{function v(b){return b===void 0?!0:b}function h(b){return b===void 0?!1:b}return{getRowRoute:r.options.getRowRoute||null,onRowClick:r.options.onRowClick||null,showTooltip:v(r.options.showTooltip),selectionText:r.options.selectionText||(b=>b===1?"1 row selected":`${b} rows selected`),enableActive:h(r.options.enableActive),selectable:v(r.options.selectable),resizeColumn:h(r.options.resizeColumn),rowHeight:r.options.rowHeight||40,emptyState:r.options.emptyState}});const f=M(()=>r.rows.length?C.value?i.size===r.rows.reduce((v,h)=>v+h.rows.length,0):i.size===r.rows.length:!1),n=M(()=>m.value.selectable);let C=M(()=>r.rows.every(v=>v.group&&v.rows&&Array.isArray(v.rows)));function w(v){i.delete(v)||i.add(v)}function x(v){if(!v||f.value){i.clear();return}if(C.value){r.rows.forEach(h=>{h.rows.forEach(b=>i.add(b[r.rowKey]))});return}r.rows.forEach(h=>i.add(h[r.rowKey]))}return _t("list",M(()=>({rowKey:r.rowKey,rows:r.rows,columns:r.columns,options:m.value,selections:i,activeRow:g,allRowsSelected:f.value,slots:l,toggleRow:w,toggleAllRows:x}))),s({selections:i,allRowsSelected:f,toggleRow:w,toggleAllRows:x}),(v,h)=>(a(),u("div",qs,[o("div",{class:N(["flex w-max min-w-full flex-col overflow-y-hidden",v.$attrs.class]),style:Ie(v.$attrs.style)},[oe(v.$slots,"default",xe(Fe({showGroupedRows:_(C),selectable:n.value})),()=>[U($t),r.rows.length?(a(),u(Y,{key:0},[_(C)?(a(),W(Bs,{key:0})):(a(),W(Tt,{key:1}))],64)):(a(),W(Ss,{key:1})),n.value?(a(),W(Rt,{key:2})):D("",!0)])],6)]))}});function Ws(r,l){return pe(this,arguments,function*(e,s,t={}){s||(s={});let i=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},t.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(i["X-Frappe-CSRF-Token"]=window.csrf_token);let g=e.startsWith("/")?e:`/api/method/${e}`;const y=yield fetch(g,{method:"POST",headers:i,body:JSON.stringify(s)});if(y.ok){const m=yield y.json();if(m.docs||e==="login")return m;if(m.exc)try{console.groupCollapsed(e),console.log(`method: ${e}`),console.log("params:",s);let f=JSON.parse(m.exc);for(let n of f)console.log(n);console.groupEnd()}catch(f){console.warn("Error printing debug messages",f)}return m.message}else{let m=yield y.text(),f,n;try{f=JSON.parse(m)}catch(x){}let C=[[e,f.exc_type,f._error_message].filter(Boolean).join(" ")];if(f.exc){n=f.exc;try{n=JSON.parse(n)[0],console.log(n)}catch(x){}}let w=new Error(C.join(`
`));throw w.exc_type=f.exc_type,w.exc=n,w.status=y.status,w.messages=f._server_messages?JSON.parse(f._server_messages):[],w.messages=w.messages.concat(f.message),w.messages=w.messages.map(x=>{try{return JSON.parse(x).message}catch(v){return x}}),w.messages=w.messages.filter(Boolean),w.messages.length||(w.messages=f._error_message?[f._error_message]:["Internal Server Error"]),t.onError&&t.onError({response:y,status:y.status,error:w}),w}})}const Ee=ke({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(e){const s=e||{},t=s.limit_page_length||10,r=s.limit_start||0,l=s.filters||{},i=s.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:t,limit_start:r,filters:l,order_by:i}),{limit_page_length:t,limit_start:r,filters:l,order_by:i}},onError(e){console.error("Failed to fetch issues:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Mt=ke({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(e){const s=e||{},t=s.filters||s||{};return console.log("issuesCountResource filters:",t),{filters:t}},onError(e){console.error("Failed to fetch issues count:",e)}});function je(e={}){const s={limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,filters:e.filters||{},order_by:e.order_by||"creation desc"};return console.log("reloadIssues with params:",s),Ee.reload(s)}function We(e={}){return console.log("getIssuesCount with filters:",e),Mt.reload(e)}const Ft=ke({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(e){return{issue_name:e}},onError(e){console.error("Failed to fetch single issue:",e)},auto:!1});function Qs(e){return Ft.reload(e)}const Gs=ke({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(e){console.error("Failed to fetch issue priorities:",e)},auto:!0}),Xs=ke({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(e){console.error("Failed to fetch issue types:",e)},auto:!0});ke({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(e){console.error("Failed to fetch projects:",e)},auto:!0});let ze=null,bt=null,He=null,yt=null;function Ys(){const e=Gs.data||[],s=JSON.stringify(e);if(ze&&bt===s)return ze;const t=[{label:"All Priority",value:""},...e.map(r=>({label:r.name,value:r.name}))];return ze=Object.freeze(t),bt=s,ze}function Zs(){const e=Xs.data||[],s=JSON.stringify(e);if(He&&yt===s)return He;const t=[{label:"All Types",value:""},...e.map(r=>({label:r.name,value:r.name}))];return He=Object.freeze(t),yt=s,He}const eo=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function to(){return eo}const so=ke({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(e){console.error("Failed to fetch tag colors:",e)},auto:!0}),Je=new Map;let wt=null;function oo(e){const s=so.data||{},t=JSON.stringify(s);if(wt!==t&&(Je.clear(),wt=t),Je.has(e))return Je.get(e);const r=s[e]||null;return Je.set(e,r),r}const Ze=ke({url:"force_trans_customization.api.issues.issue_search",makeParams(e){const s=e||{};return{search_query:s.search_query||"",limit:s.limit||8}},onError(e){console.error("Failed to search issues:",e)},auto:!1});function ro(e,s=8){return!e||e.length<2?Promise.resolve(Ze.data||[]):Ze.reload({search_query:e,limit:s}).then(()=>Ze.data||[])}const Se=ke({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(e){const s=e||{},t={stat_type:s.stat_type||"team_tickets",limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"};return s.filters&&(t.filters=s.filters),t},onError(e){console.error("Failed to filter issues by stat:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),Ot=ke({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(e){const s=e||{},t={stat_type:s.stat_type||"team_tickets"};return s.filters&&(t.filters=s.filters),t},onError(e){console.error("Failed to get stat filter count:",e)},auto:!1});function et(e,s={}){const t={stat_type:e,limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"};return s.filters&&(t.filters=s.filters),console.log("filterIssuesByStat params:",t),Se.reload(t)}function qe(e,s=null){const t={stat_type:e};return s&&(t.filters=s),Ot.reload(t)}const ao={class:"relative w-full max-w-2xl mx-auto"},lo={class:"relative group"},no=["placeholder"],io={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},uo={key:1,class:"flex items-center pointer-events-none"},co={key:2,class:"animate-spin"},po={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},go={class:"flex items-center justify-between"},mo={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},vo={class:"text-xs text-slate-500"},fo={key:0,class:"px-6 py-8 text-center"},ho=["onClick"],bo={class:"flex items-start space-x-4"},yo={class:"flex-1 min-w-0"},wo={class:"flex items-start justify-between"},xo={class:"flex-1 min-w-0"},_o={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},ko=["innerHTML"],Co={class:"text-xs text-slate-500 mt-1 line-clamp-2"},So={key:0,class:"ml-2"},Io={class:"flex-shrink-0 ml-4"},$o={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Po={key:0,class:"flex items-center"},To={key:1,class:"flex items-center"},Ro={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Mo={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(e,{expose:s,emit:t}){const r=e,l=t,i=A(null),g=A(r.modelValue),y=A(!1),m=A(!1),f=A(-1),n=A(!1),C=A(0),w=A(null),x=A([]);let v=null;_e(()=>r.modelValue,R=>{g.value=R}),_e(g,R=>{l("update:modelValue",R),l("search",R)});const h=A([]),b=R=>pe(this,null,function*(){if(!R||R.length<2){h.value=[],m.value=!1,n.value=!1;return}try{n.value=!0;const O=performance.now(),H=yield ro(R,8);C.value=performance.now()-O,h.value=H||[],m.value=!0}catch(O){console.error("Search error:",O),h.value=[],m.value=!1}finally{n.value=!1}}),I=R=>{if(v&&clearTimeout(v),f.value=-1,!R||R.length<2){h.value=[],m.value=!1,n.value=!1;return}n.value=!0,v=setTimeout(()=>{b(R)},1e3)},S=()=>{I(g.value)},F=(R,O)=>{if(!R||!O)return R;const H=O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),te=new RegExp(`(${H})`,"gi");return R.replace(te,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},z=R=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[R]||"bg-gray-100 text-gray-800 border border-gray-200",q=()=>{y.value=!0,V&&(clearTimeout(V),V=null),g.value.length>=2&&(h.value.length>0?m.value=!0:b(g.value))};let V=null;const E=()=>{y.value=!1,V=setTimeout(()=>{m.value=!1,V=null},200)},Q=R=>{var O;if(m.value)switch(R.key){case"ArrowDown":R.preventDefault(),f.value=Math.min(f.value+1,h.value.length-1),Z();break;case"ArrowUp":R.preventDefault(),f.value=Math.max(f.value-1,-1),Z();break;case"Enter":R.preventDefault(),f.value>=0&&L(h.value[f.value]);break;case"Escape":G(),(O=i.value)==null||O.blur();break}},L=R=>{g.value=R.name,G();const H=`${window.location.origin}/app/issue/${R.name}`;window.open(H,"_blank"),l("suggestion-selected",R)},le=()=>{var R;g.value="",G(),(R=i.value)==null||R.focus()},G=()=>{m.value=!1,f.value=-1},Z=()=>{if(f.value<0||!w.value||!x.value[f.value])return;const R=w.value,O=x.value[f.value];if(O){const H=R.getBoundingClientRect(),te=O.getBoundingClientRect(),re=te.top-H.top+R.scrollTop,k=re+te.height,$=R.scrollTop,J=R.clientHeight;re<$?R.scrollTop=re:k>$+J&&(R.scrollTop=k-J)}},ge=R=>{if(!R)return"";try{const O=new Date(R),H=new Date,te=Math.abs(H-O),re=Math.ceil(te/(1e3*60*60*24));return re===1?"Today":re===2?"Yesterday":re<=7?`${re-1} days ago`:O.toLocaleDateString("en-US",{month:"short",day:"numeric",year:O.getFullYear()!==H.getFullYear()?"numeric":void 0})}catch(O){return console.error("Error formatting date:",O),R}},ce=R=>{var O,H;(R.metaKey||R.ctrlKey)&&R.key==="k"&&(R.preventDefault(),(O=i.value)==null||O.focus(),(H=i.value)==null||H.select())};return Oe(()=>{document.addEventListener("keydown",ce)}),Ge(()=>{document.removeEventListener("keydown",ce),v&&clearTimeout(v),V&&clearTimeout(V)}),s({focus:()=>{var R,O;(R=i.value)==null||R.focus(),(O=i.value)==null||O.select()},select:()=>{var R;return(R=i.value)==null?void 0:R.select()},$el:i}),(R,O)=>(a(),u("div",ao,[o("div",lo,[O[4]||(O[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),me(o("input",{ref_key:"searchInput",ref:i,type:"text","onUpdate:modelValue":O[0]||(O[0]=H=>g.value=H),onInput:S,onFocus:q,onBlur:E,onKeydown:Q,placeholder:e.placeholder,class:N(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":y.value,"bg-slate-50/50":!y.value&&g.value}])},null,42,no),[[fe,g.value]]),o("div",io,[g.value?(a(),u("button",{key:0,onClick:le,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},O[1]||(O[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):D("",!0),!g.value&&!y.value?(a(),u("div",uo,O[2]||(O[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),se("K ")],-1)]))):D("",!0),n.value?(a(),u("div",co,O[3]||(O[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)])]),m.value?(a(),u("div",{key:0,class:N(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":m.value}])},[h.value.length>0?(a(),u("div",po,[o("div",go,[o("span",mo,P(h.value.length)+" Result"+P(h.value.length!==1?"s":""),1),o("span",vo,P(Math.round(C.value))+"ms ",1)])])):D("",!0),o("div",{ref_key:"suggestionsContainer",ref:w,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[h.value.length===0&&g.value.length>=2?(a(),u("div",fo,O[5]||(O[5]=[dt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):D("",!0),(a(!0),u(Y,null,ee(h.value,(H,te)=>(a(),u("div",{key:H.name||te,ref_for:!0,ref:re=>x.value[te]=re,onClick:re=>L(H),class:N(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":te===f.value}])},[o("div",bo,[O[8]||(O[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",yo,[o("div",wo,[o("div",xo,[o("h4",_o,[o("span",{innerHTML:F(H.subject||H.name,g.value)},null,8,ko)]),o("p",Co,[se(" ID: "+P(H.name)+" ",1),H.customer?(a(),u("span",So,"• "+P(H.customer),1)):D("",!0)])]),o("div",Io,[o("span",{class:N(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",z(H.status)])},P(H.status),3)])]),o("div",$o,[H.raised_by?(a(),u("div",Po,[O[6]||(O[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),se(" "+P(H.raised_by),1)])):D("",!0),H.creation?(a(),u("div",To,[O[7]||(O[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),se(" "+P(ge(H.creation)),1)])):D("",!0)])])])],10,ho))),128))],512),g.value&&h.value.length>0?(a(),u("div",Ro,O[9]||(O[9]=[dt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):D("",!0)],2)):D("",!0),m.value?(a(),u("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:G})):D("",!0)]))}},Fo=Le(Mo,[["__scopeId","data-v-4969cdcf"]]),Oo={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Do={class:"mb-6"},Ao={class:"relative max-w-2xl mx-auto"},Vo={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},jo={class:"border-t border-gray-200 pt-4"},Eo={class:"flex items-center justify-between"},Lo={class:"flex items-center space-x-3 flex-1"},Bo={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Uo={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},No={class:"text-green-800 font-medium"},zo={class:"text-green-600"},Ho={class:"text-green-900"},Jo=["onClick"],qo={class:"flex items-center space-x-2 ml-4"},Ko=["disabled"],Wo={key:0,class:"flex items-center"},Qo={key:1},Go={key:0,class:"relative"},Xo={class:"flex"},Yo={class:"w-48 border-r border-gray-200 bg-gray-50"},Zo={class:"max-h-64 overflow-y-auto"},er=["onClick"],tr={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},sr={class:"flex-1 min-w-96"},or={class:"p-4"},rr={key:0,class:"text-center py-8 text-gray-500"},ar={key:1,class:"space-y-4"},lr={class:"col-span-2 flex items-center"},nr={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},ir={class:"col-span-2 flex items-center"},ur={class:"text-gray-700 font-medium truncate"},cr={class:"col-span-7"},dr=["onUpdate:modelValue","placeholder"],pr=["onUpdate:modelValue","placeholder"],gr={key:2,class:"space-y-2"},mr={key:0,class:"grid grid-cols-2 gap-2"},vr=["onUpdate:modelValue","onInput"],fr=["onUpdate:modelValue","onInput"],hr={key:1},br=["onUpdate:modelValue"],yr={key:3,class:"space-y-2"},wr={key:0,class:"grid grid-cols-2 gap-2"},xr=["onUpdate:modelValue","onInput"],_r=["onUpdate:modelValue","onInput"],kr={key:1},Cr=["onUpdate:modelValue"],Sr={key:4,class:"relative"},Ir={key:0},$r=["onUpdate:modelValue"],Pr={value:""},Tr=["value"],Rr={key:1,class:"space-y-2"},Mr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Fr=["onClick"],Or={key:5,class:"space-y-2"},Dr={class:"space-y-2"},Ar={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Vr=["onClick"],jr={class:"relative"},Er=["onUpdate:modelValue","onInput","placeholder"],Lr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Br={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Ur=["onClick"],Nr={class:"font-medium text-gray-900"},zr={class:"text-xs text-gray-500"},Hr={key:6,class:"space-y-2"},Jr={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},qr=["onClick"],Kr={class:"relative"},Wr=["onUpdate:modelValue","onInput","onKeyup"],Qr={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Gr={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Xr=["onClick"],Yr={class:"flex items-center justify-between"},Zr={class:"font-medium text-gray-900"},ea={class:"text-xs text-gray-500"},ta={class:"col-span-1 flex items-start justify-center pt-1"},sa=["onClick"],oa={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},ra=["disabled"],aa={key:0,class:"flex items-center"},la={key:1},na={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(e,{emit:s}){const t=e,r=s,l=A(t.searchQuery),i=A(!1),g=A([]),y=A([]);let m=0;const f=A(!1),n=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],C={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Waiting on Customer",label:"Waiting on Customer"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},w={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},x=M(()=>JSON.stringify(g.value)!==JSON.stringify(y.value)),v=c=>{const p=n.find(d=>d.value===c);return(p==null?void 0:p.type)||"text"},h=c=>{const p=n.find(d=>d.value===c);return(p==null?void 0:p.label)||c},b=c=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[c]||`Enter ${h(c).toLowerCase()}...`,I=c=>{const p=v(c);return w[p]||w.text},S=c=>C[c]||[],F=c=>c.displayValue?c.displayValue:Array.isArray(c.value)?c.value.join(", "):c.value,z=c=>c?typeof c=="string"?c.split(",").map(p=>p.trim()).filter(Boolean):c:[],q=(c,p)=>{const d=z(c.value);d.splice(p,1),c.value=d.join(", ")},V=c=>c?c.split(",").map(p=>p.trim()).filter(Boolean):[],E=(c,p)=>{const d=V(c.value);d.splice(p,1),c.value=d.join(", ")},Q=(c,p)=>p.userDisplayMap&&p.userDisplayMap[c]?p.userDisplayMap[c]:c,L=(c,p)=>{const d=z(c.value);d.includes(p.value)||(d.push(p.value),c.value=d.join(", "),c.userDisplayMap||(c.userDisplayMap={}),c.userDisplayMap[p.value]=p.label),c.searchValue="",c.suggestions=[]};let le={};const G=(c,p)=>pe(this,null,function*(){c.loadingTags=!0,le[c.id]&&clearTimeout(le[c.id]),le[c.id]=setTimeout(()=>pe(this,null,function*(){try{const d=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:p||"",limit:15})});if(d.ok){const X=yield d.json();c.tagSuggestions=X.message||[]}}catch(d){console.error("Tag search error:",d),c.tagSuggestions=[]}finally{c.loadingTags=!1}}),300)}),Z=c=>{if(!c.tagInput||!c.tagInput.trim())return;const p=c.tagInput.replace(",","").trim(),d=V(c.value);p&&!d.includes(p)&&(d.push(p),c.value=d.join(", ")),c.tagInput="",c.tagSuggestions=[]},ge=(c,p)=>{const d=V(c.value);d.includes(p.value)||(d.push(p.value),c.value=d.join(", ")),c.tagInput="",c.tagSuggestions=[]};let ce={};const R=(c,p)=>pe(this,null,function*(){c.searchValue=p,c.loading=!0,ce[c.id]&&clearTimeout(ce[c.id]),ce[c.id]=setTimeout(()=>pe(this,null,function*(){try{let d=[],X="";if(c.field==="customer"?X="/api/method/force_trans_customization.api.issues.search_customers":c.field==="contact"?X="/api/method/force_trans_customization.api.issues.search_contacts":c.field==="lead"?X="/api/method/force_trans_customization.api.issues.search_leads":c.field==="custom_assigned_csm_team"?X="/api/method/force_trans_customization.api.issues.search_user_groups":c.field==="custom_users_assigned"&&(X="/api/method/force_trans_customization.api.issues.search_users"),X){const T=yield fetch(X,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:p||"",limit:10,doctype_filter:c.field==="custom_users_assigned"?"User":void 0})});T.ok&&(d=(yield T.json()).message||[])}c.suggestions=d}catch(d){console.error("Search error:",d),c.suggestions=[]}finally{c.loading=!1}}),300)}),O=(c,p)=>I(c).map(X=>({label:X.label,onClick:()=>{p.operator!==X.value&&(v(c)==="date"&&(X.value==="between"?p.value&&!p.startValue&&(p.startValue=p.value,p.endValue=""):p.operator==="between"&&(p.startValue&&!p.value&&(p.value=p.startValue),p.startValue="",p.endValue="")),p.multiSelectValue=null,p.searchValue="",p.suggestions=[],p.searchOptions=[]),p.operator=X.value}})),H=(c,p)=>{var X;return((X=I(p).find(T=>T.value===c))==null?void 0:X.label)||c},te=(c,p)=>{const X=S(p).find(T=>T.value===c);return X?X.label:c},re=c=>{c.startValue&&c.endValue?c.value=`${c.startValue},${c.endValue}`:c.value=""},k=c=>{var T;const p=v(c);let d="equals";p==="link"?d="in":p==="tags"?d="has":d=((T=I(c)[0])==null?void 0:T.value)||"equals";const X={id:++m,field:c,operator:d,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},tagInput:"",tagSuggestions:[],loadingTags:!1};g.value.push(X)},$=c=>{g.value.splice(c,1)},J=c=>{y.value.splice(c,1),j()},ne=()=>pe(this,null,function*(){if(x.value){f.value=!0;try{y.value=JSON.parse(JSON.stringify(g.value)),j(),i.value=!1}catch(c){console.error("Error applying filters:",c)}finally{setTimeout(()=>{f.value=!1},500)}}}),Pe=()=>{g.value=[],y.value=[],l.value="",r("update:searchQuery",""),r("update:filters",[]),r("filters-applied",[]),i.value=!1},j=()=>{const c=y.value.filter(p=>p.value&&p.value.toString().trim()).map(p=>({field:p.field,operator:p.operator,value:p.value.toString().trim(),displayValue:p.displayValue||null}));console.log("Emitting filters:",c),r("update:filters",c),r("filters-applied",c)},B=c=>{l.value=c,r("update:searchQuery",c)},ie=c=>{r("suggestion-selected",c)};return _e(()=>t.searchQuery,c=>{l.value=c}),Oe(()=>{const c=localStorage.getItem("issue_filters");if(c)try{const p=JSON.parse(c);y.value=p.applied||[],g.value=p.pending||[]}catch(p){console.warn("Failed to parse saved filters:",p)}_e(()=>g.value,p=>{p.forEach(d=>{v(d.field)==="link"&&d.searchValue&&R(d,d.searchValue)})},{deep:!0})}),_e([y,g],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:y.value,pending:g.value}))},{deep:!0}),(c,p)=>(a(),u("div",Oo,[o("div",Do,[o("div",Ao,[U(Fo,{ref:"searchBoxRef","model-value":l.value,"onUpdate:modelValue":B,onSuggestionSelected:ie,issues:e.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),l.value?(a(),u("div",Vo," Searching in "+P(e.filteredCount)+" issues ",1)):D("",!0)])]),o("div",jo,[o("div",Eo,[o("div",Lo,[o("button",{onClick:p[0]||(p[0]=d=>i.value=!i.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[p[3]||(p[3]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),p[4]||(p[4]=o("span",null,"Filters",-1)),y.value.length>0?(a(),u("span",Bo,P(y.value.length),1)):D("",!0)]),y.value.length>0?(a(),u("div",Uo,[(a(!0),u(Y,null,ee(y.value,(d,X)=>(a(),u("div",{key:d.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",No,P(h(d.field)),1),o("span",zo,P(d.operator),1),o("span",Ho,P(F(d)),1),o("button",{onClick:T=>J(X),class:"text-green-400 hover:text-red-600 ml-1"},p[5]||(p[5]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Jo)]))),128))])):D("",!0)]),o("div",qo,[y.value.length>0||l.value?(a(),u("button",{key:0,onClick:Pe,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):D("",!0),g.value.length>0?(a(),u("button",{key:1,onClick:ne,class:N(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",f.value?"bg-blue-500 text-white cursor-wait":x.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!x.value||f.value},[f.value?(a(),u("span",Wo,p[6]||(p[6]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),se(" Applying... ")]))):(a(),u("span",Qo,P(x.value?"Apply Filters":"Filters Applied"),1))],10,Ko)):D("",!0)])])]),i.value?(a(),u("div",Go,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:p[1]||(p[1]=Me(()=>{},["stop"]))},[o("div",Xo,[o("div",Yo,[p[7]||(p[7]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",Zo,[(a(),u(Y,null,ee(n,d=>o("button",{key:d.value,onClick:Me(X=>k(d.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,P(d.label),1),o("span",tr,P(d.type),1)],8,er)),64))])]),o("div",sr,[o("div",or,[g.value.length===0?(a(),u("div",rr,p[8]||(p[8]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(a(),u("div",ar,[(a(!0),u(Y,null,ee(g.value,(d,X)=>(a(),u("div",{key:d.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",lr,[o("span",nr,P(h(d.field)),1)]),o("div",ir,[U(_(xs),{options:O(d.field,d),placement:"left"},{default:K(({open:T})=>[o("button",{class:N(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",T?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",ur,P(H(d.operator,d.field)),1),p[9]||(p[9]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",cr,[v(d.field)==="text"?me((a(),u("input",{key:0,"onUpdate:modelValue":T=>d.value=T,type:"text",placeholder:b(d.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,dr)),[[fe,d.value]]):v(d.field)==="email"?me((a(),u("input",{key:1,"onUpdate:modelValue":T=>d.value=T,type:"email",placeholder:b(d.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,pr)),[[fe,d.value]]):v(d.field)==="datetime"?(a(),u("div",gr,[d.operator==="between"?(a(),u("div",mr,[o("div",null,[me(o("input",{"onUpdate:modelValue":T=>d.startValue=T,type:"datetime-local",placeholder:"Start date and time",onInput:T=>re(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,vr),[[fe,d.startValue]]),p[10]||(p[10]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[me(o("input",{"onUpdate:modelValue":T=>d.endValue=T,type:"datetime-local",placeholder:"End date and time",onInput:T=>re(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,fr),[[fe,d.endValue]]),p[11]||(p[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(a(),u("div",hr,[me(o("input",{"onUpdate:modelValue":T=>d.value=T,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,br),[[fe,d.value]]),p[12]||(p[12]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):v(d.field)==="date"?(a(),u("div",yr,[d.operator==="between"?(a(),u("div",wr,[o("div",null,[me(o("input",{"onUpdate:modelValue":T=>d.startValue=T,type:"date",onInput:T=>re(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,xr),[[fe,d.startValue]]),p[13]||(p[13]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[me(o("input",{"onUpdate:modelValue":T=>d.endValue=T,type:"date",onInput:T=>re(d),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,_r),[[fe,d.endValue]]),p[14]||(p[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(a(),u("div",kr,[me(o("input",{"onUpdate:modelValue":T=>d.value=T,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,Cr),[[fe,d.value]])]))])):v(d.field)==="select"?(a(),u("div",Sr,[d.isMultiSelect?(a(),u("div",Rr,[z(d.value).length>0?(a(),u("div",Mr,[(a(!0),u(Y,null,ee(z(d.value),(T,de)=>(a(),u("span",{key:de,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[se(P(te(T,d.field))+" ",1),o("button",{onClick:Be=>q(d,de),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},p[15]||(p[15]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Fr)]))),128))])):D("",!0)])):(a(),u("div",Ir,[d.field==="priority"||d.field==="status"||d.field==="issue_type"?me((a(),u("select",{key:0,"onUpdate:modelValue":T=>d.value=T,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Pr,"Select "+P(h(d.field))+"...",1),(a(!0),u(Y,null,ee(S(d.field),T=>(a(),u("option",{key:T.value,value:T.value},P(T.label),9,Tr))),128))],8,$r)),[[ts,d.value]]):D("",!0)]))])):v(d.field)==="link"?(a(),u("div",Or,[o("div",Dr,[z(d.value).length>0?(a(),u("div",Ar,[(a(!0),u(Y,null,ee(z(d.value),(T,de)=>(a(),u("span",{key:de,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[se(P(Q(T,d))+" ",1),o("button",{onClick:Be=>q(d,de),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},p[16]||(p[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Vr)]))),128))])):D("",!0),o("div",jr,[me(o("input",{"onUpdate:modelValue":T=>d.searchValue=T,onInput:T=>R(d,d.searchValue),type:"text",placeholder:`Search and add ${h(d.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Er),[[fe,d.searchValue]]),d.loading?(a(),u("div",Lr,p[17]||(p[17]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)]),d.suggestions&&d.suggestions.length>0&&d.searchValue?(a(),u("div",Br,[(a(!0),u(Y,null,ee(d.suggestions,(T,de)=>(a(),u("button",{key:de,onClick:Be=>L(d,T),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Nr,P(T.label),1),o("div",zr,P(T.subtitle),1)],8,Ur))),128))])):D("",!0)])])):v(d.field)==="tags"?(a(),u("div",Hr,[V(d.value).length>0?(a(),u("div",Jr,[(a(!0),u(Y,null,ee(V(d.value),(T,de)=>(a(),u("span",{key:de,class:"inline-flex items-center px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full border border-purple-200 hover:bg-purple-200 transition-colors"},[se(P(T)+" ",1),o("button",{onClick:Be=>E(d,de),class:"ml-1 text-purple-600 hover:text-red-600 transition-colors"},p[18]||(p[18]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,qr)]))),128))])):D("",!0),o("div",Kr,[me(o("input",{"onUpdate:modelValue":T=>d.tagInput=T,onInput:T=>G(d,d.tagInput),onKeyup:[pt(T=>Z(d),["enter"]),pt(T=>Z(d),["comma"])],type:"text",placeholder:"Search and select tags or type new ones...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Wr),[[fe,d.tagInput]]),d.loadingTags?(a(),u("div",Qr,p[19]||(p[19]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):D("",!0)]),d.tagSuggestions&&d.tagSuggestions.length>0?(a(),u("div",Gr,[(a(!0),u(Y,null,ee(d.tagSuggestions,(T,de)=>(a(),u("button",{key:de,onClick:Be=>ge(d,T),class:"w-full text-left px-3 py-2 hover:bg-gray-100 text-sm border-b border-gray-100 last:border-b-0"},[o("div",Yr,[o("div",null,[o("div",Zr,P(T.label),1),o("div",ea,P(T.subtitle),1)]),T.color?(a(),u("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:Ie({backgroundColor:T.color})},null,4)):D("",!0)])],8,Xr))),128))])):D("",!0),p[20]||(p[20]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags or press Enter/comma to create new tags",-1))])):D("",!0)]),o("div",ta,[o("button",{onClick:T=>$(X),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},p[21]||(p[21]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,sa)])]))),128))])),g.value.length>0?(a(),u("div",oa,[o("button",{onClick:Pe,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:ne,disabled:!x.value||f.value,class:N(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",f.value?"bg-gray-700 text-white cursor-wait":x.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[f.value?(a(),u("span",aa,p[22]||(p[22]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),se(" Applying... ")]))):(a(),u("span",la,P(x.value?"Apply Filters":"Filters Applied"),1))],10,ra)])):D("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:p[2]||(p[2]=d=>i.value=!1)})])):D("",!0)]))}},ia=Le(na,[["__scopeId","data-v-ee7e49a5"]]),ua={class:"bg-white rounded-lg shadow-sm border mt-4"},ca={class:"px-6 py-4 flex items-center justify-between"},da={class:"text-sm text-gray-700"},pa={key:0},ga={key:1},ma={key:0,class:"flex items-center space-x-2"},va={class:"flex items-center space-x-1"},fa={key:1,class:"px-2 text-gray-500"},ha={key:2,class:"px-2 text-gray-500"},ba={key:1,class:"flex items-center space-x-2"},ya={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(e,{emit:s}){const t=e,r=s,l=A(t.itemsPerPage);_e(()=>t.itemsPerPage,S=>{l.value=S});const i=M(()=>Math.ceil(t.totalItems/t.itemsPerPage)),g=M(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),y=M(()=>{const S=t.currentPage*t.itemsPerPage;return Math.min(S,t.totalItems)}),m=M(()=>{const S=[],F=t.maxVisiblePages,z=t.currentPage,q=i.value;if(q<=F)for(let V=1;V<=q;V++)S.push(V);else{let V=Math.max(1,z-Math.floor(F/2)),E=Math.min(q,V+F-1);E-V+1<F&&(V=Math.max(1,E-F+1)),V>1&&(V=Math.max(2,V)),E<q&&(E=Math.min(q-1,E));for(let Q=V;Q<=E;Q++)S.push(Q)}return S}),f=M(()=>i.value>t.maxVisiblePages&&!m.value.includes(1)),n=M(()=>i.value>t.maxVisiblePages&&!m.value.includes(i.value)),C=M(()=>f.value&&m.value.length>0&&m.value[0]>2),w=M(()=>n.value&&m.value.length>0&&m.value[m.value.length-1]<i.value-1),x=M(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),v=S=>{S>=1&&S<=i.value&&S!==t.currentPage&&(r("update:currentPage",S),r("pageChange",{page:S,itemsPerPage:t.itemsPerPage,offset:(S-1)*t.itemsPerPage}))},h=()=>{t.currentPage>1&&v(t.currentPage-1)},b=()=>{t.currentPage<i.value&&v(t.currentPage+1)},I=()=>{const S=l.value;r("update:itemsPerPage",S);const F=(t.currentPage-1)*t.itemsPerPage+1,z=Math.ceil(F/S);r("pageChange",{page:z,itemsPerPage:S,offset:(z-1)*S})};return(S,F)=>(a(),u("div",ua,[o("div",ca,[o("div",da,[e.totalItems>0?(a(),u("span",pa," Showing "+P(g.value)+" to "+P(y.value)+" of "+P(e.totalItems)+" results ",1)):(a(),u("span",ga," No results found "))]),i.value>1?(a(),u("div",ma,[U(_(be),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===1,onClick:h},{prefix:K(()=>[U(_($e),{name:"chevron-left",class:"h-4 w-4"})]),default:K(()=>[F[3]||(F[3]=se(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",va,[f.value?(a(),W(_(be),{key:0,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===1}),onClick:F[0]||(F[0]=z=>v(1))},{default:K(()=>F[4]||(F[4]=[se(" 1 ")])),_:1,__:[4]},8,["class"])):D("",!0),C.value?(a(),u("span",fa,"...")):D("",!0),(a(!0),u(Y,null,ee(m.value,z=>(a(),W(_(be),{key:z,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===z}),onClick:q=>v(z)},{default:K(()=>[se(P(z),1)]),_:2},1032,["class","onClick"]))),128)),w.value?(a(),u("span",ha,"...")):D("",!0),n.value?(a(),W(_(be),{key:3,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage===i.value}),onClick:F[1]||(F[1]=z=>v(i.value))},{default:K(()=>[se(P(i.value),1)]),_:1},8,["class"])):D("",!0)]),U(_(be),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===i.value,onClick:b},{suffix:K(()=>[U(_($e),{name:"chevron-right",class:"h-4 w-4"})]),default:K(()=>[F[5]||(F[5]=se(" Next "))]),_:1,__:[5]},8,["disabled"])])):D("",!0),e.showItemsPerPage?(a(),u("div",ba,[F[6]||(F[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),U(_(ss),{modelValue:l.value,"onUpdate:modelValue":F[2]||(F[2]=z=>l.value=z),options:x.value,onChange:I,class:"w-20"},null,8,["modelValue","options"])])):D("",!0)])]))}},wa={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},xa={class:"text-3xl font-bold text-gray-900"},_a={class:"text-3xl font-bold text-blue-600"},ka={class:"text-3xl font-bold text-green-600"},Ca={class:"text-3xl font-bold text-orange-600"},Sa={class:"text-3xl font-bold text-purple-600"},Ia=3e4,$a={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(e,{expose:s,emit:t}){const r=e,l=t,i=Ae({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),g=M(()=>i.value.team_tickets),y=M(()=>i.value.open_tickets),m=M(()=>i.value.assigned_to_me),f=M(()=>i.value.actionable_tickets),n=M(()=>i.value.response_tickets);let C=null,w=0;const x=()=>pe(this,null,function*(){const I=Date.now();if(C&&I-w<Ia)return C;try{const S=yield Ws("force_trans_customization.api.issues.get_issue_stats");return i.value=S,C=S,w=I,S}catch(S){return console.error("Error fetching issue stats:",S),i.value}});let v=null;const h=()=>{v&&clearTimeout(v),v=setTimeout(()=>{x()},500)};Oe(()=>{x()}),_e(()=>r.issues.length,()=>{h()});const b=I=>{l("filter-changed",I)};return s({refreshStats:x}),(I,S)=>(a(),u("div",wa,[o("div",{onClick:S[0]||(S[0]=F=>b("team_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",xa,P(g.value),1),S[5]||(S[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:S[1]||(S[1]=F=>b("open_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",_a,P(y.value),1),S[6]||(S[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:S[2]||(S[2]=F=>b("assigned_to_me")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",ka,P(m.value),1),S[7]||(S[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:S[3]||(S[3]=F=>b("actionable_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Issues where customer awaits our reply"},[o("div",Ca,P(f.value),1),S[8]||(S[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:S[4]||(S[4]=F=>b("response_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Issues awaiting customer response"},[o("div",Sa,P(n.value),1),S[9]||(S[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Pa={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const e=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[e]||"gray"}},components:{Badge:ot}},Ta={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const e=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[e]||"yellow"},priorityIndicatorClass(){const e=this.priority||"Medium";return{"bg-red-500":e==="Critical","bg-red-400":e==="High","bg-yellow-400":e==="Medium","bg-green-400":e==="Low"}}},components:{Badge:ot}},Ra={components:{ListView:Ks,Avatar:hs,Badge:ot,Button:be,FeatherIcon:$e,ListHeader:$t,ListHeaderItem:It,ListRow:at,ListRowItem:Pt,ListRows:Tt,ListSelectBanner:Rt,StatusBadge:Pa,PriorityBadge:Ta},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(e,{emit:s}){const t=A(!1),r=A(null),l=A({x:0,y:0}),i=A(!1),g=A({x:0,y:0}),y=A(null),m=k=>{if(!k||typeof k!="string")return"?";if(k.includes("@")){const $=k.split("@")[0];return $.includes(".")||$.includes("_")?$.split(/[._]/).map(ne=>ne[0]).join("").toUpperCase().slice(0,2):$.slice(0,2).toUpperCase()}return k.includes(" ")?k.split(" ").map($=>$[0]).join("").toUpperCase().slice(0,2):k.slice(0,2).toUpperCase()},f=k=>{if(!k)return"";const $=k.match(/ISS-(\d{4}-\d+)/);return $?$[1]:k},n=k=>{if(!k)return"";const $=document.createElement("div");return $.innerHTML=k,$.textContent||$.innerText||""},C=k=>k?new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",w=k=>k?new Date(k).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",x=k=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[k]||"gray",v=k=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[k]||"yellow",h=new Map,b=M(()=>e.issues.map(k=>{const $=k.name;if(h.has($)){const ne=h.get($);if(ne.originalStatus===k.status&&ne.originalPriority===k.priority&&ne.originalSubject===k.subject&&ne.originalUsersAssigned===JSON.stringify(k.custom_users_assigned))return ne.transformed}const J=Ye(we({},k),{status:{label:k.status||"New",color:x(k.status)},priority:{label:k.priority||"Medium",color:v(k.priority)}});return h.set($,{transformed:J,originalStatus:k.status,originalPriority:k.priority,originalSubject:k.subject,originalUsersAssigned:JSON.stringify(k.custom_users_assigned)}),J})),I=Ae([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),S=Ae({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:k=>{console.log("Row clicked:",k)}}),F=k=>{console.log("Selected rows:",k)},z=k=>{console.log("Issue clicked:",k);const J=`${window.location.origin}/app/issue/${k.name}`;window.open(J,"_blank")},q=k=>{const $=k||"New";return{"bg-blue-500":$==="New","bg-orange-500":$==="In Review","bg-yellow-500":$==="Waiting on Customer","bg-purple-500":$==="Confirmed","bg-blue-500":$==="In Transit","bg-gray-500":$==="In Transit Unmanaged","bg-green-500":$==="Delivered","bg-green-500":$==="Closed","bg-red-500":$==="Open","bg-orange-500":$==="Replied","bg-yellow-500":$==="On Hold","bg-green-500":$==="Resolved"}},V=k=>{const $=k||"Medium";return{"bg-red-500":$==="Critical"||$==="High","bg-yellow-500":$==="Medium","bg-green-500":$==="Low"}},E=k=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[k||"New"]||"bg-gray-100 text-gray-800",Q=k=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[k||"Medium"]||"bg-yellow-100 text-yellow-800",L=k=>{const $=k||"Medium";return{"bg-red-500":$==="Critical","bg-red-400":$==="High","bg-yellow-400":$==="Medium","bg-green-400":$==="Low"}},le=(k,$)=>{const J=k.target.getBoundingClientRect();l.value={x:J.left+J.width/2,y:J.top-10},r.value=$,t.value=!0},G=()=>{t.value=!1,r.value=null},Z=(k,$)=>{if(!$||$.length===0)return;const J=k.target.getBoundingClientRect();g.value={x:J.left+J.width/2,y:J.top-10},y.value=$,i.value=!0},ge=()=>{i.value=!1,y.value=null},ce=k=>{let $="asc";e.sortField===k&&($=e.sortDirection==="asc"?"desc":"asc"),s("sort",{field:k,direction:$})},R=k=>e.sortField!==k?"arrow-up-down":e.sortDirection==="asc"?"arrow-up":"arrow-down",O=k=>e.sortField!==k?"text-gray-400":"text-blue-600",H=k=>e.sortField===k?"bg-blue-50":"",te=new Map;return{columns:I,listOptions:S,transformedIssues:b,handleSelections:F,handleIssueClick:z,getStatusColor:q,getPriorityColor:V,getStatusBadgeClass:E,getPriorityBadgeClass:Q,getPriorityIndicatorClass:L,getInitials:m,formatIssueId:f,stripHtml:n,formatDate:C,formatTime:w,showPopup:t,popupUser:r,popupPosition:l,showUserPopup:le,hideUserPopup:G,handleColumnSort:ce,getSortIcon:R,getSortIconClass:O,getSortButtonClass:H,getTagStyle:k=>{if(te.has(k))return te.get(k);const $=oo(k);let J;if($){const ne=$.replace("#",""),Pe=parseInt(ne.substr(0,2),16),j=parseInt(ne.substr(2,2),16),B=parseInt(ne.substr(4,2),16),ie=`rgba(${Pe}, ${j}, ${B}, 0.1)`,c=`rgb(${Math.max(Pe-50,0)}, ${Math.max(j-50,0)}, ${Math.max(B-50,0)})`;J={backgroundColor:ie,color:c,borderColor:c}}else J={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return te.set(k,J),J},showTagsPopup:i,tagsPopupPosition:g,tagsPopupData:y,showTagsPopupFn:Z,hideTagsPopupFn:ge}}},Ma={class:"bg-white rounded-lg shadow-sm border"},Fa={key:0,class:"px-6 py-12 text-center text-gray-500"},Oa=["onClick"],Da=["onClick"],Aa={key:1,class:"max-w-xs"},Va=["title"],ja=["title"],Ea=["title"],La={key:3,class:"flex flex-wrap gap-1"},Ba=["onMouseenter"],Ua={key:1,class:"text-gray-400 text-sm"},Na=["onMouseenter"],za=["title"],Ha={class:"truncate"},Ja={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},qa={key:1,class:"text-gray-400 text-sm"},Ka={key:5,class:"flex flex-col"},Wa={class:"text-sm"},Qa={class:"text-xs text-gray-400"},Ga={key:7},Xa={class:"flex gap-2"},Ya={class:"text-sm"},Za={class:"font-semibold text-gray-900 mb-1"},el={class:"text-gray-600 flex items-center gap-1"},tl={class:"text-xs text-gray-500 mt-1"},sl={class:"text-sm"},ol={class:"flex flex-wrap gap-1"};function rl(e,s,t,r,l,i){const g=he("FeatherIcon"),y=he("ListHeaderItem"),m=he("ListHeader"),f=he("Avatar"),n=he("ListRowItem"),C=he("ListRow"),w=he("ListRows"),x=he("Button"),v=he("ListSelectBanner"),h=he("ListView");return a(),u("div",Ma,[s[5]||(s[5]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(a(),u("div",Fa,s[2]||(s[2]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(a(),W(h,{key:1,columns:r.columns,rows:r.transformedIssues,"row-key":"name",options:r.listOptions,"onUpdate:selections":r.handleSelections,class:"p-4"},{default:K(()=>[U(m,null,{default:K(()=>[(a(!0),u(Y,null,ee(r.columns,b=>(a(),W(y,{key:b.key,item:b},os({_:2},[b.icon?{name:"prefix",fn:K(({item:I})=>[U(g,{name:I.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,b.sortable?{name:"suffix",fn:K(()=>[o("button",{onClick:I=>r.handleColumnSort(b.key),class:N(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",r.getSortButtonClass(b.key)])},[U(g,{name:r.getSortIcon(b.key),class:N(["h-3 w-3",r.getSortIconClass(b.key)])},null,8,["name","class"])],10,Oa)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),U(w,null,{default:K(()=>[(a(!0),u(Y,null,ee(r.transformedIssues,b=>(a(),W(C,{key:b.name,row:b},{default:K(({column:I,item:S})=>[U(n,{item:S,align:I.align},{prefix:K(()=>[I.key==="raised_by"?(a(),W(f,{key:0,size:"sm",label:r.getInitials(b.raised_by),class:"mr-3"},null,8,["label"])):D("",!0)]),default:K(()=>{var F,z;return[I.key==="name"?(a(),u("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:Me(q=>r.handleIssueClick(b),["prevent"])},P(r.formatIssueId(S)),9,Da)):I.key==="subject"?(a(),u("div",Aa,[o("div",{class:"font-medium truncate",title:b.subject},P(b.subject),9,Va),b.description?(a(),u("div",{key:0,class:"text-gray-500 text-sm mt-1 truncate",title:b.description},P(r.stripHtml(b.description)),9,ja)):D("",!0)])):I.key==="raised_by"?(a(),u("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:S||"-"},P(S||"-"),9,Ea)):I.key==="custom_users_assigned"?(a(),u("div",La,[b.custom_users_assigned&&b.custom_users_assigned.length>0?(a(!0),u(Y,{key:0},ee(b.custom_users_assigned.filter(q=>q.user_assigned),q=>(a(),u("div",{key:q.name||q,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:V=>r.showUserPopup(V,q),onMouseleave:s[0]||(s[0]=(...V)=>r.hideUserPopup&&r.hideUserPopup(...V))},P(r.getInitials(q.user_assigned)),41,Ba)]))),128)):(a(),u("span",Ua,"-"))])):I.key==="_user_tags"?(a(),u("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:q=>r.showTagsPopupFn(q,b._user_tags),onMouseleave:s[1]||(s[1]=(...q)=>r.hideTagsPopupFn&&r.hideTagsPopupFn(...q))},[b._user_tags&&b._user_tags.length>0?(a(),u(Y,{key:0},[o("span",{style:Ie(r.getTagStyle(b._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:b._user_tags[0]},[o("span",Ha,P(b._user_tags[0]),1)],12,za),b._user_tags.length>1?(a(),u("span",Ja," +"+P(b._user_tags.length-1),1)):D("",!0)],64)):(a(),u("span",qa,"-"))],40,Na)):I.key==="creation"?(a(),u("div",Ka,[o("span",Wa,P(r.formatDate(S)),1),o("span",Qa,P(r.formatTime(S)),1)])):I.key==="status"?(a(),u("span",{key:6,class:N([r.getStatusBadgeClass(((F=b.status)==null?void 0:F.label)||b.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},P(((z=b.status)==null?void 0:z.label)||b.status||"New"),3)):(a(),u("span",Ga,P(S),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),U(v,null,{actions:K(({unselectAll:b})=>[o("div",Xa,[U(x,{variant:"ghost",label:"Delete"}),U(x,{variant:"ghost",label:"Unselect all",onClick:b},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),r.showPopup&&r.popupUser?(a(),u("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:Ie({left:r.popupPosition.x+"px",top:r.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",Ya,[o("div",Za,P(r.popupUser.user_assigned||"Unknown User"),1),o("div",el,[s[3]||(s[3]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),se(" "+P(r.popupUser.team||"No Team"),1)]),o("div",tl," Assigned: "+P(r.formatDate(r.popupUser.assigned_date)),1)])],4)):D("",!0),r.showTagsPopup&&r.tagsPopupData?(a(),u("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:Ie({left:r.tagsPopupPosition.x+"px",top:r.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",sl,[s[4]||(s[4]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",ol,[(a(!0),u(Y,null,ee(r.tagsPopupData,b=>(a(),u("span",{key:b,style:Ie(r.getTagStyle(b)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},P(b),5))),128))])])],4)):D("",!0)])}const al=Le(Ra,[["render",rl]]),ll={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},nl={class:"flex items-start justify-between"},il={class:"flex items-start space-x-3"},ul={class:"flex-shrink-0"},cl={class:"flex-1 min-w-0"},dl={class:"text-sm font-medium text-gray-900"},pl={class:"text-sm text-gray-600 mt-1"},gl={class:"text-xs text-gray-500 mt-1"},ml=["onClick"],vl={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(e){const s=i=>{const g="bg-white/95 border-l-4",y={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${g} ${y[i]||y.info}`},t=i=>{const g={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return g[i]||g.info},r=i=>{const g={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return g[i]||g.info},l=i=>{const y=new Date-i,m=Math.floor(y/6e4);if(m<1)return"Just now";if(m<60)return`${m}m ago`;const f=Math.floor(m/60);return f<24?`${f}h ago`:i.toLocaleDateString()};return(i,g)=>(a(),u("div",ll,[U(rs,{name:"notification",tag:"div"},{default:K(()=>[(a(!0),u(Y,null,ee(e.notifications,y=>(a(),u("div",{key:y.id,class:N([s(y.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",nl,[o("div",il,[o("div",ul,[U(_($e),{name:t(y.type),class:N([r(y.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",cl,[o("p",dl,P(y.title),1),o("p",pl,P(y.message),1),o("p",gl,P(l(y.timestamp)),1)])]),o("button",{onClick:m=>i.$emit("remove",y.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[U(_($e),{name:"x",class:"h-4 w-4"})],8,ml)])],2))),128))]),_:1})]))}},fl=Le(vl,[["__scopeId","data-v-d57fd7d2"]]);function hl(e,s){let t;return function(...l){const i=()=>{clearTimeout(t),e(...l)};clearTimeout(t),t=setTimeout(i,s)}}function bl(){const e=A(""),s=A({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=A(""),r=hl(x=>{t.value=x},300);_e(e,x=>{r(x)});const l=M(()=>{const x={};return t.value.trim()&&(x.subject=["like",`%${t.value.trim()}%`]),s.value.status&&(x.status=s.value.status),s.value.priority&&(x.priority=s.value.priority),s.value.assignee&&(x.raised_by=s.value.assignee),s.value.tags&&(x.issue_type=s.value.tags),x}),i=M(()=>s.value.sortBy||"creation desc"),g=new Map,y=x=>{if(!x||!Array.isArray(x))return[];const v=JSON.stringify({issuesLength:x.length,searchQuery:e.value.trim(),status:s.value.status,priority:s.value.priority,assignee:s.value.assignee,tags:s.value.tags,sortBy:s.value.sortBy});if(g.has(v))return g.get(v);let h=[...x];if(e.value.trim()){const I=e.value.toLowerCase().trim();h=h.filter(S=>{const F=(S.subject||"").toLowerCase(),z=(S.description||"").toLowerCase();return F.includes(I)||z.includes(I)})}s.value.status&&(h=h.filter(I=>I.status===s.value.status)),s.value.priority&&(h=h.filter(I=>I.priority===s.value.priority)),s.value.assignee&&(h=h.filter(I=>I.raised_by===s.value.assignee)),s.value.tags&&(h=h.filter(I=>I.issue_type===s.value.tags));const b=Te({Critical:4,High:3,Medium:2,Low:1});if(h.sort((I,S)=>{const[F,z]=s.value.sortBy.split(" "),q=I[F]||"",V=S[F]||"";let E=0;return F==="creation"||F==="modified"?E=new Date(q)-new Date(V):F==="priority"?E=(b[q]||0)-(b[V]||0):E=q.toString().localeCompare(V.toString()),z==="desc"?-E:E}),g.size>50){const I=g.keys().next().value;g.delete(I)}return g.set(v,h),h};let m=null,f=null;const n=x=>{if(!x||!Array.isArray(x))return Te([{label:"All Assignees",value:""}]);const v=x.map(I=>I.raised_by).filter(I=>I&&I.trim()).sort().join("|");if(m&&f===v)return m;const h=[...new Set(x.map(I=>I.raised_by).filter(I=>I&&I.trim()))],b=Te([{label:"All Assignees",value:""},...h.map(I=>({label:I,value:I}))]);return m=b,f=v,b},C=()=>{e.value="",t.value="",s.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},w=M(()=>e.value.trim()!==""||s.value.status!==""||s.value.priority!==""||s.value.assignee!==""||s.value.tags!==""||s.value.sortBy!=="creation desc");return{searchQuery:e,filters:s,debouncedSearchQuery:t,apiFilters:l,sortOrder:i,hasActiveFilters:w,filterIssues:y,getAssigneeOptions:n,resetFilters:C}}function yl(e,s){const t=as(),r=A([]),l=A(!1),i=A(!1);let g=null;const y=i.value?15e3:2e3,m=()=>{g&&clearTimeout(g),g=setTimeout(()=>{C()},y)},f=()=>{if(!t||l.value)return;t.emit("doctype_subscribe","Issue"),t.off("list_update"),t.on("list_update",E=>{if((E==null?void 0:E.doctype)==="Issue"&&!h()){if(E.action==="insert"||E.action==="create"){console.log("📝 Skipping new issue creation update:",E.name);return}r.value.push(E),m()}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(E=>{t.on(E,Q=>{if((Q==null?void 0:Q.doctype)!=="Issue"||h())return;const L={doctype:"Issue",name:Q.name,action:E.includes("create")?"insert":E.includes("delete")?"delete":"update",modified_by:Q.modified_by||Q.owner,timestamp:new Date().toISOString()};if(L.action==="insert"){console.log("📝 Skipping new issue creation update:",Q.name);return}r.value.push(L),m()})}),l.value=!0},n=()=>{if(!t||!l.value)return;t.emit("doctype_unsubscribe","Issue"),t.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(E=>{t.off(E)}),l.value=!1},C=()=>pe(this,null,function*(){if(!r.value.length)return;const V=window.location.hash||window.location.pathname;if(!V.includes("issue-tracker")&&!V.includes("issues")){r.value=[],n();return}const E=[...new Set(r.value.map(L=>L.name))],Q=E.length;r.value=[];try{yield w(E),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:Q,documents:E}}))}catch(L){console.error("Error updating individual rows, falling back to full refresh:",L);try{yield je(),yield We()}catch(le){console.error("Error in fallback refresh:",le)}}}),w=V=>pe(this,null,function*(){try{const{activeResource:E,currentData:Q}=x();if(!Q||!Array.isArray(Q)){console.log("📋 No current data available, falling back to custom refresh"),s&&typeof s=="function"&&(yield s());return}let L={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(e&&typeof e=="function")try{const Z=e();Z&&(L=we(we({},L),Z))}catch(Z){console.warn("Error getting current parameters, using defaults:",Z)}const le=Q.map(Z=>Z.name),G=V.filter(Z=>le.includes(Z));if(G.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${G.length} visible issues:`,G),yield v(G,E,Q)}catch(E){throw console.error("Error during targeted refresh:",E),s&&typeof s=="function"&&(yield s()),E}}),x=()=>Se.data&&Array.isArray(Se.data)&&Se.data.length>0?{activeResource:Se,currentData:Se.data,resourceType:"stat"}:{activeResource:Ee,currentData:Ee.data||[],resourceType:"main"},v=(V,E,Q)=>pe(this,null,function*(){try{const le=(yield Promise.all(V.map(G=>pe(this,null,function*(){try{return yield Qs(G),Ft.data}catch(Z){return console.warn(`Failed to fetch updated issue ${G}:`,Z),null}})))).filter(G=>G!==null);if(le.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),s&&typeof s=="function"&&(yield s());return}if(E.data&&Array.isArray(E.data))le.forEach(G=>{const Z=E.data.findIndex(ge=>ge.name===G.name);Z!==-1&&Object.assign(E.data[Z],G)});else{const G=[...Q];le.forEach(Z=>{const ge=G.findIndex(ce=>ce.name===Z.name);ge!==-1&&(G[ge]=Z)}),E.data=G}console.log(`🎯 Successfully updated ${le.length} issues in current view`)}catch(L){console.error("Error updating visible issues in place:",L),s&&typeof s=="function"&&(yield s())}}),h=()=>!!document.hidden,b=A(!1),I=()=>{document.hidden?b.value=!0:b.value&&(b.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),r.value.length>0?(console.log(`📋 Processing ${r.value.length} pending updates`),C()):S())},S=()=>{r.value=[];try{s&&typeof s=="function"?s():(je(),We())}catch(V){console.error("Error during manual refresh:",V)}},F=()=>{f()},z=()=>{l.value=!1},q=V=>{console.error("Socket connection error:",V),l.value=!1};return Oe(()=>{t&&(t.on("connect",F),t.on("disconnect",z),t.on("connect_error",q),document.addEventListener("visibilitychange",I),t.connected&&f())}),Ge(()=>{t&&(t.off("connect",F),t.off("disconnect",z),t.off("connect_error",q)),document.removeEventListener("visibilitychange",I),n(),g&&clearTimeout(g)}),{pendingDocumentRefreshes:r,realtimeEventsSetup:l,setupRealtimeUpdates:f,disableRealtimeUpdates:n,manualRefresh:S,processDocumentRefreshes:C}}const wl={class:"min-h-screen bg-gray-50"},xl={class:"bg-white shadow-sm border-b"},_l={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},kl={class:"flex justify-between items-center py-4"},Cl={class:"flex items-center space-x-4"},Sl={class:"flex space-x-4"},Il={class:"flex items-center space-x-4"},$l={class:"text-sm text-gray-600"},Pl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Tl={class:"fixed top-20 right-4 flex flex-col space-y-2"},Rl=["title"],Ml={class:"relative"},Fl={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Al={__name:"IssueTracker",setup(e){const{searchQuery:s,filters:t,debouncedSearchQuery:r,apiFilters:l,sortOrder:i,getAssigneeOptions:g}=bl(),y=A(!1),m=A("team_tickets"),f=()=>{console.log("Refreshing current view:",{isUsingStatFilter:y.value,currentStatFilter:m.value,hasCustomFilters:L.value&&L.value.length>0});const j={limit_page_length:J.value,limit_start:($.value-1)*J.value,order_by:i.value};y.value?(L.value&&L.value.length>0&&(j.filters=JSON.stringify(L.value)),Promise.all([et(m.value,j),L.value&&L.value.length>0?qe(m.value,JSON.stringify(L.value)):qe(m.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(B=>{console.error("Error refreshing stat filter view:",B)})):Promise.all([je(we({filters:JSON.stringify(L.value)},j)),We(JSON.stringify(L.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(B=>{console.error("Error refreshing regular filter view:",B)})},{pendingDocumentRefreshes:n,realtimeEventsSetup:C,manualRefresh:w}=yl(()=>({filters:Pe.value,order_by:i.value,limit_page_length:J.value,limit_start:($.value-1)*J.value}),f),x=()=>{f()},v=A([]),h=j=>{v.value.push(we({id:Date.now()+Math.random()},j)),setTimeout(()=>{var B;b((B=v.value[v.value.length-1])==null?void 0:B.id)},5e3)},b=j=>{v.value=v.value.filter(B=>B.id!==j)},I=M(()=>y.value?Se.data||[]:Ee.data||[]),S=M(()=>y.value?Ot.data||0:Mt.data||0),F=M(()=>y.value?Se.loading:Ee.loading),z=M(()=>I.value),q=M(()=>(i.value||"creation desc").split(" ")[0]),V=M(()=>(i.value||"creation desc").split(" ")[1]||"desc"),E=({field:j,direction:B})=>{const ie=`${j} ${B}`;t.value.sortBy=ie},Q=j=>{},L=A([]),le=j=>{console.log("Filters applied:",j),L.value=j,$.value=1,j&&j.length>0?y.value?(console.log("Applying custom filters on top of card filter:",m.value),ce(m.value)):(console.log("Applying custom filters in regular mode"),G()):(console.log("No filters applied, returning to default view"),Z())},G=()=>{y.value=!1,m.value="team_tickets",Promise.all([je({filters:JSON.stringify(L.value),order_by:i.value,limit_page_length:J.value,limit_start:0}),We(JSON.stringify(L.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch(j=>{console.error("Error applying custom filters:",j)})},Z=()=>{y.value=!0,m.value="team_tickets",ce("team_tickets")},ge=j=>{console.log("Card clicked:",j,"Current filters:",L.value),y.value=!0,m.value=j,s.value="",$.value=1,ce(j)},ce=j=>{const B={limit_page_length:J.value,limit_start:0,order_by:i.value};L.value&&L.value.length>0?(B.filters=JSON.stringify(L.value),console.log("Applying card filter with custom filters:",j,L.value)):console.log("Applying card filter without custom filters:",j),Promise.all([et(j,B),L.value&&L.value.length>0?qe(j,JSON.stringify(L.value)):qe(j)]).then(()=>{console.log("Card filter applied successfully")}).catch(ie=>{console.error("Error applying card filter:",ie)})},R=Ae(Te(Ys())),O=Ae(Te(Zs())),H=Ae(Te(to()));let te=null,re=0;const k=M(()=>{const j=I.value.length;return te&&re===j||(te=Te(g(I.value)),re=j),te}),$=A(1),J=A(10),ne=({page:j,itemsPerPage:B,offset:ie})=>{console.log("Page change:",{page:j,newItemsPerPage:B,offset:ie}),$.value=j,J.value=B;const c={limit_page_length:B,limit_start:ie,order_by:i.value};y.value?(L.value&&L.value.length>0&&(c.filters=JSON.stringify(L.value)),et(m.value,c).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(p=>{console.error("Error during pagination (stat filter):",p)})):je(we({filters:JSON.stringify(L.value)},c)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(p=>{console.error("Error during pagination (regular filter):",p)})},Pe=M(()=>{const j={};return t.value.status&&(j.status=t.value.status),t.value.priority&&(j.priority=t.value.priority),t.value.assignee&&(j.raised_by=t.value.assignee),t.value.tags&&(j.issue_type=t.value.tags),j});return Oe(()=>{console.log("IssueTracker mounted, initializing with default view"),y.value=!0,m.value="team_tickets",ce("team_tickets"),window.addEventListener("issueListUpdated",j=>{const{count:B,documents:ie}=j.detail;h({type:"info",title:"List Updated",message:`${B} issue${B>1?"s":""} updated: ${ie.slice(0,3).join(", ")}${ie.length>3?"...":""}`,timestamp:new Date})})}),Ge(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(j,B)=>{const ie=he("router-link");return a(),u("div",wl,[o("div",xl,[o("div",_l,[o("div",kl,[o("div",Cl,[B[7]||(B[7]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),o("nav",Sl,[U(ie,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:K(()=>B[5]||(B[5]=[se(" Home ")])),_:1,__:[5]}),U(ie,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:K(()=>B[6]||(B[6]=[se(" Issues ")])),_:1,__:[6]})])]),o("div",Il,[o("span",$l,P(_(mt).user),1),U(_(be),{onClick:B[0]||(B[0]=c=>_(mt).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:K(()=>B[8]||(B[8]=[se(" Logout ")])),_:1,__:[8]})])])])]),o("div",Pl,[U($a,{issues:z.value,activeFilter:m.value,onFilterChanged:ge},null,8,["issues","activeFilter"]),U(ia,{searchQuery:_(s),"onUpdate:searchQuery":B[1]||(B[1]=c=>gt(s)?s.value=c:null),filters:_(t),"onUpdate:filters":B[2]||(B[2]=c=>gt(t)?t.value=c:null),statusOptions:H.value,priorityOptions:R.value,assigneeOptions:k.value,tagsOptions:O.value,issues:I.value,filteredCount:S.value,onSuggestionSelected:Q,onFiltersApplied:le},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),U(al,{issues:z.value,loading:F.value,sortField:q.value,sortDirection:V.value,onSort:E},null,8,["issues","loading","sortField","sortDirection"]),U(ya,{currentPage:$.value,"onUpdate:currentPage":B[3]||(B[3]=c=>$.value=c),itemsPerPage:J.value,"onUpdate:itemsPerPage":B[4]||(B[4]=c=>J.value=c),totalItems:S.value,onPageChange:ne},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Tl,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:_(C)?"Real-time updates active":"Real-time updates disabled"},[o("div",Ml,[U(_($e),{name:_(C)?"wifi":"wifi-off",class:N(["h-5 w-5 transition-colors duration-200",_(C)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:N(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",_(C)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),_(n).length>0?(a(),u("div",Fl,P(_(n).length>9?"9+":_(n).length),1)):D("",!0)])],8,Rl),o("button",{onClick:x,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[U(_($e),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),U(fl,{notifications:v.value,onRemove:b},null,8,["notifications"])])}}};export{Al as default};
//# sourceMappingURL=IssueTracker-BIK1zBZP.js.map
