var pt=Object.defineProperty,mt=Object.defineProperties;var vt=Object.getOwnPropertyDescriptors;var qe=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var Ye=(r,t,s)=>t in r?pt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,ne=(r,t)=>{for(var s in t||(t={}))ft.call(t,s)&&Ye(r,s,t[s]);if(qe)for(var s of qe(t))yt.call(t,s)&&Ye(r,s,t[s]);return r},Ke=(r,t)=>mt(r,vt(t));var me=(r,t,s)=>new Promise((a,v)=>{var l=d=>{try{y(s.next(d))}catch(h){v(h)}},p=d=>{try{y(s.throw(d))}catch(h){v(h)}},y=d=>d.done?a(d.value):Promise.resolve(d.value).then(l,p);y((s=s.apply(r,t)).next())});import{g as bt,r as j,i as R,o as n,a as u,n as H,j as J,F as Q,f as se,t as $,b as o,k as O,l as de,u as f,m as W,p as be,q as ce,v as ht,x as pe,y as he,h as Se,z as Ne,A as ee,B as ge,C as $e,d as U,w as K,D as _t,E as Ie,T as xt,G as wt,H as kt,I as ue,J as Ct,c as le,K as Te,L as Me,M as Ce,N as tt,O as We,P as Oe,Q as _e,R as St,S as ke,U as ze,e as ie,V as $t,W as Pt,X as ye,Y as It,Z as Qe,s as Ge}from"./index-BND8Rg2L.js";const Tt=["src","alt"],Rt=bt({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(r){const t=j(!1),s=r,a=R(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),v=R(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),l=R(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),p=R(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),y=R(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),d=R(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function h(m){m.type&&(t.value=!0)}return(m,T)=>(n(),u("div",{class:H(["relative inline-block shrink-0",[v.value,a.value]])},[m.image&&!t.value?(n(),u("img",{key:0,src:m.image,alt:m.label,class:H([a.value,"h-full w-full object-cover"]),onError:T[0]||(T[0]=I=>h(I))},null,42,Tt)):(n(),u("div",{key:1,class:H(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[l.value,a.value]])},[m.$slots.default?(n(),u("div",{key:0,class:H(d.value)},[J(m.$slots,"default")],2)):(n(),u(Q,{key:1},[se($(m.label&&m.label[0]),1)],64))],2)),m.$slots.indicator?(n(),u("div",{key:2,class:H(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",p.value])},[o("div",{class:H(y.value)},[J(m.$slots,"indicator")],2)],2)):O("",!0)],2))}}),Ft={class:"flex h-full w-full flex-col items-center justify-center text-base"},Et={class:"text-xl font-medium"},Lt={class:"mt-1 text-base text-ink-gray-5"},Mt={__name:"ListEmptyState",setup(r){const t=de("list");return(s,a)=>(n(),u("div",Ft,[J(s.$slots,"default",{},()=>[o("div",Et,$(f(t).options.emptyState.title),1),o("div",Lt,$(f(t).options.emptyState.description),1),f(t).options.emptyState.button?(n(),W(f(ce),be({key:0},f(t).options.emptyState.button,{class:"mt-4"}),null,16)):O("",!0)])]))}};function st(r,t=!0){let s=t?"14px ":"",a=r.map(v=>{let l=v.width||1;return typeof l=="number"?l+"fr":l}).join(" ");return s+a}const He={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Dt={class:"truncate"},rt={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(r,{emit:t}){const s=r,a=t,v=j(null),l=j(null),p=R(()=>{if(typeof s.item.width=="string"){const m=parseInt(s.item.width);if(s.item.width.includes("rem"))return m*16;if(s.item.width.includes("px"))return m}return l.value.offsetWidth}),y=m=>{const T=m.clientX,I=p.value,C=w=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),v.value.style.backgroundColor="rgb(199 199 199)";let c=I+(w.clientX-T);s.item.width=`${c<50?50:c}px`,d(s.item.width)},_=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),v.value.style.backgroundColor="",window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",C),window.addEventListener("mouseup",_)},d=ht(m=>{s.item.width=m,a("columnWidthUpdated")},s.debounce),h=de("list");return(m,T)=>(n(),u("div",{ref_key:"columnRef",ref:l,class:H(["group relative flex items-center",r.item.align?f(He)[r.item.align]:"justify-between"])},[o("div",{class:H(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",m.$attrs.class])},[J(m.$slots,"prefix",pe(he({item:r.item}))),J(m.$slots,"default",{},()=>[o("div",Dt,$(r.item.label),1)]),J(m.$slots,"suffix",pe(he({item:r.item})))],2),f(h).options.resizeColumn?J(m.$slots,"resizer",pe(be({key:0},{item:r.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:y},[o("div",{ref_key:"resizer",ref:v,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):O("",!0)],2))}},ot={__name:"ListHeader",emits:["columnWidthUpdated"],setup(r,{emit:t}){const s=t,a=de("list");return(v,l)=>(n(),u("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ge({gridTemplateColumns:f(st)(f(a).columns,f(a).options.selectable)})},[f(a).options.selectable?(n(),W(Ne,{key:0,class:"cursor-pointer duration-300",modelValue:f(a).allRowsSelected,onClick:Se(f(a).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):O("",!0),J(v.$slots,"default",{},()=>[(n(!0),u(Q,null,ee(f(a).columns,p=>(n(),W(rt,{key:p.key,item:p,onColumnWidthUpdated:y=>s("columnWidthUpdated",p)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Ot={class:"truncate text-base"},at={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(r){const t=r,s=R(()=>{var p,y;return(p=t.column)!=null&&p.getLabel?(y=t.column)==null?void 0:y.getLabel({row:t.row}):v(t.item).label||""}),a=R(()=>l.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):v(t.item).label:"");function v(p){return p&&typeof p=="object"?p:{label:p}}const l=de("list");return(p,y)=>(n(),u("div",{class:H(["flex items-center space-x-2",f(He)[r.align]])},[J(p.$slots,"prefix",{},()=>[r.column.prefix?(n(),W($e(typeof r.column.prefix=="function"?r.column.prefix({row:r.row}):r.column.prefix),{key:0})):O("",!0)]),U(f(_t),pe(he(f(l).options.showTooltip?{text:a.value}:{text:""})),{default:K(()=>[J(p.$slots,"default",pe(he({label:s.value})),()=>[o("div",Ot,$(s.value),1)])]),_:3},16),J(p.$slots,"suffix")],2))}},Ve={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(r){const t=r,s=de("list"),a=R(()=>{var m;return(m=s.value.rows)!=null&&m.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===t.row[s.value.rowKey]:!1}),v=R(()=>s.value.selections.has(t.row[s.value.rowKey])),l=R(()=>s.value.options.enableActive&&s.value.activeRow.value===t.row.name),p=R(()=>s.value.options.getRowRoute||s.value.options.onRowClick),y=R(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),d=R(()=>{var I,C,_;if(!v.value)return"rounded";const m=[...s.value.selections];let T=(I=s.value.rows[0])!=null&&I.group?s.value.rows.map(w=>w.rows):[s.value.rows];for(let w of T){let c=w.findIndex(P=>P==t.row);if(c===-1)continue;let S=!m.includes((C=w[c+1])==null?void 0:C.name),b=!m.includes((_=w[c-1])==null?void 0:_.name);return(S?"rounded-b ":"")+(b?"rounded-t":"")}}),h=(m,T)=>{s.value.options.onRowClick&&s.value.options.onRowClick(m,T),s.value.activeRow.value===m.name?s.value.activeRow.value=null:s.value.activeRow.value=m.name};return(m,T)=>(n(),W($e(f(s).options.getRowRoute?"router-link":"div"),be({class:[[d.value,v.value||l.value?"bg-surface-gray-2":"",p.value?"cursor-pointer":"",p.value?v.value||l.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:f(s).options.getRowRoute?f(s).options.getRowRoute(r.row):void 0,onClick:I=>h(r.row,I)}),{default:K(()=>[(n(),W($e(f(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:K(()=>{var I,C;return[o("div",{class:"grid items-center space-x-4 px-2",style:ge({height:y.value,gridTemplateColumns:f(st)(f(s).columns,f(s).options.selectable)})},[f(s).options.selectable?(n(),u("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:T[1]||(T[1]=Se(()=>{},["stop","prevent"])),onDblclick:T[2]||(T[2]=Se(()=>{},["stop"]))},[U(Ne,{modelValue:v.value,class:"cursor-pointer duration-300",onClick:T[0]||(T[0]=Se(_=>f(s).toggleRow(r.row[f(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):O("",!0),(n(!0),u(Q,null,ee(f(s).columns,(_,w)=>(n(),u("div",{key:_.key,class:H([f(He)[_.align],w==0?"text-ink-gray-9":"text-ink-gray-7"])},[J(m.$slots,"default",be({ref_for:!0},{idx:w,column:_,item:r.row[_.key],isActive:l.value}),()=>[f(s).slots.cell?(n(),W($e(f(s).slots.cell),be({key:0,ref_for:!0},{column:_,row:r.row,item:r.row[_.key],align:_.align}),null,16)):(n(),W(at,{key:1,column:_,row:r.row,item:r.row[_.key],align:_.align},null,8,["column","row","item","align"]))])],2))),128))],4),a.value?O("",!0):(n(),u("div",{key:0,class:H(["h-px border-t",d.value==="rounded"||(C=(I=d.value)==null?void 0:I.includes)!=null&&C.call(I,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},jt={class:"h-full overflow-y-auto"},lt={__name:"ListRows",setup(r){const t=de("list");return(s,a)=>(n(),u("div",jt,[J(s.$slots,"default",{},()=>[(n(!0),u(Q,null,ee(f(t).rows,v=>(n(),W(Ve,{key:v[f(t).rowKey],row:v},null,8,["row"]))),128))])]))}},At={},Bt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ut(r,t){return n(),u("svg",Bt,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const Nt=Ie(At,[["render",Ut]]),zt={class:"flex items-center"},Ht={class:"w-full py-1.5 pr-2"},Vt={key:1,class:"text-base font-medium leading-6"},qt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(r){const t=r,s=de("list");function a(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(v,l)=>(n(),u(Q,null,[o("div",zt,[o("button",{onClick:a,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[U(Nt,{class:H(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[r.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),J(v.$slots,"default",{},()=>[o("div",Ht,[f(s).slots["group-header"]?(n(),W($e(f(s).slots["group-header"]),pe(be({key:0},{group:r.group})),null,16)):(n(),u("span",Vt,$(r.group.group),1))])])]),l[0]||(l[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Yt={key:0,class:"mb-5 mt-2"},Kt={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(r){const t=de("list");return(s,a)=>r.group.collapsed?O("",!0):(n(),u("div",Yt,[J(s.$slots,"default",{},()=>[(n(!0),u(Q,null,ee(r.group.rows,v=>(n(),W(Ve,{key:v[f(t).rowKey],row:v},null,8,["row"]))),128))])]))}},Wt={class:"h-full overflow-y-auto"},Qt={__name:"ListGroups",setup(r){const t=de("list");return(s,a)=>(n(),u("div",Wt,[(n(!0),u(Q,null,ee(f(t).rows,v=>(n(),u("div",{key:v.group},[J(s.$slots,"default",{},()=>[U(qt,{group:v},{default:K(()=>[s.$slots["group-header"]?J(s.$slots,"group-header",be({key:0,ref_for:!0},{group:v})):O("",!0)]),_:2},1032,["group"]),U(Kt,{group:v},null,8,["group"])])]))),128))]))}},Gt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Jt={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Xt={class:"flex items-center space-x-3"},Zt={class:"mr-3"},es={class:"flex items-center space-x-1"},nt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(r){const t=de("list");let s=R(()=>t.value.options.selectionText(t.value.selections.size));return(a,v)=>(n(),W(xt,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:K(()=>[f(t).selections.size?(n(),u("div",Gt,[o("div",{class:H(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",a.$attrs.class])},[J(a.$slots,"default",pe(he({selections:f(t).selections,allRowsSelected:f(t).allRowsSelected,selectAll:()=>f(t).toggleAllRows(!0),unselectAll:()=>f(t).toggleAllRows(!1)})),()=>[o("div",Jt,[o("div",Xt,[U(Ne,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,$(f(s)),1)]),o("div",Zt,[J(a.$slots,"actions",pe(he({selections:f(t).selections,allRowsSelected:f(t).allRowsSelected,selectAll:()=>f(t).toggleAllRows(!0),unselectAll:()=>f(t).toggleAllRows(!1)})))])]),o("div",es,[U(f(ce),{class:H(["w- text-ink-gray-7",f(t).allRowsSelected?"cursor-not-allowed":""]),disabled:f(t).allRowsSelected,variant:"ghost",onClick:v[0]||(v[0]=l=>f(t).toggleAllRows(!0))},{default:K(()=>v[2]||(v[2]=[se(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),U(f(ce),{icon:"x",variant:"ghost",onClick:v[1]||(v[1]=l=>f(t).toggleAllRows(!1))})])])],2)])):O("",!0)]),_:3}))}}),ts={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},ss=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(r,{expose:t,emit:s}){const a=r,v=wt();let l=kt(new Set),p=j(null);const y=s;ue(l,_=>{l.size&&(p.value=null),y("update:selections",_)}),ue(p,_=>{y("update:active-row",_)});let d=R(()=>{function _(c){return c===void 0?!0:c}function w(c){return c===void 0?!1:c}return{getRowRoute:a.options.getRowRoute||null,onRowClick:a.options.onRowClick||null,showTooltip:_(a.options.showTooltip),selectionText:a.options.selectionText||(c=>c===1?"1 row selected":`${c} rows selected`),enableActive:w(a.options.enableActive),selectable:_(a.options.selectable),resizeColumn:w(a.options.resizeColumn),rowHeight:a.options.rowHeight||40,emptyState:a.options.emptyState}});const h=R(()=>a.rows.length?T.value?l.size===a.rows.reduce((_,w)=>_+w.rows.length,0):l.size===a.rows.length:!1),m=R(()=>d.value.selectable);let T=R(()=>a.rows.every(_=>_.group&&_.rows&&Array.isArray(_.rows)));function I(_){l.delete(_)||l.add(_)}function C(_){if(!_||h.value){l.clear();return}if(T.value){a.rows.forEach(w=>{w.rows.forEach(c=>l.add(c[a.rowKey]))});return}a.rows.forEach(w=>l.add(w[a.rowKey]))}return Ct("list",R(()=>({rowKey:a.rowKey,rows:a.rows,columns:a.columns,options:d.value,selections:l,activeRow:p,allRowsSelected:h.value,slots:v,toggleRow:I,toggleAllRows:C}))),t({selections:l,allRowsSelected:h,toggleRow:I,toggleAllRows:C}),(_,w)=>(n(),u("div",ts,[o("div",{class:H(["flex w-max min-w-full flex-col overflow-y-hidden",_.$attrs.class]),style:ge(_.$attrs.style)},[J(_.$slots,"default",pe(he({showGroupedRows:f(T),selectable:m.value})),()=>[U(ot),a.rows.length?(n(),u(Q,{key:0},[f(T)?(n(),W(Qt,{key:0})):(n(),W(lt,{key:1}))],64)):(n(),W(Mt,{key:1})),m.value?(n(),W(nt,{key:2})):O("",!0)])],6)]))}});function rs(a,v){return me(this,arguments,function*(r,t,s={}){t||(t={});let l=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},s.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(l["X-Frappe-CSRF-Token"]=window.csrf_token);let p=r.startsWith("/")?r:`/api/method/${r}`;const y=yield fetch(p,{method:"POST",headers:l,body:JSON.stringify(t)});if(y.ok){const d=yield y.json();if(d.docs||r==="login")return d;if(d.exc)try{console.groupCollapsed(r),console.log(`method: ${r}`),console.log("params:",t);let h=JSON.parse(d.exc);for(let m of h)console.log(m);console.groupEnd()}catch(h){console.warn("Error printing debug messages",h)}return d.message}else{let d=yield y.text(),h,m;try{h=JSON.parse(d)}catch(C){}let T=[[r,h.exc_type,h._error_message].filter(Boolean).join(" ")];if(h.exc){m=h.exc;try{m=JSON.parse(m)[0],console.log(m)}catch(C){}}let I=new Error(T.join(`
`));throw I.exc_type=h.exc_type,I.exc=m,I.status=y.status,I.messages=h._server_messages?JSON.parse(h._server_messages):[],I.messages=I.messages.concat(h.message),I.messages=I.messages.map(C=>{try{return JSON.parse(C).message}catch(_){return C}}),I.messages=I.messages.filter(Boolean),I.messages.length||(I.messages=h._error_message?[h._error_message]:["Internal Server Error"]),s.onError&&s.onError({response:y,status:y.status,error:I}),I}})}const Pe=le({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(r){const t=r||{},s=t.limit_page_length||10,a=t.limit_start||0,v=t.filters||{},l=t.order_by||"creation desc";return{limit_page_length:s,limit_start:a,filters:v,order_by:l}},onError(r){console.error("Failed to fetch issues:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),it=le({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(r){return{filters:(r||{}).filters||{}}},onError(r){console.error("Failed to fetch issues count:",r)}});function xe(r={}){const t={limit_page_length:r.limit_page_length||10,limit_start:r.limit_start||0,filters:r.filters||{},order_by:r.order_by||"creation desc"};return Pe.reload(t)}function we(r={}){return it.reload({filters:r})}const ut=le({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(r){return{issue_name:r}},onError(r){console.error("Failed to fetch single issue:",r)},auto:!1});function os(r){return ut.reload(r)}const as=le({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(r){console.error("Failed to fetch issue priorities:",r)},auto:!0}),ls=le({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(r){console.error("Failed to fetch issue types:",r)},auto:!0});le({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(r){console.error("Failed to fetch projects:",r)},auto:!0});let Re=null,Je=null,Fe=null,Xe=null;function ns(){const r=as.data||[],t=JSON.stringify(r);if(Re&&Je===t)return Re;const s=[{label:"All Priority",value:""},...r.map(a=>({label:a.name,value:a.name}))];return Re=Object.freeze(s),Je=t,Re}function is(){const r=ls.data||[],t=JSON.stringify(r);if(Fe&&Xe===t)return Fe;const s=[{label:"All Types",value:""},...r.map(a=>({label:a.name,value:a.name}))];return Fe=Object.freeze(s),Xe=t,Fe}const us=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function cs(){return us}const ds=le({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(r){console.error("Failed to fetch tag colors:",r)},auto:!0}),Ee=new Map;let Ze=null;function Ue(r){const t=ds.data||{},s=JSON.stringify(t);if(Ze!==s&&(Ee.clear(),Ze=s),Ee.has(r))return Ee.get(r);const a=t[r]||null;return Ee.set(r,a),a}const je=le({url:"force_trans_customization.api.issues.issue_search",makeParams(r){const t=r||{};return{search_query:t.search_query||"",limit:t.limit||8}},onError(r){console.error("Failed to search issues:",r)},auto:!1});function gs(r,t=8){return!r||r.length<2?Promise.resolve(je.data||[]):je.reload({search_query:r,limit:t}).then(()=>je.data||[])}const ve=le({url:"force_trans_customization.api.issues.filter_issues_by_suggestion",makeParams(r){const t=r||{};return{suggestion_type:t.suggestion_type||"",suggestion_value:t.suggestion_value||"",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"}},onError(r){console.error("Failed to filter issues by suggestion:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),ct=le({url:"force_trans_customization.api.issues.get_filtered_issues_count",makeParams(r){const t=r||{};return{suggestion_type:t.suggestion_type||"",suggestion_value:t.suggestion_value||""}},onError(r){console.error("Failed to get filtered issues count:",r)},auto:!1});function Ae(r,t,s={}){const a={suggestion_type:r,suggestion_value:t,limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"};return ve.reload(a)}function et(r,t){return ct.reload({suggestion_type:r,suggestion_value:t})}const fe=le({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(r){const t=r||{};return{stat_type:t.stat_type||"team_tickets",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"}},onError(r){console.error("Failed to filter issues by stat:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),dt=le({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(r){return{stat_type:(r||{}).stat_type||"team_tickets"}},onError(r){console.error("Failed to get stat filter count:",r)},auto:!1});function Le(r,t={}){const s={stat_type:r,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return fe.reload(s)}function Be(r){return dt.reload({stat_type:r})}const ps={class:"relative w-full max-w-2xl mx-auto"},ms={class:"relative group"},vs=["placeholder"],fs={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},ys={key:1,class:"flex items-center pointer-events-none"},bs={key:2,class:"animate-spin"},hs={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},_s={class:"flex items-center justify-between"},xs={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},ws={class:"text-xs text-slate-500"},ks={key:0,class:"px-6 py-8 text-center"},Cs=["onClick"],Ss={class:"flex items-start space-x-4"},$s={class:"flex-1 min-w-0"},Ps={class:"flex items-start justify-between"},Is={class:"flex-1 min-w-0"},Ts={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},Rs=["innerHTML"],Fs={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Es={key:0,class:"ml-2"},Ls={class:"flex-shrink-0 ml-4"},Ms={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Ds={key:0,class:"flex items-center"},Os={key:1,class:"flex items-center"},js={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},As={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(r,{expose:t,emit:s}){const a=r,v=s,l=j(null),p=j(a.modelValue),y=j(!1),d=j(!1),h=j(-1),m=j(!1),T=j(0),I=j(null),C=j([]);let _=null;ue(()=>a.modelValue,e=>{p.value=e}),ue(p,e=>{v("update:modelValue",e),v("search",e)});const w=j([]),c=e=>me(this,null,function*(){if(!e||e.length<2){w.value=[],d.value=!1,m.value=!1;return}try{m.value=!0;const i=performance.now(),L=yield gs(e,8);T.value=performance.now()-i,w.value=L||[],d.value=!0}catch(i){console.error("Search error:",i),w.value=[],d.value=!1}finally{m.value=!1}}),S=e=>{if(_&&clearTimeout(_),h.value=-1,!e||e.length<2){w.value=[],d.value=!1,m.value=!1;return}m.value=!0,_=setTimeout(()=>{c(e)},1e3)},b=()=>{S(p.value)},P=(e,i)=>{if(!e||!i)return e;const L=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),E=new RegExp(`(${L})`,"gi");return e.replace(E,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},N=e=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[e]||"bg-gray-100 text-gray-800 border border-gray-200",B=()=>{y.value=!0,F&&(clearTimeout(F),F=null),p.value.length>=2&&(w.value.length>0?d.value=!0:c(p.value))};let F=null;const M=()=>{y.value=!1,F=setTimeout(()=>{d.value=!1,F=null},200)},V=e=>{var i;if(d.value)switch(e.key){case"ArrowDown":e.preventDefault(),h.value=Math.min(h.value+1,w.value.length-1),q();break;case"ArrowUp":e.preventDefault(),h.value=Math.max(h.value-1,-1),q();break;case"Enter":e.preventDefault(),h.value>=0&&G(w.value[h.value]);break;case"Escape":X(),(i=l.value)==null||i.blur();break}},G=e=>{p.value=e.name,X();const L=`${window.location.origin}/app/issue/${e.name}`;window.open(L,"_blank"),v("suggestion-selected",e)},te=()=>{var e;p.value="",X(),(e=l.value)==null||e.focus()},X=()=>{d.value=!1,h.value=-1},q=()=>{if(h.value<0||!I.value||!C.value[h.value])return;const e=I.value,i=C.value[h.value];if(i){const L=e.getBoundingClientRect(),E=i.getBoundingClientRect(),Y=E.top-L.top+e.scrollTop,g=Y+E.height,k=e.scrollTop,z=e.clientHeight;Y<k?e.scrollTop=Y:g>k+z&&(e.scrollTop=g-z)}},re=e=>{if(!e)return"";try{const i=new Date(e),L=new Date,E=Math.abs(L-i),Y=Math.ceil(E/(1e3*60*60*24));return Y===1?"Today":Y===2?"Yesterday":Y<=7?`${Y-1} days ago`:i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:i.getFullYear()!==L.getFullYear()?"numeric":void 0})}catch(i){return console.error("Error formatting date:",i),e}},x=e=>{var i,L;(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),(i=l.value)==null||i.focus(),(L=l.value)==null||L.select())};return Te(()=>{document.addEventListener("keydown",x)}),Me(()=>{document.removeEventListener("keydown",x),_&&clearTimeout(_),F&&clearTimeout(F)}),t({focus:()=>{var e,i;(e=l.value)==null||e.focus(),(i=l.value)==null||i.select()},select:()=>{var e;return(e=l.value)==null?void 0:e.select()},$el:l}),(e,i)=>(n(),u("div",ps,[o("div",ms,[i[4]||(i[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),Ce(o("input",{ref_key:"searchInput",ref:l,type:"text","onUpdate:modelValue":i[0]||(i[0]=L=>p.value=L),onInput:b,onFocus:B,onBlur:M,onKeydown:V,placeholder:r.placeholder,class:H(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":y.value,"bg-slate-50/50":!y.value&&p.value}])},null,42,vs),[[tt,p.value]]),o("div",fs,[p.value?(n(),u("button",{key:0,onClick:te,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},i[1]||(i[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):O("",!0),!p.value&&!y.value?(n(),u("div",ys,i[2]||(i[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),se("K ")],-1)]))):O("",!0),m.value?(n(),u("div",bs,i[3]||(i[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):O("",!0)])]),d.value?(n(),u("div",{key:0,class:H(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":d.value}])},[w.value.length>0?(n(),u("div",hs,[o("div",_s,[o("span",xs,$(w.value.length)+" Result"+$(w.value.length!==1?"s":""),1),o("span",ws,$(Math.round(T.value))+"ms ",1)])])):O("",!0),o("div",{ref_key:"suggestionsContainer",ref:I,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[w.value.length===0&&p.value.length>=2?(n(),u("div",ks,i[5]||(i[5]=[We('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):O("",!0),(n(!0),u(Q,null,ee(w.value,(L,E)=>(n(),u("div",{key:L.name||E,ref_for:!0,ref:Y=>C.value[E]=Y,onClick:Y=>G(L),class:H(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":E===h.value}])},[o("div",Ss,[i[8]||(i[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",$s,[o("div",Ps,[o("div",Is,[o("h4",Ts,[o("span",{innerHTML:P(L.subject||L.name,p.value)},null,8,Rs)]),o("p",Fs,[se(" ID: "+$(L.name)+" ",1),L.customer?(n(),u("span",Es,"• "+$(L.customer),1)):O("",!0)])]),o("div",Ls,[o("span",{class:H(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",N(L.status)])},$(L.status),3)])]),o("div",Ms,[L.raised_by?(n(),u("div",Ds,[i[6]||(i[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),se(" "+$(L.raised_by),1)])):O("",!0),L.creation?(n(),u("div",Os,[i[7]||(i[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),se(" "+$(re(L.creation)),1)])):O("",!0)])])])],10,Cs))),128))],512),p.value&&w.value.length>0?(n(),u("div",js,i[9]||(i[9]=[We('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):O("",!0)],2)):O("",!0),d.value?(n(),u("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:X})):O("",!0)]))}},Bs=Ie(As,[["__scopeId","data-v-4969cdcf"]]),Us={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Ns={class:"mb-6"},zs={class:"relative max-w-2xl mx-auto"},Hs={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},Vs={class:"border-t border-gray-200 pt-4"},qs={class:"flex items-center justify-between"},Ys={class:"flex items-center space-x-3 flex-1"},Ks={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Ws={key:0,class:"flex items-center space-x-2 flex-1 overflow-x-auto"},Qs={class:"text-gray-600 font-medium"},Gs={class:"text-gray-500"},Js={key:1,class:"text-gray-900"},Xs=["onClick"],Zs={key:0,class:"flex items-center space-x-2 ml-4"},er={key:0,class:"relative"},tr={class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg"},sr={class:"flex"},rr={class:"w-48 border-r border-gray-200 bg-gray-50"},or={class:"max-h-64 overflow-y-auto"},ar=["onClick"],lr={class:"flex-1 min-w-96"},nr={class:"p-4"},ir={key:0,class:"text-center py-8 text-gray-500"},ur={key:1,class:"space-y-3"},cr={class:"w-24 text-sm font-medium text-gray-700"},dr={class:"w-24"},gr=["onUpdate:modelValue","onChange"],pr=["value"],mr={class:"flex-1"},vr={key:0,class:"relative"},fr=["onUpdate:modelValue","onChange"],yr=["value"],br={key:0,class:"absolute right-8 top-1/2 transform -translate-y-1/2"},hr=["onUpdate:modelValue","onChange"],_r=["value"],xr=["onUpdate:modelValue","onInput","placeholder"],wr=["onClick"],kr={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},Cr={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({status:"",priority:"",assignee:"",tags:"",sortBy:"creation"})},statusOptions:{type:Array,default:()=>[]},priorityOptions:{type:Array,default:()=>[]},assigneeOptions:{type:Array,default:()=>[]},tagsOptions:{type:Array,default:()=>[]},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected"],setup(r,{emit:t}){const s=r,a=t,v=j(s.searchQuery),l=j(ne({},s.filters)),p=j(null),y=j(!1),d=j([]);let h=0;const m=R(()=>{const x=new Set;return s.issues.forEach(e=>{e._user_tags&&Array.isArray(e._user_tags)&&e._user_tags.forEach(i=>{i&&i.trim()&&x.add(i.trim())})}),Array.from(x).sort().map(e=>({label:e,value:e,color:Ue(e)}))}),T=R(()=>[{value:"subject",label:"Subject",description:"Filter by issue title",icon:"type",type:"text"},{value:"status",label:"Status",description:"Filter by issue status (New, In Review, etc.)",icon:"circle",type:"select"},{value:"priority",label:"Priority",description:"Filter by priority level",icon:"flag",type:"select"},{value:"issue_type",label:"Issue Type",description:"Filter by issue category",icon:"tag",type:"select"},{value:"raised_by",label:"Raised By (Email)",description:"Filter by who raised the issue",icon:"user",type:"text"},{value:"description",label:"Description",description:"Filter by issue description",icon:"file-text",type:"text"},{value:"customer",label:"Customer",description:"Filter by customer",icon:"building",type:"link"},{value:"customer_name",label:"Customer Name",description:"Filter by customer name",icon:"building",type:"text"},{value:"contact",label:"Contact",description:"Filter by contact person",icon:"user",type:"link"},{value:"lead",label:"Lead",description:"Filter by associated lead",icon:"user-plus",type:"link"},{value:"project",label:"Project",description:"Filter by project",icon:"folder",type:"link"},{value:"company",label:"Company",description:"Filter by company",icon:"building",type:"link"},{value:"service_level_agreement",label:"Service Level Agreement",description:"Filter by SLA",icon:"clock",type:"link"},{value:"agreement_status",label:"SLA Status",description:"Filter by SLA status",icon:"check-circle",type:"select"},{value:"response_by",label:"Response By",description:"Filter by response deadline",icon:"clock",type:"datetime"},{value:"sla_resolution_by",label:"Resolution By",description:"Filter by resolution deadline",icon:"clock",type:"datetime"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",description:"Filter by assigned CSM team",icon:"users",type:"link"},{value:"custom_users_assigned",label:"Users Assigned",description:"Filter by assigned users",icon:"user-check",type:"multiselect"},{value:"custom_labels",label:"Labels",description:"Filter by issue labels",icon:"tag",type:"multiselect"},{value:"creation",label:"Created Date",description:"Filter by creation date",icon:"calendar",type:"date"},{value:"modified",label:"Modified Date",description:"Filter by last modified date",icon:"clock",type:"date"},{value:"opening_date",label:"Opening Date",description:"Filter by opening date",icon:"calendar",type:"date"},{value:"opening_time",label:"Opening Time",description:"Filter by opening time",icon:"clock",type:"time"},{value:"sla_resolution_date",label:"Resolution Date",description:"Filter by resolution date",icon:"calendar",type:"datetime"},{value:"first_responded_on",label:"First Responded On",description:"Filter by first response date",icon:"clock",type:"datetime"},{value:"first_response_time",label:"First Response Time",description:"Filter by first response time",icon:"clock",type:"duration"},{value:"avg_response_time",label:"Average Response Time",description:"Filter by average response time",icon:"clock",type:"duration"},{value:"resolution_time",label:"Resolution Time",description:"Filter by resolution time",icon:"clock",type:"duration"},{value:"user_resolution_time",label:"User Resolution Time",description:"Filter by user resolution time",icon:"clock",type:"duration"},{value:"total_hold_time",label:"Total Hold Time",description:"Filter by total hold time",icon:"pause",type:"duration"},{value:"via_customer_portal",label:"Via Customer Portal",description:"Filter by customer portal origin",icon:"globe",type:"boolean"},{value:"naming_series",label:"Series",description:"Filter by naming series",icon:"hash",type:"text"},{value:"email_account",label:"Email Account",description:"Filter by email account",icon:"mail",type:"link"},{value:"issue_split_from",label:"Issue Split From",description:"Filter by parent issue",icon:"git-branch",type:"link"},{value:"_user_tags",label:"Tags",description:"Filter by user tags",icon:"tag",type:"tags"}]),I=R(()=>[{label:"Created Date (Newest)",value:"creation desc"},{label:"Created Date (Oldest)",value:"creation asc"},{label:"Modified Date (Newest)",value:"modified desc"},{label:"Modified Date (Oldest)",value:"modified asc"},{label:"Subject (A-Z)",value:"subject asc"},{label:"Subject (Z-A)",value:"subject desc"},{label:"Priority",value:"priority asc"},{label:"Status",value:"status asc"}]);ue(()=>s.searchQuery,x=>{v.value=x}),ue(()=>s.filters,x=>{l.value=ne({},x)},{deep:!0});const C=x=>{(x.ctrlKey||x.metaKey)&&x.key==="k"&&(x.preventDefault(),_())},_=()=>{p.value&&(p.value.focus(),p.value.select())},w=x=>{v.value=x,a("update:searchQuery",x)},c=x=>{a("suggestion-selected",x)};R(()=>{let x=0;return l.value.status&&x++,l.value.priority&&x++,l.value.assignee&&x++,l.value.tags&&x++,l.value.sortBy!=="creation desc"&&x++,x}),R(()=>{const x=[];if(l.value.status){const e=s.statusOptions.find(i=>i.value===l.value.status);x.push({key:"status",label:"Status",value:(e==null?void 0:e.label)||l.value.status,colorClass:"bg-green-100 text-green-800 border-green-200"})}if(l.value.priority){const e=s.priorityOptions.find(i=>i.value===l.value.priority);x.push({key:"priority",label:"Priority",value:(e==null?void 0:e.label)||l.value.priority,colorClass:"bg-orange-100 text-orange-800 border-orange-200"})}if(l.value.assignee){const e=s.assigneeOptions.find(i=>i.value===l.value.assignee);x.push({key:"assignee",label:"Assignee",value:(e==null?void 0:e.label)||l.value.assignee,colorClass:"bg-blue-100 text-blue-800 border-blue-200"})}if(l.value.tags){const e=s.tagsOptions.find(i=>i.value===l.value.tags);x.push({key:"tags",label:"Tags",value:(e==null?void 0:e.label)||l.value.tags,colorClass:"bg-purple-100 text-purple-800 border-purple-200"})}if(l.value.sortBy!=="creation desc"){const e=I.value.find(i=>i.value===l.value.sortBy);x.push({key:"sortBy",label:"Sort",value:(e==null?void 0:e.label)||l.value.sortBy,colorClass:"bg-indigo-100 text-indigo-800 border-indigo-200"})}return x});const S=x=>{const e=T.value.find(L=>L.value===x);if(!e)return;const i={id:++h,field:x,operator:M(x),value:"",type:e.type};d.value.push(i),y.value=!1,B()},b=x=>{d.value.splice(x,1),B()},P=()=>{d.value=[],B()},N=x=>{B()},B=()=>{const x={};d.value.forEach(e=>{if(e.value){const i=e.field==="issue_type"?"tags":e.field==="raised_by"?"assignee":e.field;e.operator==="equals"||e.operator==="contains"?x[i]=e.value:e.operator==="not_equals"&&(x[i]=`!${e.value}`)}}),l.value=ne(ne({},l.value),x),a("update:filters",ne({},l.value))},F=x=>{const e=T.value.find(i=>i.value===x);return(e==null?void 0:e.label)||x},M=x=>{const e=T.value.find(i=>i.value===x);return(e==null?void 0:e.type)==="select"?"equals":(e==null?void 0:e.type)==="text"?"like":(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"||(e==null?void 0:e.type)==="time"||(e==null?void 0:e.type)==="duration"||(e==null?void 0:e.type)==="boolean"||(e==null?void 0:e.type)==="link"?"equals":(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?"like":"equals"},V=x=>{const e=T.value.find(i=>i.value===x);return(e==null?void 0:e.type)==="select"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"In",value:"in"},{label:"Not In",value:"not_in"}]:(e==null?void 0:e.type)==="text"?[{label:"Like",value:"like"},{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Starts with",value:"starts_with"},{label:"Ends with",value:"ends_with"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"},{label:"Greater than or equal",value:"greater_than_equal"},{label:"Less than or equal",value:"less_than_equal"},{label:"Between",value:"between"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="time"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"}]:(e==null?void 0:e.type)==="duration"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="boolean"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"}]:(e==null?void 0:e.type)==="link"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Like",value:"like"},{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?[{label:"Like",value:"like"},{label:"Not Like",value:"not_like"},{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:[{label:"Equals",value:"equals"}]},G=x=>{const e=T.value.find(i=>i.value===x);return(e==null?void 0:e.type)==="select"||(e==null?void 0:e.type)==="tags"},te=x=>{switch(x){case"status":return s.statusOptions;case"priority":return s.priorityOptions;case"raised_by":return s.assigneeOptions;case"issue_type":return s.tagsOptions;case"_user_tags":return m.value;default:return[]}},X=x=>{var i,L,E;const e=T.value.find(Y=>Y.value===x);switch(x){case"subject":return"Enter issue title...";case"description":return"Enter description text...";case"raised_by":return"Enter email address...";case"customer_name":return"Enter customer name...";case"naming_series":return"Enter series (e.g., ISS-2025-)...";case"creation":case"modified":case"opening_date":case"sla_resolution_date":case"first_responded_on":return"YYYY-MM-DD or YYYY-MM-DD HH:MM:SS";case"response_by":case"sla_resolution_by":return"YYYY-MM-DD HH:MM:SS";case"opening_time":return"HH:MM:SS";case"first_response_time":case"avg_response_time":case"resolution_time":case"user_resolution_time":case"total_hold_time":return"Enter duration (e.g., 2:30:00 for 2h 30m)";case"customer":return"Enter customer name or ID...";case"contact":return"Enter contact name or ID...";case"lead":return"Enter lead name or ID...";case"project":return"Enter project name or ID...";case"company":return"Enter company name or ID...";case"service_level_agreement":return"Enter SLA name or ID...";case"custom_assigned_csm_team":return"Enter team name or ID...";case"email_account":return"Enter email account name...";case"issue_split_from":return"Enter parent issue ID...";case"via_customer_portal":return"Enter 1 for Yes, 0 for No";case"custom_users_assigned":return"Enter user names (comma separated)...";case"custom_labels":return"Enter labels (comma separated)...";case"_user_tags":return"Enter tags (comma separated)...";default:return(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"?"YYYY-MM-DD or YYYY-MM-DD HH:MM:SS":(e==null?void 0:e.type)==="time"?"HH:MM:SS":(e==null?void 0:e.type)==="duration"?"Enter duration (e.g., 2:30:00)":(e==null?void 0:e.type)==="boolean"?"Enter 1 for Yes, 0 for No":(e==null?void 0:e.type)==="link"?`Enter ${((i=e==null?void 0:e.label)==null?void 0:i.toLowerCase())||"value"} name or ID...`:(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?`Enter ${((L=e==null?void 0:e.label)==null?void 0:L.toLowerCase())||"values"} (comma separated)...`:`Enter ${((E=e==null?void 0:e.label)==null?void 0:E.toLowerCase())||"value"}...`}},q=x=>{const e=Ue(x);if(e){const i=e.replace("#",""),L=parseInt(i.substr(0,2),16),E=parseInt(i.substr(2,2),16),Y=parseInt(i.substr(4,2),16),g=`rgba(${L}, ${E}, ${Y}, 0.1)`,k=`rgb(${Math.max(L-50,0)}, ${Math.max(E-50,0)}, ${Math.max(Y-50,0)})`;return{backgroundColor:g,color:k,borderColor:k}}return{backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"}},re=()=>{B(),y.value=!1};return Te(()=>{document.addEventListener("keydown",C)}),Me(()=>{document.removeEventListener("keydown",C)}),(x,e)=>(n(),u("div",Us,[o("div",Ns,[o("div",zs,[U(Bs,{ref_key:"searchBoxRef",ref:p,"model-value":v.value,"onUpdate:modelValue":w,onSuggestionSelected:c,issues:r.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),v.value?(n(),u("div",Hs," Searching in "+$(r.filteredCount)+" issues ",1)):O("",!0)])]),o("div",Vs,[o("div",qs,[o("div",Ys,[o("button",{onClick:e[0]||(e[0]=i=>y.value=!y.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[e[2]||(e[2]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),e[3]||(e[3]=o("span",null,"Filters",-1)),d.value.length>0?(n(),u("span",Ks,$(d.value.length),1)):O("",!0)]),d.value.length>0?(n(),u("div",Ws,[(n(!0),u(Q,null,ee(d.value,(i,L)=>(n(),u("div",{key:i.id,class:"flex items-center space-x-1 bg-gray-100 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",Qs,$(F(i.field)),1),o("span",Gs,$(i.operator),1),i.field==="_user_tags"&&i.value?(n(),u("span",{key:0,style:ge(q(i.value)),class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border"},$(i.value),5)):(n(),u("span",Js,$(i.value),1)),o("button",{onClick:E=>b(L),class:"text-gray-400 hover:text-red-600 ml-1"},e[4]||(e[4]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Xs)]))),128))])):O("",!0)]),d.value.length>0?(n(),u("div",Zs,[o("button",{onClick:P,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors"}," Clear Filters "),o("button",{onClick:re,class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 transition-colors"}," Apply Filters ")])):O("",!0)])]),y.value?(n(),u("div",er,[o("div",tr,[o("div",sr,[o("div",rr,[e[5]||(e[5]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",or,[(n(!0),u(Q,null,ee(T.value,i=>(n(),u("button",{key:i.value,onClick:L=>S(i.value),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},$(i.label),9,ar))),128))])]),o("div",lr,[o("div",nr,[d.value.length===0?(n(),u("div",ir,e[6]||(e[6]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(n(),u("div",ur,[(n(!0),u(Q,null,ee(d.value,(i,L)=>(n(),u("div",{key:i.id,class:"flex items-center space-x-3 p-3 bg-gray-50 rounded border"},[o("div",cr,$(F(i.field)),1),o("div",dr,[Ce(o("select",{"onUpdate:modelValue":E=>i.operator=E,onChange:E=>N(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[(n(!0),u(Q,null,ee(V(i.field),E=>(n(),u("option",{key:E.value,value:E.value},$(E.label),9,pr))),128))],40,gr),[[Oe,i.operator]])]),o("div",mr,[i.field==="_user_tags"?(n(),u("div",vr,[Ce(o("select",{"onUpdate:modelValue":E=>i.value=E,onChange:E=>N(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[e[7]||(e[7]=o("option",{value:""},"Select tag...",-1)),(n(!0),u(Q,null,ee(m.value,E=>(n(),u("option",{key:E.value,value:E.value},$(E.label),9,yr))),128))],40,fr),[[Oe,i.value]]),i.value?(n(),u("div",br,[o("span",{style:ge(q(i.value)),class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border"},$(i.value),5)])):O("",!0)])):G(i.field)?Ce((n(),u("select",{key:1,"onUpdate:modelValue":E=>i.value=E,onChange:E=>N(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[e[8]||(e[8]=o("option",{value:""},"Select...",-1)),(n(!0),u(Q,null,ee(te(i.field),E=>(n(),u("option",{key:E.value,value:E.value},$(E.label),9,_r))),128))],40,hr)),[[Oe,i.value]]):Ce((n(),u("input",{key:2,"onUpdate:modelValue":E=>i.value=E,onInput:E=>N(),type:"text",placeholder:X(i.field),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,xr)),[[tt,i.value]])]),o("button",{onClick:E=>b(L),class:"p-1 text-gray-400 hover:text-red-600 transition-colors"},e[9]||(e[9]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,wr)]))),128))])),d.value.length>0?(n(),u("div",kr,[o("button",{onClick:P,class:"text-sm text-gray-600 hover:text-gray-900 transition-colors"}," Clear Filters "),o("button",{onClick:re,class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors"}," Apply Filters ")])):O("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:e[1]||(e[1]=i=>y.value=!1)})])):O("",!0)]))}},Sr=Ie(Cr,[["__scopeId","data-v-0a7d2720"]]),$r={class:"bg-white rounded-lg shadow-sm border mt-4"},Pr={class:"px-6 py-4 flex items-center justify-between"},Ir={class:"text-sm text-gray-700"},Tr={key:0},Rr={key:1},Fr={key:0,class:"flex items-center space-x-2"},Er={class:"flex items-center space-x-1"},Lr={key:1,class:"px-2 text-gray-500"},Mr={key:2,class:"px-2 text-gray-500"},Dr={key:1,class:"flex items-center space-x-2"},Or={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(r,{emit:t}){const s=r,a=t,v=j(s.itemsPerPage);ue(()=>s.itemsPerPage,b=>{v.value=b});const l=R(()=>Math.ceil(s.totalItems/s.itemsPerPage)),p=R(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),y=R(()=>{const b=s.currentPage*s.itemsPerPage;return Math.min(b,s.totalItems)}),d=R(()=>{const b=[],P=s.maxVisiblePages,N=s.currentPage,B=l.value;if(B<=P)for(let F=1;F<=B;F++)b.push(F);else{let F=Math.max(1,N-Math.floor(P/2)),M=Math.min(B,F+P-1);M-F+1<P&&(F=Math.max(1,M-P+1)),F>1&&(F=Math.max(2,F)),M<B&&(M=Math.min(B-1,M));for(let V=F;V<=M;V++)b.push(V)}return b}),h=R(()=>l.value>s.maxVisiblePages&&!d.value.includes(1)),m=R(()=>l.value>s.maxVisiblePages&&!d.value.includes(l.value)),T=R(()=>h.value&&d.value.length>0&&d.value[0]>2),I=R(()=>m.value&&d.value.length>0&&d.value[d.value.length-1]<l.value-1),C=R(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),_=b=>{b>=1&&b<=l.value&&b!==s.currentPage&&(a("update:currentPage",b),a("pageChange",{page:b,itemsPerPage:s.itemsPerPage,offset:(b-1)*s.itemsPerPage}))},w=()=>{s.currentPage>1&&_(s.currentPage-1)},c=()=>{s.currentPage<l.value&&_(s.currentPage+1)},S=()=>{const b=v.value;a("update:itemsPerPage",b);const P=(s.currentPage-1)*s.itemsPerPage+1,N=Math.ceil(P/b);a("pageChange",{page:N,itemsPerPage:b,offset:(N-1)*b})};return(b,P)=>(n(),u("div",$r,[o("div",Pr,[o("div",Ir,[r.totalItems>0?(n(),u("span",Tr," Showing "+$(p.value)+" to "+$(y.value)+" of "+$(r.totalItems)+" results ",1)):(n(),u("span",Rr," No results found "))]),l.value>1?(n(),u("div",Fr,[U(f(ce),{theme:"gray",variant:"outline",size:"sm",disabled:r.currentPage===1,onClick:w},{prefix:K(()=>[U(f(_e),{name:"chevron-left",class:"h-4 w-4"})]),default:K(()=>[P[3]||(P[3]=se(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",Er,[h.value?(n(),W(f(ce),{key:0,theme:"gray",variant:"outline",size:"sm",class:H({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===1}),onClick:P[0]||(P[0]=N=>_(1))},{default:K(()=>P[4]||(P[4]=[se(" 1 ")])),_:1,__:[4]},8,["class"])):O("",!0),T.value?(n(),u("span",Lr,"...")):O("",!0),(n(!0),u(Q,null,ee(d.value,N=>(n(),W(f(ce),{key:N,theme:"gray",variant:"outline",size:"sm",class:H({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===N}),onClick:B=>_(N)},{default:K(()=>[se($(N),1)]),_:2},1032,["class","onClick"]))),128)),I.value?(n(),u("span",Mr,"...")):O("",!0),m.value?(n(),W(f(ce),{key:3,theme:"gray",variant:"outline",size:"sm",class:H({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===l.value}),onClick:P[1]||(P[1]=N=>_(l.value))},{default:K(()=>[se($(l.value),1)]),_:1},8,["class"])):O("",!0)]),U(f(ce),{theme:"gray",variant:"outline",size:"sm",disabled:r.currentPage===l.value,onClick:c},{suffix:K(()=>[U(f(_e),{name:"chevron-right",class:"h-4 w-4"})]),default:K(()=>[P[5]||(P[5]=se(" Next "))]),_:1,__:[5]},8,["disabled"])])):O("",!0),r.showItemsPerPage?(n(),u("div",Dr,[P[6]||(P[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),U(f(St),{modelValue:v.value,"onUpdate:modelValue":P[2]||(P[2]=N=>v.value=N),options:C.value,onChange:S,class:"w-20"},null,8,["modelValue","options"])])):O("",!0)])]))}},jr={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Ar={class:"text-3xl font-bold text-gray-900"},Br={class:"text-3xl font-bold text-blue-600"},Ur={class:"text-3xl font-bold text-green-600"},Nr={class:"text-3xl font-bold text-orange-600"},zr={class:"text-3xl font-bold text-purple-600"},Hr=3e4,Vr={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(r,{expose:t,emit:s}){const a=r,v=s,l=ke({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),p=R(()=>l.value.team_tickets),y=R(()=>l.value.open_tickets),d=R(()=>l.value.assigned_to_me),h=R(()=>l.value.actionable_tickets),m=R(()=>l.value.response_tickets);let T=null,I=0;const C=()=>me(this,null,function*(){const S=Date.now();if(T&&S-I<Hr)return T;try{const b=yield rs("force_trans_customization.api.issues.get_issue_stats");return l.value=b,T=b,I=S,b}catch(b){return console.error("Error fetching issue stats:",b),l.value}});let _=null;const w=()=>{_&&clearTimeout(_),_=setTimeout(()=>{C()},500)};Te(()=>{C()}),ue(()=>a.issues.length,()=>{w()});const c=S=>{v("filter-changed",S)};return t({refreshStats:C}),(S,b)=>(n(),u("div",jr,[o("div",{onClick:b[0]||(b[0]=P=>c("team_tickets")),class:H(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Ar,$(p.value),1),b[5]||(b[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:b[1]||(b[1]=P=>c("open_tickets")),class:H(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",Br,$(y.value),1),b[6]||(b[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:b[2]||(b[2]=P=>c("assigned_to_me")),class:H(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",Ur,$(d.value),1),b[7]||(b[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:b[3]||(b[3]=P=>c("actionable_tickets")),class:H(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"])},[o("div",Nr,$(h.value),1),b[8]||(b[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Actionable",-1))],2),o("div",{onClick:b[4]||(b[4]=P=>c("response_tickets")),class:H(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"])},[o("div",zr,$(m.value),1),b[9]||(b[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Response",-1))],2)]))}},qr={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const r=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[r]||"gray"}},components:{Badge:ze}},Yr={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const r=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[r]||"yellow"},priorityIndicatorClass(){const r=this.priority||"Medium";return{"bg-red-500":r==="Critical","bg-red-400":r==="High","bg-yellow-400":r==="Medium","bg-green-400":r==="Low"}}},components:{Badge:ze}},Kr={components:{ListView:ss,Avatar:Rt,Badge:ze,Button:ce,FeatherIcon:_e,ListHeader:ot,ListHeaderItem:rt,ListRow:Ve,ListRowItem:at,ListRows:lt,ListSelectBanner:nt,StatusBadge:qr,PriorityBadge:Yr},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(r,{emit:t}){const s=j(!1),a=j(null),v=j({x:0,y:0}),l=j(!1),p=j({x:0,y:0}),y=j(null),d=g=>{if(!g||typeof g!="string")return"?";if(g.includes("@")){const k=g.split("@")[0];return k.includes(".")||k.includes("_")?k.split(/[._]/).map(oe=>oe[0]).join("").toUpperCase().slice(0,2):k.slice(0,2).toUpperCase()}return g.includes(" ")?g.split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2):g.slice(0,2).toUpperCase()},h=g=>{if(!g)return"";const k=g.match(/ISS-(\d{4}-\d+)/);return k?k[1]:g},m=g=>{if(!g)return"";const k=document.createElement("div");return k.innerHTML=g,k.textContent||k.innerText||""},T=g=>g?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",I=g=>g?new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",C=g=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[g]||"gray",_=g=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[g]||"yellow",w=new Map,c=R(()=>r.issues.map(g=>{const k=g.name;if(w.has(k)){const oe=w.get(k);if(oe.originalStatus===g.status&&oe.originalPriority===g.priority)return oe.transformed}const z=Ke(ne({},g),{status:{label:g.status||"New",color:C(g.status)},priority:{label:g.priority||"Medium",color:_(g.priority)}});return w.set(k,{transformed:z,originalStatus:g.status,originalPriority:g.priority}),z})),S=ke([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),b=ke({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:g=>{console.log("Row clicked:",g)}}),P=g=>{console.log("Selected rows:",g)},N=g=>{console.log("Issue clicked:",g);const z=`${window.location.origin}/app/issue/${g.name}`;window.open(z,"_blank")},B=g=>{const k=g||"New";return{"bg-blue-500":k==="New","bg-orange-500":k==="In Review","bg-yellow-500":k==="Waiting on Customer","bg-purple-500":k==="Confirmed","bg-blue-500":k==="In Transit","bg-gray-500":k==="In Transit Unmanaged","bg-green-500":k==="Delivered","bg-green-500":k==="Closed","bg-red-500":k==="Open","bg-orange-500":k==="Replied","bg-yellow-500":k==="On Hold","bg-green-500":k==="Resolved"}},F=g=>{const k=g||"Medium";return{"bg-red-500":k==="Critical"||k==="High","bg-yellow-500":k==="Medium","bg-green-500":k==="Low"}},M=g=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[g||"New"]||"bg-gray-100 text-gray-800",V=g=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[g||"Medium"]||"bg-yellow-100 text-yellow-800",G=g=>{const k=g||"Medium";return{"bg-red-500":k==="Critical","bg-red-400":k==="High","bg-yellow-400":k==="Medium","bg-green-400":k==="Low"}},te=(g,k)=>{const z=g.target.getBoundingClientRect();v.value={x:z.left+z.width/2,y:z.top-10},a.value=k,s.value=!0},X=()=>{s.value=!1,a.value=null},q=(g,k)=>{if(!k||k.length===0)return;const z=g.target.getBoundingClientRect();p.value={x:z.left+z.width/2,y:z.top-10},y.value=k,l.value=!0},re=()=>{l.value=!1,y.value=null},x=g=>{let k="asc";r.sortField===g&&(k=r.sortDirection==="asc"?"desc":"asc"),t("sort",{field:g,direction:k})},e=g=>r.sortField!==g?"arrow-up-down":r.sortDirection==="asc"?"arrow-up":"arrow-down",i=g=>r.sortField!==g?"text-gray-400":"text-blue-600",L=g=>r.sortField===g?"bg-blue-50":"",E=new Map;return{columns:S,listOptions:b,transformedIssues:c,handleSelections:P,handleIssueClick:N,getStatusColor:B,getPriorityColor:F,getStatusBadgeClass:M,getPriorityBadgeClass:V,getPriorityIndicatorClass:G,getInitials:d,formatIssueId:h,stripHtml:m,formatDate:T,formatTime:I,showPopup:s,popupUser:a,popupPosition:v,showUserPopup:te,hideUserPopup:X,handleColumnSort:x,getSortIcon:e,getSortIconClass:i,getSortButtonClass:L,getTagStyle:g=>{if(E.has(g))return E.get(g);const k=Ue(g);let z;if(k){const oe=k.replace("#",""),De=parseInt(oe.substr(0,2),16),A=parseInt(oe.substr(2,2),16),D=parseInt(oe.substr(4,2),16),Z=`rgba(${De}, ${A}, ${D}, 0.1)`,ae=`rgb(${Math.max(De-50,0)}, ${Math.max(A-50,0)}, ${Math.max(D-50,0)})`;z={backgroundColor:Z,color:ae,borderColor:ae}}else z={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return E.set(g,z),z},showTagsPopup:l,tagsPopupPosition:p,tagsPopupData:y,showTagsPopupFn:q,hideTagsPopupFn:re}}},Wr={class:"bg-white rounded-lg shadow-sm border"},Qr={key:0,class:"px-6 py-12 text-center text-gray-500"},Gr=["onClick"],Jr=["onClick"],Xr={key:1,class:"max-w-xs"},Zr=["title"],eo=["title"],to=["title"],so={key:3,class:"flex flex-wrap gap-1"},ro=["onMouseenter"],oo={key:1,class:"text-gray-400 text-sm"},ao=["onMouseenter"],lo=["title"],no={class:"truncate"},io={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},uo={key:1,class:"text-gray-400 text-sm"},co={key:5,class:"flex flex-col"},go={class:"text-xs text-gray-400"},po={key:7},mo={class:"flex gap-2"},vo={class:"text-sm"},fo={class:"font-semibold text-gray-900 mb-1"},yo={class:"text-gray-600 flex items-center gap-1"},bo={class:"text-xs text-gray-500 mt-1"},ho={class:"text-sm"},_o={class:"flex flex-wrap gap-1"};function xo(r,t,s,a,v,l){const p=ie("FeatherIcon"),y=ie("ListHeaderItem"),d=ie("ListHeader"),h=ie("Avatar"),m=ie("ListRowItem"),T=ie("ListRow"),I=ie("ListRows"),C=ie("Button"),_=ie("ListSelectBanner"),w=ie("ListView");return n(),u("div",Wr,[t[5]||(t[5]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(n(),u("div",Qr,t[2]||(t[2]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(n(),W(w,{key:1,columns:a.columns,rows:a.transformedIssues,"row-key":"name",options:a.listOptions,"onUpdate:selections":a.handleSelections},{default:K(()=>[U(d,null,{default:K(()=>[(n(!0),u(Q,null,ee(a.columns,c=>(n(),W(y,{key:c.key,item:c},$t({_:2},[c.icon?{name:"prefix",fn:K(({item:S})=>[U(p,{name:S.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,c.sortable?{name:"suffix",fn:K(()=>[o("button",{onClick:S=>a.handleColumnSort(c.key),class:H(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",a.getSortButtonClass(c.key)])},[U(p,{name:a.getSortIcon(c.key),class:H(["h-3 w-3",a.getSortIconClass(c.key)])},null,8,["name","class"])],10,Gr)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),U(I,null,{default:K(()=>[(n(!0),u(Q,null,ee(a.transformedIssues,c=>(n(),W(T,{key:c.name,row:c},{default:K(({column:S,item:b})=>[U(m,{item:b,align:S.align},{prefix:K(()=>[S.key==="raised_by"?(n(),W(h,{key:0,size:"sm",label:a.getInitials(c.raised_by),class:"mr-3"},null,8,["label"])):O("",!0)]),default:K(()=>{var P,N;return[S.key==="name"?(n(),u("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:Se(B=>a.handleIssueClick(c),["prevent"])},$(a.formatIssueId(b)),9,Jr)):S.key==="subject"?(n(),u("div",Xr,[o("div",{class:"font-medium truncate",title:c.subject},$(c.subject),9,Zr),c.description?(n(),u("div",{key:0,class:"text-gray-500 text-xs mt-1 truncate",title:c.description},$(a.stripHtml(c.description)),9,eo)):O("",!0)])):S.key==="raised_by"?(n(),u("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:b||"-"},$(b||"-"),9,to)):S.key==="custom_users_assigned"?(n(),u("div",so,[c.custom_users_assigned&&c.custom_users_assigned.length>0?(n(!0),u(Q,{key:0},ee(c.custom_users_assigned.filter(B=>B.user_assigned),B=>(n(),u("div",{key:B.name||B,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:F=>a.showUserPopup(F,B),onMouseleave:t[0]||(t[0]=(...F)=>a.hideUserPopup&&a.hideUserPopup(...F))},$(a.getInitials(B.user_assigned)),41,ro)]))),128)):(n(),u("span",oo,"-"))])):S.key==="_user_tags"?(n(),u("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:B=>a.showTagsPopupFn(B,c._user_tags),onMouseleave:t[1]||(t[1]=(...B)=>a.hideTagsPopupFn&&a.hideTagsPopupFn(...B))},[c._user_tags&&c._user_tags.length>0?(n(),u(Q,{key:0},[o("span",{style:ge(a.getTagStyle(c._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:c._user_tags[0]},[o("span",no,$(c._user_tags[0]),1)],12,lo),c._user_tags.length>1?(n(),u("span",io," +"+$(c._user_tags.length-1),1)):O("",!0)],64)):(n(),u("span",uo,"-"))],40,ao)):S.key==="creation"?(n(),u("div",co,[o("span",null,$(a.formatDate(b)),1),o("span",go,$(a.formatTime(b)),1)])):S.key==="status"?(n(),u("span",{key:6,class:H([a.getStatusBadgeClass(((P=c.status)==null?void 0:P.label)||c.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},$(((N=c.status)==null?void 0:N.label)||c.status||"New"),3)):(n(),u("span",po,$(b),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),U(_,null,{actions:K(({unselectAll:c})=>[o("div",mo,[U(C,{variant:"ghost",label:"Delete"}),U(C,{variant:"ghost",label:"Unselect all",onClick:c},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),a.showPopup&&a.popupUser?(n(),u("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ge({left:a.popupPosition.x+"px",top:a.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",vo,[o("div",fo,$(a.popupUser.user_assigned||"Unknown User"),1),o("div",yo,[t[3]||(t[3]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),se(" "+$(a.popupUser.team||"No Team"),1)]),o("div",bo," Assigned: "+$(a.formatDate(a.popupUser.assigned_date)),1)])],4)):O("",!0),a.showTagsPopup&&a.tagsPopupData?(n(),u("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:ge({left:a.tagsPopupPosition.x+"px",top:a.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",ho,[t[4]||(t[4]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",_o,[(n(!0),u(Q,null,ee(a.tagsPopupData,c=>(n(),u("span",{key:c,style:ge(a.getTagStyle(c)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},$(c),5))),128))])])],4)):O("",!0)])}const wo=Ie(Kr,[["render",xo]]),ko={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},Co={class:"flex items-start justify-between"},So={class:"flex items-start space-x-3"},$o={class:"flex-shrink-0"},Po={class:"flex-1 min-w-0"},Io={class:"text-sm font-medium text-gray-900"},To={class:"text-sm text-gray-600 mt-1"},Ro={class:"text-xs text-gray-500 mt-1"},Fo=["onClick"],Eo={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(r){const t=l=>{const p="bg-white/95 border-l-4",y={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${p} ${y[l]||y.info}`},s=l=>{const p={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return p[l]||p.info},a=l=>{const p={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return p[l]||p.info},v=l=>{const y=new Date-l,d=Math.floor(y/6e4);if(d<1)return"Just now";if(d<60)return`${d}m ago`;const h=Math.floor(d/60);return h<24?`${h}h ago`:l.toLocaleDateString()};return(l,p)=>(n(),u("div",ko,[U(Pt,{name:"notification",tag:"div"},{default:K(()=>[(n(!0),u(Q,null,ee(r.notifications,y=>(n(),u("div",{key:y.id,class:H([t(y.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",Co,[o("div",So,[o("div",$o,[U(f(_e),{name:s(y.type),class:H([a(y.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",Po,[o("p",Io,$(y.title),1),o("p",To,$(y.message),1),o("p",Ro,$(v(y.timestamp)),1)])]),o("button",{onClick:d=>l.$emit("remove",y.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[U(f(_e),{name:"x",class:"h-4 w-4"})],8,Fo)])],2))),128))]),_:1})]))}},Lo=Ie(Eo,[["__scopeId","data-v-d57fd7d2"]]);function Mo(r,t){let s;return function(...v){const l=()=>{clearTimeout(s),r(...v)};clearTimeout(s),s=setTimeout(l,t)}}function Do(){const r=j(""),t=j({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=j(""),a=Mo(C=>{s.value=C},300);ue(r,C=>{a(C)});const v=R(()=>{const C={};return s.value.trim()&&(C.subject=["like",`%${s.value.trim()}%`]),t.value.status&&(C.status=t.value.status),t.value.priority&&(C.priority=t.value.priority),t.value.assignee&&(C.raised_by=t.value.assignee),t.value.tags&&(C.issue_type=t.value.tags),C}),l=R(()=>t.value.sortBy||"creation desc"),p=new Map,y=C=>{if(!C||!Array.isArray(C))return[];const _=JSON.stringify({issuesLength:C.length,searchQuery:r.value.trim(),status:t.value.status,priority:t.value.priority,assignee:t.value.assignee,tags:t.value.tags,sortBy:t.value.sortBy});if(p.has(_))return p.get(_);let w=[...C];if(r.value.trim()){const S=r.value.toLowerCase().trim();w=w.filter(b=>{const P=(b.subject||"").toLowerCase(),N=(b.description||"").toLowerCase();return P.includes(S)||N.includes(S)})}t.value.status&&(w=w.filter(S=>S.status===t.value.status)),t.value.priority&&(w=w.filter(S=>S.priority===t.value.priority)),t.value.assignee&&(w=w.filter(S=>S.raised_by===t.value.assignee)),t.value.tags&&(w=w.filter(S=>S.issue_type===t.value.tags));const c=ye({Critical:4,High:3,Medium:2,Low:1});if(w.sort((S,b)=>{const[P,N]=t.value.sortBy.split(" "),B=S[P]||"",F=b[P]||"";let M=0;return P==="creation"||P==="modified"?M=new Date(B)-new Date(F):P==="priority"?M=(c[B]||0)-(c[F]||0):M=B.toString().localeCompare(F.toString()),N==="desc"?-M:M}),p.size>50){const S=p.keys().next().value;p.delete(S)}return p.set(_,w),w};let d=null,h=null;const m=C=>{if(!C||!Array.isArray(C))return ye([{label:"All Assignees",value:""}]);const _=C.map(S=>S.raised_by).filter(S=>S&&S.trim()).sort().join("|");if(d&&h===_)return d;const w=[...new Set(C.map(S=>S.raised_by).filter(S=>S&&S.trim()))],c=ye([{label:"All Assignees",value:""},...w.map(S=>({label:S,value:S}))]);return d=c,h=_,c},T=()=>{r.value="",s.value="",t.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},I=R(()=>r.value.trim()!==""||t.value.status!==""||t.value.priority!==""||t.value.assignee!==""||t.value.tags!==""||t.value.sortBy!=="creation desc");return{searchQuery:r,filters:t,debouncedSearchQuery:s,apiFilters:v,sortOrder:l,hasActiveFilters:I,filterIssues:y,getAssigneeOptions:m,resetFilters:T}}function Oo(r,t){const s=It(),a=j([]),v=j(!1),l=j(!1);let p=null;const y=l.value?15e3:2e3,d=()=>{p&&clearTimeout(p),p=setTimeout(()=>{T()},y)},h=()=>{if(!s||v.value)return;s.emit("doctype_subscribe","Issue"),s.off("list_update"),s.on("list_update",M=>{if((M==null?void 0:M.doctype)==="Issue"&&!w()){if(M.action==="insert"||M.action==="create"){console.log("📝 Skipping new issue creation update:",M.name);return}a.value.push(M),d()}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(M=>{s.on(M,V=>{if((V==null?void 0:V.doctype)!=="Issue"||w())return;const G={doctype:"Issue",name:V.name,action:M.includes("create")?"insert":M.includes("delete")?"delete":"update",modified_by:V.modified_by||V.owner,timestamp:new Date().toISOString()};if(G.action==="insert"){console.log("📝 Skipping new issue creation update:",V.name);return}a.value.push(G),d()})}),v.value=!0},m=()=>{if(!s||!v.value)return;s.emit("doctype_unsubscribe","Issue"),s.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(M=>{s.off(M)}),v.value=!1},T=()=>me(this,null,function*(){if(!a.value.length)return;const F=window.location.hash||window.location.pathname;if(!F.includes("issue-tracker")&&!F.includes("issues")){a.value=[],m();return}const M=[...new Set(a.value.map(G=>G.name))],V=M.length;a.value=[];try{yield I(M),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:V,documents:M}}))}catch(G){console.error("Error updating individual rows, falling back to full refresh:",G);try{yield xe(),yield we()}catch(te){console.error("Error in fallback refresh:",te)}}}),I=F=>me(this,null,function*(){try{if(t&&typeof t=="function"){yield t();return}const{activeResource:M,currentData:V}=C();if(!V||!Array.isArray(V)){console.log("📋 No current data available, skipping smart update");return}let G={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(r&&typeof r=="function")try{const q=r();q&&(G=ne(ne({},G),q))}catch(q){console.warn("Error getting current parameters, using defaults:",q)}const te=V.map(q=>q.name),X=F.filter(q=>te.includes(q));if(X.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${X.length} visible issues:`,X),yield _(X,M,V)}catch(M){throw console.error("Error during targeted refresh:",M),M}}),C=()=>fe.data&&Array.isArray(fe.data)&&fe.data.length>0?{activeResource:fe,currentData:fe.data,resourceType:"stat"}:ve.data&&Array.isArray(ve.data)&&ve.data.length>0?{activeResource:ve,currentData:ve.data,resourceType:"suggestion"}:{activeResource:Pe,currentData:Pe.data||[],resourceType:"main"},_=(F,M,V)=>me(this,null,function*(){try{const te=(yield Promise.all(F.map(q=>me(this,null,function*(){try{return yield os(q),ut.data}catch(re){return console.warn(`Failed to fetch updated issue ${q}:`,re),null}})))).filter(q=>q!==null);if(te.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}const X=[...V];te.forEach(q=>{const re=X.findIndex(x=>x.name===q.name);re!==-1&&(X[re]=q,console.log(`✅ Updated issue ${q.name} in grid`))}),M.data=X,console.log(`🎯 Successfully updated ${te.length} issues in current view`)}catch(G){console.error("Error updating visible issues in place:",G),t&&typeof t=="function"&&(yield t())}}),w=()=>!!document.hidden,c=j(!1),S=()=>{document.hidden?c.value=!0:c.value&&(c.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),a.value.length>0?(console.log(`📋 Processing ${a.value.length} pending updates`),T()):b())},b=()=>{a.value=[];try{t&&typeof t=="function"?t():(xe(),we())}catch(F){console.error("Error during manual refresh:",F)}},P=()=>{h()},N=()=>{v.value=!1},B=F=>{console.error("Socket connection error:",F),v.value=!1};return Te(()=>{s&&(s.on("connect",P),s.on("disconnect",N),s.on("connect_error",B),document.addEventListener("visibilitychange",S),s.connected&&h())}),Me(()=>{s&&(s.off("connect",P),s.off("disconnect",N),s.off("connect_error",B)),document.removeEventListener("visibilitychange",S),m(),p&&clearTimeout(p)}),{pendingDocumentRefreshes:a,realtimeEventsSetup:v,setupRealtimeUpdates:h,disableRealtimeUpdates:m,manualRefresh:b,processDocumentRefreshes:T}}const jo={class:"min-h-screen bg-gray-50"},Ao={class:"bg-white shadow-sm border-b"},Bo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Uo={class:"flex justify-between items-center py-4"},No={class:"flex items-center space-x-4"},zo={class:"flex space-x-4"},Ho={class:"flex items-center space-x-4"},Vo={class:"text-sm text-gray-600"},qo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Yo={class:"fixed top-20 right-4 flex flex-col space-y-2"},Ko=["title"],Wo={class:"relative"},Qo={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Xo={__name:"IssueTracker",setup(r){const{searchQuery:t,filters:s,debouncedSearchQuery:a,apiFilters:v,sortOrder:l,getAssigneeOptions:p}=Do(),y=j(!1),d=j(null),h=j(!1),m=j("team_tickets"),T=()=>{const A={limit_page_length:g.value,limit_start:(Y.value-1)*g.value,order_by:l.value};if(h.value)Le(m.value,A),Be(m.value);else if(y.value&&d.value){const D="name",Z=d.value.name;Ae(D,Z,A),et(D,Z)}else xe(ne({filters:z.value},A)),we(z.value)},{pendingDocumentRefreshes:I,realtimeEventsSetup:C,manualRefresh:_}=Oo(()=>({filters:z.value,order_by:l.value,limit_page_length:g.value,limit_start:(Y.value-1)*g.value}),T),w=()=>{T()},c=j([]),S=A=>{c.value.push(ne({id:Date.now()+Math.random()},A)),setTimeout(()=>{var D;b((D=c.value[c.value.length-1])==null?void 0:D.id)},5e3)},b=A=>{c.value=c.value.filter(D=>D.id!==A)},P=R(()=>h.value?fe.data||[]:y.value?ve.data||[]:Pe.data||[]),N=R(()=>h.value?dt.data||0:y.value?ct.data||0:it.data||0),B=R(()=>h.value?fe.loading:y.value?ve.loading:Pe.loading),F=R(()=>P.value),M=R(()=>(l.value||"creation desc").split(" ")[0]),V=R(()=>(l.value||"creation desc").split(" ")[1]||"desc"),G=({field:A,direction:D})=>{const Z=`${A} ${D}`;s.value.sortBy=Z},te=A=>{y.value=!0,d.value=A,t.value=A.subject||A.name,Y.value=1;const D="name",Z=A.name;Ae(D,Z,{limit_page_length:g.value,limit_start:0,order_by:l.value}),et(D,Z)},X=()=>{y.value=!1,d.value=null,t.value="",Y.value=1,xe({filters:z.value,order_by:l.value,limit_page_length:g.value,limit_start:0}),we(z.value)},q=A=>{y.value=!1,d.value=null,h.value=!0,m.value=A,t.value="",Y.value=1,Le(A,{limit_page_length:g.value,limit_start:0,order_by:l.value}),Be(A)},re=ke(ye(ns())),x=ke(ye(is())),e=ke(ye(cs()));let i=null,L=0;const E=R(()=>{const A=P.value.length;return i&&L===A||(i=ye(p(P.value)),L=A),i}),Y=j(1),g=j(10),k=({page:A,itemsPerPage:D,offset:Z})=>{if(Y.value=A,g.value=D,h.value)Le(m.value,{limit_page_length:D,limit_start:Z,order_by:l.value});else if(y.value&&d.value){const ae="name",gt=d.value.name;Ae(ae,gt,{limit_page_length:D,limit_start:Z,order_by:l.value})}else xe({filters:z.value,order_by:l.value,limit_page_length:D,limit_start:Z}),we(z.value)},z=R(()=>{const A={};return s.value.status&&(A.status=s.value.status),s.value.priority&&(A.priority=s.value.priority),s.value.assignee&&(A.raised_by=s.value.assignee),s.value.tags&&(A.issue_type=s.value.tags),A});let oe=null;return ue([z,l],()=>{oe&&clearTimeout(oe),oe=setTimeout(()=>{y.value&&(y.value=!1,d.value=null),h.value&&(h.value=!1,m.value="team_tickets"),Y.value=1,xe({filters:z.value,order_by:l.value,limit_page_length:g.value,limit_start:0}),we(z.value)},300)},{deep:!0}),ue(t,A=>{!A&&y.value&&X()}),Te(()=>{h.value=!0,m.value="team_tickets",Le("team_tickets",{limit_page_length:g.value,limit_start:0,order_by:l.value}),Be("team_tickets"),window.addEventListener("issueListUpdated",A=>{const{count:D,documents:Z}=A.detail;S({type:"info",title:"List Updated",message:`${D} issue${D>1?"s":""} updated: ${Z.slice(0,3).join(", ")}${Z.length>3?"...":""}`,timestamp:new Date})})}),Me(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(A,D)=>{const Z=ie("router-link");return n(),u("div",jo,[o("div",Ao,[o("div",Bo,[o("div",Uo,[o("div",No,[D[7]||(D[7]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),o("nav",zo,[U(Z,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:K(()=>D[5]||(D[5]=[se(" Home ")])),_:1,__:[5]}),U(Z,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:K(()=>D[6]||(D[6]=[se(" Issues ")])),_:1,__:[6]})])]),o("div",Ho,[o("span",Vo,$(f(Ge).user),1),U(f(ce),{onClick:D[0]||(D[0]=ae=>f(Ge).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:K(()=>D[8]||(D[8]=[se(" Logout ")])),_:1,__:[8]})])])])]),o("div",qo,[U(Vr,{issues:F.value,activeFilter:m.value,onFilterChanged:q},null,8,["issues","activeFilter"]),U(Sr,{searchQuery:f(t),"onUpdate:searchQuery":D[1]||(D[1]=ae=>Qe(t)?t.value=ae:null),filters:f(s),"onUpdate:filters":D[2]||(D[2]=ae=>Qe(s)?s.value=ae:null),statusOptions:e.value,priorityOptions:re.value,assigneeOptions:E.value,tagsOptions:x.value,issues:P.value,filteredCount:N.value,onSuggestionSelected:te},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),U(wo,{issues:F.value,loading:B.value,sortField:M.value,sortDirection:V.value,onSort:G},null,8,["issues","loading","sortField","sortDirection"]),U(Or,{currentPage:Y.value,"onUpdate:currentPage":D[3]||(D[3]=ae=>Y.value=ae),itemsPerPage:g.value,"onUpdate:itemsPerPage":D[4]||(D[4]=ae=>g.value=ae),totalItems:N.value,onPageChange:k},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",Yo,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:f(C)?"Real-time updates active":"Real-time updates disabled"},[o("div",Wo,[U(f(_e),{name:f(C)?"wifi":"wifi-off",class:H(["h-5 w-5 transition-colors duration-200",f(C)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:H(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",f(C)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),f(I).length>0?(n(),u("div",Qo,$(f(I).length>9?"9+":f(I).length),1)):O("",!0)])],8,Ko),o("button",{onClick:w,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[U(f(_e),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),U(Lo,{notifications:c.value,onRemove:b},null,8,["notifications"])])}}};export{Xo as default};
//# sourceMappingURL=IssueTracker-4Tbx1Vtj.js.map
