var pt=Object.defineProperty,gt=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var Ke=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var We=(r,s,t)=>s in r?pt(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,se=(r,s)=>{for(var t in s||(s={}))vt.call(s,t)&&We(r,t,s[t]);if(Ke)for(var t of Ke(s))ft.call(s,t)&&We(r,t,s[t]);return r},Qe=(r,s)=>gt(r,mt(s));var be=(r,s,t)=>new Promise((l,f)=>{var a=c=>{try{b(t.next(c))}catch(_){f(_)}},g=c=>{try{b(t.throw(c))}catch(_){f(_)}},b=c=>c.done?l(c.value):Promise.resolve(c.value).then(a,g);b((t=t.apply(r,s)).next())});import{g as yt,r as A,i as T,o as n,a as u,n as N,j as W,F as Y,f as J,t as P,b as o,k as j,l as ne,u as y,m as q,p as ve,q as le,v as bt,x as ce,y as fe,h as $e,z as He,A as G,B as ue,C as Pe,d as z,w as V,D as ht,E as Ie,T as _t,G as xt,H as wt,I as oe,J as kt,c as ee,K as Re,L as Ee,M as ke,N as et,O as Ge,P as Me,Q as ye,R as Ct,S as xe,U as Ve,e as re,V as St,W as $t,X as me,Y as Pt,Z as Je,s as Xe}from"./index-D5ggh8YN.js";const It=["src","alt"],Rt=yt({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(r){const s=A(!1),t=r,l=T(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),f=T(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),a=T(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),g=T(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),b=T(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),c=T(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function _(v){v.type&&(s.value=!0)}return(v,R)=>(n(),u("div",{class:N(["relative inline-block shrink-0",[f.value,l.value]])},[v.image&&!s.value?(n(),u("img",{key:0,src:v.image,alt:v.label,class:N([l.value,"h-full w-full object-cover"]),onError:R[0]||(R[0]=I=>_(I))},null,42,It)):(n(),u("div",{key:1,class:N(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[a.value,l.value]])},[v.$slots.default?(n(),u("div",{key:0,class:N(c.value)},[W(v.$slots,"default")],2)):(n(),u(Y,{key:1},[J(P(v.label&&v.label[0]),1)],64))],2)),v.$slots.indicator?(n(),u("div",{key:2,class:N(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",g.value])},[o("div",{class:N(b.value)},[W(v.$slots,"indicator")],2)],2)):j("",!0)],2))}}),Tt={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ft={class:"text-xl font-medium"},Et={class:"mt-1 text-base text-ink-gray-5"},Lt={__name:"ListEmptyState",setup(r){const s=ne("list");return(t,l)=>(n(),u("div",Tt,[W(t.$slots,"default",{},()=>[o("div",Ft,P(y(s).options.emptyState.title),1),o("div",Et,P(y(s).options.emptyState.description),1),y(s).options.emptyState.button?(n(),q(y(le),ve({key:0},y(s).options.emptyState.button,{class:"mt-4"}),null,16)):j("",!0)])]))}};function tt(r,s=!0){let t=s?"14px ":"",l=r.map(f=>{let a=f.width||1;return typeof a=="number"?a+"fr":a}).join(" ");return t+l}const qe={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Mt={class:"truncate"},st={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(r,{emit:s}){const t=r,l=s,f=A(null),a=A(null),g=T(()=>{if(typeof t.item.width=="string"){const v=parseInt(t.item.width);if(t.item.width.includes("rem"))return v*16;if(t.item.width.includes("px"))return v}return a.value.offsetWidth}),b=v=>{const R=v.clientX,I=g.value,S=w=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),f.value.style.backgroundColor="rgb(199 199 199)";let d=I+(w.clientX-R);t.item.width=`${d<50?50:d}px`,c(t.item.width)},x=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),f.value.style.backgroundColor="",window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",x)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",x)},c=bt(v=>{t.item.width=v,l("columnWidthUpdated")},t.debounce),_=ne("list");return(v,R)=>(n(),u("div",{ref_key:"columnRef",ref:a,class:N(["group relative flex items-center",r.item.align?y(qe)[r.item.align]:"justify-between"])},[o("div",{class:N(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",v.$attrs.class])},[W(v.$slots,"prefix",ce(fe({item:r.item}))),W(v.$slots,"default",{},()=>[o("div",Mt,P(r.item.label),1)]),W(v.$slots,"suffix",ce(fe({item:r.item})))],2),y(_).options.resizeColumn?W(v.$slots,"resizer",ce(ve({key:0},{item:r.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:b},[o("div",{ref_key:"resizer",ref:f,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):j("",!0)],2))}},rt={__name:"ListHeader",emits:["columnWidthUpdated"],setup(r,{emit:s}){const t=s,l=ne("list");return(f,a)=>(n(),u("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ue({gridTemplateColumns:y(tt)(y(l).columns,y(l).options.selectable)})},[y(l).options.selectable?(n(),q(He,{key:0,class:"cursor-pointer duration-300",modelValue:y(l).allRowsSelected,onClick:$e(y(l).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):j("",!0),W(f.$slots,"default",{},()=>[(n(!0),u(Y,null,G(y(l).columns,g=>(n(),q(st,{key:g.key,item:g,onColumnWidthUpdated:b=>t("columnWidthUpdated",g)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},jt={class:"truncate text-base"},ot={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(r){const s=r,t=T(()=>{var g,b;return(g=s.column)!=null&&g.getLabel?(b=s.column)==null?void 0:b.getLabel({row:s.row}):f(s.item).label||""}),l=T(()=>a.value.options.showTooltip?s.column.getTooltip?s.column.getTooltip(s.row):f(s.item).label:"");function f(g){return g&&typeof g=="object"?g:{label:g}}const a=ne("list");return(g,b)=>(n(),u("div",{class:N(["flex items-center space-x-2",y(qe)[r.align]])},[W(g.$slots,"prefix",{},()=>[r.column.prefix?(n(),q(Pe(typeof r.column.prefix=="function"?r.column.prefix({row:r.row}):r.column.prefix),{key:0})):j("",!0)]),z(y(ht),ce(fe(y(a).options.showTooltip?{text:l.value}:{text:""})),{default:V(()=>[W(g.$slots,"default",ce(fe({label:t.value})),()=>[o("div",jt,P(t.value),1)])]),_:3},16),W(g.$slots,"suffix")],2))}},Ye={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(r){const s=r,t=ne("list"),l=T(()=>{var v;return(v=t.value.rows)!=null&&v.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===s.row[t.value.rowKey]:!1}),f=T(()=>t.value.selections.has(s.row[t.value.rowKey])),a=T(()=>t.value.options.enableActive&&t.value.activeRow.value===s.row.name),g=T(()=>t.value.options.getRowRoute||t.value.options.onRowClick),b=T(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),c=T(()=>{var I,S,x;if(!f.value)return"rounded";const v=[...t.value.selections];let R=(I=t.value.rows[0])!=null&&I.group?t.value.rows.map(w=>w.rows):[t.value.rows];for(let w of R){let d=w.findIndex(h=>h==s.row);if(d===-1)continue;let $=!v.includes((S=w[d+1])==null?void 0:S.name),m=!v.includes((x=w[d-1])==null?void 0:x.name);return($?"rounded-b ":"")+(m?"rounded-t":"")}}),_=(v,R)=>{t.value.options.onRowClick&&t.value.options.onRowClick(v,R),t.value.activeRow.value===v.name?t.value.activeRow.value=null:t.value.activeRow.value=v.name};return(v,R)=>(n(),q(Pe(y(t).options.getRowRoute?"router-link":"div"),ve({class:[[c.value,f.value||a.value?"bg-surface-gray-2":"",g.value?"cursor-pointer":"",g.value?f.value||a.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:y(t).options.getRowRoute?y(t).options.getRowRoute(r.row):void 0,onClick:I=>_(r.row,I)}),{default:V(()=>[(n(),q(Pe(y(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:V(()=>{var I,S;return[o("div",{class:"grid items-center space-x-4 px-2",style:ue({height:b.value,gridTemplateColumns:y(tt)(y(t).columns,y(t).options.selectable)})},[y(t).options.selectable?(n(),u("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:R[1]||(R[1]=$e(()=>{},["stop","prevent"])),onDblclick:R[2]||(R[2]=$e(()=>{},["stop"]))},[z(He,{modelValue:f.value,class:"cursor-pointer duration-300",onClick:R[0]||(R[0]=$e(x=>y(t).toggleRow(r.row[y(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):j("",!0),(n(!0),u(Y,null,G(y(t).columns,(x,w)=>(n(),u("div",{key:x.key,class:N([y(qe)[x.align],w==0?"text-ink-gray-9":"text-ink-gray-7"])},[W(v.$slots,"default",ve({ref_for:!0},{idx:w,column:x,item:r.row[x.key],isActive:a.value}),()=>[y(t).slots.cell?(n(),q(Pe(y(t).slots.cell),ve({key:0,ref_for:!0},{column:x,row:r.row,item:r.row[x.key],align:x.align}),null,16)):(n(),q(ot,{key:1,column:x,row:r.row,item:r.row[x.key],align:x.align},null,8,["column","row","item","align"]))])],2))),128))],4),l.value?j("",!0):(n(),u("div",{key:0,class:N(["h-px border-t",c.value==="rounded"||(S=(I=c.value)==null?void 0:I.includes)!=null&&S.call(I,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},Dt={class:"h-full overflow-y-auto"},at={__name:"ListRows",setup(r){const s=ne("list");return(t,l)=>(n(),u("div",Dt,[W(t.$slots,"default",{},()=>[(n(!0),u(Y,null,G(y(s).rows,f=>(n(),q(Ye,{key:f[y(s).rowKey],row:f},null,8,["row"]))),128))])]))}},Ot={},At={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Bt(r,s){return n(),u("svg",At,s[0]||(s[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const zt=Ie(Ot,[["render",Bt]]),Ut={class:"flex items-center"},Nt={class:"w-full py-1.5 pr-2"},Ht={key:1,class:"text-base font-medium leading-6"},Vt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(r){const s=r,t=ne("list");function l(){s.group.collapsed==null&&(s.group.collapsed=!1),s.group.collapsed=!s.group.collapsed}return(f,a)=>(n(),u(Y,null,[o("div",Ut,[o("button",{onClick:l,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[z(zt,{class:N(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[r.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),W(f.$slots,"default",{},()=>[o("div",Nt,[y(t).slots["group-header"]?(n(),q(Pe(y(t).slots["group-header"]),ce(ve({key:0},{group:r.group})),null,16)):(n(),u("span",Ht,P(r.group.group),1))])])]),a[0]||(a[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},qt={key:0,class:"mb-5 mt-2"},Yt={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(r){const s=ne("list");return(t,l)=>r.group.collapsed?j("",!0):(n(),u("div",qt,[W(t.$slots,"default",{},()=>[(n(!0),u(Y,null,G(r.group.rows,f=>(n(),q(Ye,{key:f[y(s).rowKey],row:f},null,8,["row"]))),128))])]))}},Kt={class:"h-full overflow-y-auto"},Wt={__name:"ListGroups",setup(r){const s=ne("list");return(t,l)=>(n(),u("div",Kt,[(n(!0),u(Y,null,G(y(s).rows,f=>(n(),u("div",{key:f.group},[W(t.$slots,"default",{},()=>[z(Vt,{group:f},{default:V(()=>[t.$slots["group-header"]?W(t.$slots,"group-header",ve({key:0,ref_for:!0},{group:f})):j("",!0)]),_:2},1032,["group"]),z(Yt,{group:f},null,8,["group"])])]))),128))]))}},Qt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Gt={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},Jt={class:"flex items-center space-x-3"},Xt={class:"mr-3"},Zt={class:"flex items-center space-x-1"},lt=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(r){const s=ne("list");let t=T(()=>s.value.options.selectionText(s.value.selections.size));return(l,f)=>(n(),q(_t,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:V(()=>[y(s).selections.size?(n(),u("div",Qt,[o("div",{class:N(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",l.$attrs.class])},[W(l.$slots,"default",ce(fe({selections:y(s).selections,allRowsSelected:y(s).allRowsSelected,selectAll:()=>y(s).toggleAllRows(!0),unselectAll:()=>y(s).toggleAllRows(!1)})),()=>[o("div",Gt,[o("div",Jt,[z(He,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,P(y(t)),1)]),o("div",Xt,[W(l.$slots,"actions",ce(fe({selections:y(s).selections,allRowsSelected:y(s).allRowsSelected,selectAll:()=>y(s).toggleAllRows(!0),unselectAll:()=>y(s).toggleAllRows(!1)})))])]),o("div",Zt,[z(y(le),{class:N(["w- text-ink-gray-7",y(s).allRowsSelected?"cursor-not-allowed":""]),disabled:y(s).allRowsSelected,variant:"ghost",onClick:f[0]||(f[0]=a=>y(s).toggleAllRows(!0))},{default:V(()=>f[2]||(f[2]=[J(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),z(y(le),{icon:"x",variant:"ghost",onClick:f[1]||(f[1]=a=>y(s).toggleAllRows(!1))})])])],2)])):j("",!0)]),_:3}))}}),es={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},ts=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(r,{expose:s,emit:t}){const l=r,f=xt();let a=wt(new Set),g=A(null);const b=t;oe(a,x=>{a.size&&(g.value=null),b("update:selections",x)}),oe(g,x=>{b("update:active-row",x)});let c=T(()=>{function x(d){return d===void 0?!0:d}function w(d){return d===void 0?!1:d}return{getRowRoute:l.options.getRowRoute||null,onRowClick:l.options.onRowClick||null,showTooltip:x(l.options.showTooltip),selectionText:l.options.selectionText||(d=>d===1?"1 row selected":`${d} rows selected`),enableActive:w(l.options.enableActive),selectable:x(l.options.selectable),resizeColumn:w(l.options.resizeColumn),rowHeight:l.options.rowHeight||40,emptyState:l.options.emptyState}});const _=T(()=>l.rows.length?R.value?a.size===l.rows.reduce((x,w)=>x+w.rows.length,0):a.size===l.rows.length:!1),v=T(()=>c.value.selectable);let R=T(()=>l.rows.every(x=>x.group&&x.rows&&Array.isArray(x.rows)));function I(x){a.delete(x)||a.add(x)}function S(x){if(!x||_.value){a.clear();return}if(R.value){l.rows.forEach(w=>{w.rows.forEach(d=>a.add(d[l.rowKey]))});return}l.rows.forEach(w=>a.add(w[l.rowKey]))}return kt("list",T(()=>({rowKey:l.rowKey,rows:l.rows,columns:l.columns,options:c.value,selections:a,activeRow:g,allRowsSelected:_.value,slots:f,toggleRow:I,toggleAllRows:S}))),s({selections:a,allRowsSelected:_,toggleRow:I,toggleAllRows:S}),(x,w)=>(n(),u("div",es,[o("div",{class:N(["flex w-max min-w-full flex-col overflow-y-hidden",x.$attrs.class]),style:ue(x.$attrs.style)},[W(x.$slots,"default",ce(fe({showGroupedRows:y(R),selectable:v.value})),()=>[z(rt),l.rows.length?(n(),u(Y,{key:0},[y(R)?(n(),q(Wt,{key:0})):(n(),q(at,{key:1}))],64)):(n(),q(Lt,{key:1})),v.value?(n(),q(lt,{key:2})):j("",!0)])],6)]))}});function ss(l,f){return be(this,arguments,function*(r,s,t={}){s||(s={});let a=Object.assign({Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname},t.headers||{});window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(a["X-Frappe-CSRF-Token"]=window.csrf_token);let g=r.startsWith("/")?r:`/api/method/${r}`;const b=yield fetch(g,{method:"POST",headers:a,body:JSON.stringify(s)});if(b.ok){const c=yield b.json();if(c.docs||r==="login")return c;if(c.exc)try{console.groupCollapsed(r),console.log(`method: ${r}`),console.log("params:",s);let _=JSON.parse(c.exc);for(let v of _)console.log(v);console.groupEnd()}catch(_){console.warn("Error printing debug messages",_)}return c.message}else{let c=yield b.text(),_,v;try{_=JSON.parse(c)}catch(S){}let R=[[r,_.exc_type,_._error_message].filter(Boolean).join(" ")];if(_.exc){v=_.exc;try{v=JSON.parse(v)[0],console.log(v)}catch(S){}}let I=new Error(R.join(`
`));throw I.exc_type=_.exc_type,I.exc=v,I.status=b.status,I.messages=_._server_messages?JSON.parse(_._server_messages):[],I.messages=I.messages.concat(_.message),I.messages=I.messages.map(S=>{try{return JSON.parse(S).message}catch(x){return S}}),I.messages=I.messages.filter(Boolean),I.messages.length||(I.messages=_._error_message?[_._error_message]:["Internal Server Error"]),t.onError&&t.onError({response:b,status:b.status,error:I}),I}})}const we=ee({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(r){const s=r||{},t=s.limit_page_length||10,l=s.limit_start||0,f=s.filters||{},a=s.order_by||"creation desc";return{limit_page_length:t,limit_start:l,filters:f,order_by:a}},onError(r){console.error("Failed to fetch issues:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),nt=ee({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(r){return{filters:(r||{}).filters||{}}},onError(r){console.error("Failed to fetch issues count:",r)}});function he(r={}){const s={limit_page_length:r.limit_page_length||10,limit_start:r.limit_start||0,filters:r.filters||{},order_by:r.order_by||"creation desc"};return we.reload(s)}function _e(r={}){return nt.reload({filters:r})}ee({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(r){return{issue_name:r}},onError(r){console.error("Failed to fetch single issue:",r)},auto:!1});const Ae=ee({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(r){console.error("Failed to fetch issue priorities:",r)},auto:!0}),Be=ee({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(r){console.error("Failed to fetch issue types:",r)},auto:!0}),rs=ee({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(r){console.error("Failed to fetch projects:",r)},auto:!0});let Ce=null,Se=null;function os(){if(Ce&&Ae.data)return Ce;const r=Ae.data||[],s=[{label:"All Priority",value:""},...r.map(t=>({label:t.name,value:t.name}))];return Ce=Object.freeze(s),Ce}function as(){if(Se&&Be.data)return Se;const r=Be.data||[],s=[{label:"All Types",value:""},...r.map(t=>({label:t.name,value:t.name}))];return Se=Object.freeze(s),Se}const ls=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function ns(){return ls}const it=ee({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(r){console.error("Failed to fetch tag colors:",r)},auto:!0}),Fe=new Map;function ze(r){if(Fe.has(r))return Fe.get(r);const t=(it.data||{})[r]||null;return Fe.set(r,t),t}it.on("success",()=>{Fe.clear()});const je=ee({url:"force_trans_customization.api.issues.issue_search",makeParams(r){const s=r||{};return{search_query:s.search_query||"",limit:s.limit||8}},onError(r){console.error("Failed to search issues:",r)},auto:!1});function is(r,s=8){return!r||r.length<2?Promise.resolve(je.data||[]):je.reload({search_query:r,limit:s}).then(()=>je.data||[])}const Ue=ee({url:"force_trans_customization.api.issues.filter_issues_by_suggestion",makeParams(r){const s=r||{};return{suggestion_type:s.suggestion_type||"",suggestion_value:s.suggestion_value||"",limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"}},onError(r){console.error("Failed to filter issues by suggestion:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),ut=ee({url:"force_trans_customization.api.issues.get_filtered_issues_count",makeParams(r){const s=r||{};return{suggestion_type:s.suggestion_type||"",suggestion_value:s.suggestion_value||""}},onError(r){console.error("Failed to get filtered issues count:",r)},auto:!1});function De(r,s,t={}){const l={suggestion_type:r,suggestion_value:s,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return Ue.reload(l)}function Ze(r,s){return ut.reload({suggestion_type:r,suggestion_value:s})}const Ne=ee({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(r){const s=r||{};return{stat_type:s.stat_type||"team_tickets",limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"}},onError(r){console.error("Failed to filter issues by stat:",r),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),ct=ee({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(r){return{stat_type:(r||{}).stat_type||"team_tickets"}},onError(r){console.error("Failed to get stat filter count:",r)},auto:!1});function Te(r,s={}){const t={stat_type:r,limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,order_by:s.order_by||"creation desc"};return Ne.reload(t)}function Oe(r){return ct.reload({stat_type:r})}Ae.on("success",()=>{Ce=null});Be.on("success",()=>{Se=null});rs.on("success",()=>{});const us={class:"relative w-full max-w-2xl mx-auto"},cs={class:"relative group"},ds=["placeholder"],ps={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},gs={key:1,class:"flex items-center pointer-events-none"},ms={key:2,class:"animate-spin"},vs={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},fs={class:"flex items-center justify-between"},ys={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},bs={class:"text-xs text-slate-500"},hs={key:0,class:"px-6 py-8 text-center"},_s=["onClick"],xs={class:"flex items-start space-x-4"},ws={class:"flex-1 min-w-0"},ks={class:"flex items-start justify-between"},Cs={class:"flex-1 min-w-0"},Ss={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},$s=["innerHTML"],Ps={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Is={key:0,class:"ml-2"},Rs={class:"flex-shrink-0 ml-4"},Ts={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Fs={key:0,class:"flex items-center"},Es={key:1,class:"flex items-center"},Ls={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Ms={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(r,{expose:s,emit:t}){const l=r,f=t,a=A(null),g=A(l.modelValue),b=A(!1),c=A(!1),_=A(-1),v=A(!1),R=A(0),I=A(null),S=A([]);let x=null;oe(()=>l.modelValue,e=>{g.value=e}),oe(g,e=>{f("update:modelValue",e),f("search",e)});const w=A([]),d=e=>be(this,null,function*(){if(!e||e.length<2){w.value=[],c.value=!1,v.value=!1;return}try{v.value=!0;const i=performance.now(),E=yield is(e,8);R.value=performance.now()-i,w.value=E||[],c.value=!0}catch(i){console.error("Search error:",i),w.value=[],c.value=!1}finally{v.value=!1}}),$=e=>{if(x&&clearTimeout(x),_.value=-1,!e||e.length<2){w.value=[],c.value=!1,v.value=!1;return}v.value=!0,x=setTimeout(()=>{d(e)},1e3)},m=()=>{$(g.value)},h=(e,i)=>{if(!e||!i)return e;const E=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),F=new RegExp(`(${E})`,"gi");return e.replace(F,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},L=e=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[e]||"bg-gray-100 text-gray-800 border border-gray-200",D=()=>{b.value=!0,B&&(clearTimeout(B),B=null),g.value.length>=2&&(w.value.length>0?c.value=!0:d(g.value))};let B=null;const K=()=>{b.value=!1,B=setTimeout(()=>{c.value=!1,B=null},200)},te=e=>{var i;if(c.value)switch(e.key){case"ArrowDown":e.preventDefault(),_.value=Math.min(_.value+1,w.value.length-1),ie();break;case"ArrowUp":e.preventDefault(),_.value=Math.max(_.value-1,-1),ie();break;case"Enter":e.preventDefault(),_.value>=0&&de(w.value[_.value]);break;case"Escape":ae(),(i=a.value)==null||i.blur();break}},de=e=>{g.value=e.name,ae();const E=`${window.location.origin}/app/issue/${e.name}`;window.open(E,"_blank"),f("suggestion-selected",e)},ge=()=>{var e;g.value="",ae(),(e=a.value)==null||e.focus()},ae=()=>{c.value=!1,_.value=-1},ie=()=>{if(_.value<0||!I.value||!S.value[_.value])return;const e=I.value,i=S.value[_.value];if(i){const E=e.getBoundingClientRect(),F=i.getBoundingClientRect(),H=F.top-E.top+e.scrollTop,p=H+F.height,C=e.scrollTop,U=e.clientHeight;H<C?e.scrollTop=H:p>C+U&&(e.scrollTop=p-U)}},pe=e=>{if(!e)return"";try{const i=new Date(e),E=new Date,F=Math.abs(E-i),H=Math.ceil(F/(1e3*60*60*24));return H===1?"Today":H===2?"Yesterday":H<=7?`${H-1} days ago`:i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:i.getFullYear()!==E.getFullYear()?"numeric":void 0})}catch(i){return console.error("Error formatting date:",i),e}},k=e=>{var i,E;(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),(i=a.value)==null||i.focus(),(E=a.value)==null||E.select())};return Re(()=>{document.addEventListener("keydown",k)}),Ee(()=>{document.removeEventListener("keydown",k),x&&clearTimeout(x),B&&clearTimeout(B)}),s({focus:()=>{var e,i;(e=a.value)==null||e.focus(),(i=a.value)==null||i.select()},select:()=>{var e;return(e=a.value)==null?void 0:e.select()},$el:a}),(e,i)=>(n(),u("div",us,[o("div",cs,[i[4]||(i[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ke(o("input",{ref_key:"searchInput",ref:a,type:"text","onUpdate:modelValue":i[0]||(i[0]=E=>g.value=E),onInput:m,onFocus:D,onBlur:K,onKeydown:te,placeholder:r.placeholder,class:N(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":b.value,"bg-slate-50/50":!b.value&&g.value}])},null,42,ds),[[et,g.value]]),o("div",ps,[g.value?(n(),u("button",{key:0,onClick:ge,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},i[1]||(i[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):j("",!0),!g.value&&!b.value?(n(),u("div",gs,i[2]||(i[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),J("K ")],-1)]))):j("",!0),v.value?(n(),u("div",ms,i[3]||(i[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):j("",!0)])]),c.value?(n(),u("div",{key:0,class:N(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":c.value}])},[w.value.length>0?(n(),u("div",vs,[o("div",fs,[o("span",ys,P(w.value.length)+" Result"+P(w.value.length!==1?"s":""),1),o("span",bs,P(Math.round(R.value))+"ms ",1)])])):j("",!0),o("div",{ref_key:"suggestionsContainer",ref:I,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[w.value.length===0&&g.value.length>=2?(n(),u("div",hs,i[5]||(i[5]=[Ge('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):j("",!0),(n(!0),u(Y,null,G(w.value,(E,F)=>(n(),u("div",{key:E.name||F,ref_for:!0,ref:H=>S.value[F]=H,onClick:H=>de(E),class:N(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":F===_.value}])},[o("div",xs,[i[8]||(i[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",ws,[o("div",ks,[o("div",Cs,[o("h4",Ss,[o("span",{innerHTML:h(E.subject||E.name,g.value)},null,8,$s)]),o("p",Ps,[J(" ID: "+P(E.name)+" ",1),E.customer?(n(),u("span",Is,"• "+P(E.customer),1)):j("",!0)])]),o("div",Rs,[o("span",{class:N(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",L(E.status)])},P(E.status),3)])]),o("div",Ts,[E.raised_by?(n(),u("div",Fs,[i[6]||(i[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),J(" "+P(E.raised_by),1)])):j("",!0),E.creation?(n(),u("div",Es,[i[7]||(i[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),J(" "+P(pe(E.creation)),1)])):j("",!0)])])])],10,_s))),128))],512),g.value&&w.value.length>0?(n(),u("div",Ls,i[9]||(i[9]=[Ge('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):j("",!0)],2)):j("",!0),c.value?(n(),u("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:ae})):j("",!0)]))}},js=Ie(Ms,[["__scopeId","data-v-4969cdcf"]]),Ds={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},Os={class:"mb-6"},As={class:"relative max-w-2xl mx-auto"},Bs={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},zs={class:"border-t border-gray-200 pt-4"},Us={class:"flex items-center justify-between"},Ns={class:"flex items-center space-x-3 flex-1"},Hs={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Vs={key:0,class:"flex items-center space-x-2 flex-1 overflow-x-auto"},qs={class:"text-gray-600 font-medium"},Ys={class:"text-gray-500"},Ks={key:1,class:"text-gray-900"},Ws=["onClick"],Qs={key:0,class:"flex items-center space-x-2 ml-4"},Gs={key:0,class:"relative"},Js={class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg"},Xs={class:"flex"},Zs={class:"w-48 border-r border-gray-200 bg-gray-50"},er={class:"max-h-64 overflow-y-auto"},tr=["onClick"],sr={class:"flex-1 min-w-96"},rr={class:"p-4"},or={key:0,class:"text-center py-8 text-gray-500"},ar={key:1,class:"space-y-3"},lr={class:"w-24 text-sm font-medium text-gray-700"},nr={class:"w-24"},ir=["onUpdate:modelValue","onChange"],ur=["value"],cr={class:"flex-1"},dr={key:0,class:"relative"},pr=["onUpdate:modelValue","onChange"],gr=["value"],mr={key:0,class:"absolute right-8 top-1/2 transform -translate-y-1/2"},vr=["onUpdate:modelValue","onChange"],fr=["value"],yr=["onUpdate:modelValue","onInput","placeholder"],br=["onClick"],hr={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},_r={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({status:"",priority:"",assignee:"",tags:"",sortBy:"creation"})},statusOptions:{type:Array,default:()=>[]},priorityOptions:{type:Array,default:()=>[]},assigneeOptions:{type:Array,default:()=>[]},tagsOptions:{type:Array,default:()=>[]},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected"],setup(r,{emit:s}){const t=r,l=s,f=A(t.searchQuery),a=A(se({},t.filters)),g=A(null),b=A(!1),c=A([]);let _=0;const v=T(()=>{const k=new Set;return t.issues.forEach(e=>{e._user_tags&&Array.isArray(e._user_tags)&&e._user_tags.forEach(i=>{i&&i.trim()&&k.add(i.trim())})}),Array.from(k).sort().map(e=>({label:e,value:e,color:ze(e)}))}),R=T(()=>[{value:"subject",label:"Subject",description:"Filter by issue title",icon:"type",type:"text"},{value:"status",label:"Status",description:"Filter by issue status (New, In Review, etc.)",icon:"circle",type:"select"},{value:"priority",label:"Priority",description:"Filter by priority level",icon:"flag",type:"select"},{value:"issue_type",label:"Issue Type",description:"Filter by issue category",icon:"tag",type:"select"},{value:"raised_by",label:"Raised By (Email)",description:"Filter by who raised the issue",icon:"user",type:"text"},{value:"description",label:"Description",description:"Filter by issue description",icon:"file-text",type:"text"},{value:"customer",label:"Customer",description:"Filter by customer",icon:"building",type:"link"},{value:"customer_name",label:"Customer Name",description:"Filter by customer name",icon:"building",type:"text"},{value:"contact",label:"Contact",description:"Filter by contact person",icon:"user",type:"link"},{value:"lead",label:"Lead",description:"Filter by associated lead",icon:"user-plus",type:"link"},{value:"project",label:"Project",description:"Filter by project",icon:"folder",type:"link"},{value:"company",label:"Company",description:"Filter by company",icon:"building",type:"link"},{value:"service_level_agreement",label:"Service Level Agreement",description:"Filter by SLA",icon:"clock",type:"link"},{value:"agreement_status",label:"SLA Status",description:"Filter by SLA status",icon:"check-circle",type:"select"},{value:"response_by",label:"Response By",description:"Filter by response deadline",icon:"clock",type:"datetime"},{value:"sla_resolution_by",label:"Resolution By",description:"Filter by resolution deadline",icon:"clock",type:"datetime"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",description:"Filter by assigned CSM team",icon:"users",type:"link"},{value:"custom_users_assigned",label:"Users Assigned",description:"Filter by assigned users",icon:"user-check",type:"multiselect"},{value:"custom_labels",label:"Labels",description:"Filter by issue labels",icon:"tag",type:"multiselect"},{value:"creation",label:"Created Date",description:"Filter by creation date",icon:"calendar",type:"date"},{value:"modified",label:"Modified Date",description:"Filter by last modified date",icon:"clock",type:"date"},{value:"opening_date",label:"Opening Date",description:"Filter by opening date",icon:"calendar",type:"date"},{value:"opening_time",label:"Opening Time",description:"Filter by opening time",icon:"clock",type:"time"},{value:"sla_resolution_date",label:"Resolution Date",description:"Filter by resolution date",icon:"calendar",type:"datetime"},{value:"first_responded_on",label:"First Responded On",description:"Filter by first response date",icon:"clock",type:"datetime"},{value:"first_response_time",label:"First Response Time",description:"Filter by first response time",icon:"clock",type:"duration"},{value:"avg_response_time",label:"Average Response Time",description:"Filter by average response time",icon:"clock",type:"duration"},{value:"resolution_time",label:"Resolution Time",description:"Filter by resolution time",icon:"clock",type:"duration"},{value:"user_resolution_time",label:"User Resolution Time",description:"Filter by user resolution time",icon:"clock",type:"duration"},{value:"total_hold_time",label:"Total Hold Time",description:"Filter by total hold time",icon:"pause",type:"duration"},{value:"via_customer_portal",label:"Via Customer Portal",description:"Filter by customer portal origin",icon:"globe",type:"boolean"},{value:"naming_series",label:"Series",description:"Filter by naming series",icon:"hash",type:"text"},{value:"email_account",label:"Email Account",description:"Filter by email account",icon:"mail",type:"link"},{value:"issue_split_from",label:"Issue Split From",description:"Filter by parent issue",icon:"git-branch",type:"link"},{value:"_user_tags",label:"Tags",description:"Filter by user tags",icon:"tag",type:"tags"}]),I=T(()=>[{label:"Created Date (Newest)",value:"creation desc"},{label:"Created Date (Oldest)",value:"creation asc"},{label:"Modified Date (Newest)",value:"modified desc"},{label:"Modified Date (Oldest)",value:"modified asc"},{label:"Subject (A-Z)",value:"subject asc"},{label:"Subject (Z-A)",value:"subject desc"},{label:"Priority",value:"priority asc"},{label:"Status",value:"status asc"}]);oe(()=>t.searchQuery,k=>{f.value=k}),oe(()=>t.filters,k=>{a.value=se({},k)},{deep:!0});const S=k=>{(k.ctrlKey||k.metaKey)&&k.key==="k"&&(k.preventDefault(),x())},x=()=>{g.value&&(g.value.focus(),g.value.select())},w=k=>{f.value=k,l("update:searchQuery",k)},d=k=>{l("suggestion-selected",k)};T(()=>{let k=0;return a.value.status&&k++,a.value.priority&&k++,a.value.assignee&&k++,a.value.tags&&k++,a.value.sortBy!=="creation desc"&&k++,k}),T(()=>{const k=[];if(a.value.status){const e=t.statusOptions.find(i=>i.value===a.value.status);k.push({key:"status",label:"Status",value:(e==null?void 0:e.label)||a.value.status,colorClass:"bg-green-100 text-green-800 border-green-200"})}if(a.value.priority){const e=t.priorityOptions.find(i=>i.value===a.value.priority);k.push({key:"priority",label:"Priority",value:(e==null?void 0:e.label)||a.value.priority,colorClass:"bg-orange-100 text-orange-800 border-orange-200"})}if(a.value.assignee){const e=t.assigneeOptions.find(i=>i.value===a.value.assignee);k.push({key:"assignee",label:"Assignee",value:(e==null?void 0:e.label)||a.value.assignee,colorClass:"bg-blue-100 text-blue-800 border-blue-200"})}if(a.value.tags){const e=t.tagsOptions.find(i=>i.value===a.value.tags);k.push({key:"tags",label:"Tags",value:(e==null?void 0:e.label)||a.value.tags,colorClass:"bg-purple-100 text-purple-800 border-purple-200"})}if(a.value.sortBy!=="creation desc"){const e=I.value.find(i=>i.value===a.value.sortBy);k.push({key:"sortBy",label:"Sort",value:(e==null?void 0:e.label)||a.value.sortBy,colorClass:"bg-indigo-100 text-indigo-800 border-indigo-200"})}return k});const $=k=>{const e=R.value.find(E=>E.value===k);if(!e)return;const i={id:++_,field:k,operator:K(k),value:"",type:e.type};c.value.push(i),b.value=!1,D()},m=k=>{c.value.splice(k,1),D()},h=()=>{c.value=[],D()},L=k=>{D()},D=()=>{const k={};c.value.forEach(e=>{if(e.value){const i=e.field==="issue_type"?"tags":e.field==="raised_by"?"assignee":e.field;e.operator==="equals"||e.operator==="contains"?k[i]=e.value:e.operator==="not_equals"&&(k[i]=`!${e.value}`)}}),a.value=se(se({},a.value),k),l("update:filters",se({},a.value))},B=k=>{const e=R.value.find(i=>i.value===k);return(e==null?void 0:e.label)||k},K=k=>{const e=R.value.find(i=>i.value===k);return(e==null?void 0:e.type)==="select"?"equals":(e==null?void 0:e.type)==="text"?"like":(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"||(e==null?void 0:e.type)==="time"||(e==null?void 0:e.type)==="duration"||(e==null?void 0:e.type)==="boolean"||(e==null?void 0:e.type)==="link"?"equals":(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?"like":"equals"},te=k=>{const e=R.value.find(i=>i.value===k);return(e==null?void 0:e.type)==="select"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"In",value:"in"},{label:"Not In",value:"not_in"}]:(e==null?void 0:e.type)==="text"?[{label:"Like",value:"like"},{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Starts with",value:"starts_with"},{label:"Ends with",value:"ends_with"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"},{label:"Greater than or equal",value:"greater_than_equal"},{label:"Less than or equal",value:"less_than_equal"},{label:"Between",value:"between"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="time"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"}]:(e==null?void 0:e.type)==="duration"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Greater than",value:"greater_than"},{label:"Less than",value:"less_than"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="boolean"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"}]:(e==null?void 0:e.type)==="link"?[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Like",value:"like"},{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?[{label:"Like",value:"like"},{label:"Not Like",value:"not_like"},{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"Is Set",value:"is_set"},{label:"Is Not Set",value:"is_not_set"}]:[{label:"Equals",value:"equals"}]},de=k=>{const e=R.value.find(i=>i.value===k);return(e==null?void 0:e.type)==="select"||(e==null?void 0:e.type)==="tags"},ge=k=>{switch(k){case"status":return t.statusOptions;case"priority":return t.priorityOptions;case"raised_by":return t.assigneeOptions;case"issue_type":return t.tagsOptions;case"_user_tags":return v.value;default:return[]}},ae=k=>{var i,E,F;const e=R.value.find(H=>H.value===k);switch(k){case"subject":return"Enter issue title...";case"description":return"Enter description text...";case"raised_by":return"Enter email address...";case"customer_name":return"Enter customer name...";case"naming_series":return"Enter series (e.g., ISS-2025-)...";case"creation":case"modified":case"opening_date":case"sla_resolution_date":case"first_responded_on":return"YYYY-MM-DD or YYYY-MM-DD HH:MM:SS";case"response_by":case"sla_resolution_by":return"YYYY-MM-DD HH:MM:SS";case"opening_time":return"HH:MM:SS";case"first_response_time":case"avg_response_time":case"resolution_time":case"user_resolution_time":case"total_hold_time":return"Enter duration (e.g., 2:30:00 for 2h 30m)";case"customer":return"Enter customer name or ID...";case"contact":return"Enter contact name or ID...";case"lead":return"Enter lead name or ID...";case"project":return"Enter project name or ID...";case"company":return"Enter company name or ID...";case"service_level_agreement":return"Enter SLA name or ID...";case"custom_assigned_csm_team":return"Enter team name or ID...";case"email_account":return"Enter email account name...";case"issue_split_from":return"Enter parent issue ID...";case"via_customer_portal":return"Enter 1 for Yes, 0 for No";case"custom_users_assigned":return"Enter user names (comma separated)...";case"custom_labels":return"Enter labels (comma separated)...";case"_user_tags":return"Enter tags (comma separated)...";default:return(e==null?void 0:e.type)==="date"||(e==null?void 0:e.type)==="datetime"?"YYYY-MM-DD or YYYY-MM-DD HH:MM:SS":(e==null?void 0:e.type)==="time"?"HH:MM:SS":(e==null?void 0:e.type)==="duration"?"Enter duration (e.g., 2:30:00)":(e==null?void 0:e.type)==="boolean"?"Enter 1 for Yes, 0 for No":(e==null?void 0:e.type)==="link"?`Enter ${((i=e==null?void 0:e.label)==null?void 0:i.toLowerCase())||"value"} name or ID...`:(e==null?void 0:e.type)==="multiselect"||(e==null?void 0:e.type)==="tags"?`Enter ${((E=e==null?void 0:e.label)==null?void 0:E.toLowerCase())||"values"} (comma separated)...`:`Enter ${((F=e==null?void 0:e.label)==null?void 0:F.toLowerCase())||"value"}...`}},ie=k=>{const e=ze(k);if(e){const i=e.replace("#",""),E=parseInt(i.substr(0,2),16),F=parseInt(i.substr(2,2),16),H=parseInt(i.substr(4,2),16),p=`rgba(${E}, ${F}, ${H}, 0.1)`,C=`rgb(${Math.max(E-50,0)}, ${Math.max(F-50,0)}, ${Math.max(H-50,0)})`;return{backgroundColor:p,color:C,borderColor:C}}return{backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"}},pe=()=>{D(),b.value=!1};return Re(()=>{document.addEventListener("keydown",S)}),Ee(()=>{document.removeEventListener("keydown",S)}),(k,e)=>(n(),u("div",Ds,[o("div",Os,[o("div",As,[z(js,{ref_key:"searchBoxRef",ref:g,"model-value":f.value,"onUpdate:modelValue":w,onSuggestionSelected:d,issues:r.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),f.value?(n(),u("div",Bs," Searching in "+P(r.filteredCount)+" issues ",1)):j("",!0)])]),o("div",zs,[o("div",Us,[o("div",Ns,[o("button",{onClick:e[0]||(e[0]=i=>b.value=!b.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[e[2]||(e[2]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),e[3]||(e[3]=o("span",null,"Filters",-1)),c.value.length>0?(n(),u("span",Hs,P(c.value.length),1)):j("",!0)]),c.value.length>0?(n(),u("div",Vs,[(n(!0),u(Y,null,G(c.value,(i,E)=>(n(),u("div",{key:i.id,class:"flex items-center space-x-1 bg-gray-100 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",qs,P(B(i.field)),1),o("span",Ys,P(i.operator),1),i.field==="_user_tags"&&i.value?(n(),u("span",{key:0,style:ue(ie(i.value)),class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border"},P(i.value),5)):(n(),u("span",Ks,P(i.value),1)),o("button",{onClick:F=>m(E),class:"text-gray-400 hover:text-red-600 ml-1"},e[4]||(e[4]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ws)]))),128))])):j("",!0)]),c.value.length>0?(n(),u("div",Qs,[o("button",{onClick:h,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors"}," Clear Filters "),o("button",{onClick:pe,class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 transition-colors"}," Apply Filters ")])):j("",!0)])]),b.value?(n(),u("div",Gs,[o("div",Js,[o("div",Xs,[o("div",Zs,[e[5]||(e[5]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",er,[(n(!0),u(Y,null,G(R.value,i=>(n(),u("button",{key:i.value,onClick:E=>$(i.value),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors"},P(i.label),9,tr))),128))])]),o("div",sr,[o("div",rr,[c.value.length===0?(n(),u("div",or,e[6]||(e[6]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(n(),u("div",ar,[(n(!0),u(Y,null,G(c.value,(i,E)=>(n(),u("div",{key:i.id,class:"flex items-center space-x-3 p-3 bg-gray-50 rounded border"},[o("div",lr,P(B(i.field)),1),o("div",nr,[ke(o("select",{"onUpdate:modelValue":F=>i.operator=F,onChange:F=>L(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[(n(!0),u(Y,null,G(te(i.field),F=>(n(),u("option",{key:F.value,value:F.value},P(F.label),9,ur))),128))],40,ir),[[Me,i.operator]])]),o("div",cr,[i.field==="_user_tags"?(n(),u("div",dr,[ke(o("select",{"onUpdate:modelValue":F=>i.value=F,onChange:F=>L(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[e[7]||(e[7]=o("option",{value:""},"Select tag...",-1)),(n(!0),u(Y,null,G(v.value,F=>(n(),u("option",{key:F.value,value:F.value},P(F.label),9,gr))),128))],40,pr),[[Me,i.value]]),i.value?(n(),u("div",mr,[o("span",{style:ue(ie(i.value)),class:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border"},P(i.value),5)])):j("",!0)])):de(i.field)?ke((n(),u("select",{key:1,"onUpdate:modelValue":F=>i.value=F,onChange:F=>L(),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[e[8]||(e[8]=o("option",{value:""},"Select...",-1)),(n(!0),u(Y,null,G(ge(i.field),F=>(n(),u("option",{key:F.value,value:F.value},P(F.label),9,fr))),128))],40,vr)),[[Me,i.value]]):ke((n(),u("input",{key:2,"onUpdate:modelValue":F=>i.value=F,onInput:F=>L(),type:"text",placeholder:ae(i.field),class:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,40,yr)),[[et,i.value]])]),o("button",{onClick:F=>m(E),class:"p-1 text-gray-400 hover:text-red-600 transition-colors"},e[9]||(e[9]=[o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,br)]))),128))])),c.value.length>0?(n(),u("div",hr,[o("button",{onClick:h,class:"text-sm text-gray-600 hover:text-gray-900 transition-colors"}," Clear Filters "),o("button",{onClick:pe,class:"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors"}," Apply Filters ")])):j("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:e[1]||(e[1]=i=>b.value=!1)})])):j("",!0)]))}},xr=Ie(_r,[["__scopeId","data-v-0a7d2720"]]),wr={class:"bg-white rounded-lg shadow-sm border mt-4"},kr={class:"px-6 py-4 flex items-center justify-between"},Cr={class:"text-sm text-gray-700"},Sr={key:0},$r={key:1},Pr={key:0,class:"flex items-center space-x-2"},Ir={class:"flex items-center space-x-1"},Rr={key:1,class:"px-2 text-gray-500"},Tr={key:2,class:"px-2 text-gray-500"},Fr={key:1,class:"flex items-center space-x-2"},Er={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(r,{emit:s}){const t=r,l=s,f=A(t.itemsPerPage);oe(()=>t.itemsPerPage,m=>{f.value=m});const a=T(()=>Math.ceil(t.totalItems/t.itemsPerPage)),g=T(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),b=T(()=>{const m=t.currentPage*t.itemsPerPage;return Math.min(m,t.totalItems)}),c=T(()=>{const m=[],h=t.maxVisiblePages,L=t.currentPage,D=a.value;if(D<=h)for(let B=1;B<=D;B++)m.push(B);else{let B=Math.max(1,L-Math.floor(h/2)),K=Math.min(D,B+h-1);K-B+1<h&&(B=Math.max(1,K-h+1)),B>1&&(B=Math.max(2,B)),K<D&&(K=Math.min(D-1,K));for(let te=B;te<=K;te++)m.push(te)}return m}),_=T(()=>a.value>t.maxVisiblePages&&!c.value.includes(1)),v=T(()=>a.value>t.maxVisiblePages&&!c.value.includes(a.value)),R=T(()=>_.value&&c.value.length>0&&c.value[0]>2),I=T(()=>v.value&&c.value.length>0&&c.value[c.value.length-1]<a.value-1),S=T(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),x=m=>{m>=1&&m<=a.value&&m!==t.currentPage&&(l("update:currentPage",m),l("pageChange",{page:m,itemsPerPage:t.itemsPerPage,offset:(m-1)*t.itemsPerPage}))},w=()=>{t.currentPage>1&&x(t.currentPage-1)},d=()=>{t.currentPage<a.value&&x(t.currentPage+1)},$=()=>{const m=f.value;l("update:itemsPerPage",m);const h=(t.currentPage-1)*t.itemsPerPage+1,L=Math.ceil(h/m);l("pageChange",{page:L,itemsPerPage:m,offset:(L-1)*m})};return(m,h)=>(n(),u("div",wr,[o("div",kr,[o("div",Cr,[r.totalItems>0?(n(),u("span",Sr," Showing "+P(g.value)+" to "+P(b.value)+" of "+P(r.totalItems)+" results ",1)):(n(),u("span",$r," No results found "))]),a.value>1?(n(),u("div",Pr,[z(y(le),{theme:"gray",variant:"outline",size:"sm",disabled:r.currentPage===1,onClick:w},{prefix:V(()=>[z(y(ye),{name:"chevron-left",class:"h-4 w-4"})]),default:V(()=>[h[3]||(h[3]=J(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",Ir,[_.value?(n(),q(y(le),{key:0,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===1}),onClick:h[0]||(h[0]=L=>x(1))},{default:V(()=>h[4]||(h[4]=[J(" 1 ")])),_:1,__:[4]},8,["class"])):j("",!0),R.value?(n(),u("span",Rr,"...")):j("",!0),(n(!0),u(Y,null,G(c.value,L=>(n(),q(y(le),{key:L,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===L}),onClick:D=>x(L)},{default:V(()=>[J(P(L),1)]),_:2},1032,["class","onClick"]))),128)),I.value?(n(),u("span",Tr,"...")):j("",!0),v.value?(n(),q(y(le),{key:3,theme:"gray",variant:"outline",size:"sm",class:N({"bg-blue-50 text-blue-600 border-blue-200":r.currentPage===a.value}),onClick:h[1]||(h[1]=L=>x(a.value))},{default:V(()=>[J(P(a.value),1)]),_:1},8,["class"])):j("",!0)]),z(y(le),{theme:"gray",variant:"outline",size:"sm",disabled:r.currentPage===a.value,onClick:d},{suffix:V(()=>[z(y(ye),{name:"chevron-right",class:"h-4 w-4"})]),default:V(()=>[h[5]||(h[5]=J(" Next "))]),_:1,__:[5]},8,["disabled"])])):j("",!0),r.showItemsPerPage?(n(),u("div",Fr,[h[6]||(h[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),z(y(Ct),{modelValue:f.value,"onUpdate:modelValue":h[2]||(h[2]=L=>f.value=L),options:S.value,onChange:$,class:"w-20"},null,8,["modelValue","options"])])):j("",!0)])]))}},Lr={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Mr={class:"text-3xl font-bold text-gray-900"},jr={class:"text-3xl font-bold text-blue-600"},Dr={class:"text-3xl font-bold text-green-600"},Or={class:"text-3xl font-bold text-orange-600"},Ar={class:"text-3xl font-bold text-purple-600"},Br=3e4,zr={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(r,{expose:s,emit:t}){const l=r,f=t,a=xe({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),g=T(()=>a.value.team_tickets),b=T(()=>a.value.open_tickets),c=T(()=>a.value.assigned_to_me),_=T(()=>a.value.actionable_tickets),v=T(()=>a.value.response_tickets);let R=null,I=0;const S=()=>be(this,null,function*(){const $=Date.now();if(R&&$-I<Br)return R;try{const m=yield ss("force_trans_customization.api.issues.get_issue_stats");return a.value=m,R=m,I=$,m}catch(m){return console.error("Error fetching issue stats:",m),a.value}});let x=null;const w=()=>{x&&clearTimeout(x),x=setTimeout(()=>{S()},500)};Re(()=>{S()}),oe(()=>l.issues.length,()=>{w()});const d=$=>{f("filter-changed",$)};return s({refreshStats:S}),($,m)=>(n(),u("div",Lr,[o("div",{onClick:m[0]||(m[0]=h=>d("team_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Mr,P(g.value),1),m[5]||(m[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:m[1]||(m[1]=h=>d("open_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",jr,P(b.value),1),m[6]||(m[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:m[2]||(m[2]=h=>d("assigned_to_me")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",Dr,P(c.value),1),m[7]||(m[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:m[3]||(m[3]=h=>d("actionable_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"])},[o("div",Or,P(_.value),1),m[8]||(m[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Actionable",-1))],2),o("div",{onClick:m[4]||(m[4]=h=>d("response_tickets")),class:N(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",r.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"])},[o("div",Ar,P(v.value),1),m[9]||(m[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Response",-1))],2)]))}},Ur={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const r=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[r]||"gray"}},components:{Badge:Ve}},Nr={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const r=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[r]||"yellow"},priorityIndicatorClass(){const r=this.priority||"Medium";return{"bg-red-500":r==="Critical","bg-red-400":r==="High","bg-yellow-400":r==="Medium","bg-green-400":r==="Low"}}},components:{Badge:Ve}},Hr={components:{ListView:ts,Avatar:Rt,Badge:Ve,Button:le,FeatherIcon:ye,ListHeader:rt,ListHeaderItem:st,ListRow:Ye,ListRowItem:ot,ListRows:at,ListSelectBanner:lt,StatusBadge:Ur,PriorityBadge:Nr},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(r,{emit:s}){const t=A(!1),l=A(null),f=A({x:0,y:0}),a=A(!1),g=A({x:0,y:0}),b=A(null),c=p=>{if(!p||typeof p!="string")return"?";if(p.includes("@")){const C=p.split("@")[0];return C.includes(".")||C.includes("_")?C.split(/[._]/).map(X=>X[0]).join("").toUpperCase().slice(0,2):C.slice(0,2).toUpperCase()}return p.includes(" ")?p.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):p.slice(0,2).toUpperCase()},_=p=>{if(!p)return"";const C=p.match(/ISS-(\d{4}-\d+)/);return C?C[1]:p},v=p=>{if(!p)return"";const C=document.createElement("div");return C.innerHTML=p,C.textContent||C.innerText||""},R=p=>p?new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",I=p=>p?new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",S=p=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[p]||"gray",x=p=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[p]||"yellow",w=new Map,d=T(()=>r.issues.map(p=>{const C=p.name;if(w.has(C)){const X=w.get(C);if(X.originalStatus===p.status&&X.originalPriority===p.priority)return X.transformed}const U=Qe(se({},p),{status:{label:p.status||"New",color:S(p.status)},priority:{label:p.priority||"Medium",color:x(p.priority)}});return w.set(C,{transformed:U,originalStatus:p.status,originalPriority:p.priority}),U})),$=xe([{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),m=xe({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:p=>{console.log("Row clicked:",p)}}),h=p=>{console.log("Selected rows:",p)},L=p=>{console.log("Issue clicked:",p);const U=`${window.location.origin}/app/issue/${p.name}`;window.open(U,"_blank")},D=p=>{const C=p||"New";return{"bg-blue-500":C==="New","bg-orange-500":C==="In Review","bg-yellow-500":C==="Waiting on Customer","bg-purple-500":C==="Confirmed","bg-blue-500":C==="In Transit","bg-gray-500":C==="In Transit Unmanaged","bg-green-500":C==="Delivered","bg-green-500":C==="Closed","bg-red-500":C==="Open","bg-orange-500":C==="Replied","bg-yellow-500":C==="On Hold","bg-green-500":C==="Resolved"}},B=p=>{const C=p||"Medium";return{"bg-red-500":C==="Critical"||C==="High","bg-yellow-500":C==="Medium","bg-green-500":C==="Low"}},K=p=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[p||"New"]||"bg-gray-100 text-gray-800",te=p=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[p||"Medium"]||"bg-yellow-100 text-yellow-800",de=p=>{const C=p||"Medium";return{"bg-red-500":C==="Critical","bg-red-400":C==="High","bg-yellow-400":C==="Medium","bg-green-400":C==="Low"}},ge=(p,C)=>{const U=p.target.getBoundingClientRect();f.value={x:U.left+U.width/2,y:U.top-10},l.value=C,t.value=!0},ae=()=>{t.value=!1,l.value=null},ie=(p,C)=>{if(!C||C.length===0)return;const U=p.target.getBoundingClientRect();g.value={x:U.left+U.width/2,y:U.top-10},b.value=C,a.value=!0},pe=()=>{a.value=!1,b.value=null},k=p=>{let C="asc";r.sortField===p&&(C=r.sortDirection==="asc"?"desc":"asc"),s("sort",{field:p,direction:C})},e=p=>r.sortField!==p?"arrow-up-down":r.sortDirection==="asc"?"arrow-up":"arrow-down",i=p=>r.sortField!==p?"text-gray-400":"text-blue-600",E=p=>r.sortField===p?"bg-blue-50":"",F=new Map;return{columns:$,listOptions:m,transformedIssues:d,handleSelections:h,handleIssueClick:L,getStatusColor:D,getPriorityColor:B,getStatusBadgeClass:K,getPriorityBadgeClass:te,getPriorityIndicatorClass:de,getInitials:c,formatIssueId:_,stripHtml:v,formatDate:R,formatTime:I,showPopup:t,popupUser:l,popupPosition:f,showUserPopup:ge,hideUserPopup:ae,handleColumnSort:k,getSortIcon:e,getSortIconClass:i,getSortButtonClass:E,getTagStyle:p=>{if(F.has(p))return F.get(p);const C=ze(p);let U;if(C){const X=C.replace("#",""),Le=parseInt(X.substr(0,2),16),O=parseInt(X.substr(2,2),16),M=parseInt(X.substr(4,2),16),Q=`rgba(${Le}, ${O}, ${M}, 0.1)`,Z=`rgb(${Math.max(Le-50,0)}, ${Math.max(O-50,0)}, ${Math.max(M-50,0)})`;U={backgroundColor:Q,color:Z,borderColor:Z}}else U={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return F.set(p,U),U},showTagsPopup:a,tagsPopupPosition:g,tagsPopupData:b,showTagsPopupFn:ie,hideTagsPopupFn:pe}}},Vr={class:"bg-white rounded-lg shadow-sm border"},qr={key:0,class:"px-6 py-12 text-center text-gray-500"},Yr=["onClick"],Kr=["onClick"],Wr={key:1,class:"max-w-xs"},Qr=["title"],Gr=["title"],Jr=["title"],Xr={key:3,class:"flex flex-wrap gap-1"},Zr=["onMouseenter"],eo={key:1,class:"text-gray-400 text-sm"},to=["onMouseenter"],so=["title"],ro={class:"truncate"},oo={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},ao={key:1,class:"text-gray-400 text-sm"},lo={key:5,class:"flex flex-col"},no={class:"text-xs text-gray-400"},io={key:7},uo={class:"flex gap-2"},co={class:"text-sm"},po={class:"font-semibold text-gray-900 mb-1"},go={class:"text-gray-600 flex items-center gap-1"},mo={class:"text-xs text-gray-500 mt-1"},vo={class:"text-sm"},fo={class:"flex flex-wrap gap-1"};function yo(r,s,t,l,f,a){const g=re("FeatherIcon"),b=re("ListHeaderItem"),c=re("ListHeader"),_=re("Avatar"),v=re("ListRowItem"),R=re("ListRow"),I=re("ListRows"),S=re("Button"),x=re("ListSelectBanner"),w=re("ListView");return n(),u("div",Vr,[s[5]||(s[5]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(n(),u("div",qr,s[2]||(s[2]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(n(),q(w,{key:1,columns:l.columns,rows:l.transformedIssues,"row-key":"name",options:l.listOptions,"onUpdate:selections":l.handleSelections},{default:V(()=>[z(c,null,{default:V(()=>[(n(!0),u(Y,null,G(l.columns,d=>(n(),q(b,{key:d.key,item:d},St({_:2},[d.icon?{name:"prefix",fn:V(({item:$})=>[z(g,{name:$.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,d.sortable?{name:"suffix",fn:V(()=>[o("button",{onClick:$=>l.handleColumnSort(d.key),class:N(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",l.getSortButtonClass(d.key)])},[z(g,{name:l.getSortIcon(d.key),class:N(["h-3 w-3",l.getSortIconClass(d.key)])},null,8,["name","class"])],10,Yr)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),z(I,null,{default:V(()=>[(n(!0),u(Y,null,G(l.transformedIssues,d=>(n(),q(R,{key:d.name,row:d},{default:V(({column:$,item:m})=>[z(v,{item:m,align:$.align},{prefix:V(()=>[$.key==="raised_by"?(n(),q(_,{key:0,size:"sm",label:l.getInitials(d.raised_by),class:"mr-3"},null,8,["label"])):j("",!0)]),default:V(()=>{var h,L;return[$.key==="name"?(n(),u("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:$e(D=>l.handleIssueClick(d),["prevent"])},P(l.formatIssueId(m)),9,Kr)):$.key==="subject"?(n(),u("div",Wr,[o("div",{class:"font-medium truncate",title:d.subject},P(d.subject),9,Qr),d.description?(n(),u("div",{key:0,class:"text-gray-500 text-xs mt-1 truncate",title:d.description},P(l.stripHtml(d.description)),9,Gr)):j("",!0)])):$.key==="raised_by"?(n(),u("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:m||"-"},P(m||"-"),9,Jr)):$.key==="custom_users_assigned"?(n(),u("div",Xr,[d.custom_users_assigned&&d.custom_users_assigned.length>0?(n(!0),u(Y,{key:0},G(d.custom_users_assigned.filter(D=>D.user_assigned),D=>(n(),u("div",{key:D.name||D,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:B=>l.showUserPopup(B,D),onMouseleave:s[0]||(s[0]=(...B)=>l.hideUserPopup&&l.hideUserPopup(...B))},P(l.getInitials(D.user_assigned)),41,Zr)]))),128)):(n(),u("span",eo,"-"))])):$.key==="_user_tags"?(n(),u("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:D=>l.showTagsPopupFn(D,d._user_tags),onMouseleave:s[1]||(s[1]=(...D)=>l.hideTagsPopupFn&&l.hideTagsPopupFn(...D))},[d._user_tags&&d._user_tags.length>0?(n(),u(Y,{key:0},[o("span",{style:ue(l.getTagStyle(d._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:d._user_tags[0]},[o("span",ro,P(d._user_tags[0]),1)],12,so),d._user_tags.length>1?(n(),u("span",oo," +"+P(d._user_tags.length-1),1)):j("",!0)],64)):(n(),u("span",ao,"-"))],40,to)):$.key==="creation"?(n(),u("div",lo,[o("span",null,P(l.formatDate(m)),1),o("span",no,P(l.formatTime(m)),1)])):$.key==="status"?(n(),u("span",{key:6,class:N([l.getStatusBadgeClass(((h=d.status)==null?void 0:h.label)||d.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},P(((L=d.status)==null?void 0:L.label)||d.status||"New"),3)):(n(),u("span",io,P(m),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),z(x,null,{actions:V(({unselectAll:d})=>[o("div",uo,[z(S,{variant:"ghost",label:"Delete"}),z(S,{variant:"ghost",label:"Unselect all",onClick:d},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),l.showPopup&&l.popupUser?(n(),u("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ue({left:l.popupPosition.x+"px",top:l.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",co,[o("div",po,P(l.popupUser.user_assigned||"Unknown User"),1),o("div",go,[s[3]||(s[3]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),J(" "+P(l.popupUser.team||"No Team"),1)]),o("div",mo," Assigned: "+P(l.formatDate(l.popupUser.assigned_date)),1)])],4)):j("",!0),l.showTagsPopup&&l.tagsPopupData?(n(),u("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:ue({left:l.tagsPopupPosition.x+"px",top:l.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",vo,[s[4]||(s[4]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",fo,[(n(!0),u(Y,null,G(l.tagsPopupData,d=>(n(),u("span",{key:d,style:ue(l.getTagStyle(d)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},P(d),5))),128))])])],4)):j("",!0)])}const bo=Ie(Hr,[["render",yo]]),ho={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},_o={class:"flex items-start justify-between"},xo={class:"flex items-start space-x-3"},wo={class:"flex-shrink-0"},ko={class:"flex-1 min-w-0"},Co={class:"text-sm font-medium text-gray-900"},So={class:"text-sm text-gray-600 mt-1"},$o={class:"text-xs text-gray-500 mt-1"},Po=["onClick"],Io={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(r){const s=a=>{const g="bg-white/95 border-l-4",b={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${g} ${b[a]||b.info}`},t=a=>{const g={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return g[a]||g.info},l=a=>{const g={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return g[a]||g.info},f=a=>{const b=new Date-a,c=Math.floor(b/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;const _=Math.floor(c/60);return _<24?`${_}h ago`:a.toLocaleDateString()};return(a,g)=>(n(),u("div",ho,[z($t,{name:"notification",tag:"div"},{default:V(()=>[(n(!0),u(Y,null,G(r.notifications,b=>(n(),u("div",{key:b.id,class:N([s(b.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",_o,[o("div",xo,[o("div",wo,[z(y(ye),{name:t(b.type),class:N([l(b.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",ko,[o("p",Co,P(b.title),1),o("p",So,P(b.message),1),o("p",$o,P(f(b.timestamp)),1)])]),o("button",{onClick:c=>a.$emit("remove",b.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[z(y(ye),{name:"x",class:"h-4 w-4"})],8,Po)])],2))),128))]),_:1})]))}},Ro=Ie(Io,[["__scopeId","data-v-d57fd7d2"]]);function To(r,s){let t;return function(...f){const a=()=>{clearTimeout(t),r(...f)};clearTimeout(t),t=setTimeout(a,s)}}function Fo(){const r=A(""),s=A({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=A(""),l=To(S=>{t.value=S},300);oe(r,S=>{l(S)});const f=T(()=>{const S={};return t.value.trim()&&(S.subject=["like",`%${t.value.trim()}%`]),s.value.status&&(S.status=s.value.status),s.value.priority&&(S.priority=s.value.priority),s.value.assignee&&(S.raised_by=s.value.assignee),s.value.tags&&(S.issue_type=s.value.tags),S}),a=T(()=>s.value.sortBy||"creation desc"),g=new Map,b=S=>{if(!S||!Array.isArray(S))return[];const x=JSON.stringify({issuesLength:S.length,searchQuery:r.value.trim(),status:s.value.status,priority:s.value.priority,assignee:s.value.assignee,tags:s.value.tags,sortBy:s.value.sortBy});if(g.has(x))return g.get(x);let w=[...S];if(r.value.trim()){const $=r.value.toLowerCase().trim();w=w.filter(m=>{const h=(m.subject||"").toLowerCase(),L=(m.description||"").toLowerCase();return h.includes($)||L.includes($)})}s.value.status&&(w=w.filter($=>$.status===s.value.status)),s.value.priority&&(w=w.filter($=>$.priority===s.value.priority)),s.value.assignee&&(w=w.filter($=>$.raised_by===s.value.assignee)),s.value.tags&&(w=w.filter($=>$.issue_type===s.value.tags));const d=me({Critical:4,High:3,Medium:2,Low:1});if(w.sort(($,m)=>{const[h,L]=s.value.sortBy.split(" "),D=$[h]||"",B=m[h]||"";let K=0;return h==="creation"||h==="modified"?K=new Date(D)-new Date(B):h==="priority"?K=(d[D]||0)-(d[B]||0):K=D.toString().localeCompare(B.toString()),L==="desc"?-K:K}),g.size>50){const $=g.keys().next().value;g.delete($)}return g.set(x,w),w};let c=null,_=null;const v=S=>{if(!S||!Array.isArray(S))return me([{label:"All Assignees",value:""}]);const x=S.map($=>$.raised_by).filter($=>$&&$.trim()).sort().join("|");if(c&&_===x)return c;const w=[...new Set(S.map($=>$.raised_by).filter($=>$&&$.trim()))],d=me([{label:"All Assignees",value:""},...w.map($=>({label:$,value:$}))]);return c=d,_=x,d},R=()=>{r.value="",t.value="",s.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},I=T(()=>r.value.trim()!==""||s.value.status!==""||s.value.priority!==""||s.value.assignee!==""||s.value.tags!==""||s.value.sortBy!=="creation desc");return{searchQuery:r,filters:s,debouncedSearchQuery:t,apiFilters:f,sortOrder:a,hasActiveFilters:I,filterIssues:b,getAssigneeOptions:v,resetFilters:R}}function Eo(r,s){const t=Pt(),l=A([]),f=A(!1),a=A(!1);let g=null;const b=a.value?15e3:2e3,c=()=>{g&&clearTimeout(g),g=setTimeout(()=>{R()},b)},_=()=>{if(!t||f.value)return;t.emit("doctype_subscribe","Issue"),t.off("list_update"),t.on("list_update",h=>{(h==null?void 0:h.doctype)==="Issue"&&(S()||(l.value.push(h),c()))}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(h=>{t.on(h,L=>{if((L==null?void 0:L.doctype)!=="Issue"||S())return;const D={doctype:"Issue",name:L.name,action:h.includes("create")?"insert":h.includes("delete")?"delete":"update",modified_by:L.modified_by||L.owner,timestamp:new Date().toISOString()};l.value.push(D),c()})}),f.value=!0},v=()=>{if(!t||!f.value)return;t.emit("doctype_unsubscribe","Issue"),t.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(h=>{t.off(h)}),f.value=!1},R=()=>be(this,null,function*(){if(!l.value.length)return;const m=window.location.hash||window.location.pathname;if(!m.includes("issue-tracker")&&!m.includes("issues")){l.value=[],v();return}const h=[...new Set(l.value.map(D=>D.name))],L=h.length;l.value=[];try{yield I(h),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:L,documents:h}}))}catch(D){console.error("Error updating individual rows, falling back to full refresh:",D);try{yield he(),yield _e()}catch(B){console.error("Error in fallback refresh:",B)}}}),I=m=>be(this,null,function*(){try{if(s&&typeof s=="function"){yield s();return}if(!we.data||!Array.isArray(we.data))throw new Error("No issues data available");let h={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(r&&typeof r=="function")try{const L=r();L&&(h=se(se({},h),L))}catch(L){console.warn("Error getting current parameters, using defaults:",L)}yield we.reload(h)}catch(h){throw console.error("Error during targeted refresh:",h),h}}),S=()=>!!document.hidden,x=()=>{l.value=[];try{s&&typeof s=="function"?s():(he(),_e())}catch(m){console.error("Error during manual refresh:",m)}},w=()=>{_()},d=()=>{f.value=!1},$=m=>{console.error("Socket connection error:",m),f.value=!1};return Re(()=>{t&&(t.on("connect",w),t.on("disconnect",d),t.on("connect_error",$),t.connected&&_())}),Ee(()=>{t&&(t.off("connect",w),t.off("disconnect",d),t.off("connect_error",$)),v(),g&&clearTimeout(g)}),{pendingDocumentRefreshes:l,realtimeEventsSetup:f,setupRealtimeUpdates:_,disableRealtimeUpdates:v,manualRefresh:x,processDocumentRefreshes:R}}const Lo={class:"min-h-screen bg-gray-50"},Mo={class:"bg-white shadow-sm border-b"},jo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Do={class:"flex justify-between items-center py-4"},Oo={class:"flex items-center space-x-4"},Ao={class:"flex space-x-4"},Bo={class:"flex items-center space-x-4"},zo={class:"text-sm text-gray-600"},Uo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},No={class:"fixed top-20 right-4 flex flex-col space-y-2"},Ho=["title"],Vo={class:"relative"},qo={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},Wo={__name:"IssueTracker",setup(r){const{searchQuery:s,filters:t,debouncedSearchQuery:l,apiFilters:f,sortOrder:a,getAssigneeOptions:g}=Fo(),b=A(!1),c=A(null),_=A(!1),v=A("team_tickets"),R=()=>{const O={limit_page_length:p.value,limit_start:(H.value-1)*p.value,order_by:a.value};if(_.value)Te(v.value,O),Oe(v.value);else if(b.value&&c.value){const M="name",Q=c.value.name;De(M,Q,O),Ze(M,Q)}else he(se({filters:U.value},O)),_e(U.value)},{pendingDocumentRefreshes:I,realtimeEventsSetup:S,manualRefresh:x}=Eo(()=>({filters:U.value,order_by:a.value,limit_page_length:p.value,limit_start:(H.value-1)*p.value}),R),w=()=>{R()},d=A([]),$=O=>{d.value.push(se({id:Date.now()+Math.random()},O)),setTimeout(()=>{var M;m((M=d.value[d.value.length-1])==null?void 0:M.id)},5e3)},m=O=>{d.value=d.value.filter(M=>M.id!==O)},h=T(()=>_.value?Ne.data||[]:b.value?Ue.data||[]:we.data||[]),L=T(()=>_.value?ct.data||0:b.value?ut.data||0:nt.data||0),D=T(()=>_.value?Ne.loading:b.value?Ue.loading:we.loading),B=T(()=>h.value),K=T(()=>(a.value||"creation desc").split(" ")[0]),te=T(()=>(a.value||"creation desc").split(" ")[1]||"desc"),de=({field:O,direction:M})=>{const Q=`${O} ${M}`;t.value.sortBy=Q},ge=O=>{b.value=!0,c.value=O,s.value=O.subject||O.name,H.value=1;const M="name",Q=O.name;De(M,Q,{limit_page_length:p.value,limit_start:0,order_by:a.value}),Ze(M,Q)},ae=()=>{b.value=!1,c.value=null,s.value="",H.value=1,he({filters:U.value,order_by:a.value,limit_page_length:p.value,limit_start:0}),_e(U.value)},ie=O=>{b.value=!1,c.value=null,_.value=!0,v.value=O,s.value="",H.value=1,Te(O,{limit_page_length:p.value,limit_start:0,order_by:a.value}),Oe(O)},pe=xe(me(os())),k=xe(me(as())),e=xe(me(ns()));let i=null,E=0;const F=T(()=>{const O=h.value.length;return i&&E===O||(i=me(g(h.value)),E=O),i}),H=A(1),p=A(10),C=({page:O,itemsPerPage:M,offset:Q})=>{if(H.value=O,p.value=M,_.value)Te(v.value,{limit_page_length:M,limit_start:Q,order_by:a.value});else if(b.value&&c.value){const Z="name",dt=c.value.name;De(Z,dt,{limit_page_length:M,limit_start:Q,order_by:a.value})}else he({filters:U.value,order_by:a.value,limit_page_length:M,limit_start:Q}),_e(U.value)},U=T(()=>{const O={};return t.value.status&&(O.status=t.value.status),t.value.priority&&(O.priority=t.value.priority),t.value.assignee&&(O.raised_by=t.value.assignee),t.value.tags&&(O.issue_type=t.value.tags),O});let X=null;return oe([U,a],()=>{X&&clearTimeout(X),X=setTimeout(()=>{b.value&&(b.value=!1,c.value=null),_.value&&(_.value=!1,v.value="team_tickets"),H.value=1,he({filters:U.value,order_by:a.value,limit_page_length:p.value,limit_start:0}),_e(U.value)},300)},{deep:!0}),oe(s,O=>{!O&&b.value&&ae()}),Re(()=>{_.value=!0,v.value="team_tickets",Te("team_tickets",{limit_page_length:p.value,limit_start:0,order_by:a.value}),Oe("team_tickets"),window.addEventListener("issueListUpdated",O=>{const{count:M,documents:Q}=O.detail;$({type:"info",title:"List Updated",message:`${M} issue${M>1?"s":""} updated: ${Q.slice(0,3).join(", ")}${Q.length>3?"...":""}`,timestamp:new Date})})}),Ee(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(O,M)=>{const Q=re("router-link");return n(),u("div",Lo,[o("div",Mo,[o("div",jo,[o("div",Do,[o("div",Oo,[M[7]||(M[7]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),o("nav",Ao,[z(Q,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:V(()=>M[5]||(M[5]=[J(" Home ")])),_:1,__:[5]}),z(Q,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:V(()=>M[6]||(M[6]=[J(" Issues ")])),_:1,__:[6]})])]),o("div",Bo,[o("span",zo,P(y(Xe).user),1),z(y(le),{onClick:M[0]||(M[0]=Z=>y(Xe).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:V(()=>M[8]||(M[8]=[J(" Logout ")])),_:1,__:[8]})])])])]),o("div",Uo,[z(zr,{issues:B.value,activeFilter:v.value,onFilterChanged:ie},null,8,["issues","activeFilter"]),z(xr,{searchQuery:y(s),"onUpdate:searchQuery":M[1]||(M[1]=Z=>Je(s)?s.value=Z:null),filters:y(t),"onUpdate:filters":M[2]||(M[2]=Z=>Je(t)?t.value=Z:null),statusOptions:e.value,priorityOptions:pe.value,assigneeOptions:F.value,tagsOptions:k.value,issues:h.value,filteredCount:L.value,onSuggestionSelected:ge},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),z(bo,{issues:B.value,loading:D.value,sortField:K.value,sortDirection:te.value,onSort:de},null,8,["issues","loading","sortField","sortDirection"]),z(Er,{currentPage:H.value,"onUpdate:currentPage":M[3]||(M[3]=Z=>H.value=Z),itemsPerPage:p.value,"onUpdate:itemsPerPage":M[4]||(M[4]=Z=>p.value=Z),totalItems:L.value,onPageChange:C},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",No,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:y(S)?"Real-time updates active":"Real-time updates disabled"},[o("div",Vo,[z(y(ye),{name:y(S)?"wifi":"wifi-off",class:N(["h-5 w-5 transition-colors duration-200",y(S)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:N(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",y(S)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),y(I).length>0?(n(),u("div",qo,P(y(I).length>9?"9+":y(I).length),1)):j("",!0)])],8,Ho),o("button",{onClick:w,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[z(y(ye),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),z(Ro,{notifications:d.value,onRemove:m},null,8,["notifications"])])}}};export{Wo as default};
//# sourceMappingURL=IssueTracker-DWO0x21G.js.map
