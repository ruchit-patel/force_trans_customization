{"version":3,"file":"IssueTracker-BbuHUK95.js","sources":["../../../../frontend/node_modules/@headlessui/vue/dist/hooks/use-resolve-button-type.js","../../../../frontend/node_modules/@headlessui/vue/dist/utils/get-text-value.js","../../../../frontend/node_modules/@headlessui/vue/dist/hooks/use-text-value.js","../../../../frontend/node_modules/@headlessui/vue/dist/components/menu/menu.js","../../../../frontend/node_modules/frappe-ui/src/components/Avatar/Avatar.vue","../../../../frontend/node_modules/frappe-ui/src/components/Dropdown/Dropdown.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListEmptyState.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/utils.js","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListHeaderItem.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListHeader.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListRowItem.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListRow.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListRows.vue","../../../../frontend/node_modules/frappe-ui/src/icons/DownSolid.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListGroupHeader.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListGroupRows.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListGroups.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListSelectBanner.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListView.vue","../../../../frontend/src/data/issues.js","../../../../frontend/src/components/CustomSearchBox.vue","../../../../frontend/src/components/IssueFilters.vue","../../../../frontend/src/components/IssuePagination.vue","../../../../frontend/src/components/IssueStats.vue","../../../../frontend/src/components/IssueTable.vue","../../../../frontend/src/components/RealTimeNotifications.vue","../../../../frontend/node_modules/@tiptap/extension-underline/dist/index.js","../../../../frontend/node_modules/@tiptap/extension-image/dist/index.js","../../../../frontend/node_modules/tiptap-extension-resize-image/esm/index.js","../../../../frontend/node_modules/@tiptap/extension-color/dist/index.js","../../../../frontend/node_modules/@tiptap/extension-font-family/dist/index.js","../../../../frontend/node_modules/@tiptap/extension-highlight/dist/index.js","../../../../frontend/src/components/GroupSelectorDialog.vue","../../../../frontend/src/components/ComposeEmailDialog.vue","../../../../frontend/src/composables/useIssueFilters.js","../../../../frontend/src/composables/useIssueListUpdates.js","../../../../frontend/src/pages/IssueTracker.vue"],"sourcesContent":["import{ref as f,onMounted as i,watchEffect as l}from\"vue\";import{dom as u}from'../utils/dom.js';function r(t,e){if(t)return t;let n=e!=null?e:\"button\";if(typeof n==\"string\"&&n.toLowerCase()===\"button\")return\"button\"}function b(t,e){let n=f(r(t.value.type,t.value.as));return i(()=>{n.value=r(t.value.type,t.value.as)}),l(()=>{var o;n.value||u(e)&&u(e)instanceof HTMLButtonElement&&!((o=u(e))!=null&&o.hasAttribute(\"type\"))&&(n.value=\"button\")}),n}export{b as useResolveButtonType};\n","let a=/([\\u2700-\\u27BF]|[\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])/g;function o(e){var r,i;let n=(r=e.innerText)!=null?r:\"\",t=e.cloneNode(!0);if(!(t instanceof HTMLElement))return n;let u=!1;for(let f of t.querySelectorAll('[hidden],[aria-hidden],[role=\"img\"]'))f.remove(),u=!0;let l=u?(i=t.innerText)!=null?i:\"\":n;return a.test(l)&&(l=l.replace(a,\"\")),l}function g(e){let n=e.getAttribute(\"aria-label\");if(typeof n==\"string\")return n.trim();let t=e.getAttribute(\"aria-labelledby\");if(t){let u=t.split(\" \").map(l=>{let r=document.getElementById(l);if(r){let i=r.getAttribute(\"aria-label\");return typeof i==\"string\"?i.trim():o(r).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(\", \")}return o(e).trim()}export{g as getTextValue};\n","import{ref as n}from\"vue\";import{getTextValue as o}from'../utils/get-text-value.js';import{dom as i}from'../utils/dom.js';function p(a){let t=n(\"\"),r=n(\"\");return()=>{let e=i(a);if(!e)return\"\";let l=e.innerText;if(t.value===l)return r.value;let u=o(e).trim().toLowerCase();return t.value=l,r.value=u,u}}export{p as useTextValue};\n","import{defineComponent as T,ref as R,provide as C,inject as K,onMounted as N,onUnmounted as j,computed as h,nextTick as y,watchEffect as L}from\"vue\";import{Features as E,render as D}from'../../utils/render.js';import{useId as w}from'../../hooks/use-id.js';import{Keys as c}from'../../keyboard.js';import{Focus as S,calculateActiveIndex as B}from'../../utils/calculate-active-index.js';import{dom as m}from'../../utils/dom.js';import{useTreeWalker as U}from'../../hooks/use-tree-walker.js';import{useOpenClosedProvider as $,State as P,useOpenClosed as V}from'../../internal/open-closed.js';import{match as H}from'../../utils/match.js';import{useResolveButtonType as Q}from'../../hooks/use-resolve-button-type.js';import{FocusableMode as _,isFocusableElement as q,sortByDomNode as W,Focus as k,focusFrom as J,restoreFocusIfNecessary as F}from'../../utils/focus-management.js';import{useOutsideClick as z}from'../../hooks/use-outside-click.js';import{useTrackedPointer as G}from'../../hooks/use-tracked-pointer.js';import{useTextValue as X}from'../../hooks/use-text-value.js';var Y=(l=>(l[l.Open=0]=\"Open\",l[l.Closed=1]=\"Closed\",l))(Y||{}),Z=(l=>(l[l.Pointer=0]=\"Pointer\",l[l.Other=1]=\"Other\",l))(Z||{});function ee(r){requestAnimationFrame(()=>requestAnimationFrame(r))}let A=Symbol(\"MenuContext\");function O(r){let b=K(A,null);if(b===null){let l=new Error(`<${r} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,O),l}return b}let Me=T({name:\"Menu\",props:{as:{type:[Object,String],default:\"template\"}},setup(r,{slots:b,attrs:l}){let I=R(1),e=R(null),f=R(null),s=R([]),g=R(\"\"),d=R(null),o=R(1);function t(a=i=>i){let i=d.value!==null?s.value[d.value]:null,u=W(a(s.value.slice()),v=>m(v.dataRef.domRef)),n=i?u.indexOf(i):null;return n===-1&&(n=null),{items:u,activeItemIndex:n}}let p={menuState:I,buttonRef:e,itemsRef:f,items:s,searchQuery:g,activeItemIndex:d,activationTrigger:o,closeMenu:()=>{I.value=1,d.value=null},openMenu:()=>I.value=0,goToItem(a,i,u){let n=t(),v=B(a===S.Specific?{focus:S.Specific,id:i}:{focus:a},{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});g.value=\"\",d.value=v,o.value=u!=null?u:1,s.value=n.items},search(a){let u=g.value!==\"\"?0:1;g.value+=a.toLowerCase();let v=(d.value!==null?s.value.slice(d.value+u).concat(s.value.slice(0,d.value+u)):s.value).find(x=>x.dataRef.textValue.startsWith(g.value)&&!x.dataRef.disabled),M=v?s.value.indexOf(v):-1;M===-1||M===d.value||(d.value=M,o.value=1)},clearSearch(){g.value=\"\"},registerItem(a,i){let u=t(n=>[...n,{id:a,dataRef:i}]);s.value=u.items,d.value=u.activeItemIndex,o.value=1},unregisterItem(a){let i=t(u=>{let n=u.findIndex(v=>v.id===a);return n!==-1&&u.splice(n,1),u});s.value=i.items,d.value=i.activeItemIndex,o.value=1}};return z([e,f],(a,i)=>{var u;p.closeMenu(),q(i,_.Loose)||(a.preventDefault(),(u=m(e))==null||u.focus())},h(()=>I.value===0)),C(A,p),$(h(()=>H(I.value,{[0]:P.Open,[1]:P.Closed}))),()=>{let a={open:I.value===0,close:p.closeMenu};return D({ourProps:{},theirProps:r,slot:a,slots:b,attrs:l,name:\"Menu\"})}}}),Re=T({name:\"MenuButton\",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:\"button\"},id:{type:String,default:()=>`headlessui-menu-button-${w()}`}},setup(r,{attrs:b,slots:l,expose:I}){let e=O(\"MenuButton\");I({el:e.buttonRef,$el:e.buttonRef});function f(o){switch(o.key){case c.Space:case c.Enter:case c.ArrowDown:o.preventDefault(),o.stopPropagation(),e.openMenu(),y(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(S.First)});break;case c.ArrowUp:o.preventDefault(),o.stopPropagation(),e.openMenu(),y(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(S.Last)});break}}function s(o){switch(o.key){case c.Space:o.preventDefault();break}}function g(o){r.disabled||(e.menuState.value===0?(e.closeMenu(),y(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(o.preventDefault(),e.openMenu(),ee(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let d=Q(h(()=>({as:r.as,type:b.type})),e.buttonRef);return()=>{var i;let o={open:e.menuState.value===0},{id:t,...p}=r,a={ref:e.buttonRef,id:t,type:d.value,\"aria-haspopup\":\"menu\",\"aria-controls\":(i=m(e.itemsRef))==null?void 0:i.id,\"aria-expanded\":e.menuState.value===0,onKeydown:f,onKeyup:s,onClick:g};return D({ourProps:a,theirProps:p,slot:o,attrs:b,slots:l,name:\"MenuButton\"})}}}),he=T({name:\"MenuItems\",props:{as:{type:[Object,String],default:\"div\"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${w()}`}},setup(r,{attrs:b,slots:l,expose:I}){let e=O(\"MenuItems\"),f=R(null);I({el:e.itemsRef,$el:e.itemsRef}),U({container:h(()=>m(e.itemsRef)),enabled:h(()=>e.menuState.value===0),accept(t){return t.getAttribute(\"role\")===\"menuitem\"?NodeFilter.FILTER_REJECT:t.hasAttribute(\"role\")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute(\"role\",\"none\")}});function s(t){var p;switch(f.value&&clearTimeout(f.value),t.key){case c.Space:if(e.searchQuery.value!==\"\")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case c.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let i=e.items.value[e.activeItemIndex.value];(p=m(i.dataRef.domRef))==null||p.click()}e.closeMenu(),F(m(e.buttonRef));break;case c.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.Next);case c.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.Previous);case c.Home:case c.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.First);case c.End:case c.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(S.Last);case c.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),y(()=>{var a;return(a=m(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case c.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),y(()=>J(m(e.buttonRef),t.shiftKey?k.Previous:k.Next));break;default:t.key.length===1&&(e.search(t.key),f.value=setTimeout(()=>e.clearSearch(),350));break}}function g(t){switch(t.key){case c.Space:t.preventDefault();break}}let d=V(),o=h(()=>d!==null?(d.value&P.Open)===P.Open:e.menuState.value===0);return()=>{var u,n;let t={open:e.menuState.value===0},{id:p,...a}=r,i={\"aria-activedescendant\":e.activeItemIndex.value===null||(u=e.items.value[e.activeItemIndex.value])==null?void 0:u.id,\"aria-labelledby\":(n=m(e.buttonRef))==null?void 0:n.id,id:p,onKeydown:s,onKeyup:g,role:\"menu\",tabIndex:0,ref:e.itemsRef};return D({ourProps:i,theirProps:a,slot:t,attrs:b,slots:l,features:E.RenderStrategy|E.Static,visible:o.value,name:\"MenuItems\"})}}}),ye=T({name:\"MenuItem\",inheritAttrs:!1,props:{as:{type:[Object,String],default:\"template\"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${w()}`}},setup(r,{slots:b,attrs:l,expose:I}){let e=O(\"MenuItem\"),f=R(null);I({el:f,$el:f});let s=h(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===r.id:!1),g=X(f),d=h(()=>({disabled:r.disabled,get textValue(){return g()},domRef:f}));N(()=>e.registerItem(r.id,d)),j(()=>e.unregisterItem(r.id)),L(()=>{e.menuState.value===0&&s.value&&e.activationTrigger.value!==0&&y(()=>{var n,v;return(v=(n=m(f))==null?void 0:n.scrollIntoView)==null?void 0:v.call(n,{block:\"nearest\"})})});function o(n){if(r.disabled)return n.preventDefault();e.closeMenu(),F(m(e.buttonRef))}function t(){if(r.disabled)return e.goToItem(S.Nothing);e.goToItem(S.Specific,r.id)}let p=G();function a(n){p.update(n)}function i(n){p.wasMoved(n)&&(r.disabled||s.value||e.goToItem(S.Specific,r.id,0))}function u(n){p.wasMoved(n)&&(r.disabled||s.value&&e.goToItem(S.Nothing))}return()=>{let{disabled:n}=r,v={active:s.value,disabled:n,close:e.closeMenu},{id:M,...x}=r;return D({ourProps:{id:M,ref:f,role:\"menuitem\",tabIndex:n===!0?void 0:-1,\"aria-disabled\":n===!0?!0:void 0,disabled:void 0,onClick:o,onFocus:t,onPointerenter:a,onMouseenter:a,onPointermove:i,onMousemove:i,onPointerleave:u,onMouseleave:u},theirProps:{...l,...x},slot:v,attrs:l,slots:b,name:\"MenuItem\"})}}});export{Me as Menu,Re as MenuButton,ye as MenuItem,he as MenuItems};\n","<template>\n  <div\n    class=\"relative inline-block shrink-0\"\n    :class=\"[sizeClasses, shapeClasses]\"\n  >\n    <img\n      v-if=\"image && !imgFetchError\"\n      :src=\"image\"\n      :alt=\"label\"\n      :class=\"[shapeClasses, 'h-full w-full object-cover']\"\n      @error=\"(err) => handleImageError(err)\"\n    />\n    <div\n      v-else\n      class=\"flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none\"\n      :class=\"[labelClasses, shapeClasses]\"\n    >\n      <div :class=\"iconClasses\" v-if=\"$slots.default\">\n        <slot></slot>\n      </div>\n      <template v-else>\n        {{ label && label[0] }}\n      </template>\n    </div>\n    <div\n      v-if=\"$slots.indicator\"\n      :class=\"[\n        'absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white',\n        indicatorContainerClasses,\n      ]\"\n    >\n      <div :class=\"indicatorClasses\">\n        <slot name=\"indicator\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport type { AvatarProps } from './types'\n\nconst imgFetchError = ref(false)\n\nconst props = withDefaults(defineProps<AvatarProps>(), {\n  size: 'md',\n  shape: 'circle',\n})\n\nconst shapeClasses = computed(() => {\n  return {\n    circle: 'rounded-full',\n    square: {\n      xs: 'rounded-[4px]',\n      sm: 'rounded-[5px]',\n      md: 'rounded-[5px]',\n      lg: 'rounded-[6px]',\n      xl: 'rounded-[6px]',\n      '2xl': 'rounded-[8px]',\n      '3xl': 'rounded-[10px]',\n    }[props.size],\n  }[props.shape]\n})\n\nconst sizeClasses = computed(() => {\n  return {\n    xs: 'w-4 h-4',\n    sm: 'w-5 h-5',\n    md: 'w-6 h-6',\n    lg: 'w-7 h-7',\n    xl: 'w-8 h-8',\n    '2xl': 'w-10 h-10',\n    '3xl': 'w-11.5 h-11.5',\n  }[props.size]\n})\n\nconst labelClasses = computed(() => {\n  let sizeClass = {\n    xs: 'text-2xs',\n    sm: 'text-sm',\n    md: 'text-base',\n    lg: 'text-base',\n    xl: 'text-lg',\n    '2xl': 'text-xl',\n    '3xl': 'text-2xl',\n  }[props.size]\n  return ['font-medium', sizeClass]\n})\n\nconst indicatorContainerClasses = computed(() => {\n  return {\n    xs: '-mr-[.1rem] -mb-[.1rem] h-2 w-2',\n    sm: '-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]',\n    md: '-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5',\n    lg: '-mr-[.1rem] -mb-[.1rem] h-3 w-3',\n    xl: '-mr-[.1rem] -mb-[.1rem] h-3 w-3',\n    '2xl': '-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5',\n    '3xl': '-mr-[.2rem] -mb-[.2rem] h-4 w-4',\n  }[props.size]\n})\n\nconst indicatorClasses = computed(() => {\n  return {\n    xs: 'h-1 w-1',\n    sm: 'h-[5px] w-[5px]',\n    md: 'h-1.5 w-1.5',\n    lg: 'h-2 w-2',\n    xl: 'h-2 w-2',\n    '2xl': 'h-2.5 w-2.5',\n    '3xl': 'h-3 w-3',\n  }[props.size]\n})\n\nconst iconClasses = computed(() => {\n  return {\n    xs: 'h-2.5 w-2.5',\n    sm: 'h-3 w-3',\n    md: 'h-4 w-4',\n    lg: 'h-4 w-4',\n    xl: 'h-4 w-4',\n    '2xl': 'h-5 w-5',\n    '3xl': 'h-5 w-5',\n  }[props.size]\n})\n\nfunction handleImageError(err) {\n  if (err.type) {\n    imgFetchError.value = true\n  }\n}\n</script>\n","<template>\n  <Menu as=\"div\" class=\"relative inline-block text-left\" v-slot=\"{ open }\">\n    <Popover\n      :transition=\"dropdownTransition\"\n      :show=\"open\"\n      :placement=\"popoverPlacement\"\n    >\n      <template #target>\n        <MenuButton as=\"div\">\n          <slot v-if=\"$slots.default\" v-bind=\"{ open }\" />\n          <Button v-else :active=\"open\" v-bind=\"button\">\n            {{ button ? button?.label || null : 'Options' }}\n          </Button>\n        </MenuButton>\n      </template>\n\n      <template #body>\n        <MenuItems\n          class=\"mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none\"\n          :class=\"{\n            'left-0 origin-top-left': placement == 'left',\n            'right-0 origin-top-right': placement == 'right',\n            'inset-x-0 origin-top': placement == 'center',\n          }\"\n        >\n          <div v-for=\"group in groups\" :key=\"group.key\" class=\"p-1.5\">\n            <div\n              v-if=\"group.group && !group.hideLabel\"\n              class=\"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6\"\n            >\n              {{ group.group }}\n            </div>\n            <MenuItem\n              v-for=\"item in group.items\"\n              :key=\"item.label\"\n              v-slot=\"{ active }\"\n            >\n              <component\n                v-if=\"item.component\"\n                :is=\"item.component\"\n                :active=\"active\"\n              />\n              <button\n                v-else\n                :class=\"[\n                  active ? 'bg-surface-gray-3' : 'text-ink-gray-6',\n                  'group flex h-7 w-full items-center rounded px-2 text-base',\n                ]\"\n                @click=\"item.onClick\"\n              >\n                <FeatherIcon\n                  v-if=\"item.icon && typeof item.icon === 'string'\"\n                  :name=\"item.icon\"\n                  class=\"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6\"\n                  aria-hidden=\"true\"\n                />\n                <component\n                  class=\"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6\"\n                  v-else-if=\"item.icon\"\n                  :is=\"item.icon\"\n                />\n                <span class=\"whitespace-nowrap text-ink-gray-7\">\n                  {{ item.label }}\n                </span>\n              </button>\n            </MenuItem>\n          </div>\n        </MenuItems>\n      </template>\n    </Popover>\n  </Menu>\n</template>\n\n<script setup lang=\"ts\">\nimport { Menu, MenuButton, MenuItems, MenuItem } from '@headlessui/vue'\nimport { Popover } from '../Popover'\nimport { Button } from '../Button'\nimport FeatherIcon from '../FeatherIcon.vue'\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport type {\n  DropdownProps,\n  DropdownOption,\n  DropdownGroupOption,\n} from './types'\n\nconst router = useRouter()\n\nconst props = withDefaults(defineProps<DropdownProps>(), {\n  options: () => [],\n  placement: 'left',\n})\n\nconst normalizeDropdownItem = (option: DropdownOption) => {\n  let onClick = () => {\n    if (option.route) {\n      router.push(option.route)\n    } else if (option.onClick) {\n      option.onClick()\n    }\n  }\n\n  return {\n    label: option.label,\n    icon: option.icon,\n    component: option.component,\n    onClick,\n  }\n}\n\nconst filterOptions = (options: DropdownOption[]) => {\n  return (options || [])\n    .filter(Boolean)\n    .filter((option) => (option.condition ? option.condition() : true))\n    .map((option) => normalizeDropdownItem(option))\n}\n\nconst groups = computed(() => {\n  let groups: DropdownGroupOption[] = []\n  let currentGroup: DropdownGroupOption | null = null\n  let i = 0\n\n  for (let option of props.options) {\n    if (option == null) {\n      continue\n    }\n\n    if ('group' in option) {\n      if (currentGroup) {\n        groups.push(currentGroup)\n        currentGroup = null\n      }\n      let groupOption = {\n        key: i,\n        ...option,\n        items: filterOptions(option.items),\n      } as DropdownGroupOption\n      groups.push(groupOption)\n    } else {\n      if (!currentGroup) {\n        currentGroup = {\n          key: i,\n          group: '',\n          hideLabel: true,\n          items: [],\n        } as DropdownGroupOption\n      }\n      currentGroup.items.push(...filterOptions([option]))\n    }\n    i++\n  }\n\n  if (currentGroup) {\n    groups.push(currentGroup)\n  }\n\n  return groups\n})\n\nconst dropdownTransition = computed(() => {\n  return {\n    enterActiveClass: 'transition duration-100 ease-out',\n    enterFromClass: 'transform scale-95 opacity-0',\n    enterToClass: 'transform scale-100 opacity-100',\n    leaveActiveClass: 'transition duration-75 ease-in',\n    leaveFromClass: 'transform scale-100 opacity-100',\n    leaveToClass: 'transform scale-95 opacity-0',\n  }\n})\n\nconst popoverPlacement = computed(() => {\n  if (props.placement === 'left') return 'bottom-start'\n  if (props.placement === 'right') return 'bottom-end'\n  if (props.placement === 'center') return 'bottom-center'\n  return 'bottom'\n})\n</script>\n","<template>\n  <div\n    class=\"flex h-full w-full flex-col items-center justify-center text-base\"\n  >\n    <slot>\n      <div class=\"text-xl font-medium\">{{ list.options.emptyState.title }}</div>\n      <div class=\"mt-1 text-base text-ink-gray-5\">\n        {{ list.options.emptyState.description }}\n      </div>\n      <Button\n        v-if=\"list.options.emptyState.button\"\n        v-bind=\"list.options.emptyState.button\"\n        class=\"mt-4\"\n      ></Button>\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport { inject } from 'vue'\nimport { Button } from '../Button'\n\nconst list = inject('list')\n</script>\n","export function getGridTemplateColumns(columns, withCheckbox = true) {\n  let checkBoxWidth = withCheckbox ? '14px ' : ''\n  let columnsWidth = columns\n    .map((col) => {\n      let width = col.width || 1\n      if (typeof width === 'number') {\n        return width + 'fr'\n      }\n      return width\n    })\n    .join(' ')\n  return checkBoxWidth + columnsWidth\n}\n\nexport const alignmentMap = {\n  left: 'justify-start',\n  start: 'justify-start',\n  center: 'justify-center',\n  middle: 'justify-center',\n  right: 'justify-end',\n  end: 'justify-end',\n}\n","<template>\n  <div\n    ref=\"columnRef\"\n    class=\"group relative flex items-center\"\n    :class=\"item.align ? alignmentMap[item.align] : 'justify-between'\"\n  >\n    <div\n      class=\"flex items-center space-x-2 truncate text-sm text-ink-gray-5\"\n      :class=\"$attrs.class\"\n    >\n      <slot name=\"prefix\" v-bind=\"{ item }\" />\n      <slot>\n        <div class=\"truncate\">\n          {{ item.label }}\n        </div>\n      </slot>\n      <slot name=\"suffix\" v-bind=\"{ item }\" />\n    </div>\n    <slot v-if=\"list.options.resizeColumn\" name=\"resizer\" v-bind=\"{ item }\">\n      <div\n        class=\"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center\"\n        @mousedown=\"startResizing\"\n      >\n        <div\n          ref=\"resizer\"\n          class=\"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400\"\n        />\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport { alignmentMap } from './utils'\nimport { useDebounceFn } from '@vueuse/core'\nimport { ref, computed, inject } from 'vue'\n\nconst props = defineProps({\n  item: {\n    type: Object,\n    required: true,\n  },\n  debounce: {\n    type: Number,\n    default: 1000,\n  },\n})\n\nconst emit = defineEmits(['columnWidthUpdated'])\n\nconst resizer = ref(null)\nconst columnRef = ref(null)\n\nconst widthInPx = computed(() => {\n  if (typeof props.item.width === 'string') {\n    const parsedWidth = parseInt(props.item.width)\n    if (props.item.width.includes('rem')) {\n      return parsedWidth * 16\n    } else if (props.item.width.includes('px')) {\n      return parsedWidth\n    }\n  }\n  return columnRef.value.offsetWidth\n})\n\nconst startResizing = (e) => {\n  const initialX = e.clientX\n  const initialWidth = widthInPx.value\n  const onMouseMove = (e) => {\n    document.body.classList.add('select-none')\n    document.body.classList.add('cursor-col-resize')\n    resizer.value.style.backgroundColor = 'rgb(199 199 199)'\n    let newWidth = initialWidth + (e.clientX - initialX)\n\n    props.item.width = `${newWidth < 50 ? 50 : newWidth}px`\n    updateWidth(props.item.width)\n  }\n  const onMouseUp = () => {\n    document.body.classList.remove('select-none')\n    document.body.classList.remove('cursor-col-resize')\n    resizer.value.style.backgroundColor = ''\n    window.removeEventListener('mousemove', onMouseMove)\n    window.removeEventListener('mouseup', onMouseUp)\n  }\n  window.addEventListener('mousemove', onMouseMove)\n  window.addEventListener('mouseup', onMouseUp)\n}\n\nconst updateWidth = useDebounceFn((width) => {\n  props.item.width = width\n  emit('columnWidthUpdated')\n}, props.debounce)\n\nconst list = inject('list')\n</script>\n","<template>\n  <div\n    class=\"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2\"\n    :style=\"{\n      gridTemplateColumns: getGridTemplateColumns(\n        list.columns,\n        list.options.selectable,\n      ),\n    }\"\n  >\n    <Checkbox\n      v-if=\"list.options.selectable\"\n      class=\"cursor-pointer duration-300\"\n      :modelValue=\"list.allRowsSelected\"\n      @click.stop=\"list.toggleAllRows\"\n    />\n    <slot>\n      <ListHeaderItem\n        v-for=\"column in list.columns\"\n        :key=\"column.key\"\n        :item=\"column\"\n        @columnWidthUpdated=\"emit('columnWidthUpdated', column)\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport Checkbox from '../Checkbox/Checkbox.vue'\nimport ListHeaderItem from './ListHeaderItem.vue'\nimport { getGridTemplateColumns } from './utils'\nimport { inject } from 'vue'\n\nconst emit = defineEmits(['columnWidthUpdated'])\n\nconst list = inject('list')\n</script>\n","<template>\n  <div class=\"flex items-center space-x-2\" :class=\"alignmentMap[align]\">\n    <slot name=\"prefix\">\n      <component\n        v-if=\"column.prefix\"\n        :is=\"\n          typeof column.prefix === 'function'\n            ? column.prefix({ row })\n            : column.prefix\n        \"\n      />\n    </slot>\n    <Tooltip\n      v-bind=\"\n        list.options.showTooltip\n          ? {\n              text: tooltip,\n            }\n          : { text: '' }\n      \"\n    >\n      <slot v-bind=\"{ label }\">\n        <div class=\"truncate text-base\">{{ label }}</div>\n      </slot>\n    </Tooltip>\n    <slot name=\"suffix\" />\n  </div>\n</template>\n<script setup>\nimport { computed, inject } from 'vue'\nimport { Tooltip } from '../../index'\nimport { alignmentMap } from './utils'\n\nconst props = defineProps({\n  column: {\n    type: Object,\n    default: {},\n  },\n  row: {\n    type: Object,\n    default: {},\n  },\n  item: {\n    type: [String, Number, Object],\n    default: '',\n  },\n  align: {\n    type: String,\n    default: 'left',\n  },\n})\n\nconst label = computed(() => {\n  if (props.column?.getLabel) return props.column?.getLabel({ row: props.row })\n  return getValue(props.item).label || ''\n})\n\nconst tooltip = computed(() => {\n  if (!list.value.options.showTooltip) return ''\n  return props.column.getTooltip\n    ? props.column.getTooltip(props.row)\n    : getValue(props.item).label\n})\n\nfunction getValue(value) {\n  if (value && typeof value === 'object') {\n    return value\n  }\n  return { label: value }\n}\n\nconst list = inject('list')\n</script>\n","<template>\n  <component\n    :is=\"list.options.getRowRoute ? 'router-link' : 'div'\"\n    :class=\"[\n      roundedClass,\n      isSelected || isActive ? 'bg-surface-gray-2' : '',\n      isHoverable ? 'cursor-pointer' : '',\n      isHoverable\n        ? isSelected || isActive\n          ? 'hover:bg-surface-gray-3'\n          : 'hover:bg-surface-menu-bar'\n        : '',\n    ]\"\n    class=\"flex flex-col transition-all duration-300 ease-in-out\"\n    v-bind=\"{\n      to: list.options.getRowRoute ? list.options.getRowRoute(row) : undefined,\n      onClick: (e) => onRowClick(row, e),\n    }\"\n  >\n    <component\n      :is=\"list.options.getRowRoute ? 'template' : 'button'\"\n      class=\"[all:unset] hover:[all:unset]\"\n    >\n      <div\n        class=\"grid items-center space-x-4 px-2\"\n        :style=\"{\n          height: rowHeight,\n          gridTemplateColumns: getGridTemplateColumns(\n            list.columns,\n            list.options.selectable,\n          ),\n        }\"\n      >\n        <div\n          v-if=\"list.options.selectable\"\n          class=\"w-fit pr-2 py-3 flex\"\n          @click.stop.prevent\n          @dblclick.stop\n        >\n          <Checkbox\n            :modelValue=\"isSelected\"\n            class=\"cursor-pointer duration-300\"\n            @click.stop=\"list.toggleRow(row[list.rowKey])\"\n          />\n        </div>\n        <div\n          v-for=\"(column, i) in list.columns\"\n          :key=\"column.key\"\n          :class=\"[\n            alignmentMap[column.align],\n            i == 0 ? 'text-ink-gray-9' : 'text-ink-gray-7',\n          ]\"\n        >\n          <slot v-bind=\"{ idx: i, column, item: row[column.key], isActive }\">\n            <component\n              v-if=\"list.slots.cell\"\n              :is=\"list.slots.cell\"\n              v-bind=\"{\n                column,\n                row,\n                item: row[column.key],\n                align: column.align,\n              }\"\n            />\n            <ListRowItem\n              v-else\n              :column=\"column\"\n              :row=\"row\"\n              :item=\"row[column.key]\"\n              :align=\"column.align\"\n            />\n          </slot>\n        </div>\n      </div>\n      <div\n        v-if=\"!isLastRow\"\n        class=\"h-px border-t\"\n        :class=\"\n          roundedClass === 'rounded' || roundedClass?.includes?.('rounded-b')\n            ? 'mx-2 border-outline-gray-1'\n            : 'border-t-[--surface-gray-2]'\n        \"\n      />\n    </component>\n  </component>\n</template>\n\n<script setup>\nimport Checkbox from '../Checkbox/Checkbox.vue'\nimport ListRowItem from './ListRowItem.vue'\nimport { alignmentMap, getGridTemplateColumns } from './utils'\nimport { computed, inject, ref } from 'vue'\n\nconst props = defineProps({\n  row: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst list = inject('list')\n\nconst isLastRow = computed(() => {\n  if (!list.value.rows?.length) return false\n  return (\n    list.value.rows[list.value.rows.length - 1][list.value.rowKey] ===\n    props.row[list.value.rowKey]\n  )\n})\n\nconst isSelected = computed(() => {\n  return list.value.selections.has(props.row[list.value.rowKey])\n})\nconst isActive = computed(\n  () =>\n    list.value.options.enableActive &&\n    list.value.activeRow.value === props.row.name,\n)\n\nconst isHoverable = computed(() => {\n  return list.value.options.getRowRoute || list.value.options.onRowClick\n})\n\nconst rowHeight = computed(() => {\n  if (typeof list.value.options.rowHeight === 'number') {\n    return `${list.value.options.rowHeight}px`\n  }\n  return list.value.options.rowHeight\n})\n\nconst roundedClass = computed(() => {\n  if (!isSelected.value) return 'rounded'\n  const selections = [...list.value.selections]\n  let groups = list.value.rows[0]?.group\n    ? list.value.rows.map((k) => k.rows)\n    : [list.value.rows]\n\n  for (let rows of groups) {\n    let currentIndex = rows.findIndex((k) => k == props.row)\n    if (currentIndex === -1) continue\n    let atBottom = !selections.includes(rows[currentIndex + 1]?.name)\n    let atTop = !selections.includes(rows[currentIndex - 1]?.name)\n    return (atBottom ? 'rounded-b ' : '') + (atTop ? 'rounded-t' : '')\n  }\n})\n\nconst onRowClick = (row, e) => {\n  if (list.value.options.onRowClick) list.value.options.onRowClick(row, e)\n  if (list.value.activeRow.value === row.name) {\n    list.value.activeRow.value = null\n  } else {\n    list.value.activeRow.value = row.name\n  }\n}\n</script>\n","<template>\n  <div class=\"h-full overflow-y-auto\">\n    <slot>\n      <ListRow v-for=\"row in list.rows\" :key=\"row[list.rowKey]\" :row=\"row\" />\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport ListRow from './ListRow.vue'\nimport { inject } from 'vue'\n\nconst list = inject('list')\n</script>\n","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\">\n    <path\n      fill=\"currentColor\"\n      d=\"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z\"\n    />\n  </svg>\n</template>\n","<template>\n  <div class=\"flex items-center\">\n    <button\n      @click=\"toggleGroup\"\n      class=\"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2\"\n    >\n      <DownSolid\n        class=\"h-4 w-4 text-ink-gray-6 transition-transform duration-200\"\n        :class=\"[group.collapsed ? '-rotate-90' : '']\"\n      />\n    </button>\n    <slot>\n      <div class=\"w-full py-1.5 pr-2\">\n        <component\n          v-if=\"list.slots['group-header']\"\n          :is=\"list.slots['group-header']\"\n          v-bind=\"{ group }\"\n        />\n        <span v-else class=\"text-base font-medium leading-6\">\n          {{ group.group }}\n        </span>\n      </div>\n    </slot>\n  </div>\n  <div class=\"mx-2 h-px border-t border-outline-gray-modals\"></div>\n</template>\n<script setup>\nimport { inject } from 'vue'\nimport DownSolid from '../../icons/DownSolid.vue'\n\nconst props = defineProps({\n  group: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst list = inject('list')\n\nfunction toggleGroup() {\n  if (props.group.collapsed == null) {\n    props.group.collapsed = false\n  }\n  props.group.collapsed = !props.group.collapsed\n}\n</script>\n","<template>\n  <div class=\"mb-5 mt-2\" v-if=\"!group.collapsed\">\n    <slot>\n      <ListRow v-for=\"row in group.rows\" :key=\"row[list.rowKey]\" :row=\"row\" />\n    </slot>\n  </div>\n</template>\n<script setup>\nimport ListRow from './ListRow.vue'\nimport { inject } from 'vue'\n\nconst props = defineProps({\n  group: {\n    type: Object,\n    required: true,\n  },\n})\nconst list = inject('list')\n</script>\n","<template>\n  <div class=\"h-full overflow-y-auto\">\n    <div v-for=\"group in list.rows\" :key=\"group.group\">\n      <slot>\n        <ListGroupHeader :group=\"group\">\n          <slot\n            name=\"group-header\"\n            v-if=\"$slots['group-header']\"\n            v-bind=\"{ group }\"\n          />\n        </ListGroupHeader>\n        <ListGroupRows :group=\"group\" />\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport ListGroupHeader from './ListGroupHeader.vue'\nimport ListGroupRows from './ListGroupRows.vue'\nimport { inject } from 'vue'\n\nconst list = inject('list')\n</script>\n","<template>\n  <transition\n    enter-active-class=\"duration-300 ease-out\"\n    enter-from-class=\"transform opacity-0\"\n    enter-to-class=\"opacity-100\"\n    leave-active-class=\"duration-300 ease-in\"\n    leave-from-class=\"opacity-100\"\n    leave-to-class=\"transform opacity-0\"\n  >\n    <div\n      v-if=\"list.selections.size\"\n      class=\"absolute inset-x-0 bottom-6 mx-auto w-max text-base\"\n    >\n      <div\n        class=\"flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl\"\n        :class=\"$attrs.class\"\n      >\n        <slot\n          v-bind=\"{\n            selections: list.selections,\n            allRowsSelected: list.allRowsSelected,\n            selectAll: () => list.toggleAllRows(true),\n            unselectAll: () => list.toggleAllRows(false),\n          }\"\n        >\n          <div\n            class=\"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9\"\n          >\n            <div class=\"flex items-center space-x-3\">\n              <Checkbox\n                :modelValue=\"true\"\n                :disabled=\"true\"\n                class=\"text-ink-gray-9\"\n              />\n              <div>{{ selectedText }}</div>\n            </div>\n            <div class=\"mr-3\">\n              <slot\n                name=\"actions\"\n                v-bind=\"{\n                  selections: list.selections,\n                  allRowsSelected: list.allRowsSelected,\n                  selectAll: () => list.toggleAllRows(true),\n                  unselectAll: () => list.toggleAllRows(false),\n                }\"\n              />\n            </div>\n          </div>\n          <div class=\"flex items-center space-x-1\">\n            <Button\n              class=\"w- text-ink-gray-7\"\n              :disabled=\"list.allRowsSelected\"\n              :class=\"list.allRowsSelected ? 'cursor-not-allowed' : ''\"\n              variant=\"ghost\"\n              @click=\"list.toggleAllRows(true)\"\n            >\n              Select all\n            </Button>\n            <Button\n              icon=\"x\"\n              variant=\"ghost\"\n              @click=\"list.toggleAllRows(false)\"\n            />\n          </div>\n        </slot>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script setup>\nimport Checkbox from '../Checkbox/Checkbox.vue'\nimport { Button } from '../Button'\nimport { computed, inject } from 'vue'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst list = inject('list')\n\nlet selectedText = computed(() => {\n  return list.value.options.selectionText(list.value.selections.size)\n})\n</script>\n","<template>\n  <div class=\"relative flex w-full flex-1 flex-col overflow-x-auto\">\n    <div\n      class=\"flex w-max min-w-full flex-col overflow-y-hidden\"\n      :class=\"$attrs.class\"\n      :style=\"$attrs.style\"\n    >\n      <slot v-bind=\"{ showGroupedRows, selectable }\">\n        <ListHeader />\n        <template v-if=\"props.rows.length\">\n          <ListGroups v-if=\"showGroupedRows\" />\n          <ListRows v-else />\n        </template>\n        <ListEmptyState v-else />\n        <ListSelectBanner v-if=\"selectable\" />\n      </slot>\n    </div>\n  </div>\n</template>\n<script setup>\nimport ListEmptyState from './ListEmptyState.vue'\nimport ListHeader from './ListHeader.vue'\nimport ListRows from './ListRows.vue'\nimport ListGroups from './ListGroups.vue'\nimport ListSelectBanner from './ListSelectBanner.vue'\nimport { ref, reactive, computed, provide, watch, useSlots } from 'vue'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  columns: {\n    type: Array,\n    default: [],\n  },\n  rows: {\n    type: Array,\n    default: [],\n  },\n  rowKey: {\n    type: String,\n    required: true,\n  },\n  options: {\n    type: Object,\n    default: () => ({\n      getRowRoute: null,\n      onRowClick: null,\n      showTooltip: true,\n      selectable: true,\n      resizeColumn: false,\n      rowHeight: 40,\n      emptyState: {\n        title: 'No Data',\n        description: 'No data available',\n      },\n    }),\n  },\n})\n\nconst slots = useSlots()\n\nlet selections = reactive(new Set())\nlet activeRow = ref(null)\n\nconst emit = defineEmits(['update:selections', 'update:active-row'])\n\nwatch(selections, (value) => {\n  if (selections.size) {\n    activeRow.value = null\n  }\n  emit('update:selections', value)\n})\n\nwatch(activeRow, (value) => {\n  emit('update:active-row', value)\n})\n\nlet _options = computed(() => {\n  function defaultTrue(value) {\n    return value === undefined ? true : value\n  }\n\n  function defaultFalse(value) {\n    return value === undefined ? false : value\n  }\n\n  return {\n    getRowRoute: props.options.getRowRoute || null,\n    onRowClick: props.options.onRowClick || null,\n    showTooltip: defaultTrue(props.options.showTooltip),\n    selectionText:\n      props.options.selectionText ||\n      ((val) => (val === 1 ? '1 row selected' : `${val} rows selected`)),\n    enableActive: defaultFalse(props.options.enableActive),\n    selectable: defaultTrue(props.options.selectable),\n    resizeColumn: defaultFalse(props.options.resizeColumn),\n    rowHeight: props.options.rowHeight || 40,\n    emptyState: props.options.emptyState,\n  }\n})\n\nconst allRowsSelected = computed(() => {\n  if (!props.rows.length) return false\n  if (showGroupedRows.value) {\n    return (\n      selections.size ===\n      props.rows.reduce((acc, row) => acc + row.rows.length, 0)\n    )\n  }\n  return selections.size === props.rows.length\n})\n\nconst selectable = computed(() => {\n  return _options.value.selectable\n})\n\nlet showGroupedRows = computed(() => {\n  return props.rows.every(\n    (row) => row.group && row.rows && Array.isArray(row.rows)\n  )\n})\n\nfunction toggleRow(row) {\n  if (!selections.delete(row)) {\n    selections.add(row)\n  }\n}\n\nfunction toggleAllRows(select) {\n  if (!select || allRowsSelected.value) {\n    selections.clear()\n    return\n  }\n  if (showGroupedRows.value) {\n    props.rows.forEach((row) => {\n      row.rows.forEach((r) => selections.add(r[props.rowKey]))\n    })\n    return\n  }\n  props.rows.forEach((row) => selections.add(row[props.rowKey]))\n}\n\nprovide(\n  'list',\n  computed(() => ({\n    rowKey: props.rowKey,\n    rows: props.rows,\n    columns: props.columns,\n    options: _options.value,\n    selections: selections,\n    activeRow: activeRow,\n    allRowsSelected: allRowsSelected.value,\n    slots: slots,\n    toggleRow,\n    toggleAllRows,\n  }))\n)\n\ndefineExpose({\n  selections,\n  allRowsSelected,\n  toggleRow,\n  toggleAllRows,\n})\n</script>\n","import { createResource } from \"frappe-ui\"\n\n// Main resource for fetching Issue doctype data with child table support\nexport const issuesResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_issues_with_assignments\",\n\tmakeParams(params) {\n\t\t// Handle null/undefined params explicitly\n\t\tconst safeParams = params || {}\n\t\tconst limit_page_length = safeParams.limit_page_length || 10\n\t\tconst limit_start = safeParams.limit_start || 0\n\t\t// Handle both old and new filter formats\n\t\tconst filters = safeParams.filters || {}\n\t\tconst order_by = safeParams.order_by || \"creation desc\"\n\n\t\tconsole.log('issuesResource params:', {\n\t\t\tlimit_page_length,\n\t\t\tlimit_start,\n\t\t\tfilters,\n\t\t\torder_by\n\t\t})\n\n\t\treturn {\n\t\t\tlimit_page_length,\n\t\t\tlimit_start,\n\t\t\tfilters,\n\t\t\torder_by,\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issues:\", error)\n\t\t// Show user-friendly error message using Frappe UI toast\n\t\tif (window.$toast) {\n\t\t\twindow.$toast({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\ttext: \"Failed to load issues. Please try again.\",\n\t\t\t\ticon: \"x\",\n\t\t\t\ticonClasses: \"text-red-600\",\n\t\t\t})\n\t\t}\n\t},\n\tauto: true, // Auto-fetch on component mount\n})\n\n// Resource for getting total count of issues (for pagination)\nexport const issuesCountResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_issues_count_with_filters\",\n\tmakeParams(params) {\n\t\t// Handle null/undefined params explicitly\n\t\tconst safeParams = params || {}\n\t\t// Support both old object format and new array format\n\t\tconst filters = safeParams.filters || safeParams || {}\n\t\t\n\t\tconsole.log('issuesCountResource filters:', filters)\n\t\t\n\t\treturn {\n\t\t\tfilters,\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issues count:\", error)\n\t},\n})\n\n// Helper function to reload issues with new parameters\nexport function reloadIssues(params = {}) {\n\tconst reloadParams = {\n\t\tlimit_page_length: params.limit_page_length || 10,\n\t\tlimit_start: params.limit_start || 0,\n\t\tfilters: params.filters || {},\n\t\torder_by: params.order_by || \"creation desc\",\n\t}\n\t\n\tconsole.log('reloadIssues with params:', reloadParams)\n\treturn issuesResource.reload(reloadParams)\n}\n\n// Helper function to get issues count with filters\nexport function getIssuesCount(filters = {}) {\n\tconsole.log('getIssuesCount with filters:', filters)\n\treturn issuesCountResource.reload(filters)\n}\n\n// Resource for fetching a single issue with assignments\nexport const singleIssueResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_single_issue_with_assignments\",\n\tmakeParams(issueName) {\n\t\treturn {\n\t\t\tissue_name: issueName\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch single issue:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to fetch a single issue\nexport function fetchSingleIssue(issueName) {\n\treturn singleIssueResource.reload(issueName)\n}\n\n// Resource for fetching Issue Priority options\nexport const issuePriorityResource = createResource({\n\turl: \"frappe.client.get_list\",\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: \"Issue Priority\",\n\t\t\tfields: [\"name\"],\n\t\t\tlimit_page_length: 0, // Get all priorities\n\t\t\torder_by: \"name asc\",\n\t\t}\n\t},\n\tcache: \"IssuePriority\", // Cache for 5 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issue priorities:\", error)\n\t},\n\tauto: true,\n})\n\n// Resource for fetching Issue Type options\nexport const issueTypeResource = createResource({\n\turl: \"frappe.client.get_list\",\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: \"Issue Type\",\n\t\t\tfields: [\"name\"],\n\t\t\tlimit_page_length: 0, // Get all issue types\n\t\t\torder_by: \"name asc\",\n\t\t}\n\t},\n\tcache: \"IssueType\", // Cache for 5 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issue types:\", error)\n\t},\n\tauto: true,\n})\n\n// Resource for fetching Project options\nexport const projectResource = createResource({\n\turl: \"frappe.client.get_list\",\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: \"Project\",\n\t\t\tfields: [\"name\", \"project_name\", \"status\"],\n\t\t\tfilters: {\n\t\t\t\tstatus: [\"!=\", \"Cancelled\"], // Only active projects\n\t\t\t},\n\t\t\tlimit_page_length: 0, // Get all projects\n\t\t\torder_by: \"name asc\",\n\t\t}\n\t},\n\tcache: \"Project\", // Cache for 5 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch projects:\", error)\n\t},\n\tauto: true,\n})\n\n// Memoized helper functions to get dropdown options with caching and data freshness checks\nlet priorityOptionsCache = null\nlet priorityDataHash = null\nlet issueTypeOptionsCache = null\nlet issueTypeDataHash = null\nlet projectOptionsCache = null\nlet projectDataHash = null\n\nexport function getPriorityOptions() {\n\tconst currentData = issuePriorityResource.data || []\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Return cached result if data hasn't changed\n\tif (priorityOptionsCache && priorityDataHash === currentHash) {\n\t\treturn priorityOptionsCache\n\t}\n\t\n\tconst options = [\n\t\t{ label: \"All Priority\", value: \"\" },\n\t\t...currentData.map((p) => ({\n\t\t\tlabel: p.name,\n\t\t\tvalue: p.name,\n\t\t})),\n\t]\n\t\n\t// Cache the result with data hash\n\tpriorityOptionsCache = Object.freeze(options)\n\tpriorityDataHash = currentHash\n\treturn priorityOptionsCache\n}\n\nexport function getIssueTypeOptions() {\n\tconst currentData = issueTypeResource.data || []\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Return cached result if data hasn't changed\n\tif (issueTypeOptionsCache && issueTypeDataHash === currentHash) {\n\t\treturn issueTypeOptionsCache\n\t}\n\t\n\tconst options = [\n\t\t{ label: \"All Types\", value: \"\" },\n\t\t...currentData.map((t) => ({\n\t\t\tlabel: t.name,\n\t\t\tvalue: t.name,\n\t\t})),\n\t]\n\t\n\t// Cache the result with data hash\n\tissueTypeOptionsCache = Object.freeze(options)\n\tissueTypeDataHash = currentHash\n\treturn issueTypeOptionsCache\n}\n\nexport function getProjectOptions() {\n\tconst currentData = projectResource.data || []\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Return cached result if data hasn't changed\n\tif (projectOptionsCache && projectDataHash === currentHash) {\n\t\treturn projectOptionsCache\n\t}\n\t\n\tconst options = [\n\t\t{ label: \"All Projects\", value: \"\" },\n\t\t...currentData.map((p) => ({\n\t\t\tlabel: p.project_name || p.name,\n\t\t\tvalue: p.name,\n\t\t})),\n\t]\n\t\n\t// Cache the result with data hash\n\tprojectOptionsCache = Object.freeze(options)\n\tprojectDataHash = currentHash\n\treturn projectOptionsCache\n}\n\n// Status options (hardcoded as they are standard) - memoized since they never change\nconst statusOptionsCache = Object.freeze([\n\t{ label: \"All Status\", value: \"\" },\n\t{ label: \"Open\", value: \"Open\" },\n\t{ label: \"Replied\", value: \"Replied\" },\n\t{ label: \"On Hold\", value: \"On Hold\" },\n\t{ label: \"Resolved\", value: \"Resolved\" },\n\t{ label: \"Closed\", value: \"Closed\" },\n])\n\nexport function getStatusOptions() {\n\treturn statusOptionsCache\n}\n\n// Resource for fetching tag colors from Tag Categories\nexport const tagColorsResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_tag_colors\",\n\tcache: \"TagColors\", // Cache for 10 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch tag colors:\", error)\n\t},\n\tauto: true, // Auto-fetch on component mount\n})\n\n// Memoized tag color cache with data freshness check\nconst tagColorCache = new Map()\nlet tagColorsDataHash = null\n\n// Helper function to get tag color with memoization and cache invalidation\nexport function getTagColor(tagName) {\n\tconst currentData = tagColorsResource.data || {}\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Clear cache if data has changed\n\tif (tagColorsDataHash !== currentHash) {\n\t\ttagColorCache.clear()\n\t\ttagColorsDataHash = currentHash\n\t}\n\t\n\t// Check cache first\n\tif (tagColorCache.has(tagName)) {\n\t\treturn tagColorCache.get(tagName)\n\t}\n\t\n\tconst color = currentData[tagName] || null\n\t\n\t// Cache the result\n\ttagColorCache.set(tagName, color)\n\t\n\treturn color\n}\n\n// Cache invalidation will be handled by checking data freshness in the getter functions\n\n// Resource for searching issues (for autocomplete suggestions)\nexport const issueSearchResource = createResource({\n\turl: \"force_trans_customization.api.issues.issue_search\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\treturn {\n\t\t\tsearch_query: safeParams.search_query || \"\",\n\t\t\tlimit: safeParams.limit || 8,\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to search issues:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to search issues\nexport function searchIssues(searchQuery, limit = 8) {\n\tif (!searchQuery || searchQuery.length < 2) {\n\t\treturn Promise.resolve(issueSearchResource.data || [])\n\t}\n\treturn issueSearchResource.reload({ search_query: searchQuery, limit }).then(() => {\n\t\treturn issueSearchResource.data || []\n\t})\n}\n\n// Suggestion filtering has been removed - suggestions now open issues in new tabs\n\n// Resource for filtering issues by stat type\nexport const statFilterResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_issues_by_stat_filter\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\tconst result = {\n\t\t\tstat_type: safeParams.stat_type || \"team_tickets\",\n\t\t\tlimit_page_length: safeParams.limit_page_length || 10,\n\t\t\tlimit_start: safeParams.limit_start || 0,\n\t\t\torder_by: safeParams.order_by || \"creation desc\",\n\t\t}\n\t\t\n\t\t// Add filters if provided\n\t\tif (safeParams.filters) {\n\t\t\tresult.filters = safeParams.filters\n\t\t}\n\t\t\n\t\treturn result\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to filter issues by stat:\", error)\n\t\tif (window.$toast) {\n\t\t\twindow.$toast({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\ttext: \"Failed to filter issues. Please try again.\",\n\t\t\t\ticon: \"x\",\n\t\t\t\ticonClasses: \"text-red-600\",\n\t\t\t})\n\t\t}\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Resource for getting count of issues by stat filter\nexport const statFilterCountResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_stat_filter_count\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\tconst result = {\n\t\t\tstat_type: safeParams.stat_type || \"team_tickets\",\n\t\t}\n\t\t\n\t\t// Add filters if provided\n\t\tif (safeParams.filters) {\n\t\t\tresult.filters = safeParams.filters\n\t\t}\n\t\t\n\t\treturn result\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to get stat filter count:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to filter issues by stat type\nexport function filterIssuesByStat(statType, params = {}) {\n\tconst filterParams = {\n\t\tstat_type: statType,\n\t\tlimit_page_length: params.limit_page_length || 10,\n\t\tlimit_start: params.limit_start || 0,\n\t\torder_by: params.order_by || \"creation desc\",\n\t}\n\t\n\t// Add filters if provided\n\tif (params.filters) {\n\t\tfilterParams.filters = params.filters\n\t}\n\t\n\tconsole.log('filterIssuesByStat params:', filterParams)\n\treturn statFilterResource.reload(filterParams)\n}\n\n// Helper function to get count of issues by stat filter\nexport function getStatFilterCount(statType, filters = null) {\n\tconst params = {\n\t\tstat_type: statType,\n\t}\n\t\n\t// Add filters if provided\n\tif (filters) {\n\t\tparams.filters = filters\n\t}\n\t\n\treturn statFilterCountResource.reload(params)\n}\n\n// Helper function to refresh all filter options and clear caches\nexport function refreshFilterOptions() {\n\t// Clear caches before reloading\n\tpriorityOptionsCache = null\n\tissueTypeOptionsCache = null\n\tprojectOptionsCache = null\n\t\n\tissuePriorityResource.reload()\n\tissueTypeResource.reload()\n\tprojectResource.reload()\n\ttagColorsResource.reload()\n}\n\n// Cache invalidation is handled by checking data freshness in the getter functions\n// The frappe-ui createResource doesn't support event listeners, so we rely on\n// the cache validation logic in getPriorityOptions, getIssueTypeOptions, and getProjectOptions\n","<template>\n\t<div class=\"relative w-full max-w-2xl mx-auto\">\n\t\t<!-- Search Input Container -->\n\t\t<div class=\"relative group\">\n\t\t\t<!-- Search Icon -->\n\t\t\t<div class=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10\">\n\t\t\t\t<svg class=\"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500\"\n\t\t\t\t\tfill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\td=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<!-- Main Search Input -->\n\t\t\t<input ref=\"searchInput\" type=\"text\" v-model=\"searchQuery\" @input=\"handleSearch\" @focus=\"handleFocus\"\n\t\t\t\t@blur=\"handleBlur\" @keydown=\"handleKeydown\" :placeholder=\"placeholder\" class=\"w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl \n                       placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out\n                       focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 \n                       focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg\n                       backdrop-blur-sm\" :class=\"{\n\t\t\t\t\t\t'shadow-lg ring-2 ring-blue-500/20 border-blue-500': isFocused,\n\t\t\t\t\t\t'bg-slate-50/50': !isFocused && searchQuery\n\t\t\t\t\t}\" />\n\n\t\t\t<!-- Right Side Controls -->\n\t\t\t<div class=\"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2\">\n\t\t\t\t<!-- Clear Button -->\n\t\t\t\t<button v-if=\"searchQuery\" @click=\"clearSearch\" class=\"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg \n                           transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20\"\n\t\t\t\t\taria-label=\"Clear search\">\n\t\t\t\t\t<svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\n\t\t\t\t<!-- Keyboard Shortcut Hint -->\n\t\t\t\t<div v-if=\"!searchQuery && !isFocused\" class=\"flex items-center pointer-events-none\">\n\t\t\t\t\t<kbd class=\"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 \n                               rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm\">\n\t\t\t\t\t\t<span class=\"text-xs\">+</span>K\n\t\t\t\t\t</kbd>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Loading Spinner -->\n\t\t\t\t<div v-if=\"isLoading\" class=\"animate-spin\">\n\t\t\t\t\t<svg class=\"h-4 w-4 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\">\n\t\t\t\t\t\t</circle>\n\t\t\t\t\t\t<path class=\"opacity-75\" fill=\"currentColor\"\n\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\">\n\t\t\t\t\t\t</path>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Search Results Dropdown -->\n\t\t<div v-if=\"showSuggestions\" class=\"absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl \n                    overflow-hidden backdrop-blur-sm bg-white/95\"\n\t\t\t:class=\"{ 'animate-in slide-in-from-top-2 duration-200': showSuggestions }\">\n\n\t\t\t<!-- Results Header -->\n\t\t\t<div v-if=\"searchSuggestions.length > 0\"\n\t\t\t\tclass=\"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100\">\n\t\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t\t<span class=\"text-xs font-semibold text-slate-600 uppercase tracking-wider\">\n\t\t\t\t\t\t{{ searchSuggestions.length }} Result{{ searchSuggestions.length !== 1 ? 's' : '' }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"text-xs text-slate-500\">\n\t\t\t\t\t\t{{ Math.round(searchTime) }}ms\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Search Results -->\n\t\t\t<div ref=\"suggestionsContainer\"\n\t\t\t\tclass=\"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent\">\n\t\t\t\t<div v-if=\"searchSuggestions.length === 0 && searchQuery.length >= 2\" class=\"px-6 py-8 text-center\">\n\t\t\t\t\t<div class=\"w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center\">\n\t\t\t\t\t\t<svg class=\"w-8 h-8 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\td=\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-slate-500 text-sm font-medium\">No issues found</p>\n\t\t\t\t\t<p class=\"text-slate-400 text-xs mt-1\">Try adjusting your search terms</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-for=\"(suggestion, index) in searchSuggestions\" :key=\"suggestion.name || index\"\n\t\t\t\t\t:ref=\"el => suggestionRefs[index] = el\" @click=\"selectSuggestion(suggestion)\" class=\"group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 \n                            border-b border-slate-50 last:border-b-0\" :class=\"{\n\t\t\t\t\t\t\t\t'bg-blue-50 ring-2 ring-blue-500/10': index === selectedSuggestionIndex\n\t\t\t\t\t\t\t}\">\n\t\t\t\t\t<div class=\"flex items-start space-x-4\">\n\t\t\t\t\t\t<!-- Issue Icon -->\n\t\t\t\t\t\t<div class=\"flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<div class=\"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl \n                                        flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 \n                                        transition-all duration-200\">\n\t\t\t\t\t\t\t\t<svg class=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\td=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Issue Content -->\n\t\t\t\t\t\t<div class=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<h4 class=\"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 \n                                               transition-colors duration-150\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tv-html=\"highlightMatch(suggestion.subject || suggestion.name, searchQuery)\"></span>\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t<p class=\"text-xs text-slate-500 mt-1 line-clamp-2\">\n\t\t\t\t\t\t\t\t\t\tID: {{ suggestion.name }}\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"suggestion.customer\" class=\"ml-2\"> {{ suggestion.customer }}</span>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Status Badge -->\n\t\t\t\t\t\t\t\t<div class=\"flex-shrink-0 ml-4\">\n\t\t\t\t\t\t\t\t\t<span class=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium \n                                                 transition-colors duration-150\"\n\t\t\t\t\t\t\t\t\t\t:class=\"getStatusBadgeClass(suggestion.status)\">\n\t\t\t\t\t\t\t\t\t\t{{ suggestion.status }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Additional Info -->\n\t\t\t\t\t\t\t<div class=\"mt-2 flex items-center justify-between text-xs text-slate-400\">\n\t\t\t\t\t\t\t\t<!-- Raised By -->\n\t\t\t\t\t\t\t\t<div v-if=\"suggestion.raised_by\" class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{ suggestion.raised_by }}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Creation Date -->\n\t\t\t\t\t\t\t\t<div v-if=\"suggestion.creation\" class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{ formatCreationDate(suggestion.creation) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Footer with shortcuts -->\n\t\t\t<div v-if=\"searchQuery && searchSuggestions.length > 0\"\n\t\t\t\tclass=\"px-4 py-3 bg-slate-50/50 border-t border-slate-100\">\n\t\t\t\t<div class=\"flex items-center justify-between text-xs text-slate-500\">\n\t\t\t\t\t<div class=\"flex items-center space-x-4\">\n\t\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\t\tclass=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1\"></kbd>\n\t\t\t\t\t\t\tto select\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\t\tclass=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1\"></kbd>\n\t\t\t\t\t\t\tto navigate\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\tclass=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1\">esc</kbd>\n\t\t\t\t\t\tto close\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Backdrop -->\n\t\t<div v-if=\"showSuggestions\" class=\"fixed inset-0 z-40 bg-black/5\" @click=\"hideSuggestions\">\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue'\nimport { searchIssues } from '../data/issues'\n\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: String,\n\t\tdefault: ''\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\tdefault: 'Search issues by title, description, ID...'\n\t},\n\tissues: {\n\t\ttype: Array,\n\t\tdefault: () => []\n\t}\n})\n\nconst emit = defineEmits(['update:modelValue', 'search', 'suggestion-selected'])\n\nconst searchInput = ref(null)\nconst searchQuery = ref(props.modelValue)\nconst isFocused = ref(false)\nconst showSuggestions = ref(false)\nconst selectedSuggestionIndex = ref(-1)\nconst isLoading = ref(false)\nconst searchTime = ref(0)\n\n// Refs for auto-scroll functionality\nconst suggestionsContainer = ref(null)\nconst suggestionRefs = ref([])\n\n// Debounce timer for search\nlet searchTimeout = null\n\n// Watch for external changes to modelValue\nwatch(() => props.modelValue, (newValue) => {\n\tsearchQuery.value = newValue\n})\n\n// Watch for changes in search query\nwatch(searchQuery, (newValue) => {\n\temit('update:modelValue', newValue)\n\temit('search', newValue)\n})\n\n// Search suggestions from API\nconst searchSuggestions = ref([])\n\n// Function to fetch search suggestions from API\nconst fetchSearchSuggestions = async (query) => {\n\tif (!query || query.length < 2) {\n\t\tsearchSuggestions.value = []\n\t\tshowSuggestions.value = false\n\t\tisLoading.value = false\n\t\treturn\n\t}\n\n\ttry {\n\t\tisLoading.value = true\n\t\tconst startTime = performance.now()\n\n\t\tconst results = await searchIssues(query, 8)\n\n\t\tsearchTime.value = performance.now() - startTime\n\t\tsearchSuggestions.value = results || []\n\t\tshowSuggestions.value = true\n\n\t} catch (error) {\n\t\tconsole.error('Search error:', error)\n\t\tsearchSuggestions.value = []\n\t\tshowSuggestions.value = false\n\t} finally {\n\t\tisLoading.value = false\n\t}\n}\n\n// Debounced search function\nconst debouncedSearch = (query) => {\n\t// Clear any existing timeout\n\tif (searchTimeout) {\n\t\tclearTimeout(searchTimeout)\n\t}\n\n\t// Reset selected suggestion index when typing\n\tselectedSuggestionIndex.value = -1\n\n\t// If query is too short, clear suggestions immediately\n\tif (!query || query.length < 2) {\n\t\tsearchSuggestions.value = []\n\t\tshowSuggestions.value = false\n\t\tisLoading.value = false\n\t\treturn\n\t}\n\n\t// Show loading state immediately for better UX\n\tisLoading.value = true\n\n\t// Set new timeout for 1 second\n\tsearchTimeout = setTimeout(() => {\n\t\tfetchSearchSuggestions(query)\n\t}, 1000)\n}\n\nconst handleSearch = () => {\n\tdebouncedSearch(searchQuery.value)\n}\n\n// Highlight matching text in search results\nconst highlightMatch = (text, query) => {\n\tif (!text || !query) return text\n\n\tconst escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n\tconst regex = new RegExp(`(${escapedQuery})`, 'gi')\n\treturn text.replace(regex, '<mark class=\"bg-yellow-200 text-yellow-900 px-0.5 rounded\">$1</mark>')\n}\n\n// Get status badge styling\nconst getStatusBadgeClass = (status) => {\n\tconst statusClasses = {\n\t\t'Open': 'bg-green-100 text-green-800 border border-green-200',\n\t\t'New': 'bg-blue-100 text-blue-800 border border-blue-200',\n\t\t'In Progress': 'bg-blue-100 text-blue-800 border border-blue-200',\n\t\t'In Review': 'bg-orange-100 text-orange-800 border border-orange-200',\n\t\t'Resolved': 'bg-gray-100 text-gray-800 border border-gray-200',\n\t\t'Closed': 'bg-red-100 text-red-800 border border-red-200',\n\t\t'Pending': 'bg-yellow-100 text-yellow-800 border border-yellow-200',\n\t\t'On Hold': 'bg-orange-100 text-orange-800 border border-orange-200',\n\t\t'Delivered': 'bg-green-100 text-green-800 border border-green-200',\n\t\t'Confirmed': 'bg-purple-100 text-purple-800 border border-purple-200'\n\t}\n\n\treturn statusClasses[status] || 'bg-gray-100 text-gray-800 border border-gray-200'\n}\n\nconst handleFocus = () => {\n\tisFocused.value = true\n\t// Clear any pending blur timeout to prevent suggestions from hiding\n\tif (blurTimeout) {\n\t\tclearTimeout(blurTimeout)\n\t\tblurTimeout = null\n\t}\n\n\t// Show suggestions if there's a query and we have results or need to fetch them\n\tif (searchQuery.value.length >= 2) {\n\t\t// If we already have suggestions, show them immediately\n\t\tif (searchSuggestions.value.length > 0) {\n\t\t\tshowSuggestions.value = true\n\t\t} else {\n\t\t\t// Otherwise, fetch new suggestions\n\t\t\tfetchSearchSuggestions(searchQuery.value)\n\t\t}\n\t}\n}\n\n// Add blur timeout variable\nlet blurTimeout = null\n\nconst handleBlur = () => {\n\tisFocused.value = false\n\t// Use a timeout to allow for click events on suggestions\n\tblurTimeout = setTimeout(() => {\n\t\tshowSuggestions.value = false\n\t\tblurTimeout = null\n\t}, 200)\n}\n\nconst handleKeydown = (event) => {\n\tif (!showSuggestions.value) return\n\n\tswitch (event.key) {\n\t\tcase 'ArrowDown':\n\t\t\tevent.preventDefault()\n\t\t\tselectedSuggestionIndex.value = Math.min(\n\t\t\t\tselectedSuggestionIndex.value + 1,\n\t\t\t\tsearchSuggestions.value.length - 1\n\t\t\t)\n\t\t\t// Auto-scroll to the selected suggestion\n\t\t\tscrollToSelectedSuggestion()\n\t\t\tbreak\n\t\tcase 'ArrowUp':\n\t\t\tevent.preventDefault()\n\t\t\tselectedSuggestionIndex.value = Math.max(selectedSuggestionIndex.value - 1, -1)\n\t\t\t// Auto-scroll to the selected suggestion\n\t\t\tscrollToSelectedSuggestion()\n\t\t\tbreak\n\t\tcase 'Enter':\n\t\t\tevent.preventDefault()\n\t\t\tif (selectedSuggestionIndex.value >= 0) {\n\t\t\t\tselectSuggestion(searchSuggestions.value[selectedSuggestionIndex.value])\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'Escape':\n\t\t\thideSuggestions()\n\t\t\tsearchInput.value?.blur()\n\t\t\tbreak\n\t}\n\n}\n\nconst selectSuggestion = (suggestion) => {\n\tsearchQuery.value = suggestion.name\n\thideSuggestions()\n\t\n\t// Navigate to Frappe issue page\n\tconst hostname = window.location.origin\n\tconst issueUrl = `${hostname}/app/issue/${suggestion.name}`\n\twindow.open(issueUrl, '_blank')\n\t\n\temit('suggestion-selected', suggestion)\n}\n\nconst clearSearch = () => {\n\tsearchQuery.value = ''\n\thideSuggestions()\n\tsearchInput.value?.focus()\n}\n\nconst hideSuggestions = () => {\n\tshowSuggestions.value = false\n\tselectedSuggestionIndex.value = -1\n}\n\n// Function to scroll selected suggestion into view\nconst scrollToSelectedSuggestion = () => {\n\tif (selectedSuggestionIndex.value < 0 || !suggestionsContainer.value || !suggestionRefs.value[selectedSuggestionIndex.value]) {\n\t\treturn\n\t}\n\n\tconst container = suggestionsContainer.value\n\tconst selectedElement = suggestionRefs.value[selectedSuggestionIndex.value]\n\n\tif (selectedElement) {\n\t\t// Get the position of the selected element relative to the container\n\t\tconst containerRect = container.getBoundingClientRect()\n\t\tconst elementRect = selectedElement.getBoundingClientRect()\n\n\t\t// Calculate if the element is outside the visible area\n\t\tconst elementTop = elementRect.top - containerRect.top + container.scrollTop\n\t\tconst elementBottom = elementTop + elementRect.height\n\n\t\tconst containerScrollTop = container.scrollTop\n\t\tconst containerHeight = container.clientHeight\n\n\t\t// Scroll if element is above the visible area\n\t\tif (elementTop < containerScrollTop) {\n\t\t\tcontainer.scrollTop = elementTop\n\t\t}\n\t\t// Scroll if element is below the visible area\n\t\telse if (elementBottom > containerScrollTop + containerHeight) {\n\t\t\tcontainer.scrollTop = elementBottom - containerHeight\n\t\t}\n\t}\n}\n\n// Function to format creation date for display\nconst formatCreationDate = (dateString) => {\n\tif (!dateString) return ''\n\n\ttry {\n\t\tconst date = new Date(dateString)\n\t\tconst now = new Date()\n\t\tconst diffTime = Math.abs(now - date)\n\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n\n\t\t// If less than 1 day, show relative time\n\t\tif (diffDays === 1) {\n\t\t\treturn 'Today'\n\t\t} else if (diffDays === 2) {\n\t\t\treturn 'Yesterday'\n\t\t} else if (diffDays <= 7) {\n\t\t\treturn `${diffDays - 1} days ago`\n\t\t} else {\n\t\t\t// Otherwise show formatted date\n\t\t\treturn date.toLocaleDateString('en-US', {\n\t\t\t\tmonth: 'short',\n\t\t\t\tday: 'numeric',\n\t\t\t\tyear: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('Error formatting date:', error)\n\t\treturn dateString\n\t}\n}\n\n// Global keyboard shortcut (Cmd+K / Ctrl+K)\nconst handleGlobalKeydown = (event) => {\n\tif ((event.metaKey || event.ctrlKey) && event.key === 'k') {\n\t\tevent.preventDefault()\n\t\tsearchInput.value?.focus()\n\t\tsearchInput.value?.select()\n\t}\n}\n\nonMounted(() => {\n\tdocument.addEventListener('keydown', handleGlobalKeydown)\n})\n\nonUnmounted(() => {\n\tdocument.removeEventListener('keydown', handleGlobalKeydown)\n\t// Clean up any pending timeouts\n\tif (searchTimeout) {\n\t\tclearTimeout(searchTimeout)\n\t}\n\tif (blurTimeout) {\n\t\tclearTimeout(blurTimeout)\n\t}\n})\n\n// Expose methods for parent component\ndefineExpose({\n\tfocus: () => {\n\t\tsearchInput.value?.focus()\n\t\tsearchInput.value?.select()\n\t},\n\tselect: () => searchInput.value?.select(),\n\t$el: searchInput\n})\n</script>\n\n<style scoped>\n/* Custom scrollbar styles */\n.scrollbar-thin {\n\tscrollbar-width: thin;\n}\n\n.scrollbar-thumb-slate-200::-webkit-scrollbar-thumb {\n\tbackground-color: rgb(226 232 240);\n\tborder-radius: 0.375rem;\n}\n\n.scrollbar-track-transparent::-webkit-scrollbar-track {\n\tbackground-color: transparent;\n}\n\n.scrollbar-thin::-webkit-scrollbar {\n\twidth: 6px;\n}\n\n/* Animation classes */\n@keyframes slide-in-from-top {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translateY(-10px);\n\t}\n\n\tto {\n\t\topacity: 1;\n\t\ttransform: translateY(0);\n\t}\n}\n\n.animate-in {\n\tanimation-fill-mode: both;\n}\n\n.slide-in-from-top-2 {\n\tanimation-name: slide-in-from-top;\n}\n\n.duration-200 {\n\tanimation-duration: 200ms;\n}\n\n/* Line clamp utility */\n.line-clamp-2 {\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 2;\n\t-webkit-box-orient: vertical;\n\toverflow: hidden;\n}\n\n/* Focus ring improvements */\n.focus\\:ring-blue-500\\/20:focus {\n\t--tw-ring-color: rgb(59 130 246 / 0.2);\n}\n\n/* Backdrop blur support */\n.backdrop-blur-sm {\n\tbackdrop-filter: blur(4px);\n}\n\n/* Background opacity utilities */\n.bg-white\\/95 {\n\tbackground-color: rgb(255 255 255 / 0.95);\n}\n\n.bg-slate-50\\/50 {\n\tbackground-color: rgb(248 250 252 / 0.5);\n}\n\n.bg-slate-50\\/80 {\n\tbackground-color: rgb(248 250 252 / 0.8);\n}\n\n.bg-blue-50\\/50 {\n\tbackground-color: rgb(239 246 255 / 0.5);\n}\n\n.bg-black\\/5 {\n\tbackground-color: rgb(0 0 0 / 0.05);\n}\n\n.ring-blue-500\\/10 {\n\t--tw-ring-color: rgb(59 130 246 / 0.1);\n}\n\n.ring-blue-500\\/20 {\n\t--tw-ring-color: rgb(59 130 246 / 0.2);\n}\n</style>","<template>\n  <div class=\"bg-white p-6 rounded-lg shadow-sm border mb-6\">\n    <!-- Search Section -->\n    <div class=\"mb-6\">\n      <div class=\"relative max-w-2xl mx-auto\">\n        <CustomSearchBox ref=\"searchBoxRef\" :model-value=\"searchQuery\" @update:model-value=\"handleSearchChange\"\n          @suggestion-selected=\"handleSuggestionSelected\" :issues=\"issues\"\n          placeholder=\"Search issues by title, description, assignee...\" class=\"awesome-search\" />\n        <div v-if=\"searchQuery\" class=\"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center\">\n          Searching in {{ filteredCount }} issues\n        </div>\n      </div>\n    </div>\n\n    <!-- Filter Controls -->\n    <div class=\"border-t border-gray-200 pt-4\">\n      <div class=\"flex items-center justify-between\">\n        <!-- Left: Filter button and active filters -->\n        <div class=\"flex items-center space-x-3 flex-1\">\n          <button @click=\"showFilterPanel = !showFilterPanel\"\n            class=\"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors\">\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z\"/>\n            </svg>\n            <span>Filters</span>\n            <span v-if=\"appliedFilters.length > 0\" class=\"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full\">\n              {{ appliedFilters.length }}\n            </span>\n          </button>\n\n          <!-- Active Filters Display -->\n          <div v-if=\"appliedFilters.length > 0\" class=\"flex items-center flex-1 overflow-x-auto flex-wrap gap-2\">\n            <div v-for=\"(filter, index) in appliedFilters\" :key=\"filter.id\" \n              class=\"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap\">\n              <span class=\"text-green-800 font-medium\">{{ getFieldLabel(filter.field) }}</span>\n              <span class=\"text-green-600\">{{ filter.operator }}</span>\n              <span class=\"text-green-900\">{{ getDisplayValue(filter) }}</span>\n              <button @click=\"removeAppliedFilter(index)\" class=\"text-green-400 hover:text-red-600 ml-1\">\n                <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Right: Clear and Apply buttons -->\n        <div class=\"flex items-center space-x-2 ml-4\">\n          <button v-if=\"appliedFilters.length > 0 || searchQuery\" \n            @click=\"clearAllFilters\"\n            class=\"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors\">\n            Clear All\n          </button>\n          <button v-if=\"pendingFilters.length > 0\"\n            @click=\"applyFilters\"\n            :class=\"[\n              'px-4 py-2 text-sm font-medium rounded-md transition-all duration-200',\n              isApplyingFilters ? 'bg-blue-500 text-white cursor-wait' :\n              hasPendingChanges ? 'bg-blue-600 text-white hover:bg-blue-700' : 'bg-gray-300 text-gray-600 cursor-not-allowed'\n            ]\"\n            :disabled=\"!hasPendingChanges || isApplyingFilters\">\n            <span v-if=\"isApplyingFilters\" class=\"flex items-center\">\n              <svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              Applying...\n            </span>\n            <span v-else>\n              {{ hasPendingChanges ? 'Apply Filters' : 'Filters Applied' }}\n            </span>\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Filter Panel -->\n    <div v-if=\"showFilterPanel\" class=\"relative\">\n      <div class=\"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg\" @click.stop>\n        <div class=\"flex\">\n          <!-- Left: Field Selection -->\n          <div class=\"w-48 border-r border-gray-200 bg-gray-50\">\n            <div class=\"p-3 border-b border-gray-200\">\n              <h4 class=\"text-sm font-medium text-gray-900\">Add Filter</h4>\n            </div>\n            <div class=\"max-h-64 overflow-y-auto\">\n              <button v-for=\"field in availableFields\" :key=\"field.value\"\n                @click.stop=\"addFilter(field.value)\"\n                class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between\">\n                <span>{{ field.label }}</span>\n                <span class=\"text-xs text-gray-400 bg-gray-200 px-1 rounded\">{{ field.type }}</span>\n              </button>\n            </div>\n          </div>\n\n          <!-- Right: Active Filters -->\n          <div class=\"flex-1 min-w-96\">\n            <div class=\"p-4\">\n              <div v-if=\"pendingFilters.length === 0\" class=\"text-center py-8 text-gray-500\">\n                <p class=\"text-sm\">Select a field from the left to add a filter</p>\n              </div>\n              \n              <div v-else class=\"space-y-4\">\n                <div v-for=\"(filter, index) in pendingFilters\" :key=\"filter.id\" \n                  class=\"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n                  \n                  <!-- Field Name -->\n                  <div class=\"col-span-2 flex items-center\">\n                    <span class=\"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200\">\n                      {{ getFieldLabel(filter.field) }}\n                    </span>\n                  </div>\n\n                  <!-- Operator -->\n                  <div class=\"col-span-2 flex items-center\">\n                    <Dropdown \n                      :options=\"getOperatorDropdownOptions(filter.field, filter)\"\n                      :placement=\"'left'\"\n                    >\n                      <template #default=\"{ open }\">\n                        <button \n                          :class=\"[\n                            'w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50',\n                            open ? 'border-blue-500 ring-2 ring-blue-200 shadow-md' : 'border-gray-300 hover:border-gray-400 shadow-sm'\n                          ]\"\n                        >\n                          <span class=\"text-gray-700 font-medium truncate\">{{ getOperatorLabel(filter.operator, filter.field) }}</span>\n                          <svg class=\"w-4 h-4 text-gray-400 flex-shrink-0 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n                          </svg>\n                        </button>\n                      </template>\n                    </Dropdown>\n                  </div>\n\n                  <!-- Dynamic Value Input -->\n                  <div class=\"col-span-7\">\n                    <!-- Text Input -->\n                    <input v-if=\"getFieldType(filter.field) === 'text'\" \n                      v-model=\"filter.value\" \n                      type=\"text\" \n                      :placeholder=\"getFieldPlaceholder(filter.field)\"\n                      class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                    \n                    <!-- Email Input -->\n                    <input v-else-if=\"getFieldType(filter.field) === 'email'\" \n                      v-model=\"filter.value\" \n                      type=\"email\" \n                      :placeholder=\"getFieldPlaceholder(filter.field)\"\n                      class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                    \n                    <!-- DateTime Input -->\n                    <div v-else-if=\"getFieldType(filter.field) === 'datetime'\" class=\"space-y-2\">\n                      <div v-if=\"filter.operator === 'between'\" class=\"grid grid-cols-2 gap-2\">\n                        <div>\n                          <input v-model=\"filter.startValue\" \n                            type=\"datetime-local\" \n                            placeholder=\"Start date and time\"\n                            @input=\"updateDateRange(filter)\"\n                            class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                          <p class=\"text-xs text-gray-500 mt-1\">From</p>\n                        </div>\n                        <div>\n                          <input v-model=\"filter.endValue\" \n                            type=\"datetime-local\" \n                            placeholder=\"End date and time\"\n                            @input=\"updateDateRange(filter)\"\n                            class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                          <p class=\"text-xs text-gray-500 mt-1\">To</p>\n                        </div>\n                      </div>\n                      <div v-else>\n                        <input v-model=\"filter.value\" \n                          type=\"datetime-local\" \n                          class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                        <p class=\"text-xs text-gray-500 italic mt-1\">Select date and time</p>\n                      </div>\n                    </div>\n\n                    <!-- Date Input -->\n                    <div v-else-if=\"getFieldType(filter.field) === 'date'\" class=\"space-y-2\">\n                      <div v-if=\"filter.operator === 'between'\" class=\"grid grid-cols-2 gap-2\">\n                        <div>\n                          <input v-model=\"filter.startValue\" \n                            type=\"date\" \n                            @input=\"updateDateRange(filter)\"\n                            class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                          <p class=\"text-xs text-gray-500 mt-1\">From</p>\n                        </div>\n                        <div>\n                          <input v-model=\"filter.endValue\" \n                            type=\"date\" \n                            @input=\"updateDateRange(filter)\"\n                            class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                          <p class=\"text-xs text-gray-500 mt-1\">To</p>\n                        </div>\n                      </div>\n                      <div v-else>\n                        <input v-model=\"filter.value\" \n                          type=\"date\" \n                          class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                      </div>\n                    </div>\n                    \n                    <!-- Select/ComboBox for Options -->\n                    <div v-else-if=\"getFieldType(filter.field) === 'select'\" class=\"relative\">\n                      <div v-if=\"!filter.isMultiSelect\">\n                        <!-- Simple select for priority field -->\n                        <select v-if=\"filter.field === 'priority' || filter.field === 'status' || filter.field === 'issue_type'\"\n                          v-model=\"filter.value\"\n                          @keydown.enter.prevent=\"$event.target.blur()\"\n                          class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\"\n                        >\n                          <option value=\"\">Select {{ getFieldLabel(filter.field) }}...</option>\n                          <option v-for=\"option in getFieldOptions(filter.field)\" :key=\"option.value\" :value=\"option.value\">\n                            {{ option.label }}\n                          </option>\n                        </select>\n                      </div>\n                      \n                      <!-- Multi-select for tags, users, etc -->\n                      <div v-else class=\"space-y-2\">\n                        <div v-if=\"getSelectedValues(filter.value).length > 0\" class=\"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200\">\n                          <span v-for=\"(selectedValue, idx) in getSelectedValues(filter.value)\" :key=\"idx\"\n                            class=\"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors\">\n                            {{ getDisplayValueForOption(selectedValue, filter.field) }}\n                            <button @click=\"removeSelectedValue(filter, idx)\" class=\"ml-1 text-blue-600 hover:text-red-600 transition-colors\">\n                              <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                              </svg>\n                            </button>\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Link/Reference Input with ComboBox -->\n                    <div v-else-if=\"getFieldType(filter.field) === 'link'\" class=\"space-y-2\">\n                      <!-- Multi-select for all link fields -->\n                      <div class=\"space-y-2\">\n                        <!-- Selected Items Display -->\n                        <div v-if=\"getSelectedValues(filter.value).length > 0\" class=\"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200\">\n                          <span v-for=\"(selectedValue, idx) in getSelectedValues(filter.value)\" :key=\"idx\"\n                            class=\"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors\">\n                            {{ getDisplayValueForUser(selectedValue, filter) }}\n                            <button @click=\"removeSelectedValue(filter, idx)\" class=\"ml-1 text-blue-600 hover:text-red-600 transition-colors\">\n                              <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                              </svg>\n                            </button>\n                          </span>\n                        </div>\n                        \n                        <!-- Search Input -->\n                        <div class=\"relative\">\n                          <input \n                            v-model=\"filter.searchValue\" \n                            @input=\"handleLinkSearch(filter, filter.searchValue)\"\n                            @keydown.up.prevent=\"handleLinkKeyNavigation(filter, 'up')\"\n                            @keydown.down.prevent=\"handleLinkKeyNavigation(filter, 'down')\"\n                            @keydown.enter.prevent=\"handleLinkEnter(filter)\"\n                            @keydown.escape=\"clearLinkSuggestions(filter)\"\n                            type=\"text\" \n                            :placeholder=\"`Search and add ${getFieldLabel(filter.field)}...`\"\n                            class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                          \n                          <!-- Loading indicator -->\n                          <div v-if=\"filter.loading\" class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                            <svg class=\"animate-spin h-4 w-4 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\">\n                              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                              <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                            </svg>\n                          </div>\n                        </div>\n                        \n                        <!-- Search Results Dropdown -->\n                        <div v-if=\"filter.suggestions && filter.suggestions.length > 0 && filter.searchValue\" \n                          class=\"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg\">\n                          <button v-for=\"(suggestion, idx) in filter.suggestions\" :key=\"idx\"\n                            @click=\"addUserToMultiSelect(filter, suggestion)\"\n                            :class=\"[\n                              'w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors',\n                              filter.selectedLinkIndex === idx ? 'bg-blue-100 text-blue-900' : 'hover:bg-gray-100'\n                            ]\"\n                            :ref=\"filter.selectedLinkIndex === idx ? 'selectedLinkOption' : null\">\n                            <div class=\"font-medium text-gray-900\">{{ suggestion.label }}</div>\n                            <div class=\"text-xs text-gray-500\">{{ suggestion.subtitle }}</div>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Tags/Multi-value Input with Search -->\n                    <div v-else-if=\"getFieldType(filter.field) === 'tags'\" class=\"space-y-2\">\n                      <!-- Selected Tags Display -->\n                      <div v-if=\"getTags(filter.value).length > 0\" class=\"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200\">\n                        <span v-for=\"(tag, idx) in getTags(filter.value)\" :key=\"idx\"\n                          :style=\"getTagStyle(tag)\"\n                          class=\"inline-flex items-center px-2 py-1 text-xs rounded-full border transition-colors\">\n                          {{ tag }}\n                          <button @click=\"removeTag(filter, idx)\" class=\"ml-1 hover:text-red-600 transition-colors\">\n                            <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                            </svg>\n                          </button>\n                        </span>\n                      </div>\n                      \n                      <!-- Tag Search Input -->\n                      <div class=\"relative\">\n                        <input v-model=\"filter.tagInput\" \n                          @input=\"handleTagSearch(filter, filter.tagInput)\"\n                          @keyup.enter=\"handleTagEnter(filter)\"\n                          @keydown.up.prevent=\"handleTagKeyNavigation(filter, 'up')\"\n                          @keydown.down.prevent=\"handleTagKeyNavigation(filter, 'down')\"\n                          @keydown.escape=\"clearTagSuggestions(filter)\"\n                          type=\"text\" \n                          placeholder=\"Search and select tags from dropdown...\"\n                          class=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400\" />\n                        \n                        <!-- Loading indicator -->\n                        <div v-if=\"filter.loadingTags\" class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                          <svg class=\"animate-spin h-4 w-4 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\">\n                            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                          </svg>\n                        </div>\n                      </div>\n                      \n                      <!-- Tag Suggestions Dropdown -->\n                      <div v-if=\"filter.tagSuggestions && filter.tagSuggestions.length > 0\" \n                        class=\"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg\">\n                        <button v-for=\"(tagSuggestion, idx) in filter.tagSuggestions\" :key=\"idx\"\n                          @click=\"addTagFromSuggestion(filter, tagSuggestion)\"\n                          :class=\"[\n                            'w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors',\n                            filter.selectedTagIndex === idx ? 'bg-blue-100 text-blue-900' : 'hover:bg-gray-100'\n                          ]\"\n                          :ref=\"filter.selectedTagIndex === idx ? 'selectedTagOption' : null\">\n                          <div class=\"flex items-center justify-between\">\n                            <div>\n                              <div class=\"font-medium text-gray-900\">{{ tagSuggestion.label }}</div>\n                              <div class=\"text-xs text-gray-500\">{{ tagSuggestion.subtitle }}</div>\n                            </div>\n                            <div v-if=\"tagSuggestion.color\" \n                              class=\"w-3 h-3 rounded-full border border-gray-300\" \n                              :style=\"{ backgroundColor: tagSuggestion.color }\"></div>\n                          </div>\n                        </button>\n                      </div>\n                      \n                      <p class=\"text-xs text-gray-500 italic\">Search existing tags and select from dropdown only</p>\n                    </div>\n                  </div>\n\n                  <!-- Remove Button -->\n                  <div class=\"col-span-1 flex items-start justify-center pt-1\">\n                    <button @click=\"removeFilter(index)\" \n                      class=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group\">\n                      <svg class=\"w-4 h-4 group-hover:scale-110 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Bottom Actions -->\n              <div v-if=\"pendingFilters.length > 0\" class=\"flex justify-between items-center pt-4 mt-4 border-t border-gray-200\">\n                <button @click=\"clearAllFilters\" class=\"text-sm text-gray-600 hover:text-gray-900\">\n                  Clear All\n                </button>\n                <button @click=\"applyFilters\" :disabled=\"!hasPendingChanges || isApplyingFilters\"\n                  :class=\"[\n                    'px-4 py-2 text-sm font-medium rounded transition-all duration-200',\n                    isApplyingFilters ? 'bg-gray-700 text-white cursor-wait' :\n                    hasPendingChanges ? 'bg-gray-900 text-white hover:bg-gray-800' : 'bg-gray-300 text-gray-600 cursor-not-allowed'\n                  ]\">\n                  <span v-if=\"isApplyingFilters\" class=\"flex items-center\">\n                    <svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                      <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Applying...\n                  </span>\n                  <span v-else>\n                    {{ hasPendingChanges ? 'Apply Filters' : 'Filters Applied' }}\n                  </span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Backdrop -->\n      <div class=\"fixed inset-0 z-40\" @click=\"showFilterPanel = false\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { Dropdown, Combobox, Autocomplete } from \"frappe-ui\"\nimport { computed, ref, watch, onMounted, onUnmounted, nextTick } from \"vue\"\nimport CustomSearchBox from \"./CustomSearchBox.vue\"\nimport { getTagColor } from '../data/issues.js'\n\n// Props\nconst props = defineProps({\n  searchQuery: { type: String, default: \"\" },\n  filters: { type: Object, default: () => ({}) },\n  filteredCount: { type: Number, default: 0 },\n  issues: { type: Array, default: () => [] },\n})\n\n// Emits\nconst emit = defineEmits([\"update:searchQuery\", \"update:filters\", \"suggestion-selected\", \"filters-applied\"])\n\n// State\nconst searchQuery = ref(props.searchQuery)\nconst showFilterPanel = ref(false)\nconst pendingFilters = ref([])\nconst appliedFilters = ref([])\nlet filterIdCounter = 0\n\n// Loading state for better UX\nconst isApplyingFilters = ref(false)\n\n// Enhanced Field Configuration with Types - Only specified fields\nconst availableFields = [\n  { value: 'subject', label: 'Subject', type: 'text' },\n  { value: 'status', label: 'Status', type: 'select' },\n  { value: 'raised_by', label: 'Raised By', type: 'email' },\n  { value: 'description', label: 'Description', type: 'text' },\n  { value: 'customer', label: 'Customer', type: 'link' },\n  { value: 'contact', label: 'Contact', type: 'link' },\n  { value: 'lead', label: 'Lead', type: 'link' },\n  { value: 'custom_assigned_csm_team', label: 'Assigned CSM Team', type: 'link' },\n  { value: 'custom_users_assigned', label: 'User Assigned', type: 'link' },\n  { value: 'creation', label: 'Created Date', type: 'date' },\n  { value: 'modified', label: 'Modified Date', type: 'date' },\n  { value: '_user_tags', label: 'Tags', type: 'tags' },\n]\n\n// Field Options Data - Only for select type fields\nconst fieldOptions = {\n  status: [\n    { value: 'New', label: 'New' },\n    { value: 'In Review', label: 'In Review' },\n    { value: 'Confirmed', label: 'Confirmed' },\n    { value: 'In Transit', label: 'In Transit' },\n    { value: 'Delivered', label: 'Delivered' },\n    { value: 'Closed', label: 'Closed' },\n  ]\n}\n\n\n// Operator options based on field type\nconst operatorsByType = {\n  text: [\n    { value: 'like', label: 'Contains' },\n    { value: 'equals', label: 'Equals' },\n    { value: 'not_equals', label: 'Not Equals' },\n    { value: 'starts_with', label: 'Starts With' },\n    { value: 'ends_with', label: 'Ends With' }\n  ],\n  email: [\n    { value: 'equals', label: 'Equals' },\n    { value: 'like', label: 'Contains' },\n    { value: 'not_equals', label: 'Not Equals' }\n  ],\n  select: [\n    { value: 'equals', label: 'Equals' },\n    { value: 'not_equals', label: 'Not Equals' },\n    { value: 'in', label: 'In' },\n    { value: 'not_in', label: 'Not In' }\n  ],\n  link: [\n    { value: 'in', label: 'In' },\n    { value: 'equals', label: 'Is' },\n    { value: 'not_equals', label: 'Is Not' },\n    { value: 'like', label: 'Contains' },\n    { value: 'not_in', label: 'Not In' }\n  ],\n  datetime: [\n    { value: 'equals', label: 'On' },\n    { value: 'greater_than', label: 'After' },\n    { value: 'less_than', label: 'Before' },\n    { value: 'between', label: 'Between' }\n  ],\n  date: [\n    { value: 'equals', label: 'On' },\n    { value: 'greater_than', label: 'After' },\n    { value: 'less_than', label: 'Before' },\n    { value: 'between', label: 'Between' }\n  ],\n  tags: [\n    { value: 'has', label: 'Has Tag' },\n    { value: 'has_all', label: 'Has All Tags' },\n    { value: 'not_has', label: 'Does Not Have' }\n  ]\n}\n\n// Computed\nconst hasPendingChanges = computed(() => {\n  return JSON.stringify(pendingFilters.value) !== JSON.stringify(appliedFilters.value)\n})\n\n// Helper Functions\nconst getFieldType = (fieldValue) => {\n  const field = availableFields.find(f => f.value === fieldValue)\n  return field?.type || 'text'\n}\n\nconst isLinkFieldMultiSelect = (fieldValue) => {\n  // All link fields are multiSelect by default\n  return getFieldType(fieldValue) === 'link'\n}\n\nconst getFieldLabel = (fieldValue) => {\n  const field = availableFields.find(f => f.value === fieldValue)\n  return field?.label || fieldValue\n}\n\nconst getFieldPlaceholder = (fieldValue) => {\n  const placeholders = {\n    subject: 'Enter issue title...',\n    description: 'Enter description...',\n    raised_by: 'Enter email address...',\n    customer: 'Search for customer...',\n    contact: 'Search for contact...',\n    lead: 'Search for lead...',\n    custom_assigned_csm_team: 'Search for CSM team...',\n    custom_users_assigned: 'Search for users...',\n    creation: 'Select date',\n    modified: 'Select date'\n  }\n  return placeholders[fieldValue] || `Enter ${getFieldLabel(fieldValue).toLowerCase()}...`\n}\n\nconst getOperatorsForField = (fieldValue) => {\n  const fieldType = getFieldType(fieldValue)\n  return operatorsByType[fieldType] || operatorsByType.text\n}\n\nconst getFieldOptions = (fieldValue) => {\n  return fieldOptions[fieldValue] || []\n}\n\nconst getDisplayValue = (filter) => {\n  if (filter.displayValue) return filter.displayValue\n  if (Array.isArray(filter.value)) return filter.value.join(', ')\n  return filter.value\n}\n\n// Multi-select and Tags Helpers\nconst getSelectedValues = (value) => {\n  if (!value) return []\n  return typeof value === 'string' ? value.split(',').map(v => v.trim()).filter(Boolean) : value\n}\n\nconst removeSelectedValue = (filter, index) => {\n  const values = getSelectedValues(filter.value)\n  values.splice(index, 1)\n  filter.value = values.join(', ')\n}\n\nconst addSelectedValue = (filter, newValue) => {\n  if (!newValue) return\n  const values = getSelectedValues(filter.value)\n  if (!values.includes(newValue)) {\n    values.push(newValue)\n    filter.value = values.join(', ')\n  }\n}\n\nconst getAvailableOptions = (filter) => {\n  const allOptions = getFieldOptions(filter.field)\n  const selectedValues = getSelectedValues(filter.value)\n  return allOptions.filter(option => !selectedValues.includes(option.value))\n}\n\n// Tags Helpers\nconst getTags = (value) => {\n  if (!value) return []\n  return value.split(',').map(v => v.trim()).filter(Boolean)\n}\n\nconst removeTag = (filter, index) => {\n  const tags = getTags(filter.value)\n  tags.splice(index, 1)\n  filter.value = tags.join(', ')\n}\n\n// addTag function removed - now only allowing selection from dropdown\n\n// New helper functions for enhanced functionality\nconst getDisplayValueForUser = (value, filter) => {\n  if (filter.userDisplayMap && filter.userDisplayMap[value]) {\n    return filter.userDisplayMap[value]\n  }\n  return value\n}\n\nconst addUserToMultiSelect = (filter, suggestion) => {\n  const currentValues = getSelectedValues(filter.value)\n  if (!currentValues.includes(suggestion.value)) {\n    currentValues.push(suggestion.value)\n    filter.value = currentValues.join(', ')\n    \n    // Store display name mapping\n    if (!filter.userDisplayMap) filter.userDisplayMap = {}\n    filter.userDisplayMap[suggestion.value] = suggestion.label\n  }\n  filter.searchValue = ''\n  filter.suggestions = []\n  filter.selectedLinkIndex = -1\n}\n\n// Keyboard navigation functions for link fields\nconst handleLinkKeyNavigation = (filter, direction) => {\n  if (!filter.suggestions || filter.suggestions.length === 0) return\n  \n  const maxIndex = filter.suggestions.length - 1\n  \n  // Initialize selectedIndex if not set\n  if (filter.selectedLinkIndex === undefined || filter.selectedLinkIndex === null) {\n    filter.selectedLinkIndex = -1\n  }\n  \n  if (direction === 'down') {\n    filter.selectedLinkIndex = filter.selectedLinkIndex < maxIndex ? filter.selectedLinkIndex + 1 : 0\n  } else if (direction === 'up') {\n    filter.selectedLinkIndex = filter.selectedLinkIndex > 0 ? filter.selectedLinkIndex - 1 : maxIndex\n  }\n  \n  // Scroll selected item into view\n  scrollSelectedLinkIntoView(filter)\n}\n\nconst handleLinkEnter = (filter) => {\n  if (filter.selectedLinkIndex >= 0 && filter.suggestions && filter.suggestions[filter.selectedLinkIndex]) {\n    // Select the highlighted suggestion\n    addUserToMultiSelect(filter, filter.suggestions[filter.selectedLinkIndex])\n  }\n}\n\nconst clearLinkSuggestions = (filter) => {\n  filter.suggestions = []\n  filter.selectedLinkIndex = -1\n}\n\nconst scrollSelectedLinkIntoView = (filter) => {\n  // Use nextTick to ensure DOM is updated\n  nextTick(() => {\n    const selectedElement = document.querySelector(`[ref=\"selectedLinkOption\"]`)\n    if (selectedElement) {\n      selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' })\n    }\n  })\n}\n\n// Tag search helpers\nlet tagSearchTimeouts = {}\n\nconst handleTagSearch = async (filter, searchValue) => {\n  filter.loadingTags = true\n  \n  // Store current selected index to preserve it if possible\n  const previousSelectedIndex = filter.selectedTagIndex\n  \n  // Clear existing timeout for this filter\n  if (tagSearchTimeouts[filter.id]) {\n    clearTimeout(tagSearchTimeouts[filter.id])\n  }\n  \n  // Debounce search requests\n  tagSearchTimeouts[filter.id] = setTimeout(async () => {\n    try {\n      const response = await fetch('/api/method/force_trans_customization.api.issues.search_tags', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Frappe-CSRF-Token': window.csrf_token || ''\n        },\n        body: JSON.stringify({\n          search_query: searchValue || '',\n          limit: 15\n        })\n      })\n      \n      if (response.ok) {\n        const data = await response.json()\n        filter.tagSuggestions = data.message || []\n        // Preserve current selection or reset to -1 only if suggestions array length changed significantly\n        if (!filter.tagSuggestions || filter.tagSuggestions.length === 0) {\n          filter.selectedTagIndex = -1\n        } else if (previousSelectedIndex >= 0 && previousSelectedIndex < filter.tagSuggestions.length) {\n          // Try to preserve the previous selection if valid\n          filter.selectedTagIndex = previousSelectedIndex\n        } else if (filter.selectedTagIndex >= filter.tagSuggestions.length) {\n          filter.selectedTagIndex = Math.max(0, filter.tagSuggestions.length - 1)\n        }\n      }\n    } catch (error) {\n      console.error('Tag search error:', error)\n      filter.tagSuggestions = []\n    } finally {\n      filter.loadingTags = false\n    }\n  }, 300) // 300ms debounce\n}\n\n// addTagFromInput function removed - now only allowing selection from dropdown\n\nconst addTagFromSuggestion = (filter, tagSuggestion) => {\n  const currentTags = getTags(filter.value)\n  \n  if (!currentTags.includes(tagSuggestion.value)) {\n    currentTags.push(tagSuggestion.value)\n    filter.value = currentTags.join(', ')\n  }\n  \n  filter.tagInput = ''\n  filter.tagSuggestions = []\n  filter.selectedTagIndex = -1\n}\n\n// Keyboard navigation functions for tags\nconst handleTagKeyNavigation = (filter, direction) => {\n  if (!filter.tagSuggestions || filter.tagSuggestions.length === 0) return\n  \n  const maxIndex = filter.tagSuggestions.length - 1\n  \n  // Initialize selectedIndex if not set\n  if (filter.selectedTagIndex === undefined || filter.selectedTagIndex === null) {\n    filter.selectedTagIndex = -1\n  }\n  \n  if (direction === 'down') {\n    filter.selectedTagIndex = filter.selectedTagIndex < maxIndex ? filter.selectedTagIndex + 1 : 0\n  } else if (direction === 'up') {\n    filter.selectedTagIndex = filter.selectedTagIndex > 0 ? filter.selectedTagIndex - 1 : maxIndex\n  }\n  \n  // Scroll selected item into view\n  scrollSelectedTagIntoView(filter)\n}\n\nconst handleTagEnter = (filter) => {\n  // Only allow selection from dropdown suggestions\n  if (filter.selectedTagIndex >= 0 && filter.tagSuggestions && filter.tagSuggestions[filter.selectedTagIndex]) {\n    // Select the highlighted suggestion\n    addTagFromSuggestion(filter, filter.tagSuggestions[filter.selectedTagIndex])\n  }\n  // Do not add custom tags from input text anymore\n}\n\nconst clearTagSuggestions = (filter) => {\n  filter.tagSuggestions = []\n  filter.selectedTagIndex = -1\n}\n\nconst scrollSelectedTagIntoView = (filter) => {\n  // Use nextTick to ensure DOM is updated\n  nextTick(() => {\n    const selectedElement = document.querySelector(`[ref=\"selectedTagOption\"]`)\n    if (selectedElement) {\n      selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' })\n    }\n  })\n}\n\n// Tag styling function using exact backend category colors\nconst getTagStyle = (tag) => {\n  const categoryColor = getTagColor(tag) // This returns the exact category_color from Tag Category\n  \n  if (categoryColor) {\n    // Use the exact category color for the pill\n    const hexColor = categoryColor.startsWith('#') ? categoryColor : `#${categoryColor}`\n    \n    // Convert hex to RGB for opacity variations\n    const hex = hexColor.replace('#', '')\n    const r = parseInt(hex.substr(0, 2), 16)\n    const g = parseInt(hex.substr(2, 2), 16)\n    const b = parseInt(hex.substr(4, 2), 16)\n\n    // Create color variations based on the exact category color\n    const bgColor = `rgba(${r}, ${g}, ${b}, 0.15)` // Light background using category color\n    const borderColor = hexColor // Exact category color for border\n\n    return {\n      backgroundColor: bgColor,\n      color: '#000000', // Always black text\n      borderColor: borderColor,\n      borderWidth: '1.5px'\n    }\n  }\n  \n  // Fallback to neutral gray if no category color mapping found\n  return {\n    backgroundColor: 'rgba(107, 114, 128, 0.1)',\n    color: '#000000', // Always black text\n    borderColor: 'rgba(107, 114, 128, 0.3)',\n    borderWidth: '1px'\n  }\n}\n\n// Link/Reference Helpers - Updated to use real API endpoints\nlet searchTimeouts = {}\n\nconst handleLinkSearch = async (filter, searchValue) => {\n  filter.searchValue = searchValue\n  filter.loading = true\n  \n  // Store current selected index to preserve it if possible\n  const previousSelectedIndex = filter.selectedLinkIndex\n  \n  // Clear existing timeout for this filter\n  if (searchTimeouts[filter.id]) {\n    clearTimeout(searchTimeouts[filter.id])\n  }\n  \n  // Debounce search requests\n  searchTimeouts[filter.id] = setTimeout(async () => {\n    try {\n      let searchResults = []\n      let endpoint = ''\n      \n      // Determine which endpoint to use based on field type\n      if (filter.field === 'customer') {\n        endpoint = '/api/method/force_trans_customization.api.issues.search_customers'\n      } else if (filter.field === 'contact') {\n        endpoint = '/api/method/force_trans_customization.api.issues.search_contacts'\n      } else if (filter.field === 'lead') {\n        endpoint = '/api/method/force_trans_customization.api.issues.search_leads'\n      } else if (filter.field === 'custom_assigned_csm_team') {\n        endpoint = '/api/method/force_trans_customization.api.issues.search_user_groups'\n      } else if (filter.field === 'custom_users_assigned') {\n        endpoint = '/api/method/force_trans_customization.api.issues.search_users'\n      }\n      \n      if (endpoint) {\n        const response = await fetch(endpoint, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-Frappe-CSRF-Token': window.csrf_token || ''\n          },\n          body: JSON.stringify({\n            search_query: searchValue || '',\n            limit: 10,\n            doctype_filter: filter.field === 'custom_users_assigned' ? 'User' : undefined\n          })\n        })\n        \n        if (response.ok) {\n          const data = await response.json()\n          searchResults = data.message || []\n        }\n      }\n      \n      filter.suggestions = searchResults\n      // Preserve current selection or reset to -1 only if suggestions array length changed significantly\n      if (!filter.suggestions || filter.suggestions.length === 0) {\n        filter.selectedLinkIndex = -1\n      } else if (previousSelectedIndex >= 0 && previousSelectedIndex < filter.suggestions.length) {\n        // Try to preserve the previous selection if valid\n        filter.selectedLinkIndex = previousSelectedIndex\n      } else if (filter.selectedLinkIndex >= filter.suggestions.length) {\n        filter.selectedLinkIndex = Math.max(0, filter.suggestions.length - 1)\n      }\n    } catch (error) {\n      console.error('Search error:', error)\n      filter.suggestions = []\n    } finally {\n      filter.loading = false\n    }\n  }, 300) // 300ms debounce\n}\n\n\n// Frappe UI Helper Functions\nconst getOperatorDropdownOptions = (fieldValue, filter) => {\n  const operators = getOperatorsForField(fieldValue)\n  return operators.map(op => ({\n    label: op.label,\n    onClick: () => {\n      // Only clear specific values based on operator change, preserve main data\n      if (filter.operator !== op.value) {\n        // For date fields, only clear date range specific values\n        if (getFieldType(fieldValue) === 'date') {\n          if (op.value === 'between') {\n            // Switching to between - keep single value as start value\n            if (filter.value && !filter.startValue) {\n              filter.startValue = filter.value\n              filter.endValue = ''\n            }\n          } else if (filter.operator === 'between') {\n            // Switching from between - use start value as main value\n            if (filter.startValue && !filter.value) {\n              filter.value = filter.startValue\n            }\n            filter.startValue = ''\n            filter.endValue = ''\n          }\n        }\n        \n        // Don't clear main filter values - preserve user input\n        // Only clear operator-specific UI state\n        filter.multiSelectValue = null\n        filter.searchValue = ''\n        \n        // Clear search suggestions but keep selected values\n        filter.suggestions = []\n        filter.searchOptions = []\n      }\n      filter.operator = op.value\n    }\n  }))\n}\n\nconst getOperatorLabel = (operatorValue, fieldValue) => {\n  const operators = getOperatorsForField(fieldValue)\n  return operators.find(op => op.value === operatorValue)?.label || operatorValue\n}\n\nconst getComboboxOptions = (fieldValue) => {\n  const options = getFieldOptions(fieldValue)\n  if (!options || options.length === 0) {\n    return []\n  }\n  return options.map(option => {\n    if (typeof option === 'string') {\n      return {\n        label: option,\n        value: option\n      }\n    }\n    return {\n      label: option.label || option.value,\n      value: option.value || option.label\n    }\n  })\n}\n\nconst getDisplayValueForOption = (value, fieldValue) => {\n  const options = getFieldOptions(fieldValue)\n  const option = options.find(opt => opt.value === value)\n  return option ? option.label : value\n}\n\nconst getAvailableComboboxOptions = (filter) => {\n  const allOptions = getFieldOptions(filter.field)\n  const selectedValues = getSelectedValues(filter.value)\n  return allOptions\n    .filter(option => !selectedValues.includes(option.value))\n    .map(option => ({\n      label: option.label,\n      value: option.value\n    }))\n}\n\nconst handleMultiSelectChange = (filter, newValue) => {\n  if (!newValue) return\n  \n  const values = getSelectedValues(filter.value)\n  if (!values.includes(newValue)) {\n    values.push(newValue)\n    filter.value = values.join(', ')\n  }\n  // Clear the combobox selection\n  filter.multiSelectValue = null\n}\n\n\nconst updateDateRange = (filter) => {\n  if (filter.startValue && filter.endValue) {\n    filter.value = `${filter.startValue},${filter.endValue}`\n  } else {\n    filter.value = ''\n  }\n}\n\n// Main Functions\nconst addFilter = (fieldValue) => {\n  // Set default operators based on field type\n  const fieldType = getFieldType(fieldValue)\n  let defaultOperator = 'equals'\n  \n  if (fieldType === 'link') {\n    defaultOperator = 'in' // Default to 'In' for link fields\n  } else if (fieldType === 'tags') {\n    defaultOperator = 'has' // Default to 'Has Tag' for tags\n  } else {\n    defaultOperator = getOperatorsForField(fieldValue)[0]?.value || 'equals'\n  }\n  \n  const newFilter = {\n    id: ++filterIdCounter,\n    field: fieldValue,\n    operator: defaultOperator,\n    value: '',\n    // Date range specific properties\n    startValue: '',\n    endValue: '',\n    // Link-specific properties (all link fields are multiSelect)\n    searchValue: '',\n    displayValue: '',\n    suggestions: [],\n    showSuggestions: false,\n    loading: false,\n    userDisplayMap: {},\n    selectedLinkIndex: -1,\n    // Tags-specific properties\n    tagInput: '',\n    tagSuggestions: [],\n    loadingTags: false,\n    selectedTagIndex: -1\n  }\n  \n  pendingFilters.value.push(newFilter)\n}\n\nconst removeFilter = (index) => {\n  pendingFilters.value.splice(index, 1)\n}\n\nconst removeAppliedFilter = (index) => {\n  appliedFilters.value.splice(index, 1)\n  emitFilters()\n}\n\nconst applyFilters = async () => {\n  if (!hasPendingChanges.value) return\n  \n  // Show loading state\n  isApplyingFilters.value = true\n  \n  try {\n    appliedFilters.value = JSON.parse(JSON.stringify(pendingFilters.value))\n    emitFilters()\n    showFilterPanel.value = false\n  } catch (error) {\n    console.error('Error applying filters:', error)\n  } finally {\n    // Add slight delay for smooth UX\n    setTimeout(() => {\n      isApplyingFilters.value = false\n    }, 500)\n  }\n}\n\nconst clearAllFilters = () => {\n  pendingFilters.value = []\n  appliedFilters.value = []\n  searchQuery.value = ''\n  \n  emit(\"update:searchQuery\", '')\n  emit(\"update:filters\", [])\n  emit(\"filters-applied\", [])\n  \n  showFilterPanel.value = false\n}\n\nconst emitFilters = () => {\n  const filterData = appliedFilters.value\n    .filter(f => f.value && f.value.toString().trim())\n    .map(filter => ({\n      field: filter.field,\n      operator: filter.operator,\n      value: filter.value.toString().trim(),\n      displayValue: filter.displayValue || null\n    }))\n  \n  console.log('Emitting filters:', filterData)\n  \n  // Emit both the old format (for compatibility) and new event\n  emit(\"update:filters\", filterData)\n  emit(\"filters-applied\", filterData)\n}\n\n// Event handlers\nconst handleSearchChange = (value) => {\n  searchQuery.value = value\n  emit(\"update:searchQuery\", value)\n}\n\nconst handleSuggestionSelected = (suggestion) => {\n  emit(\"suggestion-selected\", suggestion)\n}\n\n// Watch props\nwatch(() => props.searchQuery, (newValue) => {\n  searchQuery.value = newValue\n})\n\n// Load from localStorage on mount and setup search for link fields\nonMounted(() => {\n  const savedFilters = localStorage.getItem('issue_filters')\n  if (savedFilters) {\n    try {\n      const parsed = JSON.parse(savedFilters)\n      appliedFilters.value = parsed.applied || []\n      pendingFilters.value = parsed.pending || []\n    } catch (e) {\n      console.warn('Failed to parse saved filters:', e)\n    }\n  }\n\n  // Setup reactive search for link fields\n  watch(() => pendingFilters.value, (newFilters) => {\n    newFilters.forEach(filter => {\n      if (getFieldType(filter.field) === 'link' && filter.searchValue) {\n        handleLinkSearch(filter, filter.searchValue)\n      }\n    })\n  }, { deep: true })\n})\n\n// Save to localStorage when filters change\nwatch([appliedFilters, pendingFilters], () => {\n  localStorage.setItem('issue_filters', JSON.stringify({\n    applied: appliedFilters.value,\n    pending: pendingFilters.value\n  }))\n}, { deep: true })\n</script>\n\n<style scoped>\n.awesome-search {\n  transition: all 0.3s ease;\n}\n\n.awesome-search:deep(.search-box) {\n  border-radius: 12px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  border: 2px solid #e5e7eb;\n  background: white;\n  transition: all 0.3s ease;\n}\n\n.awesome-search:deep(.search-box):hover {\n  border-color: #3b82f6;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n\n/* Custom scrollbar for suggestions */\n.max-h-48::-webkit-scrollbar {\n  width: 6px;\n}\n\n.max-h-48::-webkit-scrollbar-track {\n  background: #f1f5f9;\n  border-radius: 3px;\n}\n\n.max-h-48::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.max-h-48::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Focus styles for better accessibility */\nselect:focus, input:focus {\n  outline: none;\n  ring: 2px;\n  ring-color: #3b82f6;\n  border-color: #3b82f6;\n}\n\n/* Animation for filter tags */\n.inline-flex {\n  animation: fadeIn 0.2s ease-in-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n/* Hover effects for interactive elements */\n.hover\\\\:bg-gray-100:hover {\n  background-color: #f3f4f6;\n  transition: background-color 0.15s ease-in-out;\n}\n\n.hover\\\\:text-red-600:hover {\n  color: #dc2626;\n  transition: color 0.15s ease-in-out;\n}\n\n/* Custom styles for multi-select tags */\n.bg-blue-100 {\n  animation: slideIn 0.2s ease-in-out;\n}\n\n.bg-purple-100 {\n  animation: slideIn 0.2s ease-in-out;\n}\n\n/* Enhanced filter container styling */\n.filter-container {\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border: 1px solid #e2e8f0;\n  border-radius: 0.75rem;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n  transition: all 0.3s ease;\n}\n\n.filter-container:hover {\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  transform: translateY(-1px);\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n/* Improved filter panel shadow */\n.shadow-lg {\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n}\n\n/* Better spacing for filter items */\n.space-y-4 > * + * {\n  margin-top: 1rem;\n}\n\n/* Frappe UI Combobox styling improvements */\n.filter-combobox {\n  @apply relative;\n}\n\n.filter-combobox .reka-combobox-trigger {\n  @apply bg-white border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 shadow-sm hover:shadow-md;\n}\n\n/* Grid layout improvements */\n.grid-cols-12 {\n  grid-template-columns: repeat(12, minmax(0, 1fr));\n}\n\n/* Enhanced button styling */\nbutton:focus {\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n\n/* Tag styling improvements */\n.inline-flex {\n  animation: fadeIn 0.3s ease-out;\n}\n\n/* Responsive adjustments */\n@media (max-width: 1024px) {\n  .grid-cols-12 {\n    grid-template-columns: 1fr;\n    gap: 2rem;\n  }\n  \n  .col-span-2,\n  .col-span-7,\n  .col-span-1 {\n    grid-column: span 1;\n  }\n  \n  .min-w-96 {\n    min-width: 100%;\n  }\n}\n\n@media (max-width: 768px) {\n  .filter-panel-grid {\n    display: block;\n  }\n  \n  .filter-panel-grid > * {\n    margin-bottom: 0.75rem;\n  }\n  \n  .flex-wrap {\n    flex-wrap: wrap;\n  }\n}\n</style>","<template>\r\n  <div class=\"bg-white rounded-lg shadow-sm border mt-4\">\r\n    <div class=\"px-6 py-4 flex items-center justify-between\">\r\n      <!-- Results info -->\r\n      <div class=\"text-sm text-gray-700\">\r\n        <span v-if=\"totalItems > 0\">\r\n          Showing {{ startItem }} to {{ endItem }} of {{ totalItems }} results\r\n        </span>\r\n        <span v-else>\r\n          No results found\r\n        </span>\r\n      </div>\r\n\r\n      <!-- Pagination controls -->\r\n      <div class=\"flex items-center space-x-2\" v-if=\"totalPages > 1\">\r\n        <!-- Previous button -->\r\n        <Button\r\n          theme=\"gray\"\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          :disabled=\"currentPage === 1\"\r\n          @click=\"goToPreviousPage\"\r\n        >\r\n          <template #prefix>\r\n            <FeatherIcon name=\"chevron-left\" class=\"h-4 w-4\" />\r\n          </template>\r\n          Previous\r\n        </Button>\r\n\r\n        <!-- Page numbers -->\r\n        <div class=\"flex items-center space-x-1\">\r\n          <!-- First page -->\r\n          <Button\r\n            v-if=\"showFirstPage\"\r\n            theme=\"gray\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n:class=\"{ 'bg-blue-50 text-blue-600 border-blue-200': currentPage !== 1, 'pagination-active-btn': currentPage === 1 }\"\r\n            @click=\"goToPage(1)\"\r\n          >\r\n            1\r\n          </Button>\r\n\r\n          <!-- First ellipsis -->\r\n          <span v-if=\"showFirstEllipsis\" class=\"px-2 text-gray-500\">...</span>\r\n\r\n          <!-- Visible page numbers -->\r\n          <Button\r\n            v-for=\"page in visiblePages\"\r\n            :key=\"page\"\r\n            theme=\"gray\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n:class=\"{ 'bg-blue-50 text-blue-600 border-blue-200': currentPage !== page, 'pagination-active-btn': currentPage === page }\"\r\n            @click=\"goToPage(page)\"\r\n          >\r\n            {{ page }}\r\n          </Button>\r\n\r\n          <!-- Last ellipsis -->\r\n          <span v-if=\"showLastEllipsis\" class=\"px-2 text-gray-500\">...</span>\r\n\r\n          <!-- Last page -->\r\n          <Button\r\n            v-if=\"showLastPage\"\r\n            theme=\"gray\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n:class=\"{ 'bg-blue-50 text-blue-600 border-blue-200': currentPage !== totalPages, 'pagination-active-btn': currentPage === totalPages }\"\r\n            @click=\"goToPage(totalPages)\"\r\n          >\r\n            {{ totalPages }}\r\n          </Button>\r\n        </div>\r\n\r\n        <!-- Next button -->\r\n        <Button\r\n          theme=\"gray\"\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          :disabled=\"currentPage === totalPages\"\r\n          @click=\"goToNextPage\"\r\n        >\r\n          Next\r\n          <template #suffix>\r\n            <FeatherIcon name=\"chevron-right\" class=\"h-4 w-4\" />\r\n          </template>\r\n        </Button>\r\n      </div>\r\n\r\n      <!-- Items per page selector -->\r\n      <div class=\"flex items-center space-x-2\" v-if=\"showItemsPerPage\">\r\n        <span class=\"text-sm text-gray-700\">Items per page:</span>\r\n        <Select\r\n          v-model=\"localItemsPerPage\"\r\n          :options=\"itemsPerPageOptions\"\r\n          @change=\"handleItemsPerPageChange\"\r\n          class=\"w-20\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Button, FeatherIcon, Select } from \"frappe-ui\"\r\nimport { computed, ref, watch } from \"vue\"\r\n\r\n// Props\r\nconst props = defineProps({\r\n\tcurrentPage: {\r\n\t\ttype: Number,\r\n\t\tdefault: 1,\r\n\t},\r\n\ttotalItems: {\r\n\t\ttype: Number,\r\n\t\tdefault: 0,\r\n\t},\r\n\titemsPerPage: {\r\n\t\ttype: Number,\r\n\t\tdefault: 10,\r\n\t},\r\n\tshowItemsPerPage: {\r\n\t\ttype: Boolean,\r\n\t\tdefault: true,\r\n\t},\r\n\tmaxVisiblePages: {\r\n\t\ttype: Number,\r\n\t\tdefault: 5,\r\n\t},\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits([\r\n\t\"update:currentPage\",\r\n\t\"update:itemsPerPage\",\r\n\t\"pageChange\",\r\n])\r\n\r\n// Local state\r\nconst localItemsPerPage = ref(props.itemsPerPage)\r\n\r\n// Watch for prop changes\r\nwatch(\r\n\t() => props.itemsPerPage,\r\n\t(newValue) => {\r\n\t\tlocalItemsPerPage.value = newValue\r\n\t},\r\n)\r\n\r\n// Computed properties\r\nconst totalPages = computed(() => {\r\n\treturn Math.ceil(props.totalItems / props.itemsPerPage)\r\n})\r\n\r\nconst startItem = computed(() => {\r\n\tif (props.totalItems === 0) return 0\r\n\treturn (props.currentPage - 1) * props.itemsPerPage + 1\r\n})\r\n\r\nconst endItem = computed(() => {\r\n\tconst end = props.currentPage * props.itemsPerPage\r\n\treturn Math.min(end, props.totalItems)\r\n})\r\n\r\n// Calculate visible page numbers\r\nconst visiblePages = computed(() => {\r\n\tconst pages = []\r\n\tconst maxVisible = props.maxVisiblePages\r\n\tconst current = props.currentPage\r\n\tconst total = totalPages.value\r\n\r\n\tif (total <= maxVisible) {\r\n\t\t// Show all pages if total is less than max visible\r\n\t\tfor (let i = 1; i <= total; i++) {\r\n\t\t\tpages.push(i)\r\n\t\t}\r\n\t} else {\r\n\t\t// Calculate start and end of visible range\r\n\t\tlet start = Math.max(1, current - Math.floor(maxVisible / 2))\r\n\t\tlet end = Math.min(total, start + maxVisible - 1)\r\n\r\n\t\t// Adjust start if we're near the end\r\n\t\tif (end - start + 1 < maxVisible) {\r\n\t\t\tstart = Math.max(1, end - maxVisible + 1)\r\n\t\t}\r\n\r\n\t\t// Don't include first and last page in visible range if they'll be shown separately\r\n\t\tif (start > 1) start = Math.max(2, start)\r\n\t\tif (end < total) end = Math.min(total - 1, end)\r\n\r\n\t\tfor (let i = start; i <= end; i++) {\r\n\t\t\tpages.push(i)\r\n\t\t}\r\n\t}\r\n\r\n\treturn pages\r\n})\r\n\r\n// Show/hide first page button\r\nconst showFirstPage = computed(() => {\r\n\treturn (\r\n\t\ttotalPages.value > props.maxVisiblePages && !visiblePages.value.includes(1)\r\n\t)\r\n})\r\n\r\n// Show/hide last page button\r\nconst showLastPage = computed(() => {\r\n\treturn (\r\n\t\ttotalPages.value > props.maxVisiblePages &&\r\n\t\t!visiblePages.value.includes(totalPages.value)\r\n\t)\r\n})\r\n\r\n// Show/hide ellipsis\r\nconst showFirstEllipsis = computed(() => {\r\n\treturn (\r\n\t\tshowFirstPage.value &&\r\n\t\tvisiblePages.value.length > 0 &&\r\n\t\tvisiblePages.value[0] > 2\r\n\t)\r\n})\r\n\r\nconst showLastEllipsis = computed(() => {\r\n\treturn (\r\n\t\tshowLastPage.value &&\r\n\t\tvisiblePages.value.length > 0 &&\r\n\t\tvisiblePages.value[visiblePages.value.length - 1] < totalPages.value - 1\r\n\t)\r\n})\r\n\r\n// Items per page options\r\nconst itemsPerPageOptions = computed(() => [\r\n\t{ label: \"5\", value: 5 },\r\n\t{ label: \"10\", value: 10 },\r\n\t{ label: \"20\", value: 20 },\r\n\t{ label: \"50\", value: 50 },\r\n\t{ label: \"100\", value: 100 },\r\n])\r\n\r\n// Methods\r\nconst goToPage = (page) => {\r\n\tif (page >= 1 && page <= totalPages.value && page !== props.currentPage) {\r\n\t\temit(\"update:currentPage\", page)\r\n\t\temit(\"pageChange\", {\r\n\t\t\tpage,\r\n\t\t\titemsPerPage: props.itemsPerPage,\r\n\t\t\toffset: (page - 1) * props.itemsPerPage,\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst goToPreviousPage = () => {\r\n\tif (props.currentPage > 1) {\r\n\t\tgoToPage(props.currentPage - 1)\r\n\t}\r\n}\r\n\r\nconst goToNextPage = () => {\r\n\tif (props.currentPage < totalPages.value) {\r\n\t\tgoToPage(props.currentPage + 1)\r\n\t}\r\n}\r\n\r\nconst handleItemsPerPageChange = () => {\r\n\tconst newItemsPerPage = localItemsPerPage.value\r\n\temit(\"update:itemsPerPage\", newItemsPerPage)\r\n\r\n\t// Calculate new page to maintain roughly the same position\r\n\tconst currentFirstItem = (props.currentPage - 1) * props.itemsPerPage + 1\r\n\tconst newPage = Math.ceil(currentFirstItem / newItemsPerPage)\r\n\r\n\temit(\"pageChange\", {\r\n\t\tpage: newPage,\r\n\t\titemsPerPage: newItemsPerPage,\r\n\t\toffset: (newPage - 1) * newItemsPerPage,\r\n\t})\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.pagination-active-btn {\r\n  background-color: #2563eb !important;\r\n  color: white !important;\r\n  border-color: #2563eb !important;\r\n  font-weight: bold !important;\r\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;\r\n  transform: translateY(-1px) !important;\r\n}\r\n\r\n.pagination-active-btn:hover {\r\n  background-color: #1d4ed8 !important;\r\n  border-color: #1d4ed8 !important;\r\n  transform: translateY(-2px) !important;\r\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;\r\n}\r\n\r\n/* Override Frappe UI button styles */\r\n:deep(.pagination-active-btn) {\r\n  background-color: #2563eb !important;\r\n  color: white !important;\r\n  border-color: #2563eb !important;\r\n  font-weight: bold !important;\r\n}\r\n\r\n:deep(.pagination-active-btn:hover) {\r\n  background-color: #1d4ed8 !important;\r\n  border-color: #1d4ed8 !important;\r\n}\r\n</style>","<template>\n  <div class=\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8\">\n    <div \n      @click=\"handleStatClick('team_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'team_tickets' ? 'ring-2 ring-gray-500 bg-gray-50' : 'hover:bg-gray-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-gray-900\">{{ teamTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Team Tickets</div>\n    </div>\n    <div \n      @click=\"handleStatClick('open_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'open_tickets' ? 'ring-2 ring-blue-500 bg-blue-50' : 'hover:bg-blue-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-blue-600\">{{ openTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Open Tickets</div>\n    </div>\n    <div \n      @click=\"handleStatClick('assigned_to_me')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'assigned_to_me' ? 'ring-2 ring-green-500 bg-green-50' : 'hover:bg-green-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-green-600\">{{ assignedToMe }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Assigned To Me</div>\n    </div>\n    <div \n      @click=\"handleStatClick('actionable_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'actionable_tickets' ? 'ring-2 ring-orange-500 bg-orange-50' : 'hover:bg-orange-50'\n      ]\"\n      title=\"Tickets where customer awaits our reply\"\n    >\n      <div class=\"text-3xl font-bold text-orange-600\">{{ actionableTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Customers Awaiting Our Reply</div>\n    </div>\n    <div \n      @click=\"handleStatClick('response_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'response_tickets' ? 'ring-2 ring-purple-500 bg-purple-50' : 'hover:bg-purple-50'\n      ]\"\n      title=\"Tickets awaiting customer response\"\n    >\n      <div class=\"text-3xl font-bold text-purple-600\">{{ responseTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Awaiting Response from Customer</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch, shallowRef } from \"vue\"\nimport { call } from \"frappe-ui\"\n\nconst props = defineProps({\n  issues: {\n    type: Array,\n    default: () => [],\n  },\n  activeFilter: {\n    type: String,\n    default: 'team_tickets'\n  }\n})\n\n// Define emits\nconst emit = defineEmits(['filter-changed'])\n\n// Use shallowRef for stats object since we replace the entire object\nconst stats = shallowRef({\n  team_tickets: 0,\n  open_tickets: 0,\n  assigned_to_me: 0,\n  actionable_tickets: 0,\n  response_tickets: 0\n})\n\n// Memoized reactive getters for template with proper reactivity\nconst teamTickets = computed(() => stats.value.team_tickets)\nconst openTickets = computed(() => stats.value.open_tickets)\nconst assignedToMe = computed(() => stats.value.assigned_to_me)\nconst actionableTickets = computed(() => stats.value.actionable_tickets)\nconst responseTickets = computed(() => stats.value.response_tickets)\n\n// Memoized stats fetching with debouncing to prevent excessive API calls\nlet statsCache = null\nlet lastFetchTime = 0\nconst CACHE_DURATION = 30000 // 30 seconds cache\n\nconst fetchStats = async () => {\n  const now = Date.now()\n  \n  // Return cached result if still valid\n  if (statsCache && (now - lastFetchTime) < CACHE_DURATION) {\n    return statsCache\n  }\n  \n  try {\n    const result = await call(\"force_trans_customization.api.issues.get_issue_stats\")\n    stats.value = result\n    statsCache = result\n    lastFetchTime = now\n    return result\n  } catch (error) {\n    console.error(\"Error fetching issue stats:\", error)\n    // Keep existing values on error\n    return stats.value\n  }\n}\n\n// Debounced stats refresh to prevent excessive API calls\nlet refreshTimeout = null\nconst debouncedStatsRefresh = () => {\n  if (refreshTimeout) {\n    clearTimeout(refreshTimeout)\n  }\n  refreshTimeout = setTimeout(() => {\n    fetchStats()\n  }, 500) // 500ms debounce\n}\n\n// Fetch stats on component mount\nonMounted(() => {\n  fetchStats()\n})\n\n// Optimized watcher - only watch issues length instead of deep watching entire array\n// This prevents unnecessary re-renders when issue content changes but count remains same\nwatch(() => props.issues.length, () => {\n  debouncedStatsRefresh()\n})\n\n// Handle stat tile clicks\nconst handleStatClick = (filterType) => {\n  emit('filter-changed', filterType)\n}\n\n// Expose fetchStats method for parent components to trigger refresh\ndefineExpose({\n  refreshStats: fetchStats\n})\n</script>","<template>\n\t<div class=\"bg-white rounded-lg shadow-sm border\">\n\t\t<div class=\"px-6 py-4 border-b border-gray-200\">\n\t\t\t<h3 class=\"text-lg font-medium text-gray-900\">Issues</h3>\n\t\t</div>\n\n\t\t<!-- Loading state -->\n\t\t<div v-if=\"loading\" class=\"px-6 py-12 text-center text-gray-500\">\n\t\t\t<div class=\"flex items-center justify-center\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n\t\t\t\t<span class=\"ml-2\">Loading issues...</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- ListView -->\n\t\t<ListView v-else :columns=\"columns\" :rows=\"transformedIssues\" row-key=\"name\" :options=\"listOptions\"\n\t\t\t@update:selections=\"handleSelections\" class=\"p-4\">\n\n\t\t\t<ListHeader>\n\t\t\t\t<ListHeaderItem v-for=\"column in columns\" :key=\"column.key\" :item=\"column\">\n\t\t\t\t\t<template v-if=\"column.icon\" #prefix=\"{ item }\">\n\t\t\t\t\t\t<FeatherIcon :name=\"item.icon\" class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<!-- Sort indicator for sortable columns -->\n\t\t\t\t\t<template v-if=\"column.sortable\" #suffix>\n\t\t\t\t\t\t<button @click=\"handleColumnSort(column.key)\"\n\t\t\t\t\t\t\tclass=\"ml-2 p-1 rounded hover:bg-gray-100 transition-colors\"\n\t\t\t\t\t\t\t:class=\"getSortButtonClass(column.key)\">\n\t\t\t\t\t\t\t<FeatherIcon :name=\"getSortIcon(column.key)\" class=\"h-3 w-3\"\n\t\t\t\t\t\t\t\t:class=\"getSortIconClass(column.key)\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t</ListHeaderItem>\n\t\t\t</ListHeader>\n\n\t\t\t<ListRows>\n\t\t\t\t<ListRow \n\t\t\t\t\tv-for=\"issue in transformedIssues\" \n\t\t\t\t\t:key=\"issue.name\" \n\t\t\t\t\t:row=\"issue\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'bg-orange-50 hover:bg-orange-100': issue.custom_is_response_expected === 1\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<template #default=\"{ column, item }\">\n\t\t\t\t\t\t<ListRowItem :item=\"item\" :align=\"column.align\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<!-- Avatar for assignee column -->\n\t\t\t\t\t\t\t\t<Avatar v-if=\"column.key === 'raised_by'\" :size=\"'sm'\"\n\t\t\t\t\t\t\t\t\t:label=\"getInitials(issue.raised_by)\" class=\"mr-3\" />\n\t\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\t<!-- Custom content for specific columns only -->\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<!-- Issue ID with link -->\n\t\t\t\t\t\t\t\t<a v-if=\"column.key === 'name'\" \n\t\t\t\t\t\t\t\t\t:href=\"getIssueUrl(issue)\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\tclass=\"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm\"\n\t\t\t\t\t\t\t\t\t@click.prevent=\"handleIssueClick(issue)\">\n\t\t\t\t\t\t\t\t\t{{ formatIssueId(item) }}\n\t\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t\t<!-- Title with description -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === 'subject'\" class=\"max-w-xs cursor-pointer\" \n\t\t\t\t\t\t\t\t\t@mouseenter=\"showIssueDetailsPopupFn($event, issue)\"\n\t\t\t\t\t\t\t\t\t@mouseleave=\"hideIssueDetailsPopup\">\n\t\t\t\t\t\t\t\t\t<div class=\"font-medium truncate\">{{ issue.subject }}</div>\n\n\t\t\t\t\t\t\t\t\t<template v-if=\"issue.description && issue.description.length > 0\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-gray-500 text-sm mt-1 truncate max-w-xs\">\n\t\t\t\t\t\t\t\t\t\t\t{{ stripHtml(issue.description) }}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Assignee email with truncation -->\n\t\t\t\t\t\t\t\t<Tooltip v-else-if=\"column.key === 'raised_by'\" \n\t\t\t\t\t\t\t\t\t:text=\"`Raised By: ${item || 'Not assigned'}`\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-medium text-gray-900 truncate block\">\n\t\t\t\t\t\t\t\t\t\t{{ item || '-' }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t<!-- Assigned Users as pills with hover popup -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === 'custom_users_assigned'\" class=\"flex flex-wrap gap-1\">\n\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\tv-if=\"issue.custom_users_assigned && issue.custom_users_assigned.length > 0\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"user in issue.custom_users_assigned.filter(u => u.user_assigned)\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"user.name || user\" class=\"relative inline-block\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t@mouseenter=\"showUserPopup($event, user)\" @mouseleave=\"hideUserPopup\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ getInitials(user.user_assigned) }}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<span v-else class=\"text-gray-400 text-sm\">-</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- CSM Team simple display like Raised By -->\n\t\t\t\t\t\t\t\t<Tooltip v-else-if=\"column.key === 'custom_assigned_csm_team'\" \n\t\t\t\t\t\t\t\t\t:text=\"`CSM Team: ${issue.custom_assigned_csm_team || 'Not assigned'}`\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-medium text-gray-900 truncate block\">\n\t\t\t\t\t\t\t\t\t\t{{ issue.custom_assigned_csm_team || '-' }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t<!-- Tags -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === '_user_tags'\"\n\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors\"\n\t\t\t\t\t\t\t\t\t@mouseenter=\"showTagsPopupFn($event, issue._user_tags)\"\n\t\t\t\t\t\t\t\t\t@mouseleave=\"hideTagsPopupFn\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"issue._user_tags && issue._user_tags.length > 0\">\n\t\t\t\t\t\t\t\t\t\t<!-- Show first tag, truncated if needed -->\n\t\t\t\t\t\t\t\t\t\t<span :style=\"getTagStyle(issue._user_tags[0])\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"issue._user_tags[0]\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"truncate\">{{ issue._user_tags[0] }}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<!-- Always show +X more if there are more tags -->\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"issue._user_tags.length > 1\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t+{{ issue._user_tags.length - 1 }}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<span v-else class=\"text-gray-400 text-sm\">-</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Created At with date and time -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === 'creation'\" class=\"flex flex-col\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-sm\">{{ formatDate(item) }}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-400\">{{ formatTime(item) }}</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Status badge -->\n\t\t\t\t\t\t\t\t<Tooltip v-else-if=\"column.key === 'status'\" \n\t\t\t\t\t\t\t\t\t:text=\"`Status: ${issue.status?.label || issue.status || 'New'}`\">\n\t\t\t\t\t\t\t\t\t<span :class=\"getStatusBadgeClass(issue.status?.label || issue.status || 'New')\"\n\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full\">\n\t\t\t\t\t\t\t\t\t\t{{ issue.status?.label || issue.status || 'New' }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\n\n\n\t\t\t\t\t\t\t\t<!-- Default fallback for other columns -->\n\t\t\t\t\t\t\t\t<span v-else>{{ item }}</span>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t</template>\n\t\t\t\t</ListRow>\n\t\t\t</ListRows>\n\n\t\t\t<ListSelectBanner>\n\t\t\t\t<template #actions=\"{ unselectAll }\">\n\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t<Button variant=\"ghost\" label=\"Delete\" />\n\t\t\t\t\t\t<Button variant=\"ghost\" label=\"Unselect all\" @click=\"unselectAll\" />\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</ListSelectBanner>\n\n\t\t</ListView>\n\n\t\t<!-- User Popup -->\n\t\t<div v-if=\"showPopup && popupUser && typeof popupUser === 'object'\"\n\t\t\tclass=\"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48\" :style=\"{\n\t\t\t\tleft: popupPosition.x + 'px',\n\t\t\t\ttop: popupPosition.y + 'px',\n\t\t\t\ttransform: 'translateX(-50%) translateY(-100%)'\n\t\t\t}\">\n\t\t\t<div class=\"text-sm\">\n\t\t\t\t<div class=\"font-semibold text-gray-900 mb-1\">\n\t\t\t\t\t{{ popupUser.user_assigned || 'Unknown User' }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"text-gray-600 flex items-center gap-1\">\n\t\t\t\t\t<span class=\"inline-block w-2 h-2 bg-blue-500 rounded-full\"></span>\n\t\t\t\t\t{{ popupUser.team || 'No Team' }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"text-xs text-gray-500 mt-1\">\n\t\t\t\t\tAssigned: {{ formatDate(popupUser.assigned_date) }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Issue Details Popup (Subject + Description) -->\n\t\t<div v-if=\"showIssueDetailsPopup && issueDetailsPopupData\"\n\t\t\tclass=\"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-md\" :style=\"{\n\t\t\t\tleft: issueDetailsPopupPosition.x + 'px',\n\t\t\t\ttop: issueDetailsPopupPosition.y + 'px',\n\t\t\t\ttransform: 'translateX(-50%) translateY(-100%)'\n\t\t\t}\">\n\t\t\t<div class=\"text-sm\">\n\t\t\t\t<div class=\"font-bold text-gray-900 mb-3\">\n\t\t\t\t\t{{ issueDetailsPopupData.subject }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"issueDetailsPopupData.description\" class=\"text-gray-700 whitespace-pre-wrap max-h-48 overflow-y-auto\">\n\t\t\t\t\t{{ stripHtml(issueDetailsPopupData.description) }}\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"text-gray-400 italic\">\n\t\t\t\t\tNo description available\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tags Popup -->\n\t\t<div v-if=\"showTagsPopup && tagsPopupData\"\n\t\t\tclass=\"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs\" :style=\"{\n\t\t\t\tleft: tagsPopupPosition.x + 'px',\n\t\t\t\ttop: tagsPopupPosition.y + 'px',\n\t\t\t\ttransform: 'translateX(-50%) translateY(-100%)'\n\t\t\t}\">\n\t\t\t<div class=\"text-sm\">\n\t\t\t\t<div class=\"font-semibold text-gray-900 mb-2\">All Tags</div>\n\t\t\t\t<div class=\"flex flex-wrap gap-1\">\n\t\t\t\t\t<span v-for=\"tag in tagsPopupData\" :key=\"tag\" :style=\"getTagStyle(tag)\"\n\t\t\t\t\t\tclass=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border\">\n\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { Avatar, Badge, Button, FeatherIcon, ListView, Tooltip } from \"frappe-ui\"\nimport ListHeader from \"frappe-ui/src/components/ListView/ListHeader.vue\"\nimport ListHeaderItem from \"frappe-ui/src/components/ListView/ListHeaderItem.vue\"\nimport ListRow from \"frappe-ui/src/components/ListView/ListRow.vue\"\nimport ListRowItem from \"frappe-ui/src/components/ListView/ListRowItem.vue\"\nimport ListRows from \"frappe-ui/src/components/ListView/ListRows.vue\"\nimport ListSelectBanner from \"frappe-ui/src/components/ListView/ListSelectBanner.vue\"\nimport { computed, ref, shallowRef, watchEffect } from \"vue\"\nimport { getTagColor } from \"../data/issues\"\n\n// Enhanced status badge component with custom status values\nconst StatusBadge = {\n\tprops: [\"status\"],\n\ttemplate: `\n    <Badge :label=\"displayStatus\" :theme=\"statusTheme\" variant=\"subtle\" />\n  `,\n\tcomputed: {\n\t\tdisplayStatus() {\n\t\t\treturn this.status || \"New\"\n\t\t},\n\t\tstatusTheme() {\n\t\t\tconst status = this.status || \"New\"\n\t\t\t// Color mapping from issue_list.js to maintain consistency\n\t\t\tconst statusThemes = {\n\t\t\t\tNew: \"blue\", //  New issues - blue for fresh/attention needed\n\t\t\t\t\"In Review\": \"orange\", //  Under review - orange for active progress\n\t\t\t\tConfirmed: \"purple\", //  Confirmed and validated - purple for approval\n\t\t\t\t\"In Transit\": \"blue\", //  Active transit - light-blue mapped to blue in Frappe UI\n\t\t\t\tDelivered: \"green\", //  Successfully delivered - green for success\n\t\t\t\tClosed: \"green\", //  Fully completed - darkgreen mapped to green in Frappe UI\n\n\t\t\t\t// Legacy Status Support (backward compatibility)\n\t\t\t\tOpen: \"red\", //  Legacy open state\n\t\t\t\tReplied: \"orange\", //  Legacy replied state\n\t\t\t\t\"On Hold\": \"yellow\", //  Legacy hold state\n\t\t\t\tResolved: \"green\", //  Legacy resolved state\n\t\t\t}\n\t\t\treturn statusThemes[status] || \"gray\"\n\t\t},\n\t},\n\tcomponents: { Badge },\n}\n\n// Enhanced priority badge component with visual indicators\nconst PriorityBadge = {\n\tprops: [\"priority\"],\n\ttemplate: `\n    <div class=\"flex items-center gap-2\">\n      <div :class=\"priorityIndicatorClass\" class=\"w-2 h-2 rounded-full\"></div>\n      <Badge :label=\"displayPriority\" :theme=\"priorityTheme\" variant=\"subtle\" />\n    </div>\n  `,\n\tcomputed: {\n\t\tdisplayPriority() {\n\t\t\treturn this.priority || \"Medium\"\n\t\t},\n\t\tpriorityTheme() {\n\t\t\tconst priority = this.priority || \"Medium\"\n\t\t\tconst priorityThemes = {\n\t\t\t\tCritical: \"red\",\n\t\t\t\tHigh: \"red\",\n\t\t\t\tMedium: \"yellow\",\n\t\t\t\tLow: \"green\",\n\t\t\t}\n\t\t\treturn priorityThemes[priority] || \"yellow\"\n\t\t},\n\t\tpriorityIndicatorClass() {\n\t\t\tconst priority = this.priority || \"Medium\"\n\t\t\treturn {\n\t\t\t\t\"bg-red-500\": priority === \"Critical\",\n\t\t\t\t\"bg-red-400\": priority === \"High\",\n\t\t\t\t\"bg-yellow-400\": priority === \"Medium\",\n\t\t\t\t\"bg-green-400\": priority === \"Low\",\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: { Badge },\n}\n\n\n\nexport default {\n\tcomponents: {\n\t\tListView,\n\t\tAvatar,\n\t\tBadge,\n\t\tButton,\n\t\tFeatherIcon,\n\t\tListHeader,\n\t\tListHeaderItem,\n\t\tListRow,\n\t\tListRowItem,\n\t\tListRows,\n\t\tListSelectBanner,\n\t\tStatusBadge,\n\t\tPriorityBadge,\n\t\tTooltip,\n\t},\n\tprops: {\n\t\tissues: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsortField: {\n\t\t\ttype: String,\n\t\t\tdefault: \"creation\",\n\t\t},\n\t\tsortDirection: {\n\t\t\ttype: String,\n\t\t\tdefault: \"desc\",\n\t\t},\n\t},\n\temits: [\"sort\"],\n\tsetup(props, { emit }) {\n\t\t// Popup state management\n\t\tconst showPopup = ref(false)\n\t\tconst popupUser = ref(null)\n\t\tconst popupPosition = ref({ x: 0, y: 0 })\n\n\t\t// Tags popup state management\n\t\tconst showTagsPopup = ref(false)\n\t\tconst tagsPopupPosition = ref({ x: 0, y: 0 })\n\t\tconst tagsPopupData = ref(null)\n\n\t\t// Issue details popup state management (for subject + description)\n\t\tconst showIssueDetailsPopup = ref(false)\n\t\tconst issueDetailsPopupPosition = ref({ x: 0, y: 0 })\n\t\tconst issueDetailsPopupData = ref(null)\n\n\t\t// Helper methods\n\t\tconst getInitials = (name) => {\n\t\t\tif (!name || typeof name !== \"string\") {\n\t\t\t\treturn \"?\"\n\t\t\t}\n\n\t\t\t// If it's an email address, extract the part before @\n\t\t\tif (name.includes(\"@\")) {\n\t\t\t\tconst emailPart = name.split(\"@\")[0]\n\n\t\t\t\t// If email part has dots or underscores, use those as separators\n\t\t\t\tif (emailPart.includes(\".\") || emailPart.includes(\"_\")) {\n\t\t\t\t\tconst parts = emailPart.split(/[._]/)\n\t\t\t\t\treturn parts\n\t\t\t\t\t\t.map((part) => part[0])\n\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t.slice(0, 2)\n\t\t\t\t}\n\t\t\t\t// Otherwise, take first 2 characters of email part\n\t\t\t\treturn emailPart.slice(0, 2).toUpperCase()\n\t\t\t}\n\n\t\t\t// For regular names with spaces\n\t\t\tif (name.includes(\" \")) {\n\t\t\t\treturn name\n\t\t\t\t\t.split(\" \")\n\t\t\t\t\t.map((n) => n[0])\n\t\t\t\t\t.join(\"\")\n\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t.slice(0, 2)\n\t\t\t}\n\n\t\t\t// For single words, take first 2 characters\n\t\t\treturn name.slice(0, 2).toUpperCase()\n\t\t}\n\n\t\t// Format issue ID to show only year and serial number\n\t\tconst formatIssueId = (issueId) => {\n\t\t\tif (!issueId) return \"\"\n\t\t\t// Extract year and serial from ISS-2025-000016 format\n\t\t\tconst match = issueId.match(/ISS-(\\d{4}-\\d+)/)\n\t\t\treturn match ? match[1] : issueId\n\t\t}\n\n\t\tconst stripHtml = (html) => {\n\t\t\tif (!html) return \"\"\n\t\t\tconst tmp = document.createElement(\"div\")\n\t\t\ttmp.innerHTML = html\n\t\t\treturn tmp.textContent || tmp.innerText || \"\"\n\t\t}\n\n\t\tconst formatDate = (dateString) => {\n\t\t\tif (!dateString) return \"-\"\n\t\t\treturn new Date(dateString).toLocaleDateString(\"en-US\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"short\",\n\t\t\t\tday: \"numeric\",\n\t\t\t})\n\t\t}\n\n\t\tconst formatTime = (dateString) => {\n\t\t\tif (!dateString) return \"\"\n\t\t\treturn new Date(dateString).toLocaleTimeString(\"en-US\", {\n\t\t\t\thour: \"2-digit\",\n\t\t\t\tminute: \"2-digit\",\n\t\t\t})\n\t\t}\n\n\t\t// Helper function to get status color\n\t\tconst getStatusBadgeColor = (status) => {\n\t\t\tconst statusColors = {\n\t\t\t\tNew: \"blue\",\n\t\t\t\t\"In Review\": \"orange\",\n\t\t\t\tConfirmed: \"purple\",\n\t\t\t\t\"In Transit\": \"blue\",\n\t\t\t\tDelivered: \"green\",\n\t\t\t\tClosed: \"green\",\n\t\t\t\tOpen: \"red\",\n\t\t\t\tReplied: \"orange\",\n\t\t\t\t\"On Hold\": \"yellow\",\n\t\t\t\tResolved: \"green\",\n\t\t\t}\n\t\t\treturn statusColors[status] || \"gray\"\n\t\t}\n\n\t\t// Helper function to get priority color\n\t\tconst getPriorityBadgeColor = (priority) => {\n\t\t\tconst priorityColors = {\n\t\t\t\tCritical: \"red\",\n\t\t\t\tHigh: \"red\",\n\t\t\t\tMedium: \"yellow\",\n\t\t\t\tLow: \"green\",\n\t\t\t}\n\t\t\treturn priorityColors[priority] || \"yellow\"\n\t\t}\n\n\t\t// Memoized transformation cache to prevent unnecessary re-computations\n\t\tconst transformationCache = new Map()\n\t\t\n\t\t// Transform issues data to include badge structure for ListView with memoization\n\t\tconst transformedIssues = computed(() => {\n\t\t\treturn props.issues.map((issue) => {\n\t\t\t\t// Use issue name as cache key since it's unique\n\t\t\t\tconst cacheKey = issue.name\n\t\t\t\t\n\t\t\t\t// Check if we have a cached transformation for this issue\n\t\t\t\tif (transformationCache.has(cacheKey)) {\n\t\t\t\t\tconst cached = transformationCache.get(cacheKey)\n\t\t\t\t\t// Verify the cached data is still valid (check all important fields)\n\t\t\t\t\tif (cached.originalStatus === issue.status && \n\t\t\t\t\t    cached.originalPriority === issue.priority &&\n\t\t\t\t\t    cached.originalSubject === issue.subject &&\n\t\t\t\t\t    cached.originalUsersAssigned === JSON.stringify(issue.custom_users_assigned) &&\n\t\t\t\t\t    cached.originalIsResponseExpected === issue.custom_is_response_expected) {\n\t\t\t\t\t\treturn cached.transformed\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Create new transformation\n\t\t\t\tconst transformed = {\n\t\t\t\t\t...issue,\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\tlabel: issue.status || \"New\",\n\t\t\t\t\t\tcolor: getStatusBadgeColor(issue.status),\n\t\t\t\t\t},\n\t\t\t\t\tpriority: {\n\t\t\t\t\t\tlabel: issue.priority || \"Medium\",\n\t\t\t\t\t\tcolor: getPriorityBadgeColor(issue.priority),\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Cache the transformation\n\t\t\t\ttransformationCache.set(cacheKey, {\n\t\t\t\t\ttransformed,\n\t\t\t\t\toriginalStatus: issue.status,\n\t\t\t\t\toriginalPriority: issue.priority,\n\t\t\t\t\toriginalSubject: issue.subject,\n\t\t\t\t\toriginalUsersAssigned: JSON.stringify(issue.custom_users_assigned),\n\t\t\t\t\toriginalIsResponseExpected: issue.custom_is_response_expected\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\treturn transformed\n\t\t\t})\n\t\t})\n\n\t\t// Static columns configuration (memoized since it never changes)\n\t\tconst columns = shallowRef([\n\t\t\t{\n\t\t\t\tlabel: \"Issue ID\",\n\t\t\t\tkey: \"name\",\n\t\t\t\twidth: \"90px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Title\",\n\t\t\t\tkey: \"subject\",\n\t\t\t\twidth: 3,\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Status\",\n\t\t\t\tkey: \"status\",\n\t\t\t\twidth: \"110px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Raised By\",\n\t\t\t\tkey: \"raised_by\",\n\t\t\t\twidth: \"120px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Assigned Users\",\n\t\t\t\tkey: \"custom_users_assigned\",\n\t\t\t\twidth: \"120px\",\n\t\t\t\tsortable: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"CSM Team\",\n\t\t\t\tkey: \"custom_assigned_csm_team\",\n\t\t\t\twidth: \"100px\",\n\t\t\t\tsortable: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Tags\",\n\t\t\t\tkey: \"_user_tags\",\n\t\t\t\twidth: \"100px\",\n\t\t\t\tsortable: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\tkey: \"creation\",\n\t\t\t\twidth: \"90px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t])\n\n\t\t// Static ListView options (memoized since they rarely change)\n\t\tconst listOptions = shallowRef({\n\t\t\tshowTooltip: false,\n\t\t\tselectable: true,\n\t\t\tresizeColumn: false,\n\t\t\trowHeight: 60,\n\t\t\temptyState: {\n\t\t\t\ttitle: \"No tickets found\",\n\t\t\t\tdescription: \"Try adjusting your search or filter criteria\",\n\t\t\t},\n\t\t\tonRowClick: (row) => {\n\t\t\t\thandleIssueClick(row)\n\t\t\t},\n\t\t})\n\n\t\t// Handle selections\n\t\tconst handleSelections = (selections) => {\n\t\t\tconsole.log(\"Selected rows:\", selections)\n\t\t}\n\n\t\t// Get issue URL\n\t\tconst getIssueUrl = (issue) => {\n\t\t\tconst hostname = window.location.origin\n\t\t\treturn `${hostname}/app/issue/${issue.name}`\n\t\t}\n\n\t\t// Handle issue click\n\t\tconst handleIssueClick = (issue) => {\n\t\t\tconsole.log(\"Issue clicked:\", issue)\n\t\t\t// Navigate to Frappe issue page\n\t\t\tconst issueUrl = getIssueUrl(issue)\n\t\t\twindow.open(issueUrl, '_blank')\n\t\t}\n\n\t\t// Get status color classes for indicator dots\n\t\tconst getStatusColor = (status) => {\n\t\t\tconst statusValue = status || \"New\"\n\t\t\t// Color mapping from issue_list.js to maintain consistency\n\t\t\treturn {\n\t\t\t\t\"bg-blue-500\": statusValue === \"New\", //  New issues - blue for fresh/attention needed\n\t\t\t\t\"bg-orange-500\": statusValue === \"In Review\", //  Under review - orange for active progress\n\t\t\t\t\"bg-purple-500\": statusValue === \"Confirmed\", //  Confirmed and validated - purple for approval\n\t\t\t\t\"bg-blue-500\": statusValue === \"In Transit\", //  Active transit - light-blue mapped to blue in Tailwind\n\t\t\t\t\"bg-green-500\": statusValue === \"Delivered\", //  Successfully delivered - green for success\n\t\t\t\t\"bg-green-500\": statusValue === \"Closed\", //  Fully completed - darkgreen mapped to green in Tailwind\n\n\t\t\t\t// Legacy Status Support (backward compatibility)\n\t\t\t\t\"bg-red-500\": statusValue === \"Open\", //  Legacy open state\n\t\t\t\t\"bg-orange-500\": statusValue === \"Replied\", //  Legacy replied state\n\t\t\t\t\"bg-yellow-500\": statusValue === \"On Hold\", //  Legacy hold state\n\t\t\t\t\"bg-green-500\": statusValue === \"Resolved\", //  Legacy resolved state\n\t\t\t}\n\t\t}\n\n\t\t// Get priority color classes\n\t\tconst getPriorityColor = (priority) => {\n\t\t\tconst priorityValue = priority || \"Medium\"\n\t\t\treturn {\n\t\t\t\t\"bg-red-500\": priorityValue === \"Critical\" || priorityValue === \"High\",\n\t\t\t\t\"bg-yellow-500\": priorityValue === \"Medium\",\n\t\t\t\t\"bg-green-500\": priorityValue === \"Low\",\n\t\t\t}\n\t\t}\n\n\t\t// Get status badge CSS classes\n\t\tconst getStatusBadgeClass = (status) => {\n\t\t\tconst statusValue = status || \"New\"\n\t\t\tconst statusClasses = {\n\t\t\t\tNew: \"bg-blue-100 text-blue-800\",\n\t\t\t\t\"In Review\": \"bg-orange-100 text-orange-800\",\n\t\t\t\tConfirmed: \"bg-purple-100 text-purple-800\",\n\t\t\t\t\"In Transit\": \"bg-blue-100 text-blue-800\",\n\t\t\t\tDelivered: \"bg-green-100 text-green-800\",\n\t\t\t\tClosed: \"bg-green-100 text-green-800\",\n\t\t\t\tOpen: \"bg-red-100 text-red-800\",\n\t\t\t\tReplied: \"bg-orange-100 text-orange-800\",\n\t\t\t\t\"On Hold\": \"bg-yellow-100 text-yellow-800\",\n\t\t\t\tResolved: \"bg-green-100 text-green-800\",\n\t\t\t}\n\t\t\treturn statusClasses[statusValue] || \"bg-gray-100 text-gray-800\"\n\t\t}\n\n\t\t// Get priority badge CSS classes\n\t\tconst getPriorityBadgeClass = (priority) => {\n\t\t\tconst priorityValue = priority || \"Medium\"\n\t\t\tconst priorityClasses = {\n\t\t\t\tCritical: \"bg-red-100 text-red-800\",\n\t\t\t\tHigh: \"bg-red-100 text-red-800\",\n\t\t\t\tMedium: \"bg-yellow-100 text-yellow-800\",\n\t\t\t\tLow: \"bg-green-100 text-green-800\",\n\t\t\t}\n\t\t\treturn priorityClasses[priorityValue] || \"bg-yellow-100 text-yellow-800\"\n\t\t}\n\n\t\t// Get priority indicator dot CSS classes\n\t\tconst getPriorityIndicatorClass = (priority) => {\n\t\t\tconst priorityValue = priority || \"Medium\"\n\t\t\treturn {\n\t\t\t\t\"bg-red-500\": priorityValue === \"Critical\",\n\t\t\t\t\"bg-red-400\": priorityValue === \"High\",\n\t\t\t\t\"bg-yellow-400\": priorityValue === \"Medium\",\n\t\t\t\t\"bg-green-400\": priorityValue === \"Low\",\n\t\t\t}\n\t\t}\n\n\t\t// Popup functions for user hover\n\t\tconst showUserPopup = (event, user) => {\n\t\t\tconst rect = event.target.getBoundingClientRect()\n\t\t\tpopupPosition.value = {\n\t\t\t\tx: rect.left + rect.width / 2,\n\t\t\t\ty: rect.top - 10,\n\t\t\t}\n\t\t\tpopupUser.value = user\n\t\t\tshowPopup.value = true\n\t\t}\n\n\t\tconst hideUserPopup = () => {\n\t\t\tshowPopup.value = false\n\t\t\tpopupUser.value = null\n\t\t}\n\n\t\t// Tags popup functions\n\t\tconst showTagsPopupFn = (event, tags) => {\n\t\t\tif (!tags || tags.length === 0) return\n\n\t\t\tconst rect = event.target.getBoundingClientRect()\n\t\t\ttagsPopupPosition.value = {\n\t\t\t\tx: rect.left + rect.width / 2,\n\t\t\t\ty: rect.top - 10,\n\t\t\t}\n\t\t\ttagsPopupData.value = tags\n\t\t\tshowTagsPopup.value = true\n\t\t}\n\n\t\tconst hideTagsPopupFn = () => {\n\t\t\tshowTagsPopup.value = false\n\t\t\ttagsPopupData.value = null\n\t\t}\n\n\t\t// Issue details popup functions\n\t\tconst showIssueDetailsPopupFn = (event, issue) => {\n\t\t\tif (!issue || !issue.subject) return\n\n\t\t\tconst rect = event.currentTarget.getBoundingClientRect()\n\t\t\tissueDetailsPopupPosition.value = {\n\t\t\t\tx: rect.left + rect.width / 2,\n\t\t\t\ty: rect.top - 10,\n\t\t\t}\n\t\t\tissueDetailsPopupData.value = {\n\t\t\t\tsubject: issue.subject,\n\t\t\t\tdescription: issue.description\n\t\t\t}\n\t\t\tshowIssueDetailsPopup.value = true\n\t\t}\n\n\t\tconst hideIssueDetailsPopup = () => {\n\t\t\tshowIssueDetailsPopup.value = false\n\t\t\tissueDetailsPopupData.value = null\n\t\t}\n\n\t\t// Sorting functionality\n\t\tconst handleColumnSort = (field) => {\n\t\t\tlet newDirection = \"asc\"\n\n\t\t\t// If clicking the same field, toggle direction\n\t\t\tif (props.sortField === field) {\n\t\t\t\tnewDirection = props.sortDirection === \"asc\" ? \"desc\" : \"asc\"\n\t\t\t}\n\n\t\t\t// Emit sort event to parent component\n\t\t\temit(\"sort\", { field, direction: newDirection })\n\t\t}\n\n\t\tconst getSortIcon = (field) => {\n\t\t\tif (props.sortField !== field) {\n\t\t\t\treturn \"arrow-up-down\" // Default unsorted icon\n\t\t\t}\n\n\t\t\treturn props.sortDirection === \"asc\" ? \"arrow-up\" : \"arrow-down\"\n\t\t}\n\n\t\tconst getSortIconClass = (field) => {\n\t\t\tif (props.sortField !== field) {\n\t\t\t\treturn \"text-gray-400\" // Inactive sort icon\n\t\t\t}\n\n\t\t\treturn \"text-blue-600\" // Active sort icon\n\t\t}\n\n\t\tconst getSortButtonClass = (field) => {\n\t\t\tif (props.sortField === field) {\n\t\t\t\treturn \"bg-blue-50\" // Active sort button background\n\t\t\t}\n\n\t\t\treturn \"\" // Default button styling\n\t\t}\n\n\t\t// Memoized tag styling function to prevent recalculating colors\n\t\tconst tagStyleCache = new Map()\n\t\tconst getTagStyle = (tag) => {\n\t\t\t// Check cache first\n\t\t\tif (tagStyleCache.has(tag)) {\n\t\t\t\treturn tagStyleCache.get(tag)\n\t\t\t}\n\t\t\t\n\t\t\t// Get tag color from API\n\t\t\tconst hexColor = getTagColor(tag)\n\t\t\tlet style\n\n\t\t\tif (hexColor) {\n\t\t\t\t// Convert hex color to RGB for background and text colors\n\t\t\t\tconst hex = hexColor.replace('#', '')\n\t\t\t\tconst r = parseInt(hex.substr(0, 2), 16)\n\t\t\t\tconst g = parseInt(hex.substr(2, 2), 16)\n\t\t\t\tconst b = parseInt(hex.substr(4, 2), 16)\n\n\t\t\t\t// Create background color (lighter version with opacity)\n\t\t\t\tconst bgColor = `rgba(${r}, ${g}, ${b}, 0.1)`\n\n\t\t\t\t// Create text color (darker version for contrast)\n\t\t\t\tconst textColor = `rgb(${Math.max(r - 50, 0)}, ${Math.max(g - 50, 0)}, ${Math.max(b - 50, 0)})`\n\n\t\t\t\tstyle = {\n\t\t\t\t\tbackgroundColor: bgColor,\n\t\t\t\t\tcolor: textColor,\n\t\t\t\t\tborderColor: textColor\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Fallback to default styling\n\t\t\t\tstyle = {\n\t\t\t\t\tbackgroundColor: '#f3f4f6',\n\t\t\t\t\tcolor: '#374151',\n\t\t\t\t\tborderColor: '#d1d5db'\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Cache the result\n\t\t\ttagStyleCache.set(tag, style)\n\t\t\treturn style\n\t\t}\n\n\t\treturn {\n\t\t\tcolumns,\n\t\t\tlistOptions,\n\t\t\ttransformedIssues,\n\t\t\thandleSelections,\n\t\t\tgetIssueUrl,\n\t\t\thandleIssueClick,\n\t\t\tgetStatusColor,\n\t\t\tgetPriorityColor,\n\t\t\tgetStatusBadgeClass,\n\t\t\tgetPriorityBadgeClass,\n\t\t\tgetPriorityIndicatorClass,\n\t\t\tgetInitials,\n\t\t\tformatIssueId,\n\t\t\tstripHtml,\n\t\t\tformatDate,\n\t\t\tformatTime,\n\t\t\tshowPopup,\n\t\t\tpopupUser,\n\t\t\tpopupPosition,\n\t\t\tshowUserPopup,\n\t\t\thideUserPopup,\n\t\t\thandleColumnSort,\n\t\t\tgetSortIcon,\n\t\t\tgetSortIconClass,\n\t\t\tgetSortButtonClass,\n\t\t\tgetTagStyle,\n\t\t\tshowTagsPopup,\n\t\t\ttagsPopupPosition,\n\t\t\ttagsPopupData,\n\t\t\tshowTagsPopupFn,\n\t\t\thideTagsPopupFn,\n\t\t\tshowIssueDetailsPopup,\n\t\t\tissueDetailsPopupPosition,\n\t\t\tissueDetailsPopupData,\n\t\t\tshowIssueDetailsPopupFn,\n\t\t\thideIssueDetailsPopup,\n\t\t}\n\t},\n}\n</script>","<template>\n  <div class=\"fixed top-4 right-4 z-50 space-y-2 max-w-sm\">\n    <transition-group name=\"notification\" tag=\"div\">\n      <div\n        v-for=\"notification in notifications\"\n        :key=\"notification.id\"\n        :class=\"notificationClasses(notification.type)\"\n        class=\"p-4 rounded-lg shadow-lg border backdrop-blur-sm\"\n      >\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex items-start space-x-3\">\n            <div class=\"flex-shrink-0\">\n              <FeatherIcon \n                :name=\"getNotificationIcon(notification.type)\" \n                :class=\"getIconColor(notification.type)\"\n                class=\"h-5 w-5\"\n              />\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-gray-900\">\n                {{ notification.title }}\n              </p>\n              <p class=\"text-sm text-gray-600 mt-1\">\n                {{ notification.message }}\n              </p>\n              <p class=\"text-xs text-gray-500 mt-1\">\n                {{ formatTime(notification.timestamp) }}\n              </p>\n            </div>\n          </div>\n          <button\n            @click=\"$emit('remove', notification.id)\"\n            class=\"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none\"\n          >\n            <FeatherIcon name=\"x\" class=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n    </transition-group>\n  </div>\n</template>\n\n<script setup>\nimport { FeatherIcon } from 'frappe-ui'\n\ndefineProps({\n  notifications: {\n    type: Array,\n    default: () => []\n  }\n})\n\ndefineEmits(['remove'])\n\nconst notificationClasses = (type) => {\n  const baseClasses = 'bg-white/95 border-l-4'\n  const typeClasses = {\n    success: 'border-green-500',\n    info: 'border-blue-500', \n    warning: 'border-yellow-500',\n    error: 'border-red-500'\n  }\n  return `${baseClasses} ${typeClasses[type] || typeClasses.info}`\n}\n\nconst getNotificationIcon = (type) => {\n  const icons = {\n    success: 'check-circle',\n    info: 'info',\n    warning: 'alert-triangle',\n    error: 'alert-circle'\n  }\n  return icons[type] || icons.info\n}\n\nconst getIconColor = (type) => {\n  const colors = {\n    success: 'text-green-500',\n    info: 'text-blue-500',\n    warning: 'text-yellow-500', \n    error: 'text-red-500'\n  }\n  return colors[type] || colors.info\n}\n\nconst formatTime = (timestamp) => {\n  const now = new Date()\n  const diff = now - timestamp\n  const minutes = Math.floor(diff / 60000)\n  \n  if (minutes < 1) return 'Just now'\n  if (minutes < 60) return `${minutes}m ago`\n  \n  const hours = Math.floor(minutes / 60)\n  if (hours < 24) return `${hours}h ago`\n  \n  return timestamp.toLocaleDateString()\n}\n</script>\n\n<style scoped>\n.notification-enter-active,\n.notification-leave-active {\n  transition: all 0.3s ease;\n}\n\n.notification-enter-from {\n  opacity: 0;\n  transform: translateX(100%);\n}\n\n.notification-leave-to {\n  opacity: 0;\n  transform: translateX(100%);\n}\n\n.notification-move {\n  transition: transform 0.3s ease;\n}\n</style>","import { Mark, mergeAttributes } from '@tiptap/core';\n\nconst Underline = Mark.create({\r\n    name: 'underline',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'u',\r\n            },\r\n            {\r\n                style: 'text-decoration',\r\n                consuming: false,\r\n                getAttrs: style => (style.includes('underline') ? {} : false),\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['u', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setUnderline: () => ({ commands }) => {\r\n                return commands.setMark(this.name);\r\n            },\r\n            toggleUnderline: () => ({ commands }) => {\r\n                return commands.toggleMark(this.name);\r\n            },\r\n            unsetUnderline: () => ({ commands }) => {\r\n                return commands.unsetMark(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-u': () => this.editor.commands.toggleUnderline(),\r\n            'Mod-U': () => this.editor.commands.toggleUnderline(),\r\n        };\r\n    },\r\n});\n\nexport { Underline, Underline as default };\n//# sourceMappingURL=index.js.map\n","import { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\n\nconst inputRegex = /(?:^|\\s)(!\\[(.+|:?)]\\((\\S+)(?:(?:\\s+)[\"'](\\S+)[\"'])?\\))$/;\r\nconst Image = Node.create({\r\n    name: 'image',\r\n    addOptions() {\r\n        return {\r\n            inline: false,\r\n            allowBase64: false,\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    inline() {\r\n        return this.options.inline;\r\n    },\r\n    group() {\r\n        return this.options.inline ? 'inline' : 'block';\r\n    },\r\n    draggable: true,\r\n    addAttributes() {\r\n        return {\r\n            src: {\r\n                default: null,\r\n            },\r\n            alt: {\r\n                default: null,\r\n            },\r\n            title: {\r\n                default: null,\r\n            },\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: this.options.allowBase64\r\n                    ? 'img[src]'\r\n                    : 'img[src]:not([src^=\"data:\"])',\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['img', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setImage: options => ({ commands }) => {\r\n                return commands.insertContent({\r\n                    type: this.name,\r\n                    attrs: options,\r\n                });\r\n            },\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            nodeInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n                getAttributes: match => {\r\n                    const [, , alt, src, title] = match;\r\n                    return { src, alt, title };\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Image, Image as default, inputRegex };\n//# sourceMappingURL=index.js.map\n","import Image from '@tiptap/extension-image';\n\nconst ImageResize = Image.extend({\n    addAttributes() {\n        return {\n            src: {\n                default: null,\n            },\n            alt: {\n                default: null,\n            },\n            style: {\n                default: 'width: 100%; height: auto; cursor: pointer;',\n                parseHTML: element => {\n                    const width = element.getAttribute('width');\n                    return width\n                        ? `width: ${width}px; height: auto; cursor: pointer;`\n                        : `${element.style.cssText}`;\n                },\n            },\n            title: {\n                default: null,\n            },\n            loading: {\n                default: null,\n            },\n            srcset: {\n                default: null,\n            },\n            sizes: {\n                default: null,\n            },\n            crossorigin: {\n                default: null,\n            },\n            usemap: {\n                default: null,\n            },\n            ismap: {\n                default: null,\n            },\n            width: {\n                default: null,\n            },\n            height: {\n                default: null,\n            },\n            referrerpolicy: {\n                default: null,\n            },\n            longdesc: {\n                default: null,\n            },\n            decoding: {\n                default: null,\n            },\n            class: {\n                default: null,\n            },\n            id: {\n                default: null,\n            },\n            name: {\n                default: null,\n            },\n            draggable: {\n                default: true,\n            },\n            tabindex: {\n                default: null,\n            },\n            'aria-label': {\n                default: null,\n            },\n            'aria-labelledby': {\n                default: null,\n            },\n            'aria-describedby': {\n                default: null,\n            },\n        };\n    },\n    addNodeView() {\n        return ({ node, editor, getPos }) => {\n            const { view, options: { editable }, } = editor;\n            const { style } = node.attrs;\n            const $positionContainer = document.createElement('div');\n            const $container = document.createElement('div');\n            const $img = document.createElement('img');\n            const iconStyle = 'width: 24px; height: 24px; cursor: pointer;';\n            const dispatchNodeView = () => {\n                if (typeof getPos === 'function') {\n                    const newAttrs = Object.assign(Object.assign({}, node.attrs), { style: `${$img.style.cssText}` });\n                    view.dispatch(view.state.tr.setNodeMarkup(getPos(), null, newAttrs));\n                }\n            };\n            const paintPositionContoller = () => {\n                const $postionController = document.createElement('div');\n                const $leftController = document.createElement('img');\n                const $centerController = document.createElement('img');\n                const $rightController = document.createElement('img');\n                $postionController.setAttribute('style', 'position: absolute; top: 0%; left: 50%; width: 100px; height: 25px; z-index: 999; background-color: rgba(255, 255, 255, 0.7); border-radius: 4px; border: 2px solid #6C6C6C; cursor: pointer; transform: translate(-50%, -50%); display: flex; justify-content: space-between; align-items: center; padding: 0 10px;');\n                $leftController.setAttribute('src', 'https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_left/default/20px.svg');\n                $leftController.setAttribute('style', iconStyle);\n                $centerController.setAttribute('src', 'https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_center/default/20px.svg');\n                $centerController.setAttribute('style', iconStyle);\n                $rightController.setAttribute('src', 'https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_right/default/20px.svg');\n                $rightController.setAttribute('style', iconStyle);\n                $leftController.addEventListener('click', () => {\n                    $positionContainer.setAttribute('style', 'display: flex; justify-content: flex-start;');\n                    $img.setAttribute('style', `${$img.style.cssText} justify-content: flex-start;`);\n                    dispatchNodeView();\n                });\n                $centerController.addEventListener('click', () => {\n                    $positionContainer.setAttribute('style', 'display: flex; justify-content: center;');\n                    $img.setAttribute('style', `${$img.style.cssText} justify-content: center;`);\n                    dispatchNodeView();\n                });\n                $rightController.addEventListener('click', () => {\n                    $positionContainer.setAttribute('style', 'display: flex; justify-content: flex-end;');\n                    $img.setAttribute('style', `${$img.style.cssText} justify-content: flex-end;`);\n                    dispatchNodeView();\n                });\n                $postionController.appendChild($leftController);\n                $postionController.appendChild($centerController);\n                $postionController.appendChild($rightController);\n                $container.appendChild($postionController);\n            };\n            // add position style and className\n            $positionContainer.appendChild($container);\n            const justifyContent = style.match(/justify-content: (.*?);/);\n            $positionContainer.setAttribute('style', `display: flex; ${justifyContent ? justifyContent[0] : ''}`);\n            if (justifyContent) {\n                $img.className = `tiptap-image-${justifyContent[1]}`;\n            }\n            $container.setAttribute('style', `${style}`);\n            $container.appendChild($img);\n            Object.entries(node.attrs).forEach(([key, value]) => {\n                if (value === undefined || value === null)\n                    return;\n                $img.setAttribute(key, value);\n            });\n            if (!editable)\n                return { dom: $img };\n            const dotsPosition = [\n                'top: -4px; left: -4px; cursor: nwse-resize;',\n                'top: -4px; right: -4px; cursor: nesw-resize;',\n                'bottom: -4px; left: -4px; cursor: nesw-resize;',\n                'bottom: -4px; right: -4px; cursor: nwse-resize;',\n            ];\n            let isResizing = false;\n            let startX, startWidth, startHeight;\n            $container.addEventListener('click', () => {\n                //remove remaining dots and position controller\n                if ($container.childElementCount > 3) {\n                    for (let i = 0; i < 5; i++) {\n                        $container.removeChild($container.lastChild);\n                    }\n                }\n                paintPositionContoller();\n                $container.setAttribute('style', `position: relative; border: 1px dashed #6C6C6C; ${style} cursor: pointer;`);\n                Array.from({ length: 4 }, (_, index) => {\n                    const $dot = document.createElement('div');\n                    $dot.setAttribute('style', `position: absolute; width: 9px; height: 9px; border: 1.5px solid #6C6C6C; border-radius: 50%; ${dotsPosition[index]}`);\n                    $dot.addEventListener('mousedown', e => {\n                        e.preventDefault();\n                        isResizing = true;\n                        startX = e.clientX;\n                        startWidth = $container.offsetWidth;\n                        startHeight = $container.offsetHeight;\n                        const onMouseMove = (e) => {\n                            if (!isResizing)\n                                return;\n                            const deltaX = index % 2 === 0 ? -(e.clientX - startX) : e.clientX - startX;\n                            const aspectRatio = startWidth / startHeight;\n                            const newWidth = startWidth + deltaX;\n                            const newHeight = newWidth / aspectRatio;\n                            $container.style.width = newWidth + 'px';\n                            $container.style.height = newHeight + 'px';\n                            $img.style.width = newWidth + 'px';\n                            $img.style.height = newHeight + 'px';\n                        };\n                        const onMouseUp = () => {\n                            if (isResizing) {\n                                isResizing = false;\n                            }\n                            dispatchNodeView();\n                            document.removeEventListener('mousemove', onMouseMove);\n                            document.removeEventListener('mouseup', onMouseUp);\n                        };\n                        document.addEventListener('mousemove', onMouseMove);\n                        document.addEventListener('mouseup', onMouseUp);\n                    });\n                    $container.appendChild($dot);\n                });\n            });\n            document.addEventListener('click', (e) => {\n                const $target = e.target;\n                const isClickInside = $container.contains($target) || $target.style.cssText === iconStyle;\n                if (!isClickInside) {\n                    const containerStyle = $container.getAttribute('style');\n                    const newStyle = containerStyle === null || containerStyle === void 0 ? void 0 : containerStyle.replace('border: 1px dashed #6C6C6C;', '');\n                    $container.setAttribute('style', newStyle);\n                    if ($container.childElementCount > 3) {\n                        for (let i = 0; i < 5; i++) {\n                            $container.removeChild($container.lastChild);\n                        }\n                    }\n                }\n            });\n            return {\n                dom: $positionContainer,\n            };\n        };\n    },\n});\n\nexport { ImageResize, ImageResize as default };\n//# sourceMappingURL=index.js.map\n","import '@tiptap/extension-text-style';\nimport { Extension } from '@tiptap/core';\n\nconst Color = Extension.create({\r\n    name: 'color',\r\n    addOptions() {\r\n        return {\r\n            types: ['textStyle'],\r\n        };\r\n    },\r\n    addGlobalAttributes() {\r\n        return [\r\n            {\r\n                types: this.options.types,\r\n                attributes: {\r\n                    color: {\r\n                        default: null,\r\n                        parseHTML: element => { var _a; return (_a = element.style.color) === null || _a === void 0 ? void 0 : _a.replace(/['\"]+/g, ''); },\r\n                        renderHTML: attributes => {\r\n                            if (!attributes.color) {\r\n                                return {};\r\n                            }\r\n                            return {\r\n                                style: `color: ${attributes.color}`,\r\n                            };\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        ];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setColor: color => ({ chain }) => {\r\n                return chain()\r\n                    .setMark('textStyle', { color })\r\n                    .run();\r\n            },\r\n            unsetColor: () => ({ chain }) => {\r\n                return chain()\r\n                    .setMark('textStyle', { color: null })\r\n                    .removeEmptyTextStyle()\r\n                    .run();\r\n            },\r\n        };\r\n    },\r\n});\n\nexport { Color, Color as default };\n//# sourceMappingURL=index.js.map\n","import '@tiptap/extension-text-style';\nimport { Extension } from '@tiptap/core';\n\nconst FontFamily = Extension.create({\r\n    name: 'fontFamily',\r\n    addOptions() {\r\n        return {\r\n            types: ['textStyle'],\r\n        };\r\n    },\r\n    addGlobalAttributes() {\r\n        return [\r\n            {\r\n                types: this.options.types,\r\n                attributes: {\r\n                    fontFamily: {\r\n                        default: null,\r\n                        parseHTML: element => { var _a; return (_a = element.style.fontFamily) === null || _a === void 0 ? void 0 : _a.replace(/['\"]+/g, ''); },\r\n                        renderHTML: attributes => {\r\n                            if (!attributes.fontFamily) {\r\n                                return {};\r\n                            }\r\n                            return {\r\n                                style: `font-family: ${attributes.fontFamily}`,\r\n                            };\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        ];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setFontFamily: fontFamily => ({ chain }) => {\r\n                return chain()\r\n                    .setMark('textStyle', { fontFamily })\r\n                    .run();\r\n            },\r\n            unsetFontFamily: () => ({ chain }) => {\r\n                return chain()\r\n                    .setMark('textStyle', { fontFamily: null })\r\n                    .removeEmptyTextStyle()\r\n                    .run();\r\n            },\r\n        };\r\n    },\r\n});\n\nexport { FontFamily, FontFamily as default };\n//# sourceMappingURL=index.js.map\n","import { Mark, mergeAttributes, markInputRule, markPasteRule } from '@tiptap/core';\n\nconst inputRegex = /(?:^|\\s)((?:==)((?:[^~=]+))(?:==))$/;\r\nconst pasteRegex = /(?:^|\\s)((?:==)((?:[^~=]+))(?:==))/g;\r\nconst Highlight = Mark.create({\r\n    name: 'highlight',\r\n    addOptions() {\r\n        return {\r\n            multicolor: false,\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    addAttributes() {\r\n        if (!this.options.multicolor) {\r\n            return {};\r\n        }\r\n        return {\r\n            color: {\r\n                default: null,\r\n                parseHTML: element => element.getAttribute('data-color') || element.style.backgroundColor,\r\n                renderHTML: attributes => {\r\n                    if (!attributes.color) {\r\n                        return {};\r\n                    }\r\n                    return {\r\n                        'data-color': attributes.color,\r\n                        style: `background-color: ${attributes.color}; color: inherit`,\r\n                    };\r\n                },\r\n            },\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'mark',\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['mark', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setHighlight: attributes => ({ commands }) => {\r\n                return commands.setMark(this.name, attributes);\r\n            },\r\n            toggleHighlight: attributes => ({ commands }) => {\r\n                return commands.toggleMark(this.name, attributes);\r\n            },\r\n            unsetHighlight: () => ({ commands }) => {\r\n                return commands.unsetMark(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Shift-h': () => this.editor.commands.toggleHighlight(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            markInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n    addPasteRules() {\r\n        return [\r\n            markPasteRule({\r\n                find: pasteRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Highlight, Highlight as default, inputRegex, pasteRegex };\n//# sourceMappingURL=index.js.map\n","<template>\r\n  <div v-if=\"isDialogOpen\" class=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n    <!-- Backdrop -->\r\n    <div class=\"fixed inset-0 bg-black bg-opacity-50\" @click=\"closeDialog\"></div>\r\n\r\n    <!-- Dialog -->\r\n    <div class=\"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden\">\r\n      <!-- Header -->\r\n      <div class=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900\">Select Email Groups</h2>\r\n        <button @click=\"closeDialog\" class=\"text-gray-400 hover:text-gray-600\">\r\n          <FeatherIcon name=\"x\" class=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Content -->\r\n      <div class=\"p-6 overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n    <div class=\"space-y-4\">\r\n      <!-- Search Groups -->\r\n      <div class=\"relative\">\r\n        <FeatherIcon name=\"search\" class=\"w-4 h-4 text-gray-400 absolute left-3 top-3\" />\r\n        <input\r\n          v-model=\"searchQuery\"\r\n          type=\"text\"\r\n          placeholder=\"Search email groups...\"\r\n          class=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Groups List -->\r\n      <div class=\"max-h-96 overflow-y-auto border border-gray-200 rounded-lg\">\r\n        <div v-if=\"isLoading\" class=\"p-8 text-center\">\r\n          <div class=\"flex items-center justify-center\">\r\n            <div class=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500 mr-2\"></div>\r\n            Loading email groups...\r\n          </div>\r\n        </div>\r\n\r\n        <div v-else-if=\"filteredGroups.length === 0\" class=\"p-8 text-center text-gray-500\">\r\n          <FeatherIcon name=\"inbox\" class=\"w-8 h-8 mx-auto mb-2 text-gray-300\" />\r\n          <p>No email groups found</p>\r\n          <p class=\"text-xs mt-1\">Create email groups in the system to see them here</p>\r\n        </div>\r\n\r\n        <div v-else class=\"divide-y divide-gray-200\">\r\n          <div\r\n            v-for=\"group in filteredGroups\"\r\n            :key=\"group.name\"\r\n            class=\"p-4 hover:bg-gray-50 cursor-pointer transition-colors\"\r\n            @click=\"toggleGroup(group)\"\r\n          >\r\n            <div class=\"flex items-center justify-between\">\r\n              <div class=\"flex items-center space-x-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  :checked=\"isGroupSelected(group)\"\r\n                  @change=\"toggleGroup(group)\"\r\n                  @click.stop\r\n                  class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2\"\r\n                />\r\n                <div>\r\n                  <div class=\"font-medium text-gray-900\">{{ group.title || group.name }}</div>\r\n                  <div class=\"text-sm text-gray-500\">\r\n                    {{ group.email_count || 0 }} recipients\r\n                  </div>\r\n                  <div v-if=\"group.description\" class=\"text-xs text-gray-400 mt-1\">\r\n                    {{ group.description }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"text-right\">\r\n                <div class=\"text-sm text-gray-500\">\r\n                  Created: {{ formatDate(group.creation) }}\r\n                </div>\r\n                <div v-if=\"group.modified !== group.creation\" class=\"text-xs text-gray-400\">\r\n                  Modified: {{ formatDate(group.modified) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Selected Groups Summary -->\r\n      <div v-if=\"selectedGroups.length > 0\" class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h4 class=\"font-medium text-blue-900 mb-2\">Selected Groups ({{ selectedGroups.length }})</h4>\r\n        <div class=\"space-y-1\">\r\n          <div\r\n            v-for=\"group in selectedGroups\"\r\n            :key=\"group.name\"\r\n            class=\"flex items-center justify-between text-sm\"\r\n          >\r\n            <span class=\"text-blue-800\">{{ group.title || group.name }}</span>\r\n            <span class=\"text-blue-600\">{{ group.email_count || 0 }} recipients</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-2 pt-2 border-t border-blue-200\">\r\n          <span class=\"font-medium text-blue-900\">\r\n            Total Recipients: {{ totalSelectedRecipients }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      </div>\r\n\r\n      <!-- Footer -->\r\n      <div class=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50\">\r\n        <Button @click=\"closeDialog\" variant=\"outline\">\r\n          Cancel\r\n        </Button>\r\n        <Button @click=\"selectGroups\" variant=\"solid\">\r\n          Done\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch, defineEmits, defineProps } from 'vue'\r\nimport { Button, FeatherIcon, call } from 'frappe-ui'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  show: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:show', 'groups-selected'])\r\n\r\n// Dialog state\r\nconst isDialogOpen = computed({\r\n  get: () => props.show,\r\n  set: (value) => emit('update:show', value)\r\n})\r\n\r\n// Component state\r\nconst searchQuery = ref('')\r\nconst isLoading = ref(false)\r\nconst emailGroups = ref([])\r\nconst selectedGroups = ref([])\r\nconst groupMembersCache = ref({})\r\n\r\n// Computed properties\r\nconst filteredGroups = computed(() => {\r\n  if (!searchQuery.value) {\r\n    return emailGroups.value\r\n  }\r\n\r\n  const query = searchQuery.value.toLowerCase()\r\n  return emailGroups.value.filter(group =>\r\n    group.name.toLowerCase().includes(query) ||\r\n    (group.description && group.description.toLowerCase().includes(query))\r\n  )\r\n})\r\n\r\nconst totalSelectedRecipients = computed(() => {\r\n  return selectedGroups.value.reduce((total, group) => total + (group.email_count || 0), 0)\r\n})\r\n\r\n// Methods\r\nconst loadEmailGroups = async () => {\r\n  isLoading.value = true\r\n  try {\r\n    console.log('Loading email groups from Frappe...')\r\n\r\n    // Fetch Email Groups from Frappe\r\n    const response = await call('frappe.client.get_list', {\r\n      doctype: 'Email Group',\r\n      fields: ['name', 'title', 'total_subscribers', 'creation', 'modified'],\r\n      filters: [\r\n        // Exclude temporary groups\r\n        ['title', 'not like', 'temp-grp-%']\r\n      ],\r\n      order_by: 'modified desc',\r\n      limit_page_length: 100\r\n    })\r\n\r\n    console.log('Email Groups loaded:', response)\r\n\r\n    // Transform to match our component's expected format\r\n    emailGroups.value = response.map(group => ({\r\n      name: group.name,\r\n      title: group.title || group.name,\r\n      email_count: group.total_subscribers || 0,\r\n      description: '',\r\n      creation: group.creation,\r\n      modified: group.modified,\r\n      emails: [] // Will be loaded on demand when group is selected or expanded\r\n    }))\r\n\r\n  } catch (error) {\r\n    console.error('Error loading email groups:', error)\r\n    emailGroups.value = []\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst loadGroupMembers = async (groupName) => {\r\n  // Check cache first\r\n  if (groupMembersCache.value[groupName]) {\r\n    return groupMembersCache.value[groupName]\r\n  }\r\n\r\n  try {\r\n    console.log('Loading members for group:', groupName)\r\n\r\n    const response = await call('frappe.client.get_list', {\r\n      doctype: 'Email Group Member',\r\n      fields: ['email', 'email_group'],\r\n      filters: [\r\n        ['email_group', '=', groupName]\r\n      ],\r\n      limit_page_length: 1000\r\n    })\r\n\r\n    const emails = response.map(member => member.email)\r\n\r\n    // Cache the result\r\n    groupMembersCache.value[groupName] = emails\r\n\r\n    return emails\r\n  } catch (error) {\r\n    console.error('Error loading group members:', error)\r\n    return []\r\n  }\r\n}\r\n\r\nconst isGroupSelected = (group) => {\r\n  return selectedGroups.value.some(selected => selected.name === group.name)\r\n}\r\n\r\nconst toggleGroup = async (group) => {\r\n  const index = selectedGroups.value.findIndex(selected => selected.name === group.name)\r\n  if (index > -1) {\r\n    selectedGroups.value.splice(index, 1)\r\n  } else {\r\n    // Load group members when selecting\r\n    const emails = await loadGroupMembers(group.name)\r\n    selectedGroups.value.push({\r\n      ...group,\r\n      emails: emails\r\n    })\r\n  }\r\n}\r\n\r\nconst selectGroups = () => {\r\n  emit('groups-selected', [...selectedGroups.value])\r\n  closeDialog()\r\n}\r\n\r\nconst closeDialog = () => {\r\n  isDialogOpen.value = false\r\n  // Reset selections when closing\r\n  selectedGroups.value = []\r\n  searchQuery.value = ''\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A'\r\n  try {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    })\r\n  } catch (error) {\r\n    return 'Invalid Date'\r\n  }\r\n}\r\n\r\n// Load groups when dialog is opened\r\nonMounted(() => {\r\n  if (props.show) {\r\n    loadEmailGroups()\r\n  }\r\n})\r\n\r\n// Watch for dialog opening to load groups\r\nwatch(() => props.show, (isOpen) => {\r\n  if (isOpen) {\r\n    loadEmailGroups()\r\n  }\r\n})\r\n</script>","<template>\r\n  <div v-if=\"isDialogOpen\" class=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n    <!-- Backdrop -->\r\n    <div class=\"fixed inset-0 bg-black bg-opacity-50\" @click=\"closeDialog\"></div>\r\n\r\n    <!-- Dialog -->\r\n    <div class=\"relative bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden\">\r\n      <!-- Header -->\r\n      <div class=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900\">Compose Email</h2>\r\n        <button @click=\"closeDialog\" class=\"text-gray-400 hover:text-gray-600\">\r\n          <FeatherIcon name=\"x\" class=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Content -->\r\n      <div class=\"p-6 overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n        <div class=\"space-y-6\">\r\n          <!-- Recipients Section -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Recipients <span class=\"text-red-500\">*</span></label>\r\n            <div class=\"flex items-start space-x-2\">\r\n              <div class=\"flex-1\">\r\n                <!-- Recipients Pills Container -->\r\n                <div class=\"w-full min-h-[80px] px-3 py-2 border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-500 focus-within:border-blue-500\">\r\n                  <div class=\"flex flex-wrap gap-2 mb-2\">\r\n                    <!-- Group Pills -->\r\n                    <div\r\n                      v-for=\"group in selectedGroups\"\r\n                      :key=\"'group-' + group.name\"\r\n                      class=\"relative group\"\r\n                    >\r\n                      <div\r\n                        class=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm cursor-pointer hover:bg-blue-200 transition-colors\"\r\n                        @click=\"toggleGroupExpansion(group.name)\"\r\n                      >\r\n                        <FeatherIcon name=\"users\" class=\"w-3 h-3\" />\r\n                        <span class=\"font-medium\">{{ group.title || group.name }}</span>\r\n                        <span class=\"text-xs text-blue-600\">({{ group.email_count || 0 }})</span>\r\n                        <button\r\n                          type=\"button\"\r\n                          @click.stop=\"removeGroup(group.name)\"\r\n                          class=\"ml-1 hover:bg-blue-300 rounded-full p-0.5\"\r\n                        >\r\n                          <FeatherIcon name=\"x\" class=\"w-3 h-3\" />\r\n                        </button>\r\n                      </div>\r\n\r\n                      <!-- Expanded Group Members -->\r\n                      <div\r\n                        v-if=\"expandedGroups.includes(group.name)\"\r\n                        class=\"absolute z-20 mt-1 p-3 bg-white border border-gray-300 rounded-lg shadow-lg max-w-xs\"\r\n                      >\r\n                        <div class=\"flex items-center justify-between mb-2\">\r\n                          <h4 class=\"text-sm font-semibold text-gray-700\">{{ group.title || group.name }} Members</h4>\r\n                          <button\r\n                            type=\"button\"\r\n                            @click=\"toggleGroupExpansion(group.name)\"\r\n                            class=\"text-gray-400 hover:text-gray-600\"\r\n                          >\r\n                            <FeatherIcon name=\"x\" class=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                        <div class=\"max-h-40 overflow-y-auto space-y-1\">\r\n                          <div\r\n                            v-for=\"(email, idx) in (group.emails || [])\"\r\n                            :key=\"idx\"\r\n                            class=\"text-xs text-gray-600 py-1 px-2 bg-gray-50 rounded\"\r\n                          >\r\n                            {{ email }}\r\n                          </div>\r\n                          <div v-if=\"!group.emails || group.emails.length === 0\" class=\"text-xs text-gray-400 italic\">\r\n                            No members loaded\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <!-- Individual Email Pills -->\r\n                    <div\r\n                      v-for=\"(email, index) in emailPills\"\r\n                      :key=\"'email-' + index\"\r\n                      :class=\"[\r\n                        'inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm relative group',\r\n                        email.status === 'valid' ? 'bg-green-100 text-green-800' :\r\n                        email.status === 'invalid' ? 'bg-red-100 text-red-800' :\r\n                        email.status === 'duplicate' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800'\r\n                      ]\"\r\n                      :title=\"email.reason || ''\"\r\n                    >\r\n                      <!-- Status Icon -->\r\n                      <span v-if=\"email.status === 'invalid'\" class=\"text-red-600\"></span>\r\n                      <span v-if=\"email.status === 'duplicate'\" class=\"text-yellow-600\"></span>\r\n                      <span v-if=\"email.status === 'valid'\" class=\"text-green-600\"></span>\r\n\r\n                      <span>{{ email.address }}</span>\r\n                      <button\r\n                        type=\"button\"\r\n                        @click=\"removeEmailPill(index)\"\r\n                        :class=\"[\r\n                          'hover:bg-opacity-50 rounded-full p-0.5',\r\n                          email.status === 'valid' ? 'hover:bg-green-300' :\r\n                          email.status === 'invalid' ? 'hover:bg-red-300' :\r\n                          email.status === 'duplicate' ? 'hover:bg-yellow-300' : 'hover:bg-gray-300'\r\n                        ]\"\r\n                      >\r\n                        <FeatherIcon name=\"x\" class=\"w-3 h-3\" />\r\n                      </button>\r\n\r\n                      <!-- Enhanced Tooltip -->\r\n                      <div\r\n                        v-if=\"email.reason\"\r\n                        class=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 text-xs text-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-30\"\r\n                        :class=\"[\r\n                          email.status === 'invalid' ? 'bg-red-600' :\r\n                          email.status === 'duplicate' ? 'bg-yellow-600' : 'bg-gray-600'\r\n                        ]\"\r\n                      >\r\n                        {{ email.reason }}\r\n                        <!-- Tooltip Arrow -->\r\n                        <div\r\n                          class=\"absolute top-full left-1/2 -translate-x-1/2 -mt-1 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent\"\r\n                          :class=\"[\r\n                            email.status === 'invalid' ? 'border-t-red-600' :\r\n                            email.status === 'duplicate' ? 'border-t-yellow-600' : 'border-t-gray-600'\r\n                          ]\"\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <!-- Input Field -->\r\n                  <input\r\n                    ref=\"recipientInput\"\r\n                    v-model=\"currentEmailInput\"\r\n                    @keydown=\"handleEmailInputKeydown\"\r\n                    @paste=\"handleEmailPaste\"\r\n                    @blur=\"handleEmailInputBlur\"\r\n                    type=\"text\"\r\n                    placeholder=\"Type email and press comma or enter...\"\r\n                    class=\"w-full outline-none text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <Button\r\n                @click=\"showGroupSelector = true\"\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                class=\"mt-1\"\r\n              >\r\n                <template #prefix>\r\n                  <FeatherIcon name=\"users\" class=\"w-4 h-4\" />\r\n                </template>\r\n                Select Group\r\n              </Button>\r\n            </div>\r\n            <p class=\"text-xs text-gray-500 mt-1\">\r\n              Total Recipients: {{ totalRecipientCount }} ({{ validEmailCount }} valid, {{ invalidEmailCount }} invalid, {{ duplicateEmailCount }} duplicates)\r\n            </p>\r\n          </div>\r\n\r\n          <!-- Subject -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Subject <span class=\"text-red-500\">*</span></label>\r\n            <input\r\n              v-model=\"formData.subject\"\r\n              type=\"text\"\r\n              placeholder=\"Enter email subject\"\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <!-- Content Type Selection -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Content Type</label>\r\n            <select\r\n              v-model=\"formData.content_type\"\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"Rich Text\">Rich Text</option>\r\n              <option value=\"Markdown\">Markdown</option>\r\n              <option value=\"HTML\">HTML</option>\r\n            </select>\r\n          </div>\r\n\r\n          <!-- Message Content -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Message <span class=\"text-red-500\">*</span></label>\r\n\r\n            <!-- Rich Text Editor -->\r\n            <div v-if=\"formData.content_type === 'Rich Text'\" class=\"border border-gray-300 rounded-lg overflow-hidden\">\r\n              <!-- Tiptap Toolbar -->\r\n              <div v-if=\"editor\" class=\"bg-gray-50 p-2 border-b border-gray-300\">\r\n                <!-- Row 1: Text Formatting -->\r\n                <div class=\"flex flex-wrap gap-1 mb-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleBold().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('bold') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 font-bold\"\r\n                    title=\"Bold (Ctrl+B)\"\r\n                  >\r\n                    B\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleItalic().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('italic') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 italic\"\r\n                    title=\"Italic (Ctrl+I)\"\r\n                  >\r\n                    I\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleUnderline().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('underline') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 underline\"\r\n                    title=\"Underline (Ctrl+U)\"\r\n                  >\r\n                    U\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleStrike().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('strike') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 line-through\"\r\n                    title=\"Strikethrough\"\r\n                  >\r\n                    S\r\n                  </button>\r\n\r\n                  <div class=\"border-l border-gray-300 mx-1\"></div>\r\n\r\n                  <!-- Color Picker -->\r\n                  <div class=\"relative inline-block\">\r\n                    <button\r\n                      type=\"button\"\r\n                      @click=\"showTextColorPicker = !showTextColorPicker\"\r\n                      class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 flex items-center gap-1\"\r\n                      title=\"Text Color\"\r\n                    >\r\n                      A\r\n                      <span class=\"w-4 h-1 bg-current\"></span>\r\n                    </button>\r\n                    <div v-if=\"showTextColorPicker\" class=\"absolute z-10 mt-1 p-2 bg-white border border-gray-300 rounded shadow-lg\">\r\n                      <input\r\n                        type=\"color\"\r\n                        v-model=\"textColor\"\r\n                        @change=\"applyTextColor(textColor)\"\r\n                        class=\"w-20 h-8\"\r\n                      />\r\n                      <button\r\n                        @click=\"editor.chain().focus().unsetColor().run(); showTextColorPicker = false\"\r\n                        class=\"mt-1 px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200 w-full\"\r\n                      >\r\n                        Clear\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <!-- Highlight Color -->\r\n                  <div class=\"relative inline-block\">\r\n                    <button\r\n                      type=\"button\"\r\n                      @click=\"showHighlightColorPicker = !showHighlightColorPicker\"\r\n                      :class=\"{ 'bg-gray-200': editor.isActive('highlight') }\"\r\n                      class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                      title=\"Highlight\"\r\n                    >\r\n                      \r\n                    </button>\r\n                    <div v-if=\"showHighlightColorPicker\" class=\"absolute z-10 mt-1 p-2 bg-white border border-gray-300 rounded shadow-lg\">\r\n                      <input\r\n                        type=\"color\"\r\n                        v-model=\"highlightColor\"\r\n                        @change=\"applyHighlight(highlightColor)\"\r\n                        class=\"w-20 h-8\"\r\n                      />\r\n                      <button\r\n                        @click=\"editor.chain().focus().unsetHighlight().run(); showHighlightColorPicker = false\"\r\n                        class=\"mt-1 px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200 w-full\"\r\n                      >\r\n                        Clear\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Row 2: Headings & Alignment -->\r\n                <div class=\"flex flex-wrap gap-1 mb-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleHeading({ level: 1 }).run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('heading', { level: 1 }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 font-bold\"\r\n                    title=\"Heading 1\"\r\n                  >\r\n                    H1\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleHeading({ level: 2 }).run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('heading', { level: 2 }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 font-bold\"\r\n                    title=\"Heading 2\"\r\n                  >\r\n                    H2\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleHeading({ level: 3 }).run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('heading', { level: 3 }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 font-bold\"\r\n                    title=\"Heading 3\"\r\n                  >\r\n                    H3\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().setParagraph().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('paragraph') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Paragraph\"\r\n                  >\r\n                    P\r\n                  </button>\r\n\r\n                  <div class=\"border-l border-gray-300 mx-1\"></div>\r\n\r\n                  <!-- Text Alignment -->\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().setTextAlign('left').run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive({ textAlign: 'left' }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Align Left\"\r\n                  >\r\n                    \r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().setTextAlign('center').run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive({ textAlign: 'center' }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Align Center\"\r\n                  >\r\n                    \r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().setTextAlign('right').run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive({ textAlign: 'right' }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Align Right\"\r\n                  >\r\n                    \r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().setTextAlign('justify').run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive({ textAlign: 'justify' }) }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Justify\"\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n\r\n                <!-- Row 3: Lists, Images & Tables -->\r\n                <div class=\"flex flex-wrap gap-1\">\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleBulletList().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('bulletList') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Bullet List\"\r\n                  >\r\n                    \r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleOrderedList().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('orderedList') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Numbered List\"\r\n                  >\r\n                    1.\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleBlockquote().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('blockquote') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Quote\"\r\n                  >\r\n                    \"\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().toggleCodeBlock().run()\"\r\n                    :class=\"{ 'bg-gray-200': editor.isActive('codeBlock') }\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 font-mono\"\r\n                    title=\"Code Block\"\r\n                  >\r\n                    &lt;/&gt;\r\n                  </button>\r\n\r\n                  <div class=\"border-l border-gray-300 mx-1\"></div>\r\n\r\n                  <!-- Image Upload -->\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"$refs.imageInput.click()\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Upload Image\"\r\n                  >\r\n                    \r\n                  </button>\r\n                  <input\r\n                    ref=\"imageInput\"\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    @change=\"uploadImage\"\r\n                    class=\"hidden\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"addImage\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Insert Image URL\"\r\n                  >\r\n                    \r\n                  </button>\r\n\r\n                  <!-- Table -->\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"insertTable\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Insert Table\"\r\n                  >\r\n                    \r\n                  </button>\r\n\r\n                  <div class=\"border-l border-gray-300 mx-1\"></div>\r\n\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().setHorizontalRule().run()\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100\"\r\n                    title=\"Horizontal Line\"\r\n                  >\r\n                    \r\n                  </button>\r\n\r\n                  <div class=\"border-l border-gray-300 mx-1\"></div>\r\n\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().undo().run()\"\r\n                    :disabled=\"!editor.can().undo()\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    title=\"Undo\"\r\n                  >\r\n                    \r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"editor.chain().focus().redo().run()\"\r\n                    :disabled=\"!editor.can().redo()\"\r\n                    class=\"px-3 py-1 text-sm border border-gray-200 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    title=\"Redo\"\r\n                  >\r\n                    \r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Tiptap Content Area -->\r\n              <EditorContent :editor=\"editor\" class=\"tiptap-editor\" />\r\n            </div>\r\n\r\n            <!-- Markdown Editor -->\r\n            <div v-else-if=\"formData.content_type === 'Markdown'\">\r\n              <textarea\r\n                v-model=\"formData.message_md\"\r\n                placeholder=\"Compose your email message in Markdown...\"\r\n                rows=\"10\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- HTML Editor -->\r\n            <div v-else-if=\"formData.content_type === 'HTML'\">\r\n              <textarea\r\n                v-model=\"formData.message_html\"\r\n                placeholder=\"Compose your email message in HTML...\"\r\n                rows=\"10\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Attachments Section -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Attachments</label>\r\n            <div class=\"border border-gray-300 rounded-lg p-4 bg-gray-50\">\r\n              <!-- Attachment Pills -->\r\n              <div v-if=\"attachments.length > 0\" class=\"flex flex-wrap gap-2 mb-3\">\r\n                <div\r\n                  v-for=\"(file, index) in attachments\"\r\n                  :key=\"'attachment-' + index\"\r\n                  class=\"inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  <!-- File Icon -->\r\n                  <div class=\"flex-shrink-0\">\r\n                    <svg v-if=\"isImageFile(file)\" class=\"w-5 h-5 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                    <svg v-else-if=\"isPDFFile(file)\" class=\"w-5 h-5 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n                    </svg>\r\n                    <svg v-else class=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                    </svg>\r\n                  </div>\r\n\r\n                  <!-- File Info -->\r\n                  <div class=\"flex-1 min-w-0\">\r\n                    <div class=\"font-medium text-gray-900 truncate\">{{ file.name }}</div>\r\n                    <div class=\"text-xs text-gray-500\">{{ formatFileSize(file.size) }}</div>\r\n                  </div>\r\n\r\n                  <!-- Remove Button -->\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"removeAttachment(index)\"\r\n                    class=\"flex-shrink-0 text-gray-400 hover:text-red-600 transition-colors\"\r\n                    title=\"Remove attachment\"\r\n                  >\r\n                    <FeatherIcon name=\"x\" class=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Upload Button -->\r\n              <div class=\"flex items-center gap-2\">\r\n                <input\r\n                  ref=\"attachmentInput\"\r\n                  type=\"file\"\r\n                  multiple\r\n                  @change=\"handleFileAttachment\"\r\n                  class=\"hidden\"\r\n                />\r\n                <Button\r\n                  @click=\"$refs.attachmentInput.click()\"\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                >\r\n                  <template #prefix>\r\n                    <FeatherIcon name=\"paperclip\" class=\"w-4 h-4\" />\r\n                  </template>\r\n                  Add Attachments\r\n                </Button>\r\n                <span v-if=\"attachments.length > 0\" class=\"text-xs text-gray-500\">\r\n                  {{ attachments.length }} file{{ attachments.length !== 1 ? 's' : '' }} ({{ formatFileSize(totalAttachmentSize) }})\r\n                </span>\r\n              </div>\r\n\r\n              <!-- Max Size Warning -->\r\n              <p class=\"text-xs text-gray-500 mt-2\">\r\n                Maximum file size: 10MB per file. Supported formats: All common file types.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Email Options -->\r\n          <div class=\"bg-gray-50 p-4 rounded-lg\">\r\n            <h3 class=\"text-sm font-medium text-gray-700 mb-3\">Email Options</h3>\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div class=\"space-y-3\">\r\n                <label class=\"flex items-center\">\r\n                  <input type=\"checkbox\" v-model=\"formData.send_unsubscribe_link\" class=\"mr-2\" />\r\n                  <span class=\"text-sm text-gray-700\">Send Unsubscribe Link</span>\r\n                </label>\r\n                <label class=\"flex items-center\">\r\n                  <input type=\"checkbox\" v-model=\"formData.send_webview_link\" class=\"mr-2\" />\r\n                  <span class=\"text-sm text-gray-700\">Send Web View Link</span>\r\n                </label>\r\n                <label class=\"flex items-center\">\r\n                  <input type=\"checkbox\" v-model=\"formData.published\" class=\"mr-2\" />\r\n                  <span class=\"text-sm text-gray-700\">Publish as Web Page</span>\r\n                </label>\r\n              </div>\r\n              <div class=\"space-y-3\">\r\n                <label class=\"flex items-center\">\r\n                  <input type=\"checkbox\" v-model=\"sendLater\" class=\"mr-2\" />\r\n                  <span class=\"text-sm text-gray-700\">Schedule sending at a later time</span>\r\n                </label>\r\n                <div v-if=\"sendLater\">\r\n                  <label class=\"block text-sm font-medium text-gray-700 mb-1\">Send Email At</label>\r\n                  <input\r\n                    v-model=\"formData.schedule_send\"\r\n                    type=\"datetime-local\"\r\n                    class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Campaign and Route -->\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Campaign (Optional)</label>\r\n              <input\r\n                v-model=\"formData.campaign\"\r\n                type=\"text\"\r\n                placeholder=\"Enter campaign name\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n            <div v-if=\"formData.published\">\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">Route</label>\r\n              <input\r\n                v-model=\"formData.route\"\r\n                type=\"text\"\r\n                placeholder=\"e.g., newsletter/my-newsletter\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Footer -->\r\n      <div class=\"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50\">\r\n        <Button @click=\"closeDialog\" variant=\"outline\">\r\n          Cancel\r\n        </Button>\r\n        <div class=\"flex items-center space-x-3\">\r\n          <Button @click=\"saveDraft\" variant=\"outline\" :loading=\"isSaving\">\r\n            <template #prefix>\r\n              <FeatherIcon name=\"save\" class=\"w-4 h-4\" />\r\n            </template>\r\n            Save Draft\r\n          </Button>\r\n          <Button @click=\"sendEmail\" variant=\"solid\" :loading=\"isSubmitting\">\r\n            {{ sendLater ? 'Schedule Email' : 'Send Email' }}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Group Selector Dialog -->\r\n  <GroupSelectorDialog\r\n    v-model:show=\"showGroupSelector\"\r\n    @groups-selected=\"handleGroupsSelected\"\r\n  />\r\n\r\n  <!-- Group Naming Dialog -->\r\n  <div v-if=\"showGroupNamingDialog\" class=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n    <!-- Backdrop -->\r\n    <div class=\"fixed inset-0 bg-black bg-opacity-50\" @click=\"cancelGroupNaming\"></div>\r\n\r\n    <!-- Dialog -->\r\n    <div class=\"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4\">\r\n      <!-- Header -->\r\n      <div class=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n        <h2 class=\"text-lg font-semibold text-gray-900\">Save Email Group</h2>\r\n        <button @click=\"cancelGroupNaming\" class=\"text-gray-400 hover:text-gray-600\">\r\n          <FeatherIcon name=\"x\" class=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Content -->\r\n      <div class=\"p-6\">\r\n        <p class=\"text-sm text-gray-600 mb-4\">\r\n          {{ groupNamingMessage }}\r\n        </p>\r\n\r\n        <div class=\"mb-4\">\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Group Name (Optional)\r\n          </label>\r\n          <input\r\n            ref=\"groupNameInput\"\r\n            v-model=\"newGroupName\"\r\n            type=\"text\"\r\n            placeholder=\"e.g., Marketing Team\"\r\n            class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            @keydown.enter=\"confirmGroupNaming\"\r\n          />\r\n          <p class=\"text-xs text-gray-500 mt-1\">\r\n            Leave empty to create a temporary group\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\r\n          <h4 class=\"text-sm font-medium text-blue-900 mb-2\">Recipients to be saved:</h4>\r\n          <div class=\"text-xs text-blue-800 space-y-1 max-h-32 overflow-y-auto\">\r\n            <div v-for=\"email in pendingGroupEmails\" :key=\"email\" class=\"py-1\">\r\n              {{ email }}\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-2 pt-2 border-t border-blue-200 text-sm font-medium text-blue-900\">\r\n            Total: {{ pendingGroupEmails.length }} recipients\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Footer -->\r\n      <div class=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50\">\r\n        <Button @click=\"cancelGroupNaming\" variant=\"outline\">\r\n          Cancel\r\n        </Button>\r\n        <Button @click=\"skipGroupNaming\" variant=\"outline\">\r\n          Skip (Create Temporary)\r\n        </Button>\r\n        <Button @click=\"confirmGroupNaming\" variant=\"solid\">\r\n          {{ newGroupName ? 'Save Group' : 'Continue' }}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, defineEmits, defineProps, onMounted, onBeforeUnmount } from 'vue'\r\nimport { Button, FeatherIcon, createResource, call } from 'frappe-ui'\r\nimport { useEditor, EditorContent } from '@tiptap/vue-3'\r\nimport StarterKit from '@tiptap/starter-kit'\r\nimport Underline from '@tiptap/extension-underline'\r\nimport ResizableImageExtension from 'tiptap-extension-resize-image'\r\nimport TextAlign from '@tiptap/extension-text-align'\r\nimport TextStyle from '@tiptap/extension-text-style'\r\nimport Color from '@tiptap/extension-color'\r\nimport FontFamily from '@tiptap/extension-font-family'\r\nimport Highlight from '@tiptap/extension-highlight'\r\nimport Table from '@tiptap/extension-table'\r\nimport TableRow from '@tiptap/extension-table-row'\r\nimport TableHeader from '@tiptap/extension-table-header'\r\nimport TableCell from '@tiptap/extension-table-cell'\r\nimport GroupSelectorDialog from './GroupSelectorDialog.vue'\r\nimport { session } from '../data/session'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  show: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['update:show', 'email-sent'])\r\n\r\n// Dialog state\r\nconst isDialogOpen = computed({\r\n  get: () => props.show,\r\n  set: (value) => emit('update:show', value)\r\n})\r\n\r\n// Form state\r\nconst isSubmitting = ref(false)\r\nconst isSaving = ref(false)\r\nconst showGroupSelector = ref(false)\r\nconst sendLater = ref(false)\r\n\r\n// Group naming dialog state\r\nconst showGroupNamingDialog = ref(false)\r\nconst newGroupName = ref('')\r\nconst groupNameInput = ref(null)\r\nconst pendingGroupEmails = ref([])\r\nconst groupNamingMessage = ref('')\r\nconst groupNamingCallback = ref(null)\r\n\r\n// Tiptap Editor\r\nconst editor = useEditor({\r\n  extensions: [\r\n    StarterKit,\r\n    Underline,\r\n    ResizableImageExtension.configure({\r\n      inline: true,\r\n      allowBase64: true,\r\n    }),\r\n    TextAlign.configure({\r\n      types: ['heading', 'paragraph'],\r\n    }),\r\n    TextStyle,\r\n    Color,\r\n    FontFamily,\r\n    Highlight.configure({\r\n      multicolor: true,\r\n    }),\r\n    Table.configure({\r\n      resizable: true,\r\n    }),\r\n    TableRow,\r\n    TableHeader,\r\n    TableCell,\r\n  ],\r\n  content: '',\r\n  editorProps: {\r\n    attributes: {\r\n      class: 'w-full px-3 py-2 focus:outline-none min-h-[200px] max-h-[400px] overflow-y-auto prose prose-sm max-w-none',\r\n    },\r\n  },\r\n  onUpdate: ({ editor }) => {\r\n    formData.value.message = editor.getHTML()\r\n  },\r\n})\r\n\r\n// Image upload handler\r\nconst imageInput = ref(null)\r\nconst addImage = () => {\r\n  const url = prompt('Enter image URL (or paste base64 data URI):')\r\n  if (url) {\r\n    editor.value.chain().focus().setImage({ src: url }).run()\r\n  }\r\n}\r\n\r\nconst uploadImage = (event) => {\r\n  const file = event.target.files[0]\r\n  if (file && file.type.startsWith('image/')) {\r\n    const reader = new FileReader()\r\n    reader.onload = (e) => {\r\n      editor.value.chain().focus().setImage({ src: e.target.result }).run()\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n}\r\n\r\n// Color picker refs\r\nconst showTextColorPicker = ref(false)\r\nconst showHighlightColorPicker = ref(false)\r\nconst textColor = ref('#000000')\r\nconst highlightColor = ref('#ffff00')\r\n\r\nconst applyTextColor = (color) => {\r\n  editor.value.chain().focus().setColor(color).run()\r\n  showTextColorPicker.value = false\r\n}\r\n\r\nconst applyHighlight = (color) => {\r\n  editor.value.chain().focus().toggleHighlight({ color }).run()\r\n  showHighlightColorPicker.value = false\r\n}\r\n\r\nconst applyFontSize = () => {\r\n  const size = prompt('Enter font size (e.g., 16px, 1.5em):')\r\n  if (size) {\r\n    editor.value.chain().focus().setMark('textStyle', { fontSize: size }).run()\r\n  }\r\n}\r\n\r\nconst insertTable = () => {\r\n  editor.value.chain().focus().insertTable({ rows: 3, cols: 3, withHeaderRow: true }).run()\r\n}\r\n\r\n// Recipients handling\r\nconst recipientInput = ref(null)\r\nconst currentEmailInput = ref('')\r\nconst emailPills = ref([]) // Array of { address: string, status: 'valid' | 'invalid' | 'duplicate', reason: string }\r\nconst selectedGroups = ref([])\r\nconst expandedGroups = ref([])\r\n\r\n// Attachments handling\r\nconst attachmentInput = ref(null)\r\nconst attachments = ref([]) // Array of File objects\r\nconst MAX_FILE_SIZE = 10 * 1024 * 1024 // 10MB in bytes\r\n\r\n// Email validation regex\r\nconst validateEmail = (email) => {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n  return emailRegex.test(email.trim())\r\n}\r\n\r\n// Get validation error message\r\nconst getValidationError = (email) => {\r\n  const trimmed = email.trim()\r\n\r\n  if (!trimmed) {\r\n    return 'Email cannot be empty'\r\n  }\r\n\r\n  if (!trimmed.includes('@')) {\r\n    return 'Email must contain @ symbol'\r\n  }\r\n\r\n  const parts = trimmed.split('@')\r\n  if (parts.length !== 2) {\r\n    return 'Email must have exactly one @ symbol'\r\n  }\r\n\r\n  if (!parts[0]) {\r\n    return 'Email must have a username before @'\r\n  }\r\n\r\n  if (!parts[1]) {\r\n    return 'Email must have a domain after @'\r\n  }\r\n\r\n  if (!parts[1].includes('.')) {\r\n    return 'Domain must contain a dot (.)'\r\n  }\r\n\r\n  const domainParts = parts[1].split('.')\r\n  if (domainParts.some(part => !part)) {\r\n    return 'Domain parts cannot be empty'\r\n  }\r\n\r\n  if (/\\s/.test(trimmed)) {\r\n    return 'Email cannot contain spaces'\r\n  }\r\n\r\n  return 'Invalid email format'\r\n}\r\n\r\n// Get all emails including from groups\r\nconst getAllEmails = () => {\r\n  const emails = new Set()\r\n\r\n  // Add emails from groups\r\n  selectedGroups.value.forEach(group => {\r\n    if (group.emails && Array.isArray(group.emails)) {\r\n      group.emails.forEach(email => emails.add(email.toLowerCase()))\r\n    }\r\n  })\r\n\r\n  // Add emails from pills\r\n  emailPills.value.forEach(pill => {\r\n    emails.add(pill.address.toLowerCase())\r\n  })\r\n\r\n  return emails\r\n}\r\n\r\n// Check if email is duplicate and return source\r\nconst getDuplicateSource = (email) => {\r\n  const normalizedEmail = email.toLowerCase().trim()\r\n\r\n  // Check in existing pills\r\n  const pillIndex = emailPills.value.findIndex(pill =>\r\n    pill.address.toLowerCase() === normalizedEmail\r\n  )\r\n\r\n  if (pillIndex > -1) {\r\n    return `Already added manually`\r\n  }\r\n\r\n  // Check in groups\r\n  for (const group of selectedGroups.value) {\r\n    if (group.emails && group.emails.some(groupEmail =>\r\n      groupEmail.toLowerCase() === normalizedEmail\r\n    )) {\r\n      return `Already in group: ${group.name}`\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\n// Add email pill\r\nconst addEmailPill = (email) => {\r\n  const trimmedEmail = email.trim()\r\n  if (!trimmedEmail) return\r\n\r\n  let status = 'valid'\r\n  let reason = ''\r\n\r\n  // Validate email format\r\n  if (!validateEmail(trimmedEmail)) {\r\n    status = 'invalid'\r\n    reason = getValidationError(trimmedEmail)\r\n  } else {\r\n    // Check for duplicates\r\n    const duplicateSource = getDuplicateSource(trimmedEmail)\r\n    if (duplicateSource) {\r\n      status = 'duplicate'\r\n      reason = duplicateSource\r\n    }\r\n  }\r\n\r\n  emailPills.value.push({\r\n    address: trimmedEmail,\r\n    status: status,\r\n    reason: reason\r\n  })\r\n\r\n  currentEmailInput.value = ''\r\n}\r\n\r\n// Remove email pill\r\nconst removeEmailPill = (index) => {\r\n  emailPills.value.splice(index, 1)\r\n}\r\n\r\n// Handle email input keydown\r\nconst handleEmailInputKeydown = (event) => {\r\n  if (event.key === ',' || event.key === 'Enter') {\r\n    event.preventDefault()\r\n    addEmailPill(currentEmailInput.value)\r\n  } else if (event.key === 'Backspace' && currentEmailInput.value === '' && emailPills.value.length > 0) {\r\n    // Remove last pill on backspace if input is empty\r\n    emailPills.value.pop()\r\n  }\r\n}\r\n\r\n// Handle email paste\r\nconst handleEmailPaste = (event) => {\r\n  event.preventDefault()\r\n  const pastedText = event.clipboardData?.getData('text') || ''\r\n\r\n  // Split by common separators\r\n  const emails = pastedText.split(/[,;\\s\\n]+/).filter(e => e.trim())\r\n\r\n  emails.forEach(email => {\r\n    addEmailPill(email)\r\n  })\r\n}\r\n\r\n// Handle email input blur\r\nconst handleEmailInputBlur = () => {\r\n  if (currentEmailInput.value.trim()) {\r\n    addEmailPill(currentEmailInput.value)\r\n  }\r\n}\r\n\r\n// Toggle group expansion\r\nconst toggleGroupExpansion = (groupName) => {\r\n  const index = expandedGroups.value.indexOf(groupName)\r\n  if (index > -1) {\r\n    expandedGroups.value.splice(index, 1)\r\n  } else {\r\n    expandedGroups.value.push(groupName)\r\n  }\r\n}\r\n\r\n// Remove group\r\nconst removeGroup = (groupName) => {\r\n  const index = selectedGroups.value.findIndex(g => g.name === groupName)\r\n  if (index > -1) {\r\n    selectedGroups.value.splice(index, 1)\r\n    // Remove from expanded groups if present\r\n    const expandedIndex = expandedGroups.value.indexOf(groupName)\r\n    if (expandedIndex > -1) {\r\n      expandedGroups.value.splice(expandedIndex, 1)\r\n    }\r\n  }\r\n  // Update form data\r\n  formData.value.email_group = selectedGroups.value.map(group => ({\r\n    email_group: group.name\r\n  }))\r\n}\r\n\r\n// Attachment handling functions\r\nconst handleFileAttachment = (event) => {\r\n  const files = Array.from(event.target.files || [])\r\n\r\n  files.forEach(file => {\r\n    // Check file size\r\n    if (file.size > MAX_FILE_SIZE) {\r\n      alert(`File \"${file.name}\" is too large. Maximum size is 10MB.`)\r\n      return\r\n    }\r\n\r\n    // Check for duplicates\r\n    const isDuplicate = attachments.value.some(\r\n      existing => existing.name === file.name && existing.size === file.size\r\n    )\r\n\r\n    if (isDuplicate) {\r\n      alert(`File \"${file.name}\" is already attached.`)\r\n      return\r\n    }\r\n\r\n    // Add file to attachments\r\n    attachments.value.push(file)\r\n  })\r\n\r\n  // Reset input\r\n  if (attachmentInput.value) {\r\n    attachmentInput.value.value = ''\r\n  }\r\n}\r\n\r\nconst removeAttachment = (index) => {\r\n  attachments.value.splice(index, 1)\r\n}\r\n\r\nconst formatFileSize = (bytes) => {\r\n  if (bytes === 0) return '0 Bytes'\r\n\r\n  const k = 1024\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n\r\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i]\r\n}\r\n\r\nconst isImageFile = (file) => {\r\n  return file.type.startsWith('image/')\r\n}\r\n\r\nconst isPDFFile = (file) => {\r\n  return file.type === 'application/pdf' || file.name.toLowerCase().endsWith('.pdf')\r\n}\r\n\r\nconst totalAttachmentSize = computed(() => {\r\n  return attachments.value.reduce((total, file) => total + file.size, 0)\r\n})\r\n\r\n// Group creation helper functions\r\nconst generateTempGroupName = () => {\r\n  const randomSuffix = Math.random().toString(36).substring(2, 8)\r\n  return `temp-grp-${randomSuffix}`\r\n}\r\n\r\nconst createEmailGroup = async (groupName, emails, isTemporary = false) => {\r\n  try {\r\n    console.log(`Creating email group: ${groupName}`, emails)\r\n\r\n    // Create Email Group document\r\n    const emailGroupDoc = {\r\n      doctype: 'Email Group',\r\n      title: groupName,\r\n    }\r\n\r\n    const createdGroup = await call('frappe.client.insert', {\r\n      doc: emailGroupDoc\r\n    })\r\n\r\n    console.log('Email Group created:', createdGroup)\r\n\r\n    // Add emails to the group as separate Email Group Member documents\r\n    for (const email of emails) {\r\n      const emailGroupMember = {\r\n        doctype: 'Email Group Member',\r\n        email_group: createdGroup.name, // Link to the Email Group\r\n        email: email,\r\n        unsubscribed: 0\r\n      }\r\n\r\n      await call('frappe.client.insert', {\r\n        doc: emailGroupMember\r\n      })\r\n    }\r\n\r\n    console.log(`Added ${emails.length} members to group ${groupName}`)\r\n\r\n    return {\r\n      name: createdGroup.name,\r\n      title: groupName,\r\n      email_count: emails.length,\r\n      emails: emails,\r\n      isTemporary: isTemporary\r\n    }\r\n  } catch (error) {\r\n    console.error('Error creating email group:', error)\r\n    throw new Error(`Failed to create email group: ${error.message || error}`)\r\n  }\r\n}\r\n\r\nconst showGroupNamingPrompt = (emails, message, callback) => {\r\n  pendingGroupEmails.value = emails\r\n  groupNamingMessage.value = message\r\n  groupNamingCallback.value = callback\r\n  newGroupName.value = ''\r\n  showGroupNamingDialog.value = true\r\n\r\n  // Focus the input after dialog opens\r\n  setTimeout(() => {\r\n    if (groupNameInput.value) {\r\n      groupNameInput.value.focus()\r\n    }\r\n  }, 100)\r\n}\r\n\r\nconst cancelGroupNaming = () => {\r\n  showGroupNamingDialog.value = false\r\n  pendingGroupEmails.value = []\r\n  groupNamingMessage.value = ''\r\n  groupNamingCallback.value = null\r\n  newGroupName.value = ''\r\n}\r\n\r\nconst skipGroupNaming = async () => {\r\n  showGroupNamingDialog.value = false\r\n\r\n  if (groupNamingCallback.value) {\r\n    // Create temporary group\r\n    const tempGroupName = generateTempGroupName()\r\n    const createdGroup = await createEmailGroup(tempGroupName, pendingGroupEmails.value, true)\r\n    groupNamingCallback.value(createdGroup)\r\n  }\r\n\r\n  cancelGroupNaming()\r\n}\r\n\r\nconst confirmGroupNaming = async () => {\r\n  showGroupNamingDialog.value = false\r\n\r\n  if (groupNamingCallback.value) {\r\n    const groupName = newGroupName.value.trim() || generateTempGroupName()\r\n    const isTemporary = !newGroupName.value.trim()\r\n    const createdGroup = await createEmailGroup(groupName, pendingGroupEmails.value, isTemporary)\r\n    groupNamingCallback.value(createdGroup)\r\n  }\r\n\r\n  cancelGroupNaming()\r\n}\r\n\r\n// Form data based on Newsletter doctype\r\nconst formData = ref({\r\n  // From section\r\n  sender_name: '',\r\n  sender_email: '',\r\n  send_from: '',\r\n\r\n  // Recipients (will be handled separately)\r\n  email_group: [],\r\n\r\n  // Subject & Content\r\n  subject: '',\r\n  content_type: 'Rich Text',\r\n  message: '',\r\n  message_md: '',\r\n  message_html: '',\r\n\r\n  // Options\r\n  send_unsubscribe_link: true,\r\n  send_webview_link: false,\r\n  published: false,\r\n  route: '',\r\n\r\n  // Scheduling\r\n  schedule_sending: false,\r\n  schedule_send: '',\r\n\r\n  // Campaign\r\n  campaign: '',\r\n\r\n  // Attachments (to be implemented later if needed)\r\n  attachments: []\r\n})\r\n\r\n// Computed properties\r\nconst validEmailCount = computed(() => {\r\n  return emailPills.value.filter(pill => pill.status === 'valid').length\r\n})\r\n\r\nconst invalidEmailCount = computed(() => {\r\n  return emailPills.value.filter(pill => pill.status === 'invalid').length\r\n})\r\n\r\nconst duplicateEmailCount = computed(() => {\r\n  return emailPills.value.filter(pill => pill.status === 'duplicate').length\r\n})\r\n\r\nconst totalRecipientCount = computed(() => {\r\n  const groupEmailCount = selectedGroups.value.reduce((count, group) => count + (group.email_count || 0), 0)\r\n  const validPillCount = validEmailCount.value\r\n  return groupEmailCount + validPillCount\r\n})\r\n\r\n// Watch for content type changes to clear other message fields\r\nwatch(() => formData.value.content_type, (newType, oldType) => {\r\n  if (newType !== 'Rich Text') formData.value.message = ''\r\n  if (newType !== 'Markdown') formData.value.message_md = ''\r\n  if (newType !== 'HTML') formData.value.message_html = ''\r\n})\r\n\r\n// Watch for message changes to sync with Tiptap editor\r\nwatch(() => formData.value.message, (newMessage) => {\r\n  if (editor.value && editor.value.getHTML() !== newMessage) {\r\n    editor.value.commands.setContent(newMessage || '', false)\r\n  }\r\n})\r\n\r\n// Watch sendLater to update schedule_sending\r\nwatch(sendLater, (value) => {\r\n  formData.value.schedule_sending = value\r\n  if (!value) {\r\n    formData.value.schedule_send = ''\r\n  }\r\n})\r\n\r\n// Watch published to generate route\r\nwatch(() => formData.value.published, (isPublished) => {\r\n  if (isPublished && formData.value.subject && !formData.value.route) {\r\n    formData.value.route = `newsletter/${formData.value.subject.toLowerCase().replace(/\\s+/g, '-').replace(/[^a-z0-9-]/g, '')}`\r\n  } else if (!isPublished) {\r\n    formData.value.route = ''\r\n  }\r\n})\r\n\r\n// Methods\r\nconst closeDialog = () => {\r\n  isDialogOpen.value = false\r\n}\r\n\r\nconst resetForm = () => {\r\n  // Auto-populate sender info with current user\r\n  const currentUser = session.user || 'Administrator'\r\n  const userEmail = currentUser.includes('@') ? currentUser : `${currentUser}@yourcompany.com`\r\n\r\n  formData.value = {\r\n    sender_name: currentUser === 'Administrator' ? 'System Administrator' : currentUser,\r\n    sender_email: userEmail,\r\n    send_from: currentUser === 'Administrator' ? 'System Administrator' : currentUser,\r\n    email_group: [],\r\n    subject: '',\r\n    content_type: 'Rich Text',\r\n    message: '',\r\n    message_md: '',\r\n    message_html: '',\r\n    send_unsubscribe_link: true,\r\n    send_webview_link: false,\r\n    published: false,\r\n    route: '',\r\n    schedule_sending: false,\r\n    schedule_send: '',\r\n    campaign: '',\r\n    attachments: []\r\n  }\r\n\r\n  // Clear recipients\r\n  emailPills.value = []\r\n  currentEmailInput.value = ''\r\n  selectedGroups.value = []\r\n  expandedGroups.value = []\r\n  sendLater.value = false\r\n\r\n  // Clear attachments\r\n  attachments.value = []\r\n\r\n  // Clear Tiptap editor\r\n  if (editor.value) {\r\n    editor.value.commands.setContent('', false)\r\n  }\r\n}\r\n\r\nconst handleGroupsSelected = (groups) => {\r\n  selectedGroups.value = groups\r\n  formData.value.email_group = groups.map(group => ({\r\n    email_group: group.name\r\n  }))\r\n}\r\n\r\nconst saveDraft = async () => {\r\n  const proceedWithSave = async (finalGroups) => {\r\n    try {\r\n      isSaving.value = true\r\n\r\n      // Prepare Newsletter document data\r\n      const newsletterData = {\r\n        doctype: 'Newsletter',\r\n        subject: formData.value.subject,\r\n        sender_name: formData.value.sender_name || session.user,\r\n        sender_email: formData.value.sender_email,\r\n        send_from: formData.value.send_from || `${formData.value.sender_name} <${formData.value.sender_email}>`,\r\n        content_type: formData.value.content_type,\r\n        message: formData.value.message || '',\r\n        message_md: formData.value.message_md || '',\r\n        message_html: formData.value.message_html || '',\r\n        send_unsubscribe_link: formData.value.send_unsubscribe_link ? 1 : 0,\r\n        send_webview_link: formData.value.send_webview_link ? 1 : 0,\r\n        published: formData.value.published ? 1 : 0,\r\n        route: formData.value.route || '',\r\n        schedule_sending: formData.value.schedule_sending ? 1 : 0,\r\n        schedule_send: formData.value.schedule_send || null,\r\n        campaign: formData.value.campaign || '',\r\n        email_group: finalGroups.map(group => ({\r\n          email_group: group.name\r\n        })),\r\n      }\r\n\r\n      console.log('Saving Newsletter draft:', newsletterData)\r\n\r\n      // Save Newsletter document using Frappe API\r\n      const result = await call('frappe.client.insert', {\r\n        doc: newsletterData\r\n      })\r\n\r\n      console.log('Newsletter saved:', result)\r\n\r\n      // Emit success event\r\n      emit('email-sent', {\r\n        type: 'success',\r\n        subject: result.subject,\r\n        name: result.name,\r\n        recipientCount: totalRecipientCount.value,\r\n        action: 'draft_saved',\r\n        message: `Newsletter draft \"${result.subject}\" saved successfully!`\r\n      })\r\n\r\n      // Close dialog\r\n      closeDialog()\r\n\r\n    } catch (error) {\r\n      console.error('Error saving newsletter:', error)\r\n\r\n      // Emit error event\r\n      emit('email-sent', {\r\n        type: 'error',\r\n        subject: formData.value.subject,\r\n        name: null,\r\n        recipientCount: 0,\r\n        action: 'draft_save_failed',\r\n        message: `Failed to save newsletter: ${error.message || error}`\r\n      })\r\n    } finally {\r\n      isSaving.value = false\r\n    }\r\n  }\r\n\r\n  try {\r\n    // Validate required fields for Newsletter doctype\r\n    if (!formData.value.subject) {\r\n      throw new Error('Subject is required')\r\n    }\r\n\r\n    if (!formData.value.sender_email) {\r\n      throw new Error('Sender Email is required')\r\n    }\r\n\r\n    // Validate at least one recipient group is selected\r\n    if (selectedGroups.value.length === 0 && validEmailCount.value === 0) {\r\n      throw new Error('At least one email group or recipient is required')\r\n    }\r\n\r\n    const validEmails = emailPills.value\r\n      .filter(pill => pill.status === 'valid')\r\n      .map(pill => pill.address)\r\n\r\n    const hasSelectedGroups = selectedGroups.value.length > 0\r\n    const hasManualEmails = validEmails.length > 0\r\n\r\n    // Scenario 1: Only email groups selected - no prompt needed\r\n    if (hasSelectedGroups && !hasManualEmails) {\r\n      await proceedWithSave(selectedGroups.value)\r\n      return\r\n    }\r\n\r\n    // Scenario 2: Only 1 manual email - create temp group automatically\r\n    if (!hasSelectedGroups && validEmails.length === 1) {\r\n      const tempGroupName = generateTempGroupName()\r\n      const createdGroup = await createEmailGroup(tempGroupName, validEmails, true)\r\n      await proceedWithSave([createdGroup])\r\n      return\r\n    }\r\n\r\n    // Scenario 3: Multiple manual emails OR mix of groups + manual emails - ask for group name\r\n    let emailsToGroup = [...validEmails]\r\n    let message = ''\r\n\r\n    if (hasSelectedGroups && hasManualEmails) {\r\n      // Mix: Include emails from selected groups + manual emails\r\n      selectedGroups.value.forEach(group => {\r\n        if (group.emails) {\r\n          emailsToGroup.push(...group.emails)\r\n        }\r\n      })\r\n      // Remove duplicates\r\n      emailsToGroup = [...new Set(emailsToGroup)]\r\n      message = 'You have selected email groups and added individual emails. Would you like to save all recipients as a new group for future use?'\r\n    } else {\r\n      // Only multiple manual emails\r\n      message = 'Would you like to save these recipients as a group for future use?'\r\n    }\r\n\r\n    showGroupNamingPrompt(emailsToGroup, message, async (createdGroup) => {\r\n      // If mixing with existing groups, use only the newly created group\r\n      // Otherwise use the created group\r\n      const finalGroups = hasSelectedGroups ? [createdGroup] : [createdGroup]\r\n      await proceedWithSave(finalGroups)\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Error in save draft:', error)\r\n    alert(`Error: ${error.message || error}`)\r\n    isSaving.value = false\r\n  }\r\n}\r\n\r\nconst sendEmail = async () => {\r\n  const proceedWithSend = async (finalGroups) => {\r\n    try {\r\n      isSubmitting.value = true\r\n\r\n      // Prepare Newsletter document data\r\n      const newsletterData = {\r\n        doctype: 'Newsletter',\r\n        subject: formData.value.subject,\r\n        sender_name: formData.value.sender_name || session.user,\r\n        sender_email: formData.value.sender_email,\r\n        send_from: formData.value.send_from || `${formData.value.sender_name} <${formData.value.sender_email}>`,\r\n        content_type: formData.value.content_type,\r\n        message: formData.value.message || '',\r\n        message_md: formData.value.message_md || '',\r\n        message_html: formData.value.message_html || '',\r\n        send_unsubscribe_link: formData.value.send_unsubscribe_link ? 1 : 0,\r\n        send_webview_link: formData.value.send_webview_link ? 1 : 0,\r\n        published: formData.value.published ? 1 : 0,\r\n        route: formData.value.route || '',\r\n        schedule_sending: formData.value.schedule_sending ? 1 : 0,\r\n        schedule_send: formData.value.schedule_send || null,\r\n        campaign: formData.value.campaign || '',\r\n        email_group: finalGroups.map(group => ({\r\n          email_group: group.name\r\n        })),\r\n      }\r\n\r\n      console.log('Creating Newsletter:', newsletterData)\r\n\r\n      // Step 1: Save Newsletter document using Frappe API\r\n      // Note: Frappe will auto-generate a unique name based on the subject if there's a duplicate\r\n      let savedNewsletter\r\n      try {\r\n        savedNewsletter = await call('frappe.client.insert', {\r\n          doc: newsletterData\r\n        })\r\n      } catch (error) {\r\n        // If duplicate entry error, try with a timestamp suffix\r\n        if (error.message && error.message.includes('DuplicateEntryError')) {\r\n          const timestamp = Date.now()\r\n          newsletterData.subject = `${formData.value.subject} (${timestamp})`\r\n          savedNewsletter = await call('frappe.client.insert', {\r\n            doc: newsletterData\r\n          })\r\n        } else {\r\n          throw error\r\n        }\r\n      }\r\n\r\n      console.log('Newsletter saved:', savedNewsletter)\r\n      console.log('Email groups in newsletter:', finalGroups.map(g => g.name))\r\n\r\n      // Log email group members to verify they exist\r\n      for (const group of finalGroups) {\r\n        console.log(`Checking members for group: ${group.name}`)\r\n        try {\r\n          const members = await call('frappe.client.get_list', {\r\n            doctype: 'Email Group Member',\r\n            fields: ['email', 'email_group', 'unsubscribed'],\r\n            filters: [['email_group', '=', group.name]],\r\n            limit_page_length: 1000\r\n          })\r\n          console.log(`Group ${group.name} has ${members.length} members:`, members)\r\n        } catch (err) {\r\n          console.error(`Error checking members for ${group.name}:`, err)\r\n        }\r\n      }\r\n\r\n      // Step 2: Send the newsletter immediately (or schedule if configured)\r\n      if (formData.value.schedule_sending && formData.value.schedule_send) {\r\n        // Newsletter will be sent at scheduled time\r\n        emit('email-sent', {\r\n          type: 'info',\r\n          subject: savedNewsletter.subject,\r\n          name: savedNewsletter.name,\r\n          recipientCount: totalRecipientCount.value,\r\n          scheduled: true,\r\n          action: 'scheduled',\r\n          message: `Newsletter \"${savedNewsletter.subject}\" scheduled to send at ${formData.value.schedule_send}`\r\n        })\r\n      } else {\r\n        // Send immediately using the Newsletter.send_emails() whitelisted method\r\n        console.log('Sending newsletter:', savedNewsletter.name)\r\n\r\n        // Call send_emails on the saved newsletter using Frappe's run_doc_method API\r\n        // This requires the full document object\r\n        await call('run_doc_method', {\r\n          docs: savedNewsletter,\r\n          method: 'send_emails'\r\n        })\r\n\r\n        // Emit success event\r\n        emit('email-sent', {\r\n          type: 'success',\r\n          subject: savedNewsletter.subject,\r\n          name: savedNewsletter.name,\r\n          recipientCount: totalRecipientCount.value,\r\n          scheduled: false,\r\n          action: 'sent',\r\n          message: `Newsletter \"${savedNewsletter.subject}\" has been queued for sending to ${totalRecipientCount.value} recipients!`\r\n        })\r\n      }\r\n\r\n      // Close dialog and reset form\r\n      closeDialog()\r\n\r\n    } catch (error) {\r\n      console.error('Error sending newsletter:', error)\r\n\r\n      // Emit error event\r\n      emit('email-sent', {\r\n        type: 'error',\r\n        subject: formData.value.subject,\r\n        name: null,\r\n        recipientCount: 0,\r\n        scheduled: false,\r\n        action: 'send_failed',\r\n        message: `Failed to send newsletter: ${error.message || error}`\r\n      })\r\n    } finally {\r\n      isSubmitting.value = false\r\n    }\r\n  }\r\n\r\n  try {\r\n    // Validate required fields for Newsletter doctype\r\n    if (!formData.value.subject) {\r\n      throw new Error('Subject is required')\r\n    }\r\n\r\n    if (!formData.value.sender_email) {\r\n      throw new Error('Sender Email is required')\r\n    }\r\n\r\n    // Validate message content based on type\r\n    const messageField = {\r\n      'Rich Text': 'message',\r\n      'Markdown': 'message_md',\r\n      'HTML': 'message_html'\r\n    }[formData.value.content_type]\r\n\r\n    if (!formData.value[messageField]) {\r\n      throw new Error('Message content is required')\r\n    }\r\n\r\n    // Validate at least one recipient group is selected\r\n    if (selectedGroups.value.length === 0 && validEmailCount.value === 0) {\r\n      throw new Error('At least one email group or recipient is required')\r\n    }\r\n\r\n    const validEmails = emailPills.value\r\n      .filter(pill => pill.status === 'valid')\r\n      .map(pill => pill.address)\r\n\r\n    const hasSelectedGroups = selectedGroups.value.length > 0\r\n    const hasManualEmails = validEmails.length > 0\r\n\r\n    // Scenario 1: Only email groups selected - no prompt needed\r\n    if (hasSelectedGroups && !hasManualEmails) {\r\n      await proceedWithSend(selectedGroups.value)\r\n      return\r\n    }\r\n\r\n    // Scenario 2: Only 1 manual email - create temp group automatically\r\n    if (!hasSelectedGroups && validEmails.length === 1) {\r\n      const tempGroupName = generateTempGroupName()\r\n      const createdGroup = await createEmailGroup(tempGroupName, validEmails, true)\r\n      await proceedWithSend([createdGroup])\r\n      return\r\n    }\r\n\r\n    // Scenario 3: Multiple manual emails OR mix of groups + manual emails - ask for group name\r\n    let emailsToGroup = [...validEmails]\r\n    let message = ''\r\n\r\n    if (hasSelectedGroups && hasManualEmails) {\r\n      // Mix: Include emails from selected groups + manual emails\r\n      selectedGroups.value.forEach(group => {\r\n        if (group.emails) {\r\n          emailsToGroup.push(...group.emails)\r\n        }\r\n      })\r\n      // Remove duplicates\r\n      emailsToGroup = [...new Set(emailsToGroup)]\r\n      message = 'You have selected email groups and added individual emails. Would you like to save all recipients as a new group for future use?'\r\n    } else {\r\n      // Only multiple manual emails\r\n      message = 'Would you like to save these recipients as a group for future use?'\r\n    }\r\n\r\n    showGroupNamingPrompt(emailsToGroup, message, async (createdGroup) => {\r\n      // If mixing with existing groups, use only the newly created group\r\n      const finalGroups = hasSelectedGroups ? [createdGroup] : [createdGroup]\r\n      await proceedWithSend(finalGroups)\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Error in send email:', error)\r\n    alert(`Error: ${error.message || error}`)\r\n    isSubmitting.value = false\r\n  }\r\n}\r\n\r\n// Reset form when dialog is opened\r\nwatch(() => props.show, (isOpen) => {\r\n  if (isOpen) {\r\n    resetForm()\r\n  }\r\n})\r\n\r\n// Cleanup editor on component unmount\r\nonBeforeUnmount(() => {\r\n  if (editor.value) {\r\n    editor.value.destroy()\r\n  }\r\n})\r\n</script>\r\n\r\n<style>\r\n/* Tiptap Editor Styles */\r\n.tiptap-editor {\r\n  @apply w-full;\r\n}\r\n\r\n.tiptap-editor .ProseMirror {\r\n  @apply px-3 py-2 focus:outline-none min-h-[200px] max-h-[400px] overflow-y-auto;\r\n}\r\n\r\n.tiptap-editor .ProseMirror:focus {\r\n  @apply outline-none;\r\n}\r\n\r\n/* Placeholder */\r\n.tiptap-editor .ProseMirror p.is-editor-empty:first-child::before {\r\n  content: 'Compose your email message...';\r\n  @apply text-gray-400;\r\n  float: left;\r\n  height: 0;\r\n  pointer-events: none;\r\n}\r\n\r\n/* Typography */\r\n.tiptap-editor .ProseMirror h1 {\r\n  @apply text-2xl font-bold mt-4 mb-2;\r\n}\r\n\r\n.tiptap-editor .ProseMirror h2 {\r\n  @apply text-xl font-bold mt-3 mb-2;\r\n}\r\n\r\n.tiptap-editor .ProseMirror h3 {\r\n  @apply text-lg font-bold mt-2 mb-1;\r\n}\r\n\r\n.tiptap-editor .ProseMirror p {\r\n  @apply my-2;\r\n}\r\n\r\n.tiptap-editor .ProseMirror ul {\r\n  @apply list-disc ml-6 my-2;\r\n}\r\n\r\n.tiptap-editor .ProseMirror ol {\r\n  @apply list-decimal ml-6 my-2;\r\n}\r\n\r\n.tiptap-editor .ProseMirror li {\r\n  @apply my-1;\r\n}\r\n\r\n.tiptap-editor .ProseMirror blockquote {\r\n  @apply border-l-4 border-gray-300 pl-4 italic my-2;\r\n}\r\n\r\n.tiptap-editor .ProseMirror hr {\r\n  @apply my-4 border-t border-gray-300;\r\n}\r\n\r\n.tiptap-editor .ProseMirror strong {\r\n  @apply font-bold;\r\n}\r\n\r\n.tiptap-editor .ProseMirror em {\r\n  @apply italic;\r\n}\r\n\r\n.tiptap-editor .ProseMirror u {\r\n  @apply underline;\r\n}\r\n\r\n.tiptap-editor .ProseMirror s {\r\n  @apply line-through;\r\n}\r\n\r\n.tiptap-editor .ProseMirror code {\r\n  @apply bg-gray-100 px-1 py-0.5 rounded text-sm font-mono;\r\n}\r\n\r\n.tiptap-editor .ProseMirror pre {\r\n  @apply bg-gray-100 p-3 rounded my-2 overflow-x-auto;\r\n}\r\n\r\n.tiptap-editor .ProseMirror pre code {\r\n  @apply bg-transparent p-0;\r\n}\r\n\r\n/* Images with Resize */\r\n.tiptap-editor .ProseMirror img {\r\n  @apply max-w-full h-auto rounded my-2;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n}\r\n\r\n.tiptap-editor .ProseMirror img.ProseMirror-selectednode {\r\n  @apply outline outline-2 outline-blue-500;\r\n}\r\n\r\n/* Image Resize Wrapper */\r\n.tiptap-editor .ProseMirror .image-resizer {\r\n  display: inline-block;\r\n  position: relative;\r\n  line-height: 0;\r\n}\r\n\r\n.tiptap-editor .ProseMirror .image-resizer img {\r\n  display: block;\r\n  margin: 0;\r\n}\r\n\r\n/* Resize Handles */\r\n.tiptap-editor .ProseMirror .image-resizer .resize-trigger {\r\n  position: absolute;\r\n  width: 10px;\r\n  height: 10px;\r\n  background: #3b82f6;\r\n  border: 2px solid white;\r\n  border-radius: 50%;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n  cursor: nwse-resize;\r\n  z-index: 10;\r\n}\r\n\r\n.tiptap-editor .ProseMirror .image-resizer .resize-trigger.right {\r\n  right: -5px;\r\n  bottom: -5px;\r\n}\r\n\r\n.tiptap-editor .ProseMirror .image-resizer .resize-trigger.left {\r\n  left: -5px;\r\n  bottom: -5px;\r\n  cursor: nesw-resize;\r\n}\r\n\r\n.tiptap-editor .ProseMirror .image-resizer .resize-trigger.top-right {\r\n  right: -5px;\r\n  top: -5px;\r\n  cursor: nesw-resize;\r\n}\r\n\r\n.tiptap-editor .ProseMirror .image-resizer .resize-trigger.top-left {\r\n  left: -5px;\r\n  top: -5px;\r\n  cursor: nwse-resize;\r\n}\r\n\r\n/* Resize cursor during drag */\r\n.tiptap-editor .ProseMirror .image-resizer.resizing {\r\n  cursor: nwse-resize;\r\n}\r\n\r\n.tiptap-editor .ProseMirror .image-resizer.resizing img {\r\n  pointer-events: none;\r\n}\r\n\r\n/* Tables */\r\n.tiptap-editor .ProseMirror table {\r\n  @apply border-collapse table-auto w-full my-4;\r\n}\r\n\r\n.tiptap-editor .ProseMirror table td,\r\n.tiptap-editor .ProseMirror table th {\r\n  @apply border border-gray-300 px-3 py-2 text-left min-w-[100px];\r\n  position: relative;\r\n}\r\n\r\n.tiptap-editor .ProseMirror table th {\r\n  @apply bg-gray-100 font-bold;\r\n}\r\n\r\n.tiptap-editor .ProseMirror table .selectedCell {\r\n  @apply bg-blue-50;\r\n}\r\n\r\n.tiptap-editor .ProseMirror table .column-resize-handle {\r\n  position: absolute;\r\n  right: -2px;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 4px;\r\n  background-color: #3b82f6;\r\n  pointer-events: none;\r\n}\r\n\r\n/* Text Alignment */\r\n.tiptap-editor .ProseMirror [style*=\"text-align: left\"] {\r\n  text-align: left;\r\n}\r\n\r\n.tiptap-editor .ProseMirror [style*=\"text-align: center\"] {\r\n  text-align: center;\r\n}\r\n\r\n.tiptap-editor .ProseMirror [style*=\"text-align: right\"] {\r\n  text-align: right;\r\n}\r\n\r\n.tiptap-editor .ProseMirror [style*=\"text-align: justify\"] {\r\n  text-align: justify;\r\n}\r\n\r\n/* Highlights */\r\n.tiptap-editor .ProseMirror mark {\r\n  @apply px-1 rounded;\r\n}\r\n</style>","import { computed, ref, watch, shallowRef, markRaw } from \"vue\"\n\n// Optimized debounce function with cleanup\nfunction debounce(func, wait) {\n\tlet timeout\n\treturn function executedFunction(...args) {\n\t\tconst later = () => {\n\t\t\tclearTimeout(timeout)\n\t\t\tfunc(...args)\n\t\t}\n\t\tclearTimeout(timeout)\n\t\ttimeout = setTimeout(later, wait)\n\t}\n}\n\nexport function useIssueFilters() {\n\t// Reactive state for search and filters\n\tconst searchQuery = ref(\"\")\n\tconst filters = ref({\n\t\tstatus: \"\",\n\t\tpriority: \"\",\n\t\tassignee: \"\",\n\t\ttags: \"\",\n\t\tsortBy: \"creation desc\",\n\t})\n\n\t// Debounced search to optimize performance\n\tconst debouncedSearchQuery = ref(\"\")\n\n\t// Create debounced function for search\n\tconst updateDebouncedSearch = debounce((query) => {\n\t\tdebouncedSearchQuery.value = query\n\t}, 300) // 300ms delay\n\n\t// Watch search query and update debounced version\n\twatch(searchQuery, (newQuery) => {\n\t\tupdateDebouncedSearch(newQuery)\n\t})\n\n\t// Computed property for API filters\n\tconst apiFilters = computed(() => {\n\t\tconst filterObj = {}\n\n\t\t// Add search filter if query exists\n\t\tif (debouncedSearchQuery.value.trim()) {\n\t\t\t// Search in subject and description fields\n\t\t\tfilterObj[\"subject\"] = [\"like\", `%${debouncedSearchQuery.value.trim()}%`]\n\t\t}\n\n\t\t// Add status filter\n\t\tif (filters.value.status) {\n\t\t\tfilterObj[\"status\"] = filters.value.status\n\t\t}\n\n\t\t// Add priority filter\n\t\tif (filters.value.priority) {\n\t\t\tfilterObj[\"priority\"] = filters.value.priority\n\t\t}\n\n\t\t// Add assignee filter\n\t\tif (filters.value.assignee) {\n\t\t\tfilterObj[\"raised_by\"] = filters.value.assignee\n\t\t}\n\n\t\t// Add tags filter (issue_type)\n\t\tif (filters.value.tags) {\n\t\t\tfilterObj[\"issue_type\"] = filters.value.tags\n\t\t}\n\n\t\treturn filterObj\n\t})\n\n\t// Computed property for sort order\n\tconst sortOrder = computed(() => {\n\t\treturn filters.value.sortBy || \"creation desc\"\n\t})\n\n\t// Memoized filter cache to prevent re-filtering identical data\n\tconst filterCache = new Map()\n\t\n\t// Function to apply filters to a list of issues (client-side filtering) with memoization\n\tconst filterIssues = (issues) => {\n\t\tif (!issues || !Array.isArray(issues)) return []\n\n\t\t// Create cache key based on issues length and filter values\n\t\tconst cacheKey = JSON.stringify({\n\t\t\tissuesLength: issues.length,\n\t\t\tsearchQuery: searchQuery.value.trim(),\n\t\t\tstatus: filters.value.status,\n\t\t\tpriority: filters.value.priority,\n\t\t\tassignee: filters.value.assignee,\n\t\t\ttags: filters.value.tags,\n\t\t\tsortBy: filters.value.sortBy\n\t\t})\n\t\t\n\t\t// Return cached result if available\n\t\tif (filterCache.has(cacheKey)) {\n\t\t\treturn filterCache.get(cacheKey)\n\t\t}\n\n\t\tlet filteredIssues = [...issues]\n\n\t\t// Apply search filter\n\t\tif (searchQuery.value.trim()) {\n\t\t\tconst query = searchQuery.value.toLowerCase().trim()\n\t\t\tfilteredIssues = filteredIssues.filter((issue) => {\n\t\t\t\tconst subject = (issue.subject || \"\").toLowerCase()\n\t\t\t\tconst description = (issue.description || \"\").toLowerCase()\n\t\t\t\treturn subject.includes(query) || description.includes(query)\n\t\t\t})\n\t\t}\n\n\t\t// Apply status filter\n\t\tif (filters.value.status) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.status === filters.value.status,\n\t\t\t)\n\t\t}\n\n\t\t// Apply priority filter\n\t\tif (filters.value.priority) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.priority === filters.value.priority,\n\t\t\t)\n\t\t}\n\n\t\t// Apply assignee filter\n\t\tif (filters.value.assignee) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.raised_by === filters.value.assignee,\n\t\t\t)\n\t\t}\n\n\t\t// Apply tags filter (issue_type)\n\t\tif (filters.value.tags) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.issue_type === filters.value.tags,\n\t\t\t)\n\t\t}\n\n\t\t// Apply sorting with memoized priority order\n\t\tconst priorityOrder = markRaw({ Critical: 4, High: 3, Medium: 2, Low: 1 })\n\t\tfilteredIssues.sort((a, b) => {\n\t\t\tconst [field, direction] = filters.value.sortBy.split(\" \")\n\t\t\tconst aValue = a[field] || \"\"\n\t\t\tconst bValue = b[field] || \"\"\n\n\t\t\tlet comparison = 0\n\n\t\t\t// Handle different field types\n\t\t\tif (field === \"creation\" || field === \"modified\") {\n\t\t\t\tcomparison = new Date(aValue) - new Date(bValue)\n\t\t\t} else if (field === \"priority\") {\n\t\t\t\t// Custom priority sorting: Critical > High > Medium > Low\n\t\t\t\tcomparison = (priorityOrder[aValue] || 0) - (priorityOrder[bValue] || 0)\n\t\t\t} else {\n\t\t\t\t// String comparison\n\t\t\t\tcomparison = aValue.toString().localeCompare(bValue.toString())\n\t\t\t}\n\n\t\t\treturn direction === \"desc\" ? -comparison : comparison\n\t\t})\n\n\t\t// Cache the result (limit cache size to prevent memory leaks)\n\t\tif (filterCache.size > 50) {\n\t\t\tconst firstKey = filterCache.keys().next().value\n\t\t\tfilterCache.delete(firstKey)\n\t\t}\n\t\tfilterCache.set(cacheKey, filteredIssues)\n\n\t\treturn filteredIssues\n\t}\n\n\t// Memoized assignee options cache\n\tlet assigneeOptionsCache = null\n\tlet lastAssigneeIssuesHash = null\n\t\n\t// Function to get unique assignees from issues list with memoization\n\tconst getAssigneeOptions = (issues) => {\n\t\tif (!issues || !Array.isArray(issues))\n\t\t\treturn markRaw([{ label: \"All Assignees\", value: \"\" }])\n\n\t\t// Create hash of assignees to detect changes\n\t\tconst assigneesHash = issues\n\t\t\t.map(issue => issue.raised_by)\n\t\t\t.filter(assignee => assignee && assignee.trim())\n\t\t\t.sort()\n\t\t\t.join('|')\n\t\t\n\t\t// Return cached result if assignees haven't changed\n\t\tif (assigneeOptionsCache && lastAssigneeIssuesHash === assigneesHash) {\n\t\t\treturn assigneeOptionsCache\n\t\t}\n\n\t\tconst uniqueAssignees = [\n\t\t\t...new Set(\n\t\t\t\tissues\n\t\t\t\t\t.map((issue) => issue.raised_by)\n\t\t\t\t\t.filter((assignee) => assignee && assignee.trim()),\n\t\t\t),\n\t\t]\n\n\t\tconst options = markRaw([\n\t\t\t{ label: \"All Assignees\", value: \"\" },\n\t\t\t...uniqueAssignees.map((assignee) => ({\n\t\t\t\tlabel: assignee,\n\t\t\t\tvalue: assignee,\n\t\t\t})),\n\t\t])\n\t\t\n\t\t// Cache the result\n\t\tassigneeOptionsCache = options\n\t\tlastAssigneeIssuesHash = assigneesHash\n\n\t\treturn options\n\t}\n\n\t// Function to reset all filters\n\tconst resetFilters = () => {\n\t\tsearchQuery.value = \"\"\n\t\tdebouncedSearchQuery.value = \"\"\n\t\tfilters.value = {\n\t\t\tstatus: \"\",\n\t\t\tpriority: \"\",\n\t\t\tassignee: \"\",\n\t\t\ttags: \"\",\n\t\t\tsortBy: \"creation desc\",\n\t\t}\n\t}\n\n\t// Function to check if any filters are active\n\tconst hasActiveFilters = computed(() => {\n\t\treturn (\n\t\t\tsearchQuery.value.trim() !== \"\" ||\n\t\t\tfilters.value.status !== \"\" ||\n\t\t\tfilters.value.priority !== \"\" ||\n\t\t\tfilters.value.assignee !== \"\" ||\n\t\t\tfilters.value.tags !== \"\" ||\n\t\t\tfilters.value.sortBy !== \"creation desc\"\n\t\t)\n\t})\n\n\treturn {\n\t\t// Reactive state\n\t\tsearchQuery,\n\t\tfilters,\n\t\tdebouncedSearchQuery,\n\n\t\t// Computed properties\n\t\tapiFilters,\n\t\tsortOrder,\n\t\thasActiveFilters,\n\n\t\t// Functions\n\t\tfilterIssues,\n\t\tgetAssigneeOptions,\n\t\tresetFilters,\n\t}\n}\n","import { onMounted, onUnmounted, ref } from 'vue'\nimport { useSocket } from '../socket'\nimport { reloadIssues, getIssuesCount, issuesResource, fetchSingleIssue, singleIssueResource, statFilterResource } from '../data/issues'\n\n/**\n * Composable that implements Frappe's list view realtime update pattern\n * Similar to setup_realtime_updates() in frappe/public/js/frappe/list/list_view.js\n */\nexport function useIssueListUpdates(getCurrentParams, customRefreshFunction, getCurrentResourceState) {\n  const socket = useSocket()\n  const pendingDocumentRefreshes = ref([])\n  const realtimeEventsSetup = ref(false)\n  const isLargeTable = ref(false) // Could be made configurable\n  \n  // Debounced refresh similar to Frappe's approach\n  let debounceTimer = null\n  const debounceDelay = isLargeTable.value ? 15000 : 2000 // 15s for large tables, 2s for normal\n  \n  const debouncedRefresh = () => {\n    console.log(` Setting up debounced refresh with ${debounceDelay}ms delay`)\n    if (debounceTimer) {\n      clearTimeout(debounceTimer)\n      console.log(' Cleared existing debounce timer')\n    }\n    debounceTimer = setTimeout(() => {\n      console.log(' Debounce timer fired, calling processDocumentRefreshes')\n      processDocumentRefreshes()\n    }, debounceDelay)\n  }\n\n  const setupRealtimeUpdates = () => {\n    if (!socket || realtimeEventsSetup.value) {\n      return\n    }\n    \n    // Subscribe to Issue doctype updates (Frappe's standard way)\n    socket.emit('doctype_subscribe', 'Issue')\n    \n    // Remove any existing listeners to avoid duplicates\n    socket.off('list_update')\n    \n    // Listen for Frappe's standard list_update event\n    socket.on('list_update', (data) => {\n      try {\n        console.log(' Received list_update event:', data)\n        \n        if (data?.doctype !== 'Issue') {\n          return\n        }\n\n        // Skip updates if we're in a state where updates should be avoided\n        if (avoidRealtimeUpdate()) {\n          console.log(' Skipping realtime update (avoid condition met)')\n          return\n        }\n\n        // Only process updates for existing issues, not newly created ones\n        if (data.action === 'insert' || data.action === 'create') {\n          console.log(' Skipping new issue creation update:', data.name)\n          return\n        }\n\n        console.log(' Adding to pending refreshes:', data.name)\n        // Add to pending refreshes\n        pendingDocumentRefreshes.value.push(data)\n        debouncedRefresh()\n      } catch (error) {\n        console.error(' Error processing list_update event:', error)\n        // Don't let realtime errors break the system\n      }\n    })\n\n    // Also listen for individual document events that should trigger list updates\n    const documentEvents = ['doctype_update', 'Issue_update', 'Issue_create', 'Issue_delete']\n    \n    documentEvents.forEach(eventName => {\n      socket.on(eventName, (data) => {\n        if (data?.doctype !== 'Issue') {\n          return\n        }\n\n        if (avoidRealtimeUpdate()) {\n          return\n        }\n\n        // Convert to list_update format\n        const listUpdateData = {\n          doctype: 'Issue',\n          name: data.name,\n          action: eventName.includes('create') ? 'insert' : \n                  eventName.includes('delete') ? 'delete' : 'update',\n          modified_by: data.modified_by || data.owner,\n          timestamp: new Date().toISOString()\n        }\n\n        // Only process updates for existing issues, not newly created ones\n        if (listUpdateData.action === 'insert') {\n          console.log(' Skipping new issue creation update:', data.name)\n          return\n        }\n\n        pendingDocumentRefreshes.value.push(listUpdateData)\n        debouncedRefresh()\n      })\n    })\n\n    realtimeEventsSetup.value = true\n  }\n\n  const disableRealtimeUpdates = () => {\n    if (!socket || !realtimeEventsSetup.value) {\n      return\n    }\n    \n    // Unsubscribe from doctype updates\n    socket.emit('doctype_unsubscribe', 'Issue')\n    \n    // Remove all event listeners\n    socket.off('list_update')\n    const documentEvents = ['doctype_update', 'Issue_update', 'Issue_create', 'Issue_delete']\n    documentEvents.forEach(eventName => {\n      socket.off(eventName)\n    })\n    \n    realtimeEventsSetup.value = false\n  }\n\n  const processDocumentRefreshes = async () => {\n    console.log(' processDocumentRefreshes called with', pendingDocumentRefreshes.value.length, 'pending refreshes')\n    \n    if (!pendingDocumentRefreshes.value.length) {\n      console.log(' No pending refreshes, returning early')\n      return\n    }\n\n    // Check if we're still on the correct route/page\n    const currentRoute = window.location.hash || window.location.pathname\n    console.log(' Current route:', currentRoute)\n    \n    if (!currentRoute.includes('issue-tracker') && !currentRoute.includes('issues') && !currentRoute.includes('frontend')) {\n      console.log(' Not on correct route, clearing pending refreshes and disabling updates')\n      // Clear pending refreshes if user navigated away\n      pendingDocumentRefreshes.value = []\n      disableRealtimeUpdates()\n      return\n    }\n    \n    console.log(' Route check passed, proceeding with refresh')\n\n    // Get unique document names from pending refreshes\n    const uniqueDocuments = [...new Set(pendingDocumentRefreshes.value.map(d => d.name))]\n    const refreshCount = uniqueDocuments.length\n\n    console.log(` Processing ${refreshCount} document refreshes:`, uniqueDocuments)\n\n    // Clear pending refreshes\n    pendingDocumentRefreshes.value = []\n\n    try {\n      // Update with current view parameters to maintain user's context\n      await updateIndividualRows(uniqueDocuments)\n      \n      // Emit a custom event that the parent component can listen to for notifications\n      if (window && typeof window.dispatchEvent === 'function') {\n        window.dispatchEvent(new CustomEvent('issueListUpdated', {\n          detail: { count: refreshCount, documents: uniqueDocuments }\n        }))\n      }\n      \n      console.log(` Successfully processed ${refreshCount} document refreshes`)\n    } catch (error) {\n      console.error(' Error updating individual rows, falling back to full refresh:', error)\n      // Fallback to full refresh if individual update fails\n      try {\n        if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n          console.log(' Using custom refresh function for fallback')\n          await customRefreshFunction()\n        } else {\n          console.log(' Using default refresh functions for fallback')\n          await reloadIssues()\n          await getIssuesCount()\n        }\n        console.log(' Fallback refresh completed successfully')\n      } catch (fallbackError) {\n        console.error(' Error in fallback refresh:', fallbackError)\n        // Even if fallback fails, don't disable realtime - just log the error\n      }\n    }\n  }\n\n  const updateIndividualRows = async (documentNames) => {\n    try {\n      // Determine which resource is currently active and get its data\n      const { activeResource, currentData } = getCurrentActiveResource()\n      \n      if (!currentData || !Array.isArray(currentData)) {\n        console.log(' No current data available, falling back to custom refresh')\n        if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n          await customRefreshFunction()\n        }\n        return\n      }\n      \n      // Get the current pagination and filter parameters from the component\n      let currentParams = {\n        limit_page_length: 10,\n        limit_start: 0,\n        filters: {},\n        order_by: \"creation desc\"\n      }\n      \n      // If getCurrentParams function is provided, use it to get actual current parameters\n      if (getCurrentParams && typeof getCurrentParams === 'function') {\n        try {\n          const params = getCurrentParams()\n          if (params) {\n            currentParams = { ...currentParams, ...params }\n          }\n        } catch (paramError) {\n          console.warn('Error getting current parameters, using defaults:', paramError)\n        }\n      }\n\n      // Smart update: Only update if the changed issues are visible on current page\n      const visibleIssueNames = currentData.map(issue => issue.name)\n      const updatedVisibleIssues = documentNames.filter(name => visibleIssueNames.includes(name))\n      \n      if (updatedVisibleIssues.length === 0) {\n        console.log(' Updated issues not visible on current page, skipping grid update')\n        return\n      }\n\n      console.log(` Updating ${updatedVisibleIssues.length} visible issues:`, updatedVisibleIssues)\n      \n      // Fetch updated data for only the visible issues and merge with current data\n      await updateVisibleIssuesInPlace(updatedVisibleIssues, activeResource, currentData)\n      \n    } catch (error) {\n      console.error('Error during targeted refresh:', error)\n      // Fallback to custom refresh function if smart update fails\n      if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n        await customRefreshFunction()\n      }\n      throw error\n    }\n  }\n\n  const getCurrentActiveResource = () => {\n    // Use the parent component's resource state if provided\n    if (getCurrentResourceState && typeof getCurrentResourceState === 'function') {\n      try {\n        const resourceState = getCurrentResourceState()\n        if (resourceState) {\n          console.log(` Using ${resourceState.resourceType} resource for updates (from parent)`)\n          return resourceState\n        }\n      } catch (error) {\n        console.warn('Error getting resource state from parent, falling back to detection:', error)\n      }\n    }\n    \n    // Fallback: Try to detect which resource is currently active\n    // Priority: statFilterResource if it has data and issuesResource doesn't, or vice versa\n    const hasStatData = statFilterResource.data && Array.isArray(statFilterResource.data) && statFilterResource.data.length > 0\n    const hasIssuesData = issuesResource.data && Array.isArray(issuesResource.data) && issuesResource.data.length > 0\n    \n    // If only one has data, use that one\n    if (hasStatData && !hasIssuesData) {\n      console.log(' Using statFilterResource for updates (only stat has data)')\n      return {\n        activeResource: statFilterResource,\n        currentData: statFilterResource.data,\n        resourceType: 'stat'\n      }\n    }\n    \n    if (hasIssuesData && !hasStatData) {\n      console.log(' Using issuesResource for updates (only issues has data)')\n      return {\n        activeResource: issuesResource,\n        currentData: issuesResource.data,\n        resourceType: 'main'\n      }\n    }\n    \n    // If both have data or neither has data, prefer the one that was loaded more recently\n    const statLastLoaded = statFilterResource.lastLoaded || 0\n    const issuesLastLoaded = issuesResource.lastLoaded || 0\n    \n    if (hasStatData && statLastLoaded >= issuesLastLoaded) {\n      console.log(' Using statFilterResource for updates (more recent)')\n      return {\n        activeResource: statFilterResource,\n        currentData: statFilterResource.data,\n        resourceType: 'stat'\n      }\n    }\n    \n    // Default to main issues resource\n    console.log(' Using issuesResource for updates (default)')\n    return {\n      activeResource: issuesResource,\n      currentData: issuesResource.data || [],\n      resourceType: 'main'\n    }\n  }\n\n  const updateVisibleIssuesInPlace = async (visibleIssueNames, activeResource, currentData) => {\n    try {\n      // Fetch the updated issues individually\n      const updatedIssues = await Promise.all(\n        visibleIssueNames.map(async (issueName) => {\n          try {\n            await fetchSingleIssue(issueName)\n            return singleIssueResource.data\n          } catch (error) {\n            console.warn(`Failed to fetch updated issue ${issueName}:`, error)\n            return null\n          }\n        })\n      )\n\n      // Filter out any failed fetches\n      const validUpdatedIssues = updatedIssues.filter(issue => issue !== null)\n      \n      if (validUpdatedIssues.length === 0) {\n        console.warn('No valid updated issues fetched, falling back to custom refresh')\n        if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n          await customRefreshFunction()\n        }\n        return\n      }\n\n      // Update individual issues in place to trigger Vue reactivity efficiently\n      if (activeResource.data && Array.isArray(activeResource.data)) {\n        console.log(` Updating ${validUpdatedIssues.length} issues in ${activeResource.data.length} total issues`)\n        \n        validUpdatedIssues.forEach(updatedIssue => {\n          const index = activeResource.data.findIndex(issue => issue.name === updatedIssue.name)\n          if (index !== -1) {\n            console.log(` Updating issue at index ${index}: ${updatedIssue.name}`)\n            // Direct property update triggers Vue reactivity efficiently\n            Object.assign(activeResource.data[index], updatedIssue)\n          } else {\n            console.warn(` Issue ${updatedIssue.name} not found in current data for update`)\n          }\n        })\n      } else {\n        console.warn(' activeResource.data is not an array, using fallback method')\n        // Fallback to direct assignment if data structure is unexpected\n        const currentIssues = [...currentData]\n        validUpdatedIssues.forEach(updatedIssue => {\n          const index = currentIssues.findIndex(issue => issue.name === updatedIssue.name)\n          if (index !== -1) {\n            console.log(` Updating issue at index ${index}: ${updatedIssue.name} (fallback)`)\n            currentIssues[index] = updatedIssue\n          } else {\n            console.warn(` Issue ${updatedIssue.name} not found in current data for update (fallback)`)\n          }\n        })\n        activeResource.data = currentIssues\n      }\n      \n      console.log(` Successfully updated ${validUpdatedIssues.length} issues in current view`)\n      \n    } catch (error) {\n      console.error('Error updating visible issues in place:', error)\n      // Fallback to custom refresh function if available\n      if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n        await customRefreshFunction()\n      }\n    }\n  }\n\n\n\n  const avoidRealtimeUpdate = () => {\n    // Similar to Frappe's avoid_realtime_update() logic\n    \n    // Check if any bulk operations are in progress\n    // (you could check for selected items, bulk actions, etc.)\n    \n    // Check if filters are being edited\n    // (you could check if filter modals/inputs are active)\n    \n    // Check if the page is hidden/not focused\n    if (document.hidden) {\n      return true\n    }\n\n    // Add any other conditions where updates should be avoided\n    return false\n  }\n\n  // Track page visibility state for focus-based refresh\n  const wasPageHidden = ref(false)\n  \n  const handleVisibilityChange = () => {\n    if (document.hidden) {\n      // Page became hidden - remember this state\n      wasPageHidden.value = true\n    } else if (wasPageHidden.value) {\n      // Page became visible again after being hidden - refresh the table\n      wasPageHidden.value = false\n      console.log(' Page came back into focus - refreshing Issue table')\n      \n      // Process any pending updates that were skipped while page was hidden\n      if (pendingDocumentRefreshes.value.length > 0) {\n        console.log(` Processing ${pendingDocumentRefreshes.value.length} pending updates`)\n        processDocumentRefreshes()\n      } else {\n        // No pending updates, but still do a manual refresh to ensure data is current\n        manualRefresh()\n      }\n    }\n  }\n\n  // Manual refresh method (useful for pull-to-refresh or manual refresh buttons)\n  const manualRefresh = () => {\n    pendingDocumentRefreshes.value = [] // Clear any pending\n    try {\n      // Use custom refresh function if provided, otherwise use default\n      if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n        customRefreshFunction()\n      } else {\n        reloadIssues()\n        getIssuesCount()\n      }\n    } catch (error) {\n      console.error('Error during manual refresh:', error)\n    }\n  }\n\n  // Socket connection handlers\n  const handleConnect = () => {\n    setupRealtimeUpdates()\n  }\n\n  const handleDisconnect = () => {\n    realtimeEventsSetup.value = false\n  }\n\n  const handleConnectError = (error) => {\n    console.error('Socket connection error:', error)\n    realtimeEventsSetup.value = false\n  }\n\n  // Lifecycle management\n  onMounted(() => {\n    if (!socket) {\n      return\n    }\n\n    // Set up socket connection handlers\n    socket.on('connect', handleConnect)\n    socket.on('disconnect', handleDisconnect)\n    socket.on('connect_error', handleConnectError)\n\n    // Set up page visibility change listener for focus-based refresh\n    document.addEventListener('visibilitychange', handleVisibilityChange)\n\n    // If already connected, set up immediately\n    if (socket.connected) {\n      setupRealtimeUpdates()\n    }\n  })\n\n  onUnmounted(() => {\n    if (socket) {\n      socket.off('connect', handleConnect)\n      socket.off('disconnect', handleDisconnect)\n      socket.off('connect_error', handleConnectError)\n    }\n    \n    // Remove page visibility change listener\n    document.removeEventListener('visibilitychange', handleVisibilityChange)\n    \n    disableRealtimeUpdates()\n    \n    // Clear any pending debounce timer\n    if (debounceTimer) {\n      clearTimeout(debounceTimer)\n    }\n  })\n\n  return {\n    // State (return the refs, not their values)\n    pendingDocumentRefreshes,\n    realtimeEventsSetup,\n    \n    // Methods\n    setupRealtimeUpdates,\n    disableRealtimeUpdates,\n    manualRefresh,\n    processDocumentRefreshes\n  }\n}","<template>\r\n  <div class=\"min-h-screen bg-gray-50\">\r\n    <!-- Header -->\r\n    <div class=\"bg-white shadow-sm border-b\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"flex justify-between items-center py-4\">\r\n          <div class=\"flex items-center space-x-4\">\r\n            <h1 class=\"text-2xl font-bold text-gray-900\">Ticket Tracker</h1>\r\n            <nav class=\"flex space-x-4\">\r\n              <router-link to=\"/\"\r\n                class=\"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium\"\r\n                active-class=\"bg-blue-100 text-blue-700\"\r\n                inactive-class=\"text-gray-600 hover:text-gray-900\">\r\n                Tickets\r\n              </router-link>\r\n              <router-link to=\"/sent-emails\"\r\n                class=\"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\"\r\n                active-class=\"bg-blue-100 text-blue-700\"\r\n                inactive-class=\"text-gray-600 hover:text-gray-900\">\r\n                Sent Emails\r\n              </router-link>\r\n              <a href=\"/app/support\"\r\n                class=\"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\r\n                Desk\r\n              </a>\r\n              <a href=\"/intro\"\r\n                class=\"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\r\n                Wiki\r\n              </a>\r\n            </nav>\r\n          </div>\r\n          <div class=\"flex items-center space-x-4\">\r\n            <Button @click=\"showComposeEmailDialog = true\" variant=\"solid\" size=\"sm\">\r\n              <template #prefix>\r\n                <FeatherIcon name=\"mail\" class=\"w-4 h-4\" />\r\n              </template>\r\n              Compose Email\r\n            </Button>\r\n            <span class=\"text-sm text-gray-600\">{{ session.user }}</span>\r\n            <Button @click=\"session.logout.submit()\" variant=\"outline\" size=\"sm\">\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Main Content -->\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Statistics Cards -->\r\n      <IssueStats ref=\"issueStatsRef\" :issues=\"issues\" :activeFilter=\"currentStatFilter\" @filter-changed=\"handleStatFilterChanged\" />\r\n\r\n      <!-- Search and Filters -->\r\n      <IssueFilters v-model:searchQuery=\"searchQuery\" v-model:filters=\"filters\" :statusOptions=\"statusOptions\"\r\n        :priorityOptions=\"priorityOptions\" :assigneeOptions=\"assigneeOptions\" :tagsOptions=\"tagsOptions\"\r\n        :issues=\"allIssues\" :filteredCount=\"totalIssues\" @suggestion-selected=\"handleSuggestionSelected\" \r\n        @filters-applied=\"handleFiltersApplied\" />\r\n\r\n      <!-- Issues Table -->\r\n      <IssueTable :issues=\"issues\" :loading=\"isLoading\" :sortField=\"currentSortField\"\r\n        :sortDirection=\"currentSortDirection\" @sort=\"handleSort\" />\r\n\r\n      <!-- Pagination -->\r\n      <IssuePagination v-model:currentPage=\"currentPage\" v-model:itemsPerPage=\"itemsPerPage\" :totalItems=\"totalIssues\"\r\n        @pageChange=\"handlePageChange\" />\r\n\r\n      <!-- Compact Real-time Status Icons (Vertical) -->\r\n      <div class=\"fixed top-20 right-4 flex flex-col space-y-2\">\r\n        <!-- Connection Status -->\r\n        <div\r\n          class=\"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200\"\r\n          :title=\"realtimeEventsSetup ? 'Real-time updates active' : 'Real-time updates disabled'\">\r\n          <!-- Connection Icon with Status -->\r\n          <div class=\"relative\">\r\n            <FeatherIcon :name=\"realtimeEventsSetup ? 'wifi' : 'wifi-off'\" :class=\"[\r\n              'h-5 w-5 transition-colors duration-200',\r\n              realtimeEventsSetup ? 'text-green-600' : 'text-red-500'\r\n            ]\" />\r\n            <!-- Status Dot -->\r\n            <div :class=\"[\r\n              'absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white',\r\n              realtimeEventsSetup\r\n                ? 'bg-green-500 animate-pulse'\r\n                : 'bg-red-500'\r\n            ]\"></div>\r\n            <!-- Pending Updates Badge -->\r\n            <div v-if=\"pendingDocumentRefreshes.length > 0\"\r\n              class=\"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce\">\r\n              {{ pendingDocumentRefreshes.length > 9 ? '9+' : pendingDocumentRefreshes.length }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Manual Refresh Button -->\r\n        <button @click=\"manualRefresh\"\r\n          class=\"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95\"\r\n          title=\"Manual refresh\">\r\n          <FeatherIcon name=\"refresh-cw\"\r\n            class=\"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Real-time Notifications -->\r\n    <RealTimeNotifications :notifications=\"notifications\" @remove=\"removeNotification\" />\r\n\r\n    <!-- Compose Email Dialog -->\r\n    <ComposeEmailDialog\r\n      v-model:show=\"showComposeEmailDialog\"\r\n      @email-sent=\"handleEmailSent\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, onUnmounted, ref, watch, shallowRef, markRaw } from \"vue\"\r\nimport { Button, FeatherIcon, call } from \"frappe-ui\"\r\nimport IssueFilters from \"../components/IssueFilters.vue\"\r\nimport IssuePagination from \"../components/IssuePagination.vue\"\r\nimport IssueStats from \"../components/IssueStats.vue\"\r\nimport IssueTable from \"../components/IssueTable.vue\"\r\nimport RealTimeNotifications from \"../components/RealTimeNotifications.vue\"\r\nimport ComposeEmailDialog from \"../components/ComposeEmailDialog.vue\"\r\nimport { useIssueFilters } from \"../composables/useIssueFilters\"\r\nimport { useIssueListUpdates } from \"../composables/useIssueListUpdates\"\r\nimport {\r\n  getIssueTypeOptions,\r\n  getIssuesCount,\r\n  getPriorityOptions,\r\n  getStatusOptions,\r\n  issuesCountResource,\r\n  issuesResource,\r\n  reloadIssues,\r\n  filterIssuesByStat,\r\n  getStatFilterCount,\r\n  statFilterResource,\r\n  statFilterCountResource,\r\n} from \"../data/issues\"\r\nimport { session } from \"../data/session\"\r\n\r\n// Use the filtering composable\r\nconst {\r\n  searchQuery,\r\n  filters,\r\n  debouncedSearchQuery,\r\n  apiFilters,\r\n  sortOrder,\r\n  getAssigneeOptions,\r\n} = useIssueFilters()\r\n\r\n// Suggestion filtering has been removed - suggestions now open issues in new tabs\r\n\r\n// State to track if we're using stat-based filtering\r\nconst isUsingStatFilter = ref(false)\r\nconst currentStatFilter = ref('team_tickets') // Default to team tickets\r\n\r\n// Reference to IssueStats component\r\nconst issueStatsRef = ref(null)\r\n\r\n// Optimized refresh function using unified approach\r\nconst refreshCurrentView = () => {\r\n  console.log('Refreshing current view:', { \r\n    isUsingStatFilter: isUsingStatFilter.value, \r\n    currentStatFilter: currentStatFilter.value,\r\n    hasCustomFilters: complexFilters.value && complexFilters.value.length > 0\r\n  })\r\n\r\n  // Preserve current pagination when refreshing\r\n  const currentParams = {\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: (currentPage.value - 1) * itemsPerPage.value,\r\n    order_by: sortOrder.value,\r\n  }\r\n\r\n  if (isUsingStatFilter.value) {\r\n    // Refresh using stat filter mode with current pagination\r\n    if (complexFilters.value && complexFilters.value.length > 0) {\r\n      currentParams.filters = JSON.stringify(complexFilters.value)\r\n    }\r\n    \r\n    // Use Promise.all for better performance during refresh\r\n    Promise.all([\r\n      filterIssuesByStat(currentStatFilter.value, currentParams),\r\n      complexFilters.value && complexFilters.value.length > 0 \r\n        ? getStatFilterCount(currentStatFilter.value, JSON.stringify(complexFilters.value))\r\n        : getStatFilterCount(currentStatFilter.value)\r\n    ]).then(() => {\r\n      console.log('Stat filter view refreshed successfully')\r\n    }).catch((error) => {\r\n      console.error('Error refreshing stat filter view:', error)\r\n    })\r\n  } else {\r\n    // Refresh using regular filter mode\r\n    Promise.all([\r\n      reloadIssues({\r\n        filters: JSON.stringify(complexFilters.value),\r\n        ...currentParams,\r\n      }),\r\n      getIssuesCount(JSON.stringify(complexFilters.value))\r\n    ]).then(() => {\r\n      console.log('Regular filter view refreshed successfully')\r\n    }).catch((error) => {\r\n      console.error('Error refreshing regular filter view:', error)\r\n    })\r\n  }\r\n}\r\n\r\n// Realtime list updates composable (Frappe-style)\r\nconst {\r\n  pendingDocumentRefreshes,\r\n  realtimeEventsSetup,\r\n  manualRefresh: originalManualRefresh\r\n} = useIssueListUpdates(() => {\r\n  // Return current parameters for realtime updates\r\n  return {\r\n    filters: nonSearchFilters.value,\r\n    order_by: sortOrder.value,\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: (currentPage.value - 1) * itemsPerPage.value,\r\n  }\r\n}, refreshCurrentView, () => {\r\n  // Return current resource state to match what the component is using\r\n  if (isUsingStatFilter.value) {\r\n    return {\r\n      activeResource: statFilterResource,\r\n      currentData: statFilterResource.data || [],\r\n      resourceType: 'stat'\r\n    }\r\n  } else {\r\n    return {\r\n      activeResource: issuesResource,\r\n      currentData: issuesResource.data || [],\r\n      resourceType: 'main'\r\n    }\r\n  }\r\n})\r\n\r\n// Override manual refresh to use our custom refresh function\r\nconst manualRefresh = () => {\r\n  refreshCurrentView()\r\n}\r\n\r\n// Simplified notification system for list updates\r\nconst notifications = ref([])\r\n\r\n// Compose email dialog state\r\nconst showComposeEmailDialog = ref(false)\r\n\r\nconst addNotification = (notification) => {\r\n  notifications.value.push({\r\n    id: Date.now() + Math.random(),\r\n    ...notification\r\n  })\r\n\r\n  // Auto-remove after 5 seconds\r\n  setTimeout(() => {\r\n    removeNotification(notifications.value[notifications.value.length - 1]?.id)\r\n  }, 5000)\r\n}\r\n\r\nconst removeNotification = (id) => {\r\n  notifications.value = notifications.value.filter(n => n.id !== id)\r\n}\r\n\r\n// Handle email sent event\r\nconst handleEmailSent = (emailData) => {\r\n  // Map action types to notification titles\r\n  const titleMap = {\r\n    'sent': 'Email Sent',\r\n    'scheduled': 'Email Scheduled',\r\n    'draft_saved': 'Draft Saved',\r\n    'send_failed': 'Send Failed',\r\n    'draft_save_failed': 'Save Failed'\r\n  }\r\n\r\n  addNotification({\r\n    type: emailData.type || 'success',\r\n    title: titleMap[emailData.action] || 'Email Action',\r\n    message: emailData.message || `Email \"${emailData.subject}\" sent successfully to ${emailData.recipientCount} recipients`,\r\n    timestamp: new Date()\r\n  })\r\n\r\n  // Only close dialog on success\r\n  if (emailData.type !== 'error') {\r\n    showComposeEmailDialog.value = false\r\n  }\r\n}\r\n\r\n// Computed properties for displaying data\r\nconst allIssues = computed(() => {\r\n  if (isUsingStatFilter.value) {\r\n    return statFilterResource.data || []\r\n  }\r\n  return issuesResource.data || []\r\n})\r\n\r\nconst totalIssues = computed(() => {\r\n  if (isUsingStatFilter.value) {\r\n    return statFilterCountResource.data || 0\r\n  }\r\n  return issuesCountResource.data || 0\r\n})\r\n\r\nconst isLoading = computed(() => {\r\n  if (isUsingStatFilter.value) {\r\n    return statFilterResource.loading\r\n  }\r\n  return issuesResource.loading\r\n})\r\n\r\n// With server-side pagination, we use the data directly without client-side filtering\r\nconst issues = computed(() => allIssues.value)\r\n\r\n// Sort functionality\r\nconst currentSortField = computed(() => {\r\n  const order = sortOrder.value || \"creation desc\"\r\n  return order.split(\" \")[0]\r\n})\r\n\r\nconst currentSortDirection = computed(() => {\r\n  const order = sortOrder.value || \"creation desc\"\r\n  return order.split(\" \")[1] || \"desc\"\r\n})\r\n\r\nconst handleSort = ({ field, direction }) => {\r\n  // Update the sort order in filters\r\n  const newSortOrder = `${field} ${direction}`\r\n  filters.value.sortBy = newSortOrder\r\n  \r\n  // Reset to first page when sorting\r\n  currentPage.value = 1\r\n  \r\n  // Trigger the same API call that happens when clicking cards\r\n  refreshCurrentView()\r\n}\r\n\r\n// Handle suggestion selection from search - now just opens issue in new tab\r\nconst handleSuggestionSelected = (suggestion) => {\r\n  // Suggestions now open issues in new tabs - no filtering needed\r\n  // The CustomSearchBox component handles opening the issue in a new tab\r\n}\r\n\r\n// Handle complex filter objects from IssueFilters component\r\nconst complexFilters = ref([])\r\n\r\nconst handleFiltersApplied = (filterArray) => {\r\n  console.log('Filters applied:', filterArray)\r\n  \r\n  // Store the complex filters\r\n  complexFilters.value = filterArray\r\n  \r\n  // Reset to first page when applying new filters\r\n  currentPage.value = 1\r\n  \r\n  // Apply the current filtering logic based on the situation\r\n  if (filterArray && filterArray.length > 0) {\r\n    // User has applied custom filters\r\n    if (isUsingStatFilter.value) {\r\n      // User is on a stat card and applying additional filters\r\n      console.log('Applying custom filters on top of card filter:', currentStatFilter.value)\r\n      applyCardFilterWithCustomFilters(currentStatFilter.value)\r\n    } else {\r\n      // User is applying custom filters without any stat card\r\n      console.log('Applying custom filters in regular mode')\r\n      applyCustomFiltersOnly()\r\n    }\r\n  } else {\r\n    // No filters applied - return to default team tickets view\r\n    console.log('No filters applied, returning to default view')\r\n    returnToDefaultView()\r\n  }\r\n}\r\n\r\n// Function to apply custom filters without stat card\r\nconst applyCustomFiltersOnly = () => {\r\n  isUsingStatFilter.value = false\r\n  currentStatFilter.value = 'team_tickets'\r\n  \r\n  // Use Promise.all for better performance\r\n  Promise.all([\r\n    reloadIssues({\r\n      filters: JSON.stringify(complexFilters.value),\r\n      order_by: sortOrder.value,\r\n      limit_page_length: itemsPerPage.value,\r\n      limit_start: 0,\r\n    }),\r\n    getIssuesCount(JSON.stringify(complexFilters.value))\r\n  ]).then(() => {\r\n    console.log('Custom filters applied successfully')\r\n  }).catch((error) => {\r\n    console.error('Error applying custom filters:', error)\r\n  })\r\n}\r\n\r\n// Function to return to default view\r\nconst returnToDefaultView = () => {\r\n  isUsingStatFilter.value = true\r\n  currentStatFilter.value = 'team_tickets'\r\n  \r\n  // Use the unified function for consistency\r\n  applyCardFilterWithCustomFilters('team_tickets')\r\n}\r\n\r\n// Handle stat filter changes from IssueStats component\r\nconst handleStatFilterChanged = (statType) => {\r\n  console.log('Card clicked:', statType, 'Current filters:', complexFilters.value)\r\n  \r\n  // Set stat filter mode\r\n  isUsingStatFilter.value = true\r\n  currentStatFilter.value = statType\r\n  \r\n  // Clear search query\r\n  searchQuery.value = \"\"\r\n  \r\n  // Reset to first page\r\n  currentPage.value = 1\r\n  \r\n  // Always apply the card filter with any existing custom filters\r\n  applyCardFilterWithCustomFilters(statType)\r\n}\r\n\r\n// Unified function to apply card filter with custom filters\r\nconst applyCardFilterWithCustomFilters = (statType) => {\r\n  // Build parameters for stat filtering\r\n  const statParams = {\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n    order_by: sortOrder.value,\r\n  }\r\n  \r\n  // Always include custom filters if they exist\r\n  if (complexFilters.value && complexFilters.value.length > 0) {\r\n    statParams.filters = JSON.stringify(complexFilters.value)\r\n    console.log('Applying card filter with custom filters:', statType, complexFilters.value)\r\n  } else {\r\n    console.log('Applying card filter without custom filters:', statType)\r\n  }\r\n  \r\n  // Make both API calls simultaneously for better performance\r\n  Promise.all([\r\n    filterIssuesByStat(statType, statParams),\r\n    complexFilters.value && complexFilters.value.length > 0 \r\n      ? getStatFilterCount(statType, JSON.stringify(complexFilters.value))\r\n      : getStatFilterCount(statType)\r\n  ]).then(() => {\r\n    console.log('Card filter applied successfully')\r\n  }).catch((error) => {\r\n    console.error('Error applying card filter:', error)\r\n  })\r\n}\r\n\r\n// Function to clear stat filter and return to normal view\r\nconst clearStatFilter = () => {\r\n  isUsingStatFilter.value = false\r\n  currentStatFilter.value = 'team_tickets'\r\n  \r\n  // Reset to first page\r\n  currentPage.value = 1\r\n  \r\n  // Reload with normal filters\r\n  reloadIssues({\r\n    filters: nonSearchFilters.value,\r\n    order_by: sortOrder.value,\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n  })\r\n  \r\n  // Reload count\r\n  getIssuesCount(nonSearchFilters.value)\r\n}\r\n\r\n// Memoized filter options to prevent unnecessary re-computations\r\n// These are static or rarely changing, so we can use shallowRef for better performance\r\nconst priorityOptions = shallowRef(markRaw(getPriorityOptions()))\r\nconst tagsOptions = shallowRef(markRaw(getIssueTypeOptions()))\r\nconst statusOptions = shallowRef(markRaw(getStatusOptions()))\r\n\r\n// Memoized assignee options with caching based on issues length\r\nlet assigneeOptionsCache = null\r\nlet lastIssuesLength = 0\r\nconst assigneeOptions = computed(() => {\r\n  const currentLength = allIssues.value.length\r\n  \r\n  // Return cached options if issues length hasn't changed\r\n  if (assigneeOptionsCache && lastIssuesLength === currentLength) {\r\n    return assigneeOptionsCache\r\n  }\r\n  \r\n  // Recalculate and cache\r\n  assigneeOptionsCache = markRaw(getAssigneeOptions(allIssues.value))\r\n  lastIssuesLength = currentLength\r\n  \r\n  return assigneeOptionsCache\r\n})\r\n\r\n// Pagination state\r\nconst currentPage = ref(1)\r\nconst itemsPerPage = ref(10)\r\n\r\n// Optimized pagination handler using unified approach\r\nconst handlePageChange = ({ page, itemsPerPage: newItemsPerPage, offset }) => {\r\n  console.log('Page change:', { page, newItemsPerPage, offset })\r\n  \r\n  currentPage.value = page\r\n  itemsPerPage.value = newItemsPerPage\r\n\r\n  // Build pagination parameters\r\n  const paginationParams = {\r\n    limit_page_length: newItemsPerPage,\r\n    limit_start: offset,\r\n    order_by: sortOrder.value,\r\n  }\r\n\r\n  if (isUsingStatFilter.value) {\r\n    // Use stat-based filtering for pagination\r\n    if (complexFilters.value && complexFilters.value.length > 0) {\r\n      paginationParams.filters = JSON.stringify(complexFilters.value)\r\n    }\r\n    \r\n    // Only need to reload data, count doesn't change during pagination\r\n    filterIssuesByStat(currentStatFilter.value, paginationParams)\r\n      .then(() => {\r\n        console.log('Pagination completed successfully (stat filter)')\r\n      }).catch((error) => {\r\n        console.error('Error during pagination (stat filter):', error)\r\n      })\r\n  } else {\r\n    // Use regular filtering for pagination\r\n    reloadIssues({\r\n      filters: JSON.stringify(complexFilters.value),\r\n      ...paginationParams,\r\n    }).then(() => {\r\n      console.log('Pagination completed successfully (regular filter)')\r\n    }).catch((error) => {\r\n      console.error('Error during pagination (regular filter):', error)\r\n    })\r\n  }\r\n}\r\n\r\n// Create computed property for non-search filters only\r\nconst nonSearchFilters = computed(() => {\r\n  const filterObj = {}\r\n\r\n  // Add status filter\r\n  if (filters.value.status) {\r\n    filterObj[\"status\"] = filters.value.status\r\n  }\r\n\r\n  // Add priority filter\r\n  if (filters.value.priority) {\r\n    filterObj[\"priority\"] = filters.value.priority\r\n  }\r\n\r\n  // Add assignee filter\r\n  if (filters.value.assignee) {\r\n    filterObj[\"raised_by\"] = filters.value.assignee\r\n  }\r\n\r\n  // Add tags filter (issue_type)\r\n  if (filters.value.tags) {\r\n    filterObj[\"issue_type\"] = filters.value.tags\r\n  }\r\n\r\n  return filterObj\r\n})\r\n\r\n// Note: Filter changes are now handled by the IssueFilters component through handleFiltersApplied()\r\n// This provides better performance and more precise control over when filtering occurs\r\n// No more watchers or debouncing needed - filtering happens only on explicit user actions\r\n\r\n// Search query changes no longer trigger table updates since suggestions open in new tabs\r\n\r\nonMounted(() => {\r\n  console.log('IssueTracker mounted, initializing with default view')\r\n  isUsingStatFilter.value = true\r\n  currentStatFilter.value = 'team_tickets'\r\n  \r\n  // Load initial data using unified approach\r\n  applyCardFilterWithCustomFilters('team_tickets')\r\n\r\n  // Listen for list update events from the composable\r\n  window.addEventListener('issueListUpdated', async (event) => {\r\n    const { count, documents } = event.detail\r\n    \r\n    // Show notification\r\n    addNotification({\r\n      type: 'info',\r\n      title: 'List Updated',\r\n      message: `${count} issue${count > 1 ? 's' : ''} updated: ${documents.slice(0, 3).join(', ')}${documents.length > 3 ? '...' : ''}`,\r\n      timestamp: new Date()\r\n    })\r\n    \r\n    // Only refresh stat cards - let the composable handle individual row updates\r\n    console.log(' List updated event received - refreshing only stat cards')\r\n    \r\n    try {\r\n      // Refresh stat cards numbers using the exposed method\r\n      if (issueStatsRef.value && issueStatsRef.value.refreshStats) {\r\n        console.log(' Refreshing stat cards...')\r\n        await issueStatsRef.value.refreshStats()\r\n        console.log(' Stat cards refreshed successfully')\r\n      }\r\n      \r\n      console.log(' Stat cards refreshed after websocket update')\r\n      console.log('  Individual row updates are handled automatically by the composable')\r\n      \r\n    } catch (error) {\r\n      console.error(' Error refreshing stat cards after websocket update:', error)\r\n      // Show error notification\r\n      addNotification({\r\n        type: 'error',\r\n        title: 'Refresh Error',\r\n        message: 'Failed to refresh stat cards. Please refresh manually.',\r\n        timestamp: new Date()\r\n      })\r\n    }\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  // Clean up event listener\r\n  window.removeEventListener('issueListUpdated', () => { })\r\n})\r\n\r\n</script>"],"names":["r","e","n","b","f","i","l","o","u","a","t","g","p","Y","Z","ee","A","O","K","Me","T","I","R","s","d","W","v","m","B","S","M","x","z","q","_","h","C","$","H","P","D","Re","w","c","y","Q","_a","__objRest","he","U","F","J","k","V","E","ye","X","N","j","L","G","__spreadValues","imgFetchError","ref","props","__props","shapeClasses","computed","sizeClasses","labelClasses","indicatorContainerClasses","indicatorClasses","iconClasses","handleImageError","err","_createElementBlock","_normalizeClass","image","label","_cache","$slots","_renderSlot","_ctx","_Fragment","_createElementVNode","router","useRouter","normalizeDropdownItem","option","onClick","filterOptions","options","groups","currentGroup","groupOption","__spreadProps","dropdownTransition","popoverPlacement","_createBlock","_unref","Menu","_withCtx","open","_createVNode","Popover","MenuButton","_openBlock","_mergeProps","button","MenuItems","placement","_renderList","group","_hoisted_1","_toDisplayString","item","MenuItem","active","_resolveDynamicComponent","FeatherIcon","_hoisted_3","list","inject","_hoisted_2","Button","getGridTemplateColumns","columns","withCheckbox","checkBoxWidth","columnsWidth","col","width","alignmentMap","emit","__emit","resizer","columnRef","widthInPx","parsedWidth","startResizing","initialX","initialWidth","onMouseMove","newWidth","updateWidth","onMouseUp","useDebounceFn","$attrs","_normalizeProps","_normalizeStyle","Checkbox","_withModifiers","column","ListHeaderItem","$event","_b","getValue","tooltip","value","Tooltip","_guardReactiveProps","isLastRow","isSelected","isActive","isHoverable","rowHeight","roundedClass","selections","rows","currentIndex","atBottom","atTop","_c","onRowClick","row","ListRowItem","ListRow","_sfc_render","toggleGroup","DownSolid","ListGroupHeader","ListGroupRows","selectedText","_Transition","_hoisted_4","_hoisted_5","slots","useSlots","reactive","activeRow","watch","_options","defaultTrue","defaultFalse","val","allRowsSelected","showGroupedRows","acc","selectable","toggleRow","toggleAllRows","select","provide","__expose","ListHeader","ListGroups","ListRows","ListEmptyState","ListSelectBanner","issuesResource","createResource","params","safeParams","limit_page_length","limit_start","filters","order_by","error","issuesCountResource","reloadIssues","reloadParams","getIssuesCount","singleIssueResource","issueName","fetchSingleIssue","issuePriorityResource","issueTypeResource","priorityOptionsCache","priorityDataHash","issueTypeOptionsCache","issueTypeDataHash","getPriorityOptions","currentData","currentHash","getIssueTypeOptions","statusOptionsCache","getStatusOptions","tagColorsResource","tagColorCache","tagColorsDataHash","getTagColor","tagName","color","issueSearchResource","searchIssues","searchQuery","limit","statFilterResource","result","statFilterCountResource","filterIssuesByStat","statType","filterParams","getStatFilterCount","searchInput","isFocused","showSuggestions","selectedSuggestionIndex","isLoading","searchTime","suggestionsContainer","suggestionRefs","searchTimeout","newValue","searchSuggestions","fetchSearchSuggestions","query","__async","startTime","results","debouncedSearch","handleSearch","highlightMatch","text","escapedQuery","regex","getStatusBadgeClass","status","handleFocus","blurTimeout","handleBlur","handleKeydown","event","scrollToSelectedSuggestion","selectSuggestion","hideSuggestions","suggestion","issueUrl","clearSearch","container","selectedElement","containerRect","elementRect","elementTop","elementBottom","containerScrollTop","containerHeight","formatCreationDate","dateString","date","now","diffTime","diffDays","handleGlobalKeydown","onMounted","onUnmounted","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","index","el","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","_createTextVNode","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","showFilterPanel","pendingFilters","appliedFilters","filterIdCounter","isApplyingFilters","availableFields","fieldOptions","operatorsByType","hasPendingChanges","getFieldType","fieldValue","field","getFieldLabel","getFieldPlaceholder","getOperatorsForField","fieldType","getFieldOptions","getDisplayValue","filter","getSelectedValues","removeSelectedValue","values","getTags","removeTag","tags","getDisplayValueForUser","addUserToMultiSelect","currentValues","handleLinkKeyNavigation","direction","maxIndex","scrollSelectedLinkIntoView","handleLinkEnter","clearLinkSuggestions","nextTick","tagSearchTimeouts","handleTagSearch","searchValue","previousSelectedIndex","response","data","addTagFromSuggestion","tagSuggestion","currentTags","handleTagKeyNavigation","scrollSelectedTagIntoView","handleTagEnter","clearTagSuggestions","getTagStyle","tag","categoryColor","hexColor","hex","searchTimeouts","handleLinkSearch","searchResults","endpoint","getOperatorDropdownOptions","op","getOperatorLabel","operatorValue","getDisplayValueForOption","opt","updateDateRange","addFilter","defaultOperator","newFilter","removeFilter","removeAppliedFilter","emitFilters","applyFilters","clearAllFilters","filterData","handleSearchChange","handleSuggestionSelected","savedFilters","parsed","newFilters","CustomSearchBox","_hoisted_12","_hoisted_18","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","Dropdown","_hoisted_31","_hoisted_32","_vModelText","_hoisted_35","_hoisted_36","_hoisted_39","_hoisted_41","_hoisted_42","_hoisted_45","_hoisted_47","_hoisted_52","_hoisted_53","selectedValue","idx","_hoisted_48","_withKeys","_hoisted_50","_hoisted_51","_vModelSelect","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_59","_hoisted_61","_hoisted_62","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_69","_hoisted_71","_hoisted_72","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_79","_hoisted_81","localItemsPerPage","totalPages","startItem","endItem","end","visiblePages","pages","maxVisible","current","total","start","showFirstPage","showLastPage","showFirstEllipsis","showLastEllipsis","itemsPerPageOptions","goToPage","page","goToPreviousPage","goToNextPage","handleItemsPerPageChange","newItemsPerPage","currentFirstItem","newPage","Select","CACHE_DURATION","stats","shallowRef","teamTickets","openTickets","assignedToMe","actionableTickets","responseTickets","statsCache","lastFetchTime","fetchStats","call","refreshTimeout","debouncedStatsRefresh","handleStatClick","filterType","StatusBadge","Badge","PriorityBadge","priority","_sfc_main","ListView","Avatar","showPopup","popupUser","popupPosition","showTagsPopup","tagsPopupPosition","tagsPopupData","showIssueDetailsPopup","issueDetailsPopupPosition","issueDetailsPopupData","getInitials","name","emailPart","part","formatIssueId","issueId","match","stripHtml","html","tmp","formatDate","formatTime","getStatusBadgeColor","getPriorityBadgeColor","transformationCache","transformedIssues","issue","cacheKey","cached","transformed","listOptions","handleIssueClick","handleSelections","getIssueUrl","getStatusColor","statusValue","getPriorityColor","priorityValue","getPriorityBadgeClass","getPriorityIndicatorClass","showUserPopup","user","rect","hideUserPopup","showTagsPopupFn","hideTagsPopupFn","showIssueDetailsPopupFn","hideIssueDetailsPopup","handleColumnSort","newDirection","getSortIcon","getSortIconClass","getSortButtonClass","tagStyleCache","style","bgColor","textColor","_hoisted_33","$props","_component_ListView","$setup","_component_ListHeader","_component_ListHeaderItem","_component_FeatherIcon","_component_ListRows","_component_ListRow","_component_ListRowItem","_component_Avatar","args","_component_Tooltip","_component_ListSelectBanner","unselectAll","_component_Button","notificationClasses","type","baseClasses","typeClasses","getNotificationIcon","icons","getIconColor","colors","timestamp","diff","minutes","hours","_TransitionGroup","notification","$emit","Underline","Mark","HTMLAttributes","mergeAttributes","commands","inputRegex","Image","Node","nodeInputRule","alt","src","title","ImageResize","element","node","editor","getPos","view","editable","$positionContainer","$container","$img","iconStyle","dispatchNodeView","newAttrs","paintPositionContoller","$postionController","$leftController","$centerController","$rightController","justifyContent","key","dotsPosition","isResizing","startX","startWidth","startHeight","$dot","deltaX","aspectRatio","newHeight","$target","containerStyle","newStyle","Color","Extension","attributes","chain","FontFamily","fontFamily","pasteRegex","Highlight","markInputRule","markPasteRule","isDialogOpen","emailGroups","selectedGroups","groupMembersCache","filteredGroups","totalSelectedRecipients","loadEmailGroups","loadGroupMembers","groupName","emails","member","isGroupSelected","selected","selectGroups","closeDialog","isOpen","MAX_FILE_SIZE","isSubmitting","isSaving","showGroupSelector","sendLater","showGroupNamingDialog","newGroupName","groupNameInput","pendingGroupEmails","groupNamingMessage","groupNamingCallback","useEditor","StarterKit","ResizableImageExtension","TextAlign","TextStyle","Table","TableRow","TableHeader","TableCell","formData","imageInput","addImage","url","uploadImage","file","reader","showTextColorPicker","showHighlightColorPicker","highlightColor","applyTextColor","applyHighlight","insertTable","recipientInput","currentEmailInput","emailPills","expandedGroups","attachmentInput","attachments","validateEmail","email","getValidationError","trimmed","parts","getDuplicateSource","normalizedEmail","pill","groupEmail","addEmailPill","trimmedEmail","reason","duplicateSource","removeEmailPill","handleEmailInputKeydown","handleEmailPaste","handleEmailInputBlur","toggleGroupExpansion","removeGroup","expandedIndex","handleFileAttachment","existing","removeAttachment","formatFileSize","bytes","sizes","isImageFile","isPDFFile","totalAttachmentSize","generateTempGroupName","createEmailGroup","isTemporary","createdGroup","emailGroupMember","showGroupNamingPrompt","message","callback","cancelGroupNaming","skipGroupNaming","tempGroupName","confirmGroupNaming","validEmailCount","invalidEmailCount","duplicateEmailCount","totalRecipientCount","groupEmailCount","count","validPillCount","newType","oldType","newMessage","isPublished","resetForm","currentUser","session","userEmail","handleGroupsSelected","saveDraft","proceedWithSave","finalGroups","newsletterData","validEmails","hasSelectedGroups","hasManualEmails","emailsToGroup","sendEmail","proceedWithSend","savedNewsletter","members","messageField","onBeforeUnmount","_hoisted_34","$refs","EditorContent","_hoisted_37","_hoisted_38","_hoisted_40","_hoisted_43","_hoisted_44","_hoisted_46","_hoisted_49","_hoisted_54","_vModelCheckbox","_hoisted_58","_hoisted_60","_hoisted_63","GroupSelectorDialog","_hoisted_68","_hoisted_70","_hoisted_73","debounce","func","wait","timeout","later","useIssueFilters","debouncedSearchQuery","updateDebouncedSearch","newQuery","apiFilters","filterObj","sortOrder","filterCache","filterIssues","issues","filteredIssues","subject","description","priorityOrder","markRaw","aValue","bValue","comparison","firstKey","assigneeOptionsCache","lastAssigneeIssuesHash","getAssigneeOptions","assigneesHash","assignee","uniqueAssignees","resetFilters","hasActiveFilters","useIssueListUpdates","getCurrentParams","customRefreshFunction","getCurrentResourceState","socket","useSocket","pendingDocumentRefreshes","realtimeEventsSetup","isLargeTable","debounceTimer","debounceDelay","debouncedRefresh","processDocumentRefreshes","setupRealtimeUpdates","avoidRealtimeUpdate","eventName","listUpdateData","disableRealtimeUpdates","currentRoute","uniqueDocuments","refreshCount","updateIndividualRows","fallbackError","documentNames","activeResource","getCurrentActiveResource","currentParams","paramError","visibleIssueNames","updatedVisibleIssues","updateVisibleIssuesInPlace","resourceState","hasStatData","hasIssuesData","statLastLoaded","issuesLastLoaded","validUpdatedIssues","updatedIssue","currentIssues","wasPageHidden","handleVisibilityChange","manualRefresh","handleConnect","handleDisconnect","handleConnectError","isUsingStatFilter","currentStatFilter","issueStatsRef","refreshCurrentView","complexFilters","itemsPerPage","currentPage","originalManualRefresh","nonSearchFilters","notifications","showComposeEmailDialog","addNotification","removeNotification","id","handleEmailSent","emailData","titleMap","allIssues","totalIssues","currentSortField","currentSortDirection","handleSort","newSortOrder","handleFiltersApplied","filterArray","applyCardFilterWithCustomFilters","applyCustomFiltersOnly","returnToDefaultView","handleStatFilterChanged","statParams","priorityOptions","tagsOptions","statusOptions","lastIssuesLength","assigneeOptions","currentLength","handlePageChange","offset","paginationParams","documents","_component_router_link","IssueStats","IssueFilters","IssueTable","IssuePagination","RealTimeNotifications","ComposeEmailDialog"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,26,27,28,29,30,31]}