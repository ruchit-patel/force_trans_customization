var De=Object.defineProperty,ze=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var Pe=(s,e,t)=>e in s?De(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Y=(s,e)=>{for(var t in e||(e={}))Ee.call(e,t)&&Pe(s,t,e[t]);if(Ce)for(var t of Ce(e))Fe.call(e,t)&&Pe(s,t,e[t]);return s},$e=(s,e)=>ze(s,Be(e));var ge=(s,e,t)=>new Promise((o,u)=>{var r=m=>{try{v(t.next(m))}catch(C){u(C)}},h=m=>{try{v(t.throw(m))}catch(C){u(C)}},v=m=>m.done?o(m.value):Promise.resolve(m.value).then(r,h);v((t=t.apply(s,e)).next())});import{g as Ne,r as M,i as b,o as n,a as d,n as A,j as V,F as z,f as F,t as P,b as i,k as U,l as G,u as a,m as j,p as te,q as W,v as He,x as Z,y as se,h as ie,z as fe,A as Q,B as ee,C as ue,d as k,w as T,D as We,E as ve,T as Qe,G as Ke,H as qe,I as oe,J as Ge,K as Xe,L as ne,M as re,s as pe,c as le,N as ye,e as H,O as Ze,P as Je,Q as Ie,R as Se,S as Ye,U as Re}from"./index-Dyo0CWDg.js";const et=["src","alt"],tt=Ne({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(s){const e=M(!1),t=s,o=b(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),u=b(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),r=b(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),h=b(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),v=b(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),m=b(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function C(l){l.type&&(e.value=!0)}return(l,y)=>(n(),d("div",{class:A(["relative inline-block shrink-0",[u.value,o.value]])},[l.image&&!e.value?(n(),d("img",{key:0,src:l.image,alt:l.label,class:A([o.value,"h-full w-full object-cover"]),onError:y[0]||(y[0]=x=>C(x))},null,42,et)):(n(),d("div",{key:1,class:A(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[r.value,o.value]])},[l.$slots.default?(n(),d("div",{key:0,class:A(m.value)},[V(l.$slots,"default")],2)):(n(),d(z,{key:1},[F(P(l.label&&l.label[0]),1)],64))],2)),l.$slots.indicator?(n(),d("div",{key:2,class:A(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",h.value])},[i("div",{class:A(v.value)},[V(l.$slots,"indicator")],2)],2)):U("",!0)],2))}}),st={class:"flex h-full w-full flex-col items-center justify-center text-base"},ot={class:"text-xl font-medium"},rt={class:"mt-1 text-base text-ink-gray-5"},lt={__name:"ListEmptyState",setup(s){const e=G("list");return(t,o)=>(n(),d("div",st,[V(t.$slots,"default",{},()=>[i("div",ot,P(a(e).options.emptyState.title),1),i("div",rt,P(a(e).options.emptyState.description),1),a(e).options.emptyState.button?(n(),j(a(W),te({key:0},a(e).options.emptyState.button,{class:"mt-4"}),null,16)):U("",!0)])]))}};function Te(s,e=!0){let t=e?"14px ":"",o=s.map(u=>{let r=u.width||1;return typeof r=="number"?r+"fr":r}).join(" ");return t+o}const he={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},nt={class:"truncate"},Le={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=s,o=e,u=M(null),r=M(null),h=b(()=>{if(typeof t.item.width=="string"){const l=parseInt(t.item.width);if(t.item.width.includes("rem"))return l*16;if(t.item.width.includes("px"))return l}return r.value.offsetWidth}),v=l=>{const y=l.clientX,x=h.value,S=$=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),u.value.style.backgroundColor="rgb(199 199 199)";let c=x+($.clientX-y);t.item.width=`${c<50?50:c}px`,m(t.item.width)},g=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),u.value.style.backgroundColor="",window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",g)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",g)},m=He(l=>{t.item.width=l,o("columnWidthUpdated")},t.debounce),C=G("list");return(l,y)=>(n(),d("div",{ref_key:"columnRef",ref:r,class:A(["group relative flex items-center",s.item.align?a(he)[s.item.align]:"justify-between"])},[i("div",{class:A(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",l.$attrs.class])},[V(l.$slots,"prefix",Z(se({item:s.item}))),V(l.$slots,"default",{},()=>[i("div",nt,P(s.item.label),1)]),V(l.$slots,"suffix",Z(se({item:s.item})))],2),a(C).options.resizeColumn?V(l.$slots,"resizer",Z(te({key:0},{item:s.item})),()=>[i("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:v},[i("div",{ref_key:"resizer",ref:u,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):U("",!0)],2))}},Ae={__name:"ListHeader",emits:["columnWidthUpdated"],setup(s,{emit:e}){const t=e,o=G("list");return(u,r)=>(n(),d("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:ee({gridTemplateColumns:a(Te)(a(o).columns,a(o).options.selectable)})},[a(o).options.selectable?(n(),j(fe,{key:0,class:"cursor-pointer duration-300",modelValue:a(o).allRowsSelected,onClick:ie(a(o).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):U("",!0),V(u.$slots,"default",{},()=>[(n(!0),d(z,null,Q(a(o).columns,h=>(n(),j(Le,{key:h.key,item:h,onColumnWidthUpdated:v=>t("columnWidthUpdated",h)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},at={class:"truncate text-base"},Oe={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(s){const e=s,t=b(()=>{var h,v;return(h=e.column)!=null&&h.getLabel?(v=e.column)==null?void 0:v.getLabel({row:e.row}):u(e.item).label||""}),o=b(()=>r.value.options.showTooltip?e.column.getTooltip?e.column.getTooltip(e.row):u(e.item).label:"");function u(h){return h&&typeof h=="object"?h:{label:h}}const r=G("list");return(h,v)=>(n(),d("div",{class:A(["flex items-center space-x-2",a(he)[s.align]])},[V(h.$slots,"prefix",{},()=>[s.column.prefix?(n(),j(ue(typeof s.column.prefix=="function"?s.column.prefix({row:s.row}):s.column.prefix),{key:0})):U("",!0)]),k(a(We),Z(se(a(r).options.showTooltip?{text:o.value}:{text:""})),{default:T(()=>[V(h.$slots,"default",Z(se({label:t.value})),()=>[i("div",at,P(t.value),1)])]),_:3},16),V(h.$slots,"suffix")],2))}},we={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(s){const e=s,t=G("list"),o=b(()=>{var l;return(l=t.value.rows)!=null&&l.length?t.value.rows[t.value.rows.length-1][t.value.rowKey]===e.row[t.value.rowKey]:!1}),u=b(()=>t.value.selections.has(e.row[t.value.rowKey])),r=b(()=>t.value.options.enableActive&&t.value.activeRow.value===e.row.name),h=b(()=>t.value.options.getRowRoute||t.value.options.onRowClick),v=b(()=>typeof t.value.options.rowHeight=="number"?`${t.value.options.rowHeight}px`:t.value.options.rowHeight),m=b(()=>{var x,S,g;if(!u.value)return"rounded";const l=[...t.value.selections];let y=(x=t.value.rows[0])!=null&&x.group?t.value.rows.map($=>$.rows):[t.value.rows];for(let $ of y){let c=$.findIndex(_=>_==e.row);if(c===-1)continue;let R=!l.includes((S=$[c+1])==null?void 0:S.name),p=!l.includes((g=$[c-1])==null?void 0:g.name);return(R?"rounded-b ":"")+(p?"rounded-t":"")}}),C=(l,y)=>{t.value.options.onRowClick&&t.value.options.onRowClick(l,y),t.value.activeRow.value===l.name?t.value.activeRow.value=null:t.value.activeRow.value=l.name};return(l,y)=>(n(),j(ue(a(t).options.getRowRoute?"router-link":"div"),te({class:[[m.value,u.value||r.value?"bg-surface-gray-2":"",h.value?"cursor-pointer":"",h.value?u.value||r.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:a(t).options.getRowRoute?a(t).options.getRowRoute(s.row):void 0,onClick:x=>C(s.row,x)}),{default:T(()=>[(n(),j(ue(a(t).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:T(()=>{var x,S;return[i("div",{class:"grid items-center space-x-4 px-2",style:ee({height:v.value,gridTemplateColumns:a(Te)(a(t).columns,a(t).options.selectable)})},[a(t).options.selectable?(n(),d("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:y[1]||(y[1]=ie(()=>{},["stop","prevent"])),onDblclick:y[2]||(y[2]=ie(()=>{},["stop"]))},[k(fe,{modelValue:u.value,class:"cursor-pointer duration-300",onClick:y[0]||(y[0]=ie(g=>a(t).toggleRow(s.row[a(t).rowKey]),["stop"]))},null,8,["modelValue"])],32)):U("",!0),(n(!0),d(z,null,Q(a(t).columns,(g,$)=>(n(),d("div",{key:g.key,class:A([a(he)[g.align],$==0?"text-ink-gray-9":"text-ink-gray-7"])},[V(l.$slots,"default",te({ref_for:!0},{idx:$,column:g,item:s.row[g.key],isActive:r.value}),()=>[a(t).slots.cell?(n(),j(ue(a(t).slots.cell),te({key:0,ref_for:!0},{column:g,row:s.row,item:s.row[g.key],align:g.align}),null,16)):(n(),j(Oe,{key:1,column:g,row:s.row,item:s.row[g.key],align:g.align},null,8,["column","row","item","align"]))])],2))),128))],4),o.value?U("",!0):(n(),d("div",{key:0,class:A(["h-px border-t",m.value==="rounded"||(S=(x=m.value)==null?void 0:x.includes)!=null&&S.call(x,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},it={class:"h-full overflow-y-auto"},Ue={__name:"ListRows",setup(s){const e=G("list");return(t,o)=>(n(),d("div",it,[V(t.$slots,"default",{},()=>[(n(!0),d(z,null,Q(a(e).rows,u=>(n(),j(we,{key:u[a(e).rowKey],row:u},null,8,["row"]))),128))])]))}},ut={},ct={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function dt(s,e){return n(),d("svg",ct,e[0]||(e[0]=[i("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const mt=ve(ut,[["render",dt]]),gt={class:"flex items-center"},pt={class:"w-full py-1.5 pr-2"},ft={key:1,class:"text-base font-medium leading-6"},vt={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(s){const e=s,t=G("list");function o(){e.group.collapsed==null&&(e.group.collapsed=!1),e.group.collapsed=!e.group.collapsed}return(u,r)=>(n(),d(z,null,[i("div",gt,[i("button",{onClick:o,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[k(mt,{class:A(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[s.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),V(u.$slots,"default",{},()=>[i("div",pt,[a(t).slots["group-header"]?(n(),j(ue(a(t).slots["group-header"]),Z(te({key:0},{group:s.group})),null,16)):(n(),d("span",ft,P(s.group.group),1))])])]),r[0]||(r[0]=i("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},yt={key:0,class:"mb-5 mt-2"},ht={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(s){const e=G("list");return(t,o)=>s.group.collapsed?U("",!0):(n(),d("div",yt,[V(t.$slots,"default",{},()=>[(n(!0),d(z,null,Q(s.group.rows,u=>(n(),j(we,{key:u[a(e).rowKey],row:u},null,8,["row"]))),128))])]))}},wt={class:"h-full overflow-y-auto"},bt={__name:"ListGroups",setup(s){const e=G("list");return(t,o)=>(n(),d("div",wt,[(n(!0),d(z,null,Q(a(e).rows,u=>(n(),d("div",{key:u.group},[V(t.$slots,"default",{},()=>[k(vt,{group:u},{default:T(()=>[t.$slots["group-header"]?V(t.$slots,"group-header",te({key:0,ref_for:!0},{group:u})):U("",!0)]),_:2},1032,["group"]),k(ht,{group:u},null,8,["group"])])]))),128))]))}},xt={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},_t={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},kt={class:"flex items-center space-x-3"},Ct={class:"mr-3"},Pt={class:"flex items-center space-x-1"},je=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(s){const e=G("list");let t=b(()=>e.value.options.selectionText(e.value.selections.size));return(o,u)=>(n(),j(Qe,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:T(()=>[a(e).selections.size?(n(),d("div",xt,[i("div",{class:A(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",o.$attrs.class])},[V(o.$slots,"default",Z(se({selections:a(e).selections,allRowsSelected:a(e).allRowsSelected,selectAll:()=>a(e).toggleAllRows(!0),unselectAll:()=>a(e).toggleAllRows(!1)})),()=>[i("div",_t,[i("div",kt,[k(fe,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),i("div",null,P(a(t)),1)]),i("div",Ct,[V(o.$slots,"actions",Z(se({selections:a(e).selections,allRowsSelected:a(e).allRowsSelected,selectAll:()=>a(e).toggleAllRows(!0),unselectAll:()=>a(e).toggleAllRows(!1)})))])]),i("div",Pt,[k(a(W),{class:A(["w- text-ink-gray-7",a(e).allRowsSelected?"cursor-not-allowed":""]),disabled:a(e).allRowsSelected,variant:"ghost",onClick:u[0]||(u[0]=r=>a(e).toggleAllRows(!0))},{default:T(()=>u[2]||(u[2]=[F(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),k(a(W),{icon:"x",variant:"ghost",onClick:u[1]||(u[1]=r=>a(e).toggleAllRows(!1))})])])],2)])):U("",!0)]),_:3}))}}),$t={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},Rt=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(s,{expose:e,emit:t}){const o=s,u=Ke();let r=qe(new Set),h=M(null);const v=t;oe(r,g=>{r.size&&(h.value=null),v("update:selections",g)}),oe(h,g=>{v("update:active-row",g)});let m=b(()=>{function g(c){return c===void 0?!0:c}function $(c){return c===void 0?!1:c}return{getRowRoute:o.options.getRowRoute||null,onRowClick:o.options.onRowClick||null,showTooltip:g(o.options.showTooltip),selectionText:o.options.selectionText||(c=>c===1?"1 row selected":`${c} rows selected`),enableActive:$(o.options.enableActive),selectable:g(o.options.selectable),resizeColumn:$(o.options.resizeColumn),rowHeight:o.options.rowHeight||40,emptyState:o.options.emptyState}});const C=b(()=>o.rows.length?y.value?r.size===o.rows.reduce((g,$)=>g+$.rows.length,0):r.size===o.rows.length:!1),l=b(()=>m.value.selectable);let y=b(()=>o.rows.every(g=>g.group&&g.rows&&Array.isArray(g.rows)));function x(g){r.delete(g)||r.add(g)}function S(g){if(!g||C.value){r.clear();return}if(y.value){o.rows.forEach($=>{$.rows.forEach(c=>r.add(c[o.rowKey]))});return}o.rows.forEach($=>r.add($[o.rowKey]))}return Ge("list",b(()=>({rowKey:o.rowKey,rows:o.rows,columns:o.columns,options:m.value,selections:r,activeRow:h,allRowsSelected:C.value,slots:u,toggleRow:x,toggleAllRows:S}))),e({selections:r,allRowsSelected:C,toggleRow:x,toggleAllRows:S}),(g,$)=>(n(),d("div",$t,[i("div",{class:A(["flex w-max min-w-full flex-col overflow-y-hidden",g.$attrs.class]),style:ee(g.$attrs.style)},[V(g.$slots,"default",Z(se({showGroupedRows:a(y),selectable:l.value})),()=>[k(Ae),o.rows.length?(n(),d(z,{key:0},[a(y)?(n(),j(bt,{key:0})):(n(),j(Ue,{key:1}))],64)):(n(),j(lt,{key:1})),l.value?(n(),j(je,{key:2})):U("",!0)])],6)]))}}),It={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},St={class:"flex flex-col sm:flex-row gap-4"},Tt={class:"flex-1"},Lt={class:"flex gap-2 flex-wrap"},At={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({status:"",priority:"",assignee:"",tags:"",sortBy:"creation"})},statusOptions:{type:Array,default:()=>[]},priorityOptions:{type:Array,default:()=>[]},assigneeOptions:{type:Array,default:()=>[]},tagsOptions:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters"],setup(s,{emit:e}){const t=s,o=e,u=M(t.searchQuery),r=M(Y({},t.filters)),h=b(()=>[{label:"Created Date (Newest)",value:"creation desc"},{label:"Created Date (Oldest)",value:"creation asc"},{label:"Modified Date (Newest)",value:"modified desc"},{label:"Modified Date (Oldest)",value:"modified asc"},{label:"Subject (A-Z)",value:"subject asc"},{label:"Subject (Z-A)",value:"subject desc"},{label:"Priority",value:"priority asc"},{label:"Status",value:"status asc"}]);oe(()=>t.searchQuery,C=>{u.value=C}),oe(()=>t.filters,C=>{r.value=Y({},C)},{deep:!0});const v=()=>{o("update:searchQuery",u.value)},m=()=>{o("update:filters",Y({},r.value))};return(C,l)=>(n(),d("div",It,[i("div",St,[i("div",Tt,[k(a(Xe),{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=y=>u.value=y),placeholder:"Search",class:"w-full",onInput:v},null,8,["modelValue"])]),i("div",Lt,[k(a(ne),{modelValue:r.value.status,"onUpdate:modelValue":l[1]||(l[1]=y=>r.value.status=y),options:s.statusOptions,placeholder:"All Status",onChange:m},null,8,["modelValue","options"]),k(a(ne),{modelValue:r.value.priority,"onUpdate:modelValue":l[2]||(l[2]=y=>r.value.priority=y),options:s.priorityOptions,placeholder:"All Priority",onChange:m},null,8,["modelValue","options"]),k(a(ne),{modelValue:r.value.assignee,"onUpdate:modelValue":l[3]||(l[3]=y=>r.value.assignee=y),options:s.assigneeOptions,placeholder:"All Assignees",onChange:m},null,8,["modelValue","options"]),k(a(ne),{modelValue:r.value.tags,"onUpdate:modelValue":l[4]||(l[4]=y=>r.value.tags=y),options:s.tagsOptions,placeholder:"All Tags",onChange:m},null,8,["modelValue","options"]),k(a(ne),{modelValue:r.value.sortBy,"onUpdate:modelValue":l[5]||(l[5]=y=>r.value.sortBy=y),options:h.value,placeholder:"Sort By",onChange:m},null,8,["modelValue","options"]),k(a(W),{theme:"blue",variant:"solid",size:"sm"},{default:T(()=>l[6]||(l[6]=[F(" New Issue ")])),_:1,__:[6]})])])]))}},Ot={class:"bg-white rounded-lg shadow-sm border mt-4"},Ut={class:"px-6 py-4 flex items-center justify-between"},jt={class:"text-sm text-gray-700"},Mt={key:0},Vt={key:1},Dt={key:0,class:"flex items-center space-x-2"},zt={class:"flex items-center space-x-1"},Bt={key:1,class:"px-2 text-gray-500"},Et={key:2,class:"px-2 text-gray-500"},Ft={key:1,class:"flex items-center space-x-2"},Nt={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(s,{emit:e}){const t=s,o=e,u=M(t.itemsPerPage);oe(()=>t.itemsPerPage,p=>{u.value=p});const r=b(()=>Math.ceil(t.totalItems/t.itemsPerPage)),h=b(()=>t.totalItems===0?0:(t.currentPage-1)*t.itemsPerPage+1),v=b(()=>{const p=t.currentPage*t.itemsPerPage;return Math.min(p,t.totalItems)}),m=b(()=>{const p=[],_=t.maxVisiblePages,L=t.currentPage,O=r.value;if(O<=_)for(let D=1;D<=O;D++)p.push(D);else{let D=Math.max(1,L-Math.floor(_/2)),X=Math.min(O,D+_-1);X-D+1<_&&(D=Math.max(1,X-_+1)),D>1&&(D=Math.max(2,D)),X<O&&(X=Math.min(O-1,X));for(let K=D;K<=X;K++)p.push(K)}return p}),C=b(()=>r.value>t.maxVisiblePages&&!m.value.includes(1)),l=b(()=>r.value>t.maxVisiblePages&&!m.value.includes(r.value)),y=b(()=>C.value&&m.value.length>0&&m.value[0]>2),x=b(()=>l.value&&m.value.length>0&&m.value[m.value.length-1]<r.value-1),S=b(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),g=p=>{p>=1&&p<=r.value&&p!==t.currentPage&&(o("update:currentPage",p),o("pageChange",{page:p,itemsPerPage:t.itemsPerPage,offset:(p-1)*t.itemsPerPage}))},$=()=>{t.currentPage>1&&g(t.currentPage-1)},c=()=>{t.currentPage<r.value&&g(t.currentPage+1)},R=()=>{const p=u.value;o("update:itemsPerPage",p);const _=(t.currentPage-1)*t.itemsPerPage+1,L=Math.ceil(_/p);o("pageChange",{page:L,itemsPerPage:p,offset:(L-1)*p})};return(p,_)=>(n(),d("div",Ot,[i("div",Ut,[i("div",jt,[s.totalItems>0?(n(),d("span",Mt," Showing "+P(h.value)+" to "+P(v.value)+" of "+P(s.totalItems)+" results ",1)):(n(),d("span",Vt," No results found "))]),r.value>1?(n(),d("div",Dt,[k(a(W),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===1,onClick:$},{prefix:T(()=>[k(a(re),{name:"chevron-left",class:"h-4 w-4"})]),default:T(()=>[_[3]||(_[3]=F(" Previous "))]),_:1,__:[3]},8,["disabled"]),i("div",zt,[C.value?(n(),j(a(W),{key:0,theme:"gray",variant:"outline",size:"sm",class:A({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===1}),onClick:_[0]||(_[0]=L=>g(1))},{default:T(()=>_[4]||(_[4]=[F(" 1 ")])),_:1,__:[4]},8,["class"])):U("",!0),y.value?(n(),d("span",Bt,"...")):U("",!0),(n(!0),d(z,null,Q(m.value,L=>(n(),j(a(W),{key:L,theme:"gray",variant:"outline",size:"sm",class:A({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===L}),onClick:O=>g(L)},{default:T(()=>[F(P(L),1)]),_:2},1032,["class","onClick"]))),128)),x.value?(n(),d("span",Et,"...")):U("",!0),l.value?(n(),j(a(W),{key:3,theme:"gray",variant:"outline",size:"sm",class:A({"bg-blue-50 text-blue-600 border-blue-200":s.currentPage===r.value}),onClick:_[1]||(_[1]=L=>g(r.value))},{default:T(()=>[F(P(r.value),1)]),_:1},8,["class"])):U("",!0)]),k(a(W),{theme:"gray",variant:"outline",size:"sm",disabled:s.currentPage===r.value,onClick:c},{suffix:T(()=>[k(a(re),{name:"chevron-right",class:"h-4 w-4"})]),default:T(()=>[_[5]||(_[5]=F(" Next "))]),_:1,__:[5]},8,["disabled"])])):U("",!0),s.showItemsPerPage?(n(),d("div",Ft,[_[6]||(_[6]=i("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),k(a(ne),{modelValue:u.value,"onUpdate:modelValue":_[2]||(_[2]=L=>u.value=L),options:S.value,onChange:R,class:"w-20"},null,8,["modelValue","options"])])):U("",!0)])]))}},Ht={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Wt={class:"bg-white p-6 rounded-lg shadow-sm border"},Qt={class:"text-3xl font-bold text-gray-900"},Kt={class:"bg-white p-6 rounded-lg shadow-sm border"},qt={class:"text-3xl font-bold text-blue-600"},Gt={class:"bg-white p-6 rounded-lg shadow-sm border"},Xt={class:"text-3xl font-bold text-green-600"},Zt={class:"bg-white p-6 rounded-lg shadow-sm border"},Jt={class:"text-3xl font-bold text-orange-600"},Yt={class:"bg-white p-6 rounded-lg shadow-sm border"},es={class:"text-3xl font-bold text-purple-600"},ts={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]}},setup(s){const e=s,t=b(()=>e.issues.length),o=b(()=>e.issues.filter(v=>v.status==="Open").length),u=b(()=>e.issues.filter(v=>v.raised_by===pe.user).length),r=b(()=>e.issues.filter(v=>["Open","Replied"].includes(v.status)).length),h=b(()=>e.issues.filter(v=>v.status==="Replied").length);return(v,m)=>(n(),d("div",Ht,[i("div",Wt,[i("div",Qt,P(t.value),1),m[0]||(m[0]=i("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))]),i("div",Kt,[i("div",qt,P(o.value),1),m[1]||(m[1]=i("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))]),i("div",Gt,[i("div",Xt,P(u.value),1),m[2]||(m[2]=i("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))]),i("div",Zt,[i("div",Jt,P(r.value),1),m[3]||(m[3]=i("div",{class:"text-sm text-gray-600 mt-1"},"Actionable",-1))]),i("div",Yt,[i("div",es,P(h.value),1),m[4]||(m[4]=i("div",{class:"text-sm text-gray-600 mt-1"},"Response",-1))])]))}},ae=le({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(s){const e=s||{},t=e.limit_page_length||10,o=e.limit_start||0,u=e.filters||{},r=e.order_by||"creation desc";return{limit_page_length:t,limit_start:o,filters:u,order_by:r}},onError(s){console.error("Failed to fetch issues:",s),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),Me=le({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(s){return{filters:(s||{}).filters||{}}},onError(s){console.error("Failed to fetch issues count:",s)}});function ce(s={}){const e={limit_page_length:s.limit_page_length||10,limit_start:s.limit_start||0,filters:s.filters||{},order_by:s.order_by||"creation desc"};return ae.reload(e)}function de(s={}){return Me.reload({filters:s})}le({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(s){return{issue_name:s}},onError(s){console.error("Failed to fetch single issue:",s)},auto:!1});const ss=le({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(s){console.error("Failed to fetch issue priorities:",s)},auto:!0}),os=le({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(s){console.error("Failed to fetch issue types:",s)},auto:!0});le({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(s){console.error("Failed to fetch projects:",s)},auto:!0});function rs(){const s=ss.data||[];return[{label:"All Priority",value:""},...s.map(e=>({label:e.name,value:e.name}))]}function ls(){const s=os.data||[];return[{label:"All Types",value:""},...s.map(e=>({label:e.name,value:e.name}))]}function ns(){return[{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]}const as=le({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(s){console.error("Failed to fetch tag colors:",s)},auto:!0});function is(s){return(as.data||{})[s]||null}const us={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const s=this.status||"New";return{New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[s]||"gray"}},components:{Badge:ye}},cs={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const s=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[s]||"yellow"},priorityIndicatorClass(){const s=this.priority||"Medium";return{"bg-red-500":s==="Critical","bg-red-400":s==="High","bg-yellow-400":s==="Medium","bg-green-400":s==="Low"}}},components:{Badge:ye}},ds={components:{ListView:Rt,Avatar:tt,Badge:ye,Button:W,FeatherIcon:re,ListHeader:Ae,ListHeaderItem:Le,ListRow:we,ListRowItem:Oe,ListRows:Ue,ListSelectBanner:je,StatusBadge:us,PriorityBadge:cs},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(s,{emit:e}){const t=M(!1),o=M(null),u=M({x:0,y:0}),r=M(!1),h=M({x:0,y:0}),v=M(null),m=f=>{if(!f||typeof f!="string")return"?";if(f.includes("@")){const w=f.split("@")[0];return w.includes(".")||w.includes("_")?w.split(/[._]/).map(me=>me[0]).join("").toUpperCase().slice(0,2):w.slice(0,2).toUpperCase()}return f.includes(" ")?f.split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2):f.slice(0,2).toUpperCase()},C=f=>{if(!f)return"";const w=f.match(/ISS-(\d{4}-\d+)/);return w?w[1]:f},l=f=>{if(!f)return"";const w=document.createElement("div");return w.innerHTML=f,w.textContent||w.innerText||""},y=f=>f?new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",x=f=>f?new Date(f).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",S=f=>({New:"blue","In Review":"orange","Waiting on Customer":"yellow",Confirmed:"purple","In Transit":"blue","In Transit Unmanaged":"gray",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[f]||"gray",g=f=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[f]||"yellow",$=b(()=>s.issues.map(f=>$e(Y({},f),{status:{label:f.status||"New",color:S(f.status)},priority:{label:f.priority||"Medium",color:g(f.priority)}}))),c=b(()=>[{label:"Issue ID",key:"name",width:"110px",sortable:!0},{label:"Title",key:"subject",width:4,sortable:!0},{label:"Status",key:"status",width:"160px",sortable:!0},{label:"Assignee",key:"raised_by",width:"150px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"180px",sortable:!1},{label:"Tags",key:"_user_tags",width:"120px",sortable:!1},{label:"Created At",key:"creation",width:"120px",sortable:!0}]),R=b(()=>({showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No issues found",description:"Try adjusting your search or filter criteria"},onRowClick:f=>{console.log("Row clicked:",f)}}));return{columns:c,listOptions:R,transformedIssues:$,handleSelections:f=>{console.log("Selected rows:",f)},handleIssueClick:f=>{console.log("Issue clicked:",f)},getStatusColor:f=>{const w=f||"New";return{"bg-blue-500":w==="New","bg-orange-500":w==="In Review","bg-yellow-500":w==="Waiting on Customer","bg-purple-500":w==="Confirmed","bg-blue-500":w==="In Transit","bg-gray-500":w==="In Transit Unmanaged","bg-green-500":w==="Delivered","bg-green-500":w==="Closed","bg-red-500":w==="Open","bg-orange-500":w==="Replied","bg-yellow-500":w==="On Hold","bg-green-500":w==="Resolved"}},getPriorityColor:f=>{const w=f||"Medium";return{"bg-red-500":w==="Critical"||w==="High","bg-yellow-500":w==="Medium","bg-green-500":w==="Low"}},getStatusBadgeClass:f=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800","Waiting on Customer":"bg-yellow-100 text-yellow-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800","In Transit Unmanaged":"bg-gray-100 text-gray-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[f||"New"]||"bg-gray-100 text-gray-800",getPriorityBadgeClass:f=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[f||"Medium"]||"bg-yellow-100 text-yellow-800",getPriorityIndicatorClass:f=>{const w=f||"Medium";return{"bg-red-500":w==="Critical","bg-red-400":w==="High","bg-yellow-400":w==="Medium","bg-green-400":w==="Low"}},getInitials:m,formatIssueId:C,stripHtml:l,formatDate:y,formatTime:x,showPopup:t,popupUser:o,popupPosition:u,showUserPopup:(f,w)=>{const B=f.target.getBoundingClientRect();u.value={x:B.left+B.width/2,y:B.top-10},o.value=w,t.value=!0},hideUserPopup:()=>{t.value=!1,o.value=null},handleColumnSort:f=>{let w="asc";s.sortField===f&&(w=s.sortDirection==="asc"?"desc":"asc"),e("sort",{field:f,direction:w})},getSortIcon:f=>s.sortField!==f?"arrow-up-down":s.sortDirection==="asc"?"arrow-up":"arrow-down",getSortIconClass:f=>s.sortField!==f?"text-gray-400":"text-blue-600",getSortButtonClass:f=>s.sortField===f?"bg-blue-50":"",getTagStyle:f=>{const w=is(f);if(w){const B=w.replace("#",""),me=parseInt(B.substr(0,2),16),xe=parseInt(B.substr(2,2),16),_e=parseInt(B.substr(4,2),16),Ve=`rgba(${me}, ${xe}, ${_e}, 0.1)`,ke=`rgb(${Math.max(me-50,0)}, ${Math.max(xe-50,0)}, ${Math.max(_e-50,0)})`;return{backgroundColor:Ve,color:ke,borderColor:ke}}return{backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"}},showTagsPopup:r,tagsPopupPosition:h,tagsPopupData:v,showTagsPopupFn:(f,w)=>{if(!w||w.length===0)return;const B=f.target.getBoundingClientRect();h.value={x:B.left+B.width/2,y:B.top-10},v.value=w,r.value=!0},hideTagsPopupFn:()=>{r.value=!1,v.value=null}}}},ms={class:"bg-white rounded-lg shadow-sm border"},gs={key:0,class:"px-6 py-12 text-center text-gray-500"},ps=["onClick"],fs=["onClick"],vs={key:1,class:"max-w-xs"},ys=["title"],hs=["title"],ws=["title"],bs={key:3,class:"flex flex-wrap gap-1"},xs=["onMouseenter"],_s={key:1,class:"text-gray-400 text-sm"},ks=["onMouseenter"],Cs=["title"],Ps={class:"truncate"},$s={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},Rs={key:1,class:"text-gray-400 text-sm"},Is={key:5,class:"flex flex-col"},Ss={class:"text-xs text-gray-400"},Ts={key:7},Ls={class:"flex gap-2"},As={class:"text-sm"},Os={class:"font-semibold text-gray-900 mb-1"},Us={class:"text-gray-600 flex items-center gap-1"},js={class:"text-xs text-gray-500 mt-1"},Ms={class:"text-sm"},Vs={class:"flex flex-wrap gap-1"};function Ds(s,e,t,o,u,r){const h=H("FeatherIcon"),v=H("ListHeaderItem"),m=H("ListHeader"),C=H("Avatar"),l=H("ListRowItem"),y=H("ListRow"),x=H("ListRows"),S=H("Button"),g=H("ListSelectBanner"),$=H("ListView");return n(),d("div",ms,[e[5]||(e[5]=i("div",{class:"px-6 py-4 border-b border-gray-200"},[i("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),t.loading?(n(),d("div",gs,e[2]||(e[2]=[i("div",{class:"flex items-center justify-center"},[i("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),i("span",{class:"ml-2"},"Loading issues...")],-1)]))):(n(),j($,{key:1,columns:o.columns,rows:o.transformedIssues,"row-key":"name",options:o.listOptions,"onUpdate:selections":o.handleSelections},{default:T(()=>[k(m,null,{default:T(()=>[(n(!0),d(z,null,Q(o.columns,c=>(n(),j(v,{key:c.key,item:c},Ze({_:2},[c.icon?{name:"prefix",fn:T(({item:R})=>[k(h,{name:R.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,c.sortable?{name:"suffix",fn:T(()=>[i("button",{onClick:R=>o.handleColumnSort(c.key),class:A(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",o.getSortButtonClass(c.key)])},[k(h,{name:o.getSortIcon(c.key),class:A(["h-3 w-3",o.getSortIconClass(c.key)])},null,8,["name","class"])],10,ps)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),k(x,null,{default:T(()=>[(n(!0),d(z,null,Q(o.transformedIssues,c=>(n(),j(y,{key:c.name,row:c},{default:T(({column:R,item:p})=>[k(l,{item:p,align:R.align},{prefix:T(()=>[R.key==="raised_by"?(n(),j(C,{key:0,size:"sm",label:o.getInitials(c.raised_by),class:"mr-3"},null,8,["label"])):U("",!0)]),default:T(()=>{var _,L;return[R.key==="name"?(n(),d("a",{key:0,href:"#",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:ie(O=>o.handleIssueClick(c),["prevent"])},P(o.formatIssueId(p)),9,fs)):R.key==="subject"?(n(),d("div",vs,[i("div",{class:"font-medium truncate",title:c.subject},P(c.subject),9,ys),c.description?(n(),d("div",{key:0,class:"text-gray-500 text-xs mt-1 truncate",title:c.description},P(o.stripHtml(c.description)),9,hs)):U("",!0)])):R.key==="raised_by"?(n(),d("span",{key:2,class:"text-sm font-medium text-gray-900 truncate block",title:p||"-"},P(p||"-"),9,ws)):R.key==="custom_users_assigned"?(n(),d("div",bs,[c.custom_users_assigned&&c.custom_users_assigned.length>0?(n(!0),d(z,{key:0},Q(c.custom_users_assigned.filter(O=>O.user_assigned),O=>(n(),d("div",{key:O.name||O,class:"relative inline-block"},[i("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:D=>o.showUserPopup(D,O),onMouseleave:e[0]||(e[0]=(...D)=>o.hideUserPopup&&o.hideUserPopup(...D))},P(o.getInitials(O.user_assigned)),41,xs)]))),128)):(n(),d("span",_s,"-"))])):R.key==="_user_tags"?(n(),d("div",{key:4,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:O=>o.showTagsPopupFn(O,c._user_tags),onMouseleave:e[1]||(e[1]=(...O)=>o.hideTagsPopupFn&&o.hideTagsPopupFn(...O))},[c._user_tags&&c._user_tags.length>0?(n(),d(z,{key:0},[i("span",{style:ee(o.getTagStyle(c._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:c._user_tags[0]},[i("span",Ps,P(c._user_tags[0]),1)],12,Cs),c._user_tags.length>1?(n(),d("span",$s," +"+P(c._user_tags.length-1),1)):U("",!0)],64)):(n(),d("span",Rs,"-"))],40,ks)):R.key==="creation"?(n(),d("div",Is,[i("span",null,P(o.formatDate(p)),1),i("span",Ss,P(o.formatTime(p)),1)])):R.key==="status"?(n(),d("span",{key:6,class:A([o.getStatusBadgeClass(((_=c.status)==null?void 0:_.label)||c.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},P(((L=c.status)==null?void 0:L.label)||c.status||"New"),3)):(n(),d("span",Ts,P(p),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row"]))),128))]),_:1}),k(g,null,{actions:T(({unselectAll:c})=>[i("div",Ls,[k(S,{variant:"ghost",label:"Delete"}),k(S,{variant:"ghost",label:"Unselect all",onClick:c},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),o.showPopup&&o.popupUser?(n(),d("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:ee({left:o.popupPosition.x+"px",top:o.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[i("div",As,[i("div",Os,P(o.popupUser.user_assigned||"Unknown User"),1),i("div",Us,[e[3]||(e[3]=i("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),F(" "+P(o.popupUser.team||"No Team"),1)]),i("div",js," Assigned: "+P(o.formatDate(o.popupUser.assigned_date)),1)])],4)):U("",!0),o.showTagsPopup&&o.tagsPopupData?(n(),d("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:ee({left:o.tagsPopupPosition.x+"px",top:o.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[i("div",Ms,[e[4]||(e[4]=i("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),i("div",Vs,[(n(!0),d(z,null,Q(o.tagsPopupData,c=>(n(),d("span",{key:c,style:ee(o.getTagStyle(c)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},P(c),5))),128))])])],4)):U("",!0)])}const zs=ve(ds,[["render",Ds]]),Bs={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},Es={class:"flex items-start justify-between"},Fs={class:"flex items-start space-x-3"},Ns={class:"flex-shrink-0"},Hs={class:"flex-1 min-w-0"},Ws={class:"text-sm font-medium text-gray-900"},Qs={class:"text-sm text-gray-600 mt-1"},Ks={class:"text-xs text-gray-500 mt-1"},qs=["onClick"],Gs={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(s){const e=r=>{const h="bg-white/95 border-l-4",v={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${h} ${v[r]||v.info}`},t=r=>{const h={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return h[r]||h.info},o=r=>{const h={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return h[r]||h.info},u=r=>{const v=new Date-r,m=Math.floor(v/6e4);if(m<1)return"Just now";if(m<60)return`${m}m ago`;const C=Math.floor(m/60);return C<24?`${C}h ago`:r.toLocaleDateString()};return(r,h)=>(n(),d("div",Bs,[k(Je,{name:"notification",tag:"div"},{default:T(()=>[(n(!0),d(z,null,Q(s.notifications,v=>(n(),d("div",{key:v.id,class:A([e(v.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[i("div",Es,[i("div",Fs,[i("div",Ns,[k(a(re),{name:t(v.type),class:A([o(v.type),"h-5 w-5"])},null,8,["name","class"])]),i("div",Hs,[i("p",Ws,P(v.title),1),i("p",Qs,P(v.message),1),i("p",Ks,P(u(v.timestamp)),1)])]),i("button",{onClick:m=>r.$emit("remove",v.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[k(a(re),{name:"x",class:"h-4 w-4"})],8,qs)])],2))),128))]),_:1})]))}},Xs=ve(Gs,[["__scopeId","data-v-d57fd7d2"]]);function Zs(s,e){let t;return function(...u){const r=()=>{clearTimeout(t),s(...u)};clearTimeout(t),t=setTimeout(r,e)}}function Js(){const s=M(""),e=M({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),t=M(""),o=Zs(l=>{t.value=l},300);oe(s,l=>{o(l)});const u=b(()=>{const l={};return t.value.trim()&&(l.subject=["like",`%${t.value.trim()}%`]),e.value.status&&(l.status=e.value.status),e.value.priority&&(l.priority=e.value.priority),e.value.assignee&&(l.raised_by=e.value.assignee),e.value.tags&&(l.issue_type=e.value.tags),l}),r=b(()=>e.value.sortBy||"creation desc"),h=l=>{if(!l||!Array.isArray(l))return[];let y=[...l];if(s.value.trim()){const x=s.value.toLowerCase().trim();y=y.filter(S=>{const g=(S.subject||"").toLowerCase(),$=(S.description||"").toLowerCase();return g.includes(x)||$.includes(x)})}return e.value.status&&(y=y.filter(x=>x.status===e.value.status)),e.value.priority&&(y=y.filter(x=>x.priority===e.value.priority)),e.value.assignee&&(y=y.filter(x=>x.raised_by===e.value.assignee)),e.value.tags&&(y=y.filter(x=>x.issue_type===e.value.tags)),y.sort((x,S)=>{const[g,$]=e.value.sortBy.split(" "),c=x[g]||"",R=S[g]||"";let p=0;if(g==="creation"||g==="modified")p=new Date(c)-new Date(R);else if(g==="priority"){const _={Critical:4,High:3,Medium:2,Low:1};p=(_[c]||0)-(_[R]||0)}else p=c.toString().localeCompare(R.toString());return $==="desc"?-p:p}),y},v=l=>{if(!l||!Array.isArray(l))return[{label:"All Assignees",value:""}];const y=[...new Set(l.map(x=>x.raised_by).filter(x=>x&&x.trim()))];return[{label:"All Assignees",value:""},...y.map(x=>({label:x,value:x}))]},m=()=>{s.value="",t.value="",e.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},C=b(()=>s.value.trim()!==""||e.value.status!==""||e.value.priority!==""||e.value.assignee!==""||e.value.tags!==""||e.value.sortBy!=="creation desc");return{searchQuery:s,filters:e,debouncedSearchQuery:t,apiFilters:u,sortOrder:r,hasActiveFilters:C,filterIssues:h,getAssigneeOptions:v,resetFilters:m}}function Ys(s){const e=Ye(),t=M([]),o=M(!1),u=M(!1);let r=null;const h=u.value?15e3:2e3,v=()=>{r&&clearTimeout(r),r=setTimeout(()=>{l()},h)},m=()=>{if(!e||o.value)return;e.emit("doctype_subscribe","Issue"),e.off("list_update"),e.on("list_update",p=>{(p==null?void 0:p.doctype)==="Issue"&&(x()||(t.value.push(p),v()))}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(p=>{e.on(p,_=>{if((_==null?void 0:_.doctype)!=="Issue"||x())return;const L={doctype:"Issue",name:_.name,action:p.includes("create")?"insert":p.includes("delete")?"delete":"update",modified_by:_.modified_by||_.owner,timestamp:new Date().toISOString()};t.value.push(L),v()})}),o.value=!0},C=()=>{if(!e||!o.value)return;e.emit("doctype_unsubscribe","Issue"),e.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(p=>{e.off(p)}),o.value=!1},l=()=>ge(this,null,function*(){if(!t.value.length)return;const R=window.location.hash||window.location.pathname;if(!R.includes("issue-tracker")&&!R.includes("issues")){t.value=[],C();return}const p=[...new Set(t.value.map(L=>L.name))],_=p.length;t.value=[];try{yield y(p),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:_,documents:p}}))}catch(L){console.error("Error updating individual rows, falling back to full refresh:",L);try{yield ce(),yield de()}catch(O){console.error("Error in fallback refresh:",O)}}}),y=R=>ge(this,null,function*(){if(!ae.data||!Array.isArray(ae.data))throw new Error("No issues data available");try{let p={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(s&&typeof s=="function")try{const _=s();_&&(p=Y(Y({},p),_))}catch(_){console.warn("Error getting current parameters, using defaults:",_)}yield ae.reload(p)}catch(p){throw console.error("Error during targeted refresh:",p),p}}),x=()=>!!document.hidden,S=()=>{t.value=[];try{ce(),de()}catch(R){console.error("Error during manual refresh:",R)}},g=()=>{m()},$=()=>{o.value=!1},c=R=>{console.error("Socket connection error:",R),o.value=!1};return Ie(()=>{e&&(e.on("connect",g),e.on("disconnect",$),e.on("connect_error",c),e.connected&&m())}),Se(()=>{e&&(e.off("connect",g),e.off("disconnect",$),e.off("connect_error",c)),C(),r&&clearTimeout(r)}),{pendingDocumentRefreshes:t,realtimeEventsSetup:o,setupRealtimeUpdates:m,disableRealtimeUpdates:C,manualRefresh:S,processDocumentRefreshes:l}}const eo={class:"min-h-screen bg-gray-50"},to={class:"bg-white shadow-sm border-b"},so={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},oo={class:"flex justify-between items-center py-4"},ro={class:"flex items-center space-x-4"},lo={class:"flex space-x-4"},no={class:"flex items-center space-x-4"},ao={class:"text-sm text-gray-600"},io={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},uo={class:"fixed top-20 right-4 flex flex-col space-y-2"},co=["title"],mo={class:"relative"},go={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},wo={__name:"IssueTracker",setup(s){const{searchQuery:e,filters:t,debouncedSearchQuery:o,apiFilters:u,sortOrder:r,getAssigneeOptions:h}=Js(),{pendingDocumentRefreshes:v,realtimeEventsSetup:m,manualRefresh:C}=Ys(()=>({filters:u.value,order_by:r.value,limit_page_length:J.value,limit_start:(K.value-1)*J.value})),l=M([]),y=E=>{l.value.push(Y({id:Date.now()+Math.random()},E)),setTimeout(()=>{var I;x((I=l.value[l.value.length-1])==null?void 0:I.id)},5e3)},x=E=>{l.value=l.value.filter(I=>I.id!==E)},S=b(()=>ae.data||[]),g=b(()=>Me.data||0),$=b(()=>ae.loading),c=b(()=>S.value),R=b(()=>(r.value||"creation desc").split(" ")[0]),p=b(()=>(r.value||"creation desc").split(" ")[1]||"desc"),_=({field:E,direction:I})=>{const q=`${E} ${I}`;t.value.sortBy=q},L=b(()=>rs()),O=b(()=>ls()),D=b(()=>ns()),X=b(()=>h(S.value)),K=M(1),J=M(10),be=({page:E,itemsPerPage:I,offset:q})=>{K.value=E,J.value=I,ce({filters:u.value,order_by:r.value,limit_page_length:I,limit_start:q}),de(u.value)};return oe([o,u,r],()=>{K.value=1,ce({filters:u.value,order_by:r.value,limit_page_length:J.value,limit_start:0}),de(u.value)},{deep:!0}),Ie(()=>{ce({filters:u.value,order_by:r.value,limit_page_length:J.value,limit_start:0}),de(u.value),window.addEventListener("issueListUpdated",E=>{const{count:I,documents:q}=E.detail;y({type:"info",title:"List Updated",message:`${I} issue${I>1?"s":""} updated: ${q.slice(0,3).join(", ")}${q.length>3?"...":""}`,timestamp:new Date})})}),Se(()=>{window.removeEventListener("issueListUpdated",()=>{})}),(E,I)=>{const q=H("router-link");return n(),d("div",eo,[i("div",to,[i("div",so,[i("div",oo,[i("div",ro,[I[8]||(I[8]=i("h1",{class:"text-2xl font-bold text-gray-900"},"Issue Tracker",-1)),i("nav",lo,[k(q,{to:"/",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"},{default:T(()=>I[6]||(I[6]=[F(" Home ")])),_:1,__:[6]}),k(q,{to:"/issue-tracker",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium"},{default:T(()=>I[7]||(I[7]=[F(" Issues ")])),_:1,__:[7]})])]),i("div",no,[i("span",ao,P(a(pe).user),1),k(a(W),{onClick:I[0]||(I[0]=N=>a(pe).logout.submit()),theme:"gray",variant:"outline",size:"sm"},{default:T(()=>I[9]||(I[9]=[F(" Logout ")])),_:1,__:[9]})])])])]),i("div",io,[k(ts,{issues:c.value},null,8,["issues"]),k(At,{searchQuery:a(e),"onUpdate:searchQuery":I[1]||(I[1]=N=>Re(e)?e.value=N:null),filters:a(t),"onUpdate:filters":I[2]||(I[2]=N=>Re(t)?t.value=N:null),statusOptions:D.value,priorityOptions:L.value,assigneeOptions:X.value,tagsOptions:O.value},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions"]),k(zs,{issues:c.value,loading:$.value,sortField:R.value,sortDirection:p.value,onSort:_},null,8,["issues","loading","sortField","sortDirection"]),k(Nt,{currentPage:K.value,"onUpdate:currentPage":I[3]||(I[3]=N=>K.value=N),itemsPerPage:J.value,"onUpdate:itemsPerPage":I[4]||(I[4]=N=>J.value=N),totalItems:g.value,onPageChange:be},null,8,["currentPage","itemsPerPage","totalItems"]),i("div",uo,[i("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:a(m)?"Real-time updates active":"Real-time updates disabled"},[i("div",mo,[k(a(re),{name:a(m)?"wifi":"wifi-off",class:A(["h-5 w-5 transition-colors duration-200",a(m)?"text-green-600":"text-red-500"])},null,8,["name","class"]),i("div",{class:A(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",a(m)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),a(v)>0?(n(),d("div",go,P(a(v)>9?"9+":a(v)),1)):U("",!0)])],8,co),i("button",{onClick:I[5]||(I[5]=(...N)=>a(C)&&a(C)(...N)),class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[k(a(re),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),k(Xs,{notifications:l.value,onRemove:x},null,8,["notifications"])])}}};export{wo as default};
//# sourceMappingURL=IssueTracker-yce6RAhd.js.map
