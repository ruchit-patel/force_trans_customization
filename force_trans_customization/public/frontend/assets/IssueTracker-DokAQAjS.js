var Ht=Object.defineProperty,Kt=Object.defineProperties;var qt=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var mt=(e,t,s)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ie=(e,t)=>{for(var s in t||(t={}))vt.call(t,s)&&mt(e,s,t[s]);if(Qe)for(var s of Qe(t))ft.call(t,s)&&mt(e,s,t[s]);return e},nt=(e,t)=>Kt(e,qt(t));var Ge=(e,t)=>{var s={};for(var a in e)vt.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&Qe)for(var a of Qe(e))t.indexOf(a)<0&&ft.call(e,a)&&(s[a]=e[a]);return s};var pe=(e,t,s)=>new Promise((a,r)=>{var c=m=>{try{y(s.next(m))}catch(b){r(b)}},p=m=>{try{y(s.throw(m))}catch(b){r(b)}},y=m=>m.done?a(m.value):Promise.resolve(m.value).then(c,p);y((s=s.apply(e,t)).next())});import{r as O,o as Be,w as Tt,a as ne,d as He,y as Jt,c as F,b as Wt,h as Qt,p as Pt,e as Gt,u as Xt,l as tt,H as ot,t as ut,f as Yt,g as Zt,N as ht,i as at,j as es,k as Se,x as ts,m as we,n as de,q as Ve,v as ss,s as bt,_ as Rt,O as os,z as n,A as d,B as z,C as le,F as Y,D as oe,E as T,G as o,I as E,J as as,K as Q,L as J,M as U,P as x,Q as Te,R as Le,S as xe,T as se,U as je,V as Fe,W as ls,X as ns,Y as Ue,Z as me,$ as ct,a0 as $e,a1 as Dt,a2 as Ke,a3 as rs,a4 as is,a5 as us,a6 as Pe,a7 as Re,a8 as be,a9 as Ce,aa as yt,ab as cs,ac as Me,ad as ds,ae as ze,af as dt,ag as ye,ah as gs,ai as ps,aj as Ae,ak as ms,al as xt,am as wt}from"./index-CsQVcF8n.js";import{c as vs,_ as fs}from"./ComposeEmailDialog-Dajqmh4R.js";function _t(e,t){if(e)return e;let s=t!=null?t:"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function hs(e,t){let s=O(_t(e.value.type,e.value.as));return Be(()=>{s.value=_t(e.value.type,e.value.as)}),Tt(()=>{var a;s.value||ne(t)&&ne(t)instanceof HTMLButtonElement&&!((a=ne(t))!=null&&a.hasAttribute("type"))&&(s.value="button")}),s}let kt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Ct(e){var t,s;let a=(t=e.innerText)!=null?t:"",r=e.cloneNode(!0);if(!(r instanceof HTMLElement))return a;let c=!1;for(let y of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))y.remove(),c=!0;let p=c?(s=r.innerText)!=null?s:"":a;return kt.test(p)&&(p=p.replace(kt,"")),p}function bs(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let s=e.getAttribute("aria-labelledby");if(s){let a=s.split(" ").map(r=>{let c=document.getElementById(r);if(c){let p=c.getAttribute("aria-label");return typeof p=="string"?p.trim():Ct(c).trim()}return null}).filter(Boolean);if(a.length>0)return a.join(", ")}return Ct(e).trim()}function ys(e){let t=O(""),s=O("");return()=>{let a=ne(e);if(!a)return"";let r=a.innerText;if(t.value===r)return s.value;let c=bs(a).trim().toLowerCase();return t.value=r,s.value=c,c}}var xs=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(xs||{}),ws=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ws||{});function _s(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Mt=Symbol("MenuContext");function lt(e){let t=Se(Mt,null);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,lt),s}return t}let ks=He({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:s}){let a=O(1),r=O(null),c=O(null),p=O([]),y=O(""),m=O(null),b=O(1);function g(C=_=>_){let _=m.value!==null?p.value[m.value]:null,v=os(C(p.value.slice()),R=>ne(R.dataRef.domRef)),f=_?v.indexOf(_):null;return f===-1&&(f=null),{items:v,activeItemIndex:f}}let I={menuState:a,buttonRef:r,itemsRef:c,items:p,searchQuery:y,activeItemIndex:m,activationTrigger:b,closeMenu:()=>{a.value=1,m.value=null},openMenu:()=>a.value=0,goToItem(C,_,v){let f=g(),R=ts(C===we.Specific?{focus:we.Specific,id:_}:{focus:C},{resolveItems:()=>f.items,resolveActiveIndex:()=>f.activeItemIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.disabled});y.value="",m.value=R,b.value=v!=null?v:1,p.value=f.items},search(C){let _=y.value!==""?0:1;y.value+=C.toLowerCase();let v=(m.value!==null?p.value.slice(m.value+_).concat(p.value.slice(0,m.value+_)):p.value).find(R=>R.dataRef.textValue.startsWith(y.value)&&!R.dataRef.disabled),f=v?p.value.indexOf(v):-1;f===-1||f===m.value||(m.value=f,b.value=1)},clearSearch(){y.value=""},registerItem(C,_){let v=g(f=>[...f,{id:C,dataRef:_}]);p.value=v.items,m.value=v.activeItemIndex,b.value=1},unregisterItem(C){let _=g(v=>{let f=v.findIndex(R=>R.id===C);return f!==-1&&v.splice(f,1),v});p.value=_.items,m.value=_.activeItemIndex,b.value=1}};return Jt([r,c],(C,_)=>{var v;I.closeMenu(),Wt(_,Qt.Loose)||(C.preventDefault(),(v=ne(r))==null||v.focus())},F(()=>a.value===0)),Pt(Mt,I),Gt(F(()=>Xt(a.value,{0:tt.Open,1:tt.Closed}))),()=>{let C={open:a.value===0,close:I.closeMenu};return ot({ourProps:{},theirProps:e,slot:C,slots:t,attrs:s,name:"Menu"})}}}),Cs=He({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${ut()}`}},setup(e,{attrs:t,slots:s,expose:a}){let r=lt("MenuButton");a({el:r.buttonRef,$el:r.buttonRef});function c(b){switch(b.key){case de.Space:case de.Enter:case de.ArrowDown:b.preventDefault(),b.stopPropagation(),r.openMenu(),Ve(()=>{var g;(g=ne(r.itemsRef))==null||g.focus({preventScroll:!0}),r.goToItem(we.First)});break;case de.ArrowUp:b.preventDefault(),b.stopPropagation(),r.openMenu(),Ve(()=>{var g;(g=ne(r.itemsRef))==null||g.focus({preventScroll:!0}),r.goToItem(we.Last)});break}}function p(b){switch(b.key){case de.Space:b.preventDefault();break}}function y(b){e.disabled||(r.menuState.value===0?(r.closeMenu(),Ve(()=>{var g;return(g=ne(r.buttonRef))==null?void 0:g.focus({preventScroll:!0})})):(b.preventDefault(),r.openMenu(),_s(()=>{var g;return(g=ne(r.itemsRef))==null?void 0:g.focus({preventScroll:!0})})))}let m=hs(F(()=>({as:e.as,type:t.type})),r.buttonRef);return()=>{var b;let g={open:r.menuState.value===0},v=e,{id:I}=v,C=Ge(v,["id"]),_={ref:r.buttonRef,id:I,type:m.value,"aria-haspopup":"menu","aria-controls":(b=ne(r.itemsRef))==null?void 0:b.id,"aria-expanded":r.menuState.value===0,onKeydown:c,onKeyup:p,onClick:y};return ot({ourProps:_,theirProps:C,slot:g,attrs:t,slots:s,name:"MenuButton"})}}}),Ss=He({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${ut()}`}},setup(e,{attrs:t,slots:s,expose:a}){let r=lt("MenuItems"),c=O(null);a({el:r.itemsRef,$el:r.itemsRef}),Yt({container:F(()=>ne(r.itemsRef)),enabled:F(()=>r.menuState.value===0),accept(g){return g.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:g.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(g){g.setAttribute("role","none")}});function p(g){var I;switch(c.value&&clearTimeout(c.value),g.key){case de.Space:if(r.searchQuery.value!=="")return g.preventDefault(),g.stopPropagation(),r.search(g.key);case de.Enter:if(g.preventDefault(),g.stopPropagation(),r.activeItemIndex.value!==null){let C=r.items.value[r.activeItemIndex.value];(I=ne(C.dataRef.domRef))==null||I.click()}r.closeMenu(),Rt(ne(r.buttonRef));break;case de.ArrowDown:return g.preventDefault(),g.stopPropagation(),r.goToItem(we.Next);case de.ArrowUp:return g.preventDefault(),g.stopPropagation(),r.goToItem(we.Previous);case de.Home:case de.PageUp:return g.preventDefault(),g.stopPropagation(),r.goToItem(we.First);case de.End:case de.PageDown:return g.preventDefault(),g.stopPropagation(),r.goToItem(we.Last);case de.Escape:g.preventDefault(),g.stopPropagation(),r.closeMenu(),Ve(()=>{var C;return(C=ne(r.buttonRef))==null?void 0:C.focus({preventScroll:!0})});break;case de.Tab:g.preventDefault(),g.stopPropagation(),r.closeMenu(),Ve(()=>ss(ne(r.buttonRef),g.shiftKey?bt.Previous:bt.Next));break;default:g.key.length===1&&(r.search(g.key),c.value=setTimeout(()=>r.clearSearch(),350));break}}function y(g){switch(g.key){case de.Space:g.preventDefault();break}}let m=Zt(),b=F(()=>m!==null?(m.value&tt.Open)===tt.Open:r.menuState.value===0);return()=>{var g,I;let C={open:r.menuState.value===0},R=e,{id:_}=R,v=Ge(R,["id"]),f={"aria-activedescendant":r.activeItemIndex.value===null||(g=r.items.value[r.activeItemIndex.value])==null?void 0:g.id,"aria-labelledby":(I=ne(r.buttonRef))==null?void 0:I.id,id:_,onKeydown:p,onKeyup:y,role:"menu",tabIndex:0,ref:r.itemsRef};return ot({ourProps:f,theirProps:v,slot:C,attrs:t,slots:s,features:ht.RenderStrategy|ht.Static,visible:b.value,name:"MenuItems"})}}}),Is=He({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${ut()}`}},setup(e,{slots:t,attrs:s,expose:a}){let r=lt("MenuItem"),c=O(null);a({el:c,$el:c});let p=F(()=>r.activeItemIndex.value!==null?r.items.value[r.activeItemIndex.value].id===e.id:!1),y=ys(c),m=F(()=>({disabled:e.disabled,get textValue(){return y()},domRef:c}));Be(()=>r.registerItem(e.id,m)),at(()=>r.unregisterItem(e.id)),Tt(()=>{r.menuState.value===0&&p.value&&r.activationTrigger.value!==0&&Ve(()=>{var f,R;return(R=(f=ne(c))==null?void 0:f.scrollIntoView)==null?void 0:R.call(f,{block:"nearest"})})});function b(f){if(e.disabled)return f.preventDefault();r.closeMenu(),Rt(ne(r.buttonRef))}function g(){if(e.disabled)return r.goToItem(we.Nothing);r.goToItem(we.Specific,e.id)}let I=es();function C(f){I.update(f)}function _(f){I.wasMoved(f)&&(e.disabled||p.value||r.goToItem(we.Specific,e.id,0))}function v(f){I.wasMoved(f)&&(e.disabled||p.value&&r.goToItem(we.Nothing))}return()=>{let{disabled:f}=e,R={active:p.value,disabled:f,close:r.closeMenu},L=e,{id:h}=L,w=Ge(L,["id"]);return ot({ourProps:{id:h,ref:c,role:"menuitem",tabIndex:f===!0?void 0:-1,"aria-disabled":f===!0?!0:void 0,disabled:void 0,onClick:b,onFocus:g,onPointerenter:C,onMouseenter:C,onPointermove:_,onMousemove:_,onPointerleave:v,onMouseleave:v},theirProps:Ie(Ie({},s),w),slot:R,attrs:s,slots:t,name:"MenuItem"})}}});const $s=["src","alt"],Ts=He({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(e){const t=O(!1),s=e,a=F(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[s.size]})[s.shape]),r=F(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[s.size]),c=F(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[s.size]]),p=F(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[s.size]),y=F(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[s.size]),m=F(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[s.size]);function b(g){g.type&&(t.value=!0)}return(g,I)=>(n(),d("div",{class:z(["relative inline-block shrink-0",[r.value,a.value]])},[g.image&&!t.value?(n(),d("img",{key:0,src:g.image,alt:g.label,class:z([a.value,"h-full w-full object-cover"]),onError:I[0]||(I[0]=C=>b(C))},null,42,$s)):(n(),d("div",{key:1,class:z(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none",[c.value,a.value]])},[g.$slots.default?(n(),d("div",{key:0,class:z(m.value)},[le(g.$slots,"default")],2)):(n(),d(Y,{key:1},[oe(T(g.label&&g.label[0]),1)],64))],2)),g.$slots.indicator?(n(),d("div",{key:2,class:z(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",p.value])},[o("div",{class:z(y.value)},[le(g.$slots,"indicator")],2)],2)):E("",!0)],2))}}),Ps={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6"},Rs=["onClick"],Ds={class:"whitespace-nowrap text-ink-gray-7"},Ms=He({__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const t=as(),s=e,a=m=>{let b=()=>{m.route?t.push(m.route):m.onClick&&m.onClick()};return{label:m.label,icon:m.icon,component:m.component,onClick:b}},r=m=>(m||[]).filter(Boolean).filter(b=>b.condition?b.condition():!0).map(b=>a(b)),c=F(()=>{let m=[],b=null,g=0;for(let I of s.options)if(I!=null){if("group"in I){b&&(m.push(b),b=null);let C=nt(Ie({key:g},I),{items:r(I.items)});m.push(C)}else b||(b={key:g,group:"",hideLabel:!0,items:[]}),b.items.push(...r([I]));g++}return b&&m.push(b),m}),p=F(()=>({enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"})),y=F(()=>s.placement==="left"?"bottom-start":s.placement==="right"?"bottom-end":s.placement==="center"?"bottom-center":"bottom");return(m,b)=>(n(),Q(x(ks),{as:"div",class:"relative inline-block text-left"},{default:J(({open:g})=>[U(x(ls),{transition:p.value,show:g,placement:y.value},{target:J(()=>[U(x(Cs),{as:"div"},{default:J(()=>[m.$slots.default?le(m.$slots,"default",Te(Le({key:0},{open:g}))):(n(),Q(x(xe),Le({key:1,active:g},m.button),{default:J(()=>{var I;return[oe(T(m.button?((I=m.button)==null?void 0:I.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:J(()=>[U(x(Ss),{class:z(["mt-2 min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":m.placement=="left","right-0 origin-top-right":m.placement=="right","inset-x-0 origin-top":m.placement=="center"}])},{default:J(()=>[(n(!0),d(Y,null,se(c.value,I=>(n(),d("div",{key:I.key,class:"p-1.5"},[I.group&&!I.hideLabel?(n(),d("div",Ps,T(I.group),1)):E("",!0),(n(!0),d(Y,null,se(I.items,C=>(n(),Q(x(Is),{key:C.label},{default:J(({active:_})=>[C.component?(n(),Q(je(C.component),{key:0,active:_},null,8,["active"])):(n(),d("button",{key:1,class:z([_?"bg-surface-gray-3":"text-ink-gray-6","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:C.onClick},[C.icon&&typeof C.icon=="string"?(n(),Q(Fe,{key:0,name:C.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6","aria-hidden":"true"},null,8,["name"])):C.icon?(n(),Q(je(C.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6"})):E("",!0),o("span",Ds,T(C.label),1)],10,Rs))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3}))}}),Ls={class:"flex h-full w-full flex-col items-center justify-center text-base"},Fs={class:"text-xl font-medium"},Os={class:"mt-1 text-base text-ink-gray-5"},Vs={__name:"ListEmptyState",setup(e){const t=Se("list");return(s,a)=>(n(),d("div",Ls,[le(s.$slots,"default",{},()=>[o("div",Fs,T(x(t).options.emptyState.title),1),o("div",Os,T(x(t).options.emptyState.description),1),x(t).options.emptyState.button?(n(),Q(x(xe),Le({key:0},x(t).options.emptyState.button,{class:"mt-4"}),null,16)):E("",!0)])]))}};function Lt(e,t=!0){let s=t?"14px ":"",a=e.map(r=>{let c=r.width||1;return typeof c=="number"?c+"fr":c}).join(" ");return s+a}const gt={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Es={class:"truncate"},Ft={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=e,a=t,r=O(null),c=O(null),p=F(()=>{if(typeof s.item.width=="string"){const g=parseInt(s.item.width);if(s.item.width.includes("rem"))return g*16;if(s.item.width.includes("px"))return g}return c.value.offsetWidth}),y=g=>{const I=g.clientX,C=p.value,_=f=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),r.value.style.backgroundColor="rgb(199 199 199)";let R=C+(f.clientX-I);s.item.width=`${R<50?50:R}px`,m(s.item.width)},v=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),r.value.style.backgroundColor="",window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",v)},m=ns(g=>{s.item.width=g,a("columnWidthUpdated")},s.debounce),b=Se("list");return(g,I)=>(n(),d("div",{ref_key:"columnRef",ref:c,class:z(["group relative flex items-center",e.item.align?x(gt)[e.item.align]:"justify-between"])},[o("div",{class:z(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",g.$attrs.class])},[le(g.$slots,"prefix",Te(Ue({item:e.item}))),le(g.$slots,"default",{},()=>[o("div",Es,T(e.item.label),1)]),le(g.$slots,"suffix",Te(Ue({item:e.item})))],2),x(b).options.resizeColumn?le(g.$slots,"resizer",Te(Le({key:0},{item:e.item})),()=>[o("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:y},[o("div",{ref_key:"resizer",ref:r,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):E("",!0)],2))}},Ot={__name:"ListHeader",emits:["columnWidthUpdated"],setup(e,{emit:t}){const s=t,a=Se("list");return(r,c)=>(n(),d("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:$e({gridTemplateColumns:x(Lt)(x(a).columns,x(a).options.selectable)})},[x(a).options.selectable?(n(),Q(ct,{key:0,class:"cursor-pointer duration-300",modelValue:x(a).allRowsSelected,onClick:me(x(a).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):E("",!0),le(r.$slots,"default",{},()=>[(n(!0),d(Y,null,se(x(a).columns,p=>(n(),Q(Ft,{key:p.key,item:p,onColumnWidthUpdated:y=>s("columnWidthUpdated",p)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},As={class:"truncate text-base"},Vt={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(e){const t=e,s=F(()=>{var p,y;return(p=t.column)!=null&&p.getLabel?(y=t.column)==null?void 0:y.getLabel({row:t.row}):r(t.item).label||""}),a=F(()=>c.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):r(t.item).label:"");function r(p){return p&&typeof p=="object"?p:{label:p}}const c=Se("list");return(p,y)=>(n(),d("div",{class:z(["flex items-center space-x-2",x(gt)[e.align]])},[le(p.$slots,"prefix",{},()=>[e.column.prefix?(n(),Q(je(typeof e.column.prefix=="function"?e.column.prefix({row:e.row}):e.column.prefix),{key:0})):E("",!0)]),U(x(Dt),Te(Ue(x(c).options.showTooltip?{text:a.value}:{text:""})),{default:J(()=>[le(p.$slots,"default",Te(Ue({label:s.value})),()=>[o("div",As,T(s.value),1)])]),_:3},16),le(p.$slots,"suffix")],2))}},pt={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(e){const t=e,s=Se("list"),a=F(()=>{var g;return(g=s.value.rows)!=null&&g.length?s.value.rows[s.value.rows.length-1][s.value.rowKey]===t.row[s.value.rowKey]:!1}),r=F(()=>s.value.selections.has(t.row[s.value.rowKey])),c=F(()=>s.value.options.enableActive&&s.value.activeRow.value===t.row.name),p=F(()=>s.value.options.getRowRoute||s.value.options.onRowClick),y=F(()=>typeof s.value.options.rowHeight=="number"?`${s.value.options.rowHeight}px`:s.value.options.rowHeight),m=F(()=>{var C,_,v;if(!r.value)return"rounded";const g=[...s.value.selections];let I=(C=s.value.rows[0])!=null&&C.group?s.value.rows.map(f=>f.rows):[s.value.rows];for(let f of I){let R=f.findIndex(L=>L==t.row);if(R===-1)continue;let h=!g.includes((_=f[R+1])==null?void 0:_.name),w=!g.includes((v=f[R-1])==null?void 0:v.name);return(h?"rounded-b ":"")+(w?"rounded-t":"")}}),b=(g,I)=>{s.value.options.onRowClick&&s.value.options.onRowClick(g,I),s.value.activeRow.value===g.name?s.value.activeRow.value=null:s.value.activeRow.value=g.name};return(g,I)=>(n(),Q(je(x(s).options.getRowRoute?"router-link":"div"),Le({class:[[m.value,r.value||c.value?"bg-surface-gray-2":"",p.value?"cursor-pointer":"",p.value?r.value||c.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:x(s).options.getRowRoute?x(s).options.getRowRoute(e.row):void 0,onClick:C=>b(e.row,C)}),{default:J(()=>[(n(),Q(je(x(s).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:J(()=>{var C,_;return[o("div",{class:"grid items-center space-x-4 px-2",style:$e({height:y.value,gridTemplateColumns:x(Lt)(x(s).columns,x(s).options.selectable)})},[x(s).options.selectable?(n(),d("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:I[1]||(I[1]=me(()=>{},["stop","prevent"])),onDblclick:I[2]||(I[2]=me(()=>{},["stop"]))},[U(ct,{modelValue:r.value,class:"cursor-pointer duration-300",onClick:I[0]||(I[0]=me(v=>x(s).toggleRow(e.row[x(s).rowKey]),["stop"]))},null,8,["modelValue"])],32)):E("",!0),(n(!0),d(Y,null,se(x(s).columns,(v,f)=>(n(),d("div",{key:v.key,class:z([x(gt)[v.align],f==0?"text-ink-gray-9":"text-ink-gray-7"])},[le(g.$slots,"default",Le({ref_for:!0},{idx:f,column:v,item:e.row[v.key],isActive:c.value}),()=>[x(s).slots.cell?(n(),Q(je(x(s).slots.cell),Le({key:0,ref_for:!0},{column:v,row:e.row,item:e.row[v.key],align:v.align}),null,16)):(n(),Q(Vt,{key:1,column:v,row:e.row,item:e.row[v.key],align:v.align},null,8,["column","row","item","align"]))])],2))),128))],4),a.value?E("",!0):(n(),d("div",{key:0,class:z(["h-px border-t",m.value==="rounded"||(_=(C=m.value)==null?void 0:C.includes)!=null&&_.call(C,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},js={class:"h-full overflow-y-auto"},Et={__name:"ListRows",setup(e){const t=Se("list");return(s,a)=>(n(),d("div",js,[le(s.$slots,"default",{},()=>[(n(!0),d(Y,null,se(x(t).rows,r=>(n(),Q(pt,{key:r[x(t).rowKey],row:r},null,8,["row"]))),128))])]))}},Us={},Bs={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ns(e,t){return n(),d("svg",Bs,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const zs=Ke(Us,[["render",Ns]]),Hs={class:"flex items-center"},Ks={class:"w-full py-1.5 pr-2"},qs={key:1,class:"text-base font-medium leading-6"},Js={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(e){const t=e,s=Se("list");function a(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(r,c)=>(n(),d(Y,null,[o("div",Hs,[o("button",{onClick:a,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[U(zs,{class:z(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[e.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),le(r.$slots,"default",{},()=>[o("div",Ks,[x(s).slots["group-header"]?(n(),Q(je(x(s).slots["group-header"]),Te(Le({key:0},{group:e.group})),null,16)):(n(),d("span",qs,T(e.group.group),1))])])]),c[0]||(c[0]=o("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Ws={key:0,class:"mb-5 mt-2"},Qs={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(e){const t=Se("list");return(s,a)=>e.group.collapsed?E("",!0):(n(),d("div",Ws,[le(s.$slots,"default",{},()=>[(n(!0),d(Y,null,se(e.group.rows,r=>(n(),Q(pt,{key:r[x(t).rowKey],row:r},null,8,["row"]))),128))])]))}},Gs={class:"h-full overflow-y-auto"},Xs={__name:"ListGroups",setup(e){const t=Se("list");return(s,a)=>(n(),d("div",Gs,[(n(!0),d(Y,null,se(x(t).rows,r=>(n(),d("div",{key:r.group},[le(s.$slots,"default",{},()=>[U(Js,{group:r},{default:J(()=>[s.$slots["group-header"]?le(s.$slots,"group-header",Le({key:0,ref_for:!0},{group:r})):E("",!0)]),_:2},1032,["group"]),U(Qs,{group:r},null,8,["group"])])]))),128))]))}},Ys={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Zs={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},eo={class:"flex items-center space-x-3"},to={class:"mr-3"},so={class:"flex items-center space-x-1"},At=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(e){const t=Se("list");let s=F(()=>t.value.options.selectionText(t.value.selections.size));return(a,r)=>(n(),Q(rs,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:J(()=>[x(t).selections.size?(n(),d("div",Ys,[o("div",{class:z(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",a.$attrs.class])},[le(a.$slots,"default",Te(Ue({selections:x(t).selections,allRowsSelected:x(t).allRowsSelected,selectAll:()=>x(t).toggleAllRows(!0),unselectAll:()=>x(t).toggleAllRows(!1)})),()=>[o("div",Zs,[o("div",eo,[U(ct,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),o("div",null,T(x(s)),1)]),o("div",to,[le(a.$slots,"actions",Te(Ue({selections:x(t).selections,allRowsSelected:x(t).allRowsSelected,selectAll:()=>x(t).toggleAllRows(!0),unselectAll:()=>x(t).toggleAllRows(!1)})))])]),o("div",so,[U(x(xe),{class:z(["w- text-ink-gray-7",x(t).allRowsSelected?"cursor-not-allowed":""]),disabled:x(t).allRowsSelected,variant:"ghost",onClick:r[0]||(r[0]=c=>x(t).toggleAllRows(!0))},{default:J(()=>r[2]||(r[2]=[oe(" Select all ")])),_:1,__:[2]},8,["disabled","class"]),U(x(xe),{icon:"x",variant:"ghost",onClick:r[1]||(r[1]=c=>x(t).toggleAllRows(!1))})])])],2)])):E("",!0)]),_:3}))}}),oo={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},ao=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(e,{expose:t,emit:s}){const a=e,r=is();let c=us(new Set),p=O(null);const y=s;Pe(c,v=>{c.size&&(p.value=null),y("update:selections",v)}),Pe(p,v=>{y("update:active-row",v)});let m=F(()=>{function v(R){return R===void 0?!0:R}function f(R){return R===void 0?!1:R}return{getRowRoute:a.options.getRowRoute||null,onRowClick:a.options.onRowClick||null,showTooltip:v(a.options.showTooltip),selectionText:a.options.selectionText||(R=>R===1?"1 row selected":`${R} rows selected`),enableActive:f(a.options.enableActive),selectable:v(a.options.selectable),resizeColumn:f(a.options.resizeColumn),rowHeight:a.options.rowHeight||40,emptyState:a.options.emptyState}});const b=F(()=>a.rows.length?I.value?c.size===a.rows.reduce((v,f)=>v+f.rows.length,0):c.size===a.rows.length:!1),g=F(()=>m.value.selectable);let I=F(()=>a.rows.every(v=>v.group&&v.rows&&Array.isArray(v.rows)));function C(v){c.delete(v)||c.add(v)}function _(v){if(!v||b.value){c.clear();return}if(I.value){a.rows.forEach(f=>{f.rows.forEach(R=>c.add(R[a.rowKey]))});return}a.rows.forEach(f=>c.add(f[a.rowKey]))}return Pt("list",F(()=>({rowKey:a.rowKey,rows:a.rows,columns:a.columns,options:m.value,selections:c,activeRow:p,allRowsSelected:b.value,slots:r,toggleRow:C,toggleAllRows:_}))),t({selections:c,allRowsSelected:b,toggleRow:C,toggleAllRows:_}),(v,f)=>(n(),d("div",oo,[o("div",{class:z(["flex w-max min-w-full flex-col overflow-y-hidden",v.$attrs.class]),style:$e(v.$attrs.style)},[le(v.$slots,"default",Te(Ue({showGroupedRows:x(I),selectable:g.value})),()=>[U(Ot),a.rows.length?(n(),d(Y,{key:0},[x(I)?(n(),Q(Xs,{key:0})):(n(),Q(Et,{key:1}))],64)):(n(),Q(Vs,{key:1})),g.value?(n(),Q(At,{key:2})):E("",!0)])],6)]))}}),ve=Re({url:"force_trans_customization.api.issues.get_issues_with_assignments",makeParams(e){const t=e||{},s=t.limit_page_length||10,a=t.limit_start||0,r=t.filters||{},c=t.order_by||"creation desc";return console.log("issuesResource params:",{limit_page_length:s,limit_start:a,filters:r,order_by:c}),{limit_page_length:s,limit_start:a,filters:r,order_by:c}},onError(e){console.error("Failed to fetch issues:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to load issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!0}),jt=Re({url:"force_trans_customization.api.issues.get_issues_count_with_filters",makeParams(e){const t=e||{},s=t.filters||t||{};return console.log("issuesCountResource filters:",s),{filters:s}},onError(e){console.error("Failed to fetch issues count:",e)}});function qe(e={}){const t={limit_page_length:e.limit_page_length||10,limit_start:e.limit_start||0,filters:e.filters||{},order_by:e.order_by||"creation desc"};return console.log("reloadIssues with params:",t),ve.reload(t)}function st(e={}){return console.log("getIssuesCount with filters:",e),jt.reload(e)}const Ut=Re({url:"force_trans_customization.api.issues.get_single_issue_with_assignments",makeParams(e){return{issue_name:e}},onError(e){console.error("Failed to fetch single issue:",e)},auto:!1});function lo(e){return Ut.reload(e)}const no=Re({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Priority",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssuePriority",onError(e){console.error("Failed to fetch issue priorities:",e)},auto:!0}),ro=Re({url:"frappe.client.get_list",makeParams(){return{doctype:"Issue Type",fields:["name"],limit_page_length:0,order_by:"name asc"}},cache:"IssueType",onError(e){console.error("Failed to fetch issue types:",e)},auto:!0});Re({url:"frappe.client.get_list",makeParams(){return{doctype:"Project",fields:["name","project_name","status"],filters:{status:["!=","Cancelled"]},limit_page_length:0,order_by:"name asc"}},cache:"Project",onError(e){console.error("Failed to fetch projects:",e)},auto:!0});let Xe=null,St=null,Ye=null,It=null;function io(){const e=no.data||[],t=JSON.stringify(e);if(Xe&&St===t)return Xe;const s=[{label:"All Priority",value:""},...e.map(a=>({label:a.name,value:a.name}))];return Xe=Object.freeze(s),St=t,Xe}function uo(){const e=ro.data||[],t=JSON.stringify(e);if(Ye&&It===t)return Ye;const s=[{label:"All Types",value:""},...e.map(a=>({label:a.name,value:a.name}))];return Ye=Object.freeze(s),It=t,Ye}const co=Object.freeze([{label:"All Status",value:""},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"On Hold",value:"On Hold"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}]);function go(){return co}const po=Re({url:"force_trans_customization.api.issues.get_tag_colors",cache:"TagColors",onError(e){console.error("Failed to fetch tag colors:",e)},auto:!0}),Ze=new Map;let $t=null;function Bt(e){const t=po.data||{},s=JSON.stringify(t);if($t!==s&&(Ze.clear(),$t=s),Ze.has(e))return Ze.get(e);const a=t[e]||null;return Ze.set(e,a),a}const rt=Re({url:"force_trans_customization.api.issues.issue_search",makeParams(e){const t=e||{};return{search_query:t.search_query||"",limit:t.limit||8}},onError(e){console.error("Failed to search issues:",e)},auto:!1});function mo(e,t=8){return!e||e.length<2?Promise.resolve(rt.data||[]):rt.reload({search_query:e,limit:t}).then(()=>rt.data||[])}const fe=Re({url:"force_trans_customization.api.issues.get_issues_by_stat_filter",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets",limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to filter issues by stat:",e),window.$toast&&window.$toast({title:"Error",text:"Failed to filter issues. Please try again.",icon:"x",iconClasses:"text-red-600"})},auto:!1}),Nt=Re({url:"force_trans_customization.api.issues.get_stat_filter_count",makeParams(e){const t=e||{},s={stat_type:t.stat_type||"team_tickets"};return t.filters&&(s.filters=t.filters),s},onError(e){console.error("Failed to get stat filter count:",e)},auto:!1});function it(e,t={}){const s={stat_type:e,limit_page_length:t.limit_page_length||10,limit_start:t.limit_start||0,order_by:t.order_by||"creation desc"};return t.filters&&(s.filters=t.filters),console.log("filterIssuesByStat params:",s),fe.reload(s)}function et(e,t=null){const s={stat_type:e};return t&&(s.filters=t),Nt.reload(s)}const vo={class:"relative w-full max-w-2xl mx-auto"},fo={class:"relative group"},ho=["placeholder"],bo={class:"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2"},yo={key:1,class:"flex items-center pointer-events-none"},xo={key:2,class:"animate-spin"},wo={key:0,class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100"},_o={class:"flex items-center justify-between"},ko={class:"text-xs font-semibold text-slate-600 uppercase tracking-wider"},Co={class:"text-xs text-slate-500"},So={key:0,class:"px-6 py-8 text-center"},Io=["onClick"],$o={class:"flex items-start space-x-4"},To={class:"flex-1 min-w-0"},Po={class:"flex items-start justify-between"},Ro={class:"flex-1 min-w-0"},Do={class:"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 transition-colors duration-150"},Mo=["innerHTML"],Lo={class:"text-xs text-slate-500 mt-1 line-clamp-2"},Fo={key:0,class:"ml-2"},Oo={class:"flex-shrink-0 ml-4"},Vo={class:"mt-2 flex items-center justify-between text-xs text-slate-400"},Eo={key:0,class:"flex items-center"},Ao={key:1,class:"flex items-center"},jo={key:1,class:"px-4 py-3 bg-slate-50/50 border-t border-slate-100"},Uo={__name:"CustomSearchBox",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Search issues by title, description, ID..."},issues:{type:Array,default:()=>[]}},emits:["update:modelValue","search","suggestion-selected"],setup(e,{expose:t,emit:s}){const a=e,r=s,c=O(null),p=O(a.modelValue),y=O(!1),m=O(!1),b=O(-1),g=O(!1),I=O(0),C=O(null),_=O([]);let v=null;Pe(()=>a.modelValue,M=>{p.value=M}),Pe(p,M=>{r("update:modelValue",M),r("search",M)});const f=O([]),R=M=>pe(this,null,function*(){if(!M||M.length<2){f.value=[],m.value=!1,g.value=!1;return}try{g.value=!0;const V=performance.now(),q=yield mo(M,8);I.value=performance.now()-V,f.value=q||[],m.value=!0}catch(V){console.error("Search error:",V),f.value=[],m.value=!1}finally{g.value=!1}}),h=M=>{if(v&&clearTimeout(v),b.value=-1,!M||M.length<2){f.value=[],m.value=!1,g.value=!1;return}g.value=!0,v=setTimeout(()=>{R(M)},1e3)},w=()=>{h(p.value)},L=(M,V)=>{if(!M||!V)return M;const q=V.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ce=new RegExp(`(${q})`,"gi");return M.replace(ce,'<mark class="bg-yellow-200 text-yellow-900 px-0.5 rounded">$1</mark>')},K=M=>({Open:"bg-green-100 text-green-800 border border-green-200",New:"bg-blue-100 text-blue-800 border border-blue-200","In Progress":"bg-blue-100 text-blue-800 border border-blue-200","In Review":"bg-orange-100 text-orange-800 border border-orange-200",Resolved:"bg-gray-100 text-gray-800 border border-gray-200",Closed:"bg-red-100 text-red-800 border border-red-200",Pending:"bg-yellow-100 text-yellow-800 border border-yellow-200","On Hold":"bg-orange-100 text-orange-800 border border-orange-200",Delivered:"bg-green-100 text-green-800 border border-green-200",Confirmed:"bg-purple-100 text-purple-800 border border-purple-200"})[M]||"bg-gray-100 text-gray-800 border border-gray-200",B=()=>{y.value=!0,N&&(clearTimeout(N),N=null),p.value.length>=2&&(f.value.length>0?m.value=!0:R(p.value))};let N=null;const H=()=>{y.value=!1,N=setTimeout(()=>{m.value=!1,N=null},200)},j=M=>{var V;if(m.value)switch(M.key){case"ArrowDown":M.preventDefault(),b.value=Math.min(b.value+1,f.value.length-1),A();break;case"ArrowUp":M.preventDefault(),b.value=Math.max(b.value-1,-1),A();break;case"Enter":M.preventDefault(),b.value>=0&&W(f.value[b.value]);break;case"Escape":Z(),(V=c.value)==null||V.blur();break}},W=M=>{p.value=M.name,Z();const q=`${window.location.origin}/app/issue/${M.name}`;window.open(q,"_blank"),r("suggestion-selected",M)},ee=()=>{var M;p.value="",Z(),(M=c.value)==null||M.focus()},Z=()=>{m.value=!1,b.value=-1},A=()=>{if(b.value<0||!C.value||!_.value[b.value])return;const M=C.value,V=_.value[b.value];if(V){const q=M.getBoundingClientRect(),ce=V.getBoundingClientRect(),re=ce.top-q.top+M.scrollTop,Oe=re+ce.height,_e=M.scrollTop,ke=M.clientHeight;re<_e?M.scrollTop=re:Oe>_e+ke&&(M.scrollTop=Oe-ke)}},X=M=>{if(!M)return"";try{const V=new Date(M),q=new Date,ce=Math.abs(q-V),re=Math.ceil(ce/(1e3*60*60*24));return re===1?"Today":re===2?"Yesterday":re<=7?`${re-1} days ago`:V.toLocaleDateString("en-US",{month:"short",day:"numeric",year:V.getFullYear()!==q.getFullYear()?"numeric":void 0})}catch(V){return console.error("Error formatting date:",V),M}},ue=M=>{var V,q;(M.metaKey||M.ctrlKey)&&M.key==="k"&&(M.preventDefault(),(V=c.value)==null||V.focus(),(q=c.value)==null||q.select())};return Be(()=>{document.addEventListener("keydown",ue)}),at(()=>{document.removeEventListener("keydown",ue),v&&clearTimeout(v),N&&clearTimeout(N)}),t({focus:()=>{var M,V;(M=c.value)==null||M.focus(),(V=c.value)==null||V.select()},select:()=>{var M;return(M=c.value)==null?void 0:M.select()},$el:c}),(M,V)=>(n(),d("div",vo,[o("div",fo,[V[4]||(V[4]=o("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10"},[o("svg",{class:"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),be(o("input",{ref_key:"searchInput",ref:c,type:"text","onUpdate:modelValue":V[0]||(V[0]=q=>p.value=q),onInput:w,onFocus:B,onBlur:H,onKeydown:j,placeholder:e.placeholder,class:z(["w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg backdrop-blur-sm",{"shadow-lg ring-2 ring-blue-500/20 border-blue-500":y.value,"bg-slate-50/50":!y.value&&p.value}])},null,42,ho),[[Ce,p.value]]),o("div",bo,[p.value?(n(),d("button",{key:0,onClick:ee,class:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20","aria-label":"Clear search"},V[1]||(V[1]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):E("",!0),!p.value&&!y.value?(n(),d("div",yo,V[2]||(V[2]=[o("kbd",{class:"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm"},[o("span",{class:"text-xs"},"⌘+"),oe("K ")],-1)]))):E("",!0),g.value?(n(),d("div",xo,V[3]||(V[3]=[o("svg",{class:"h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):E("",!0)])]),m.value?(n(),d("div",{key:0,class:z(["absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-sm bg-white/95",{"animate-in slide-in-from-top-2 duration-200":m.value}])},[f.value.length>0?(n(),d("div",wo,[o("div",_o,[o("span",ko,T(f.value.length)+" Result"+T(f.value.length!==1?"s":""),1),o("span",Co,T(Math.round(I.value))+"ms ",1)])])):E("",!0),o("div",{ref_key:"suggestionsContainer",ref:C,class:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent"},[f.value.length===0&&p.value.length>=2?(n(),d("div",So,V[5]||(V[5]=[yt('<div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center" data-v-4969cdcf><svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-4969cdcf><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-4969cdcf></path></svg></div><p class="text-slate-500 text-sm font-medium" data-v-4969cdcf>No issues found</p><p class="text-slate-400 text-xs mt-1" data-v-4969cdcf>Try adjusting your search terms</p>',3)]))):E("",!0),(n(!0),d(Y,null,se(f.value,(q,ce)=>(n(),d("div",{key:q.name||ce,ref_for:!0,ref:re=>_.value[ce]=re,onClick:re=>W(q),class:z(["group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 border-b border-slate-50 last:border-b-0",{"bg-blue-50 ring-2 ring-blue-500/10":ce===b.value}])},[o("div",$o,[V[8]||(V[8]=o("div",{class:"flex-shrink-0 mt-0.5"},[o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-200"},[o("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),o("div",To,[o("div",Po,[o("div",Ro,[o("h4",Do,[o("span",{innerHTML:L(q.subject||q.name,p.value)},null,8,Mo)]),o("p",Lo,[oe(" ID: "+T(q.name)+" ",1),q.customer?(n(),d("span",Fo,"• "+T(q.customer),1)):E("",!0)])]),o("div",Oo,[o("span",{class:z(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors duration-150",K(q.status)])},T(q.status),3)])]),o("div",Vo,[q.raised_by?(n(),d("div",Eo,[V[6]||(V[6]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),oe(" "+T(q.raised_by),1)])):E("",!0),q.creation?(n(),d("div",Ao,[V[7]||(V[7]=o("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),oe(" "+T(X(q.creation)),1)])):E("",!0)])])])],10,Io))),128))],512),p.value&&f.value.length>0?(n(),d("div",jo,V[9]||(V[9]=[yt('<div class="flex items-center justify-between text-xs text-slate-500" data-v-4969cdcf><div class="flex items-center space-x-4" data-v-4969cdcf><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↵</kbd> to select </span><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>↑↓</kbd> to navigate </span></div><span class="flex items-center" data-v-4969cdcf><kbd class="px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1" data-v-4969cdcf>esc</kbd> to close </span></div>',1)]))):E("",!0)],2)):E("",!0),m.value?(n(),d("div",{key:1,class:"fixed inset-0 z-40 bg-black/5",onClick:Z})):E("",!0)]))}},Bo=Ke(Uo,[["__scopeId","data-v-4969cdcf"]]),No={class:"bg-white p-6 rounded-lg shadow-sm border mb-6"},zo={class:"mb-6"},Ho={class:"relative max-w-2xl mx-auto"},Ko={key:0,class:"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center"},qo={class:"border-t border-gray-200 pt-4"},Jo={class:"flex items-center justify-between"},Wo={class:"flex items-center space-x-3 flex-1"},Qo={key:0,class:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full"},Go={key:0,class:"flex items-center flex-1 overflow-x-auto flex-wrap gap-2"},Xo={class:"text-green-800 font-medium"},Yo={class:"text-green-600"},Zo={class:"text-green-900"},ea=["onClick"],ta={class:"flex items-center space-x-2 ml-4"},sa=["disabled"],oa={key:0,class:"flex items-center"},aa={key:1},la={key:0,class:"relative"},na={class:"flex"},ra={class:"w-48 border-r border-gray-200 bg-gray-50"},ia={class:"max-h-64 overflow-y-auto"},ua=["onClick"],ca={class:"text-xs text-gray-400 bg-gray-200 px-1 rounded"},da={class:"flex-1 min-w-96"},ga={class:"p-4"},pa={key:0,class:"text-center py-8 text-gray-500"},ma={key:1,class:"space-y-4"},va={class:"col-span-2 flex items-center"},fa={class:"text-sm font-semibold text-gray-800 bg-white px-2 py-1 rounded-md border border-gray-200"},ha={class:"col-span-2 flex items-center"},ba={class:"text-gray-700 font-medium truncate"},ya={class:"col-span-7"},xa=["onUpdate:modelValue","placeholder"],wa=["onUpdate:modelValue","placeholder"],_a={key:2,class:"space-y-2"},ka={key:0,class:"grid grid-cols-2 gap-2"},Ca=["onUpdate:modelValue","onInput"],Sa=["onUpdate:modelValue","onInput"],Ia={key:1},$a=["onUpdate:modelValue"],Ta={key:3,class:"space-y-2"},Pa={key:0,class:"grid grid-cols-2 gap-2"},Ra=["onUpdate:modelValue","onInput"],Da=["onUpdate:modelValue","onInput"],Ma={key:1},La=["onUpdate:modelValue"],Fa={key:4,class:"relative"},Oa={key:0},Va=["onUpdate:modelValue"],Ea={value:""},Aa=["value"],ja={key:1,class:"space-y-2"},Ua={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ba=["onClick"],Na={key:5,class:"space-y-2"},za={class:"space-y-2"},Ha={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},Ka=["onClick"],qa={class:"relative"},Ja=["onUpdate:modelValue","onInput","onKeydown","placeholder"],Wa={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Qa={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},Ga=["onClick"],Xa={class:"font-medium text-gray-900"},Ya={class:"text-xs text-gray-500"},Za={key:6,class:"space-y-2"},el={key:0,class:"flex flex-wrap gap-1 mb-2 p-2 bg-white rounded-md border border-gray-200"},tl=["onClick"],sl={class:"relative"},ol=["onUpdate:modelValue","onInput","onKeyup","onKeydown"],al={key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2"},ll={key:1,class:"max-h-48 overflow-y-auto border border-gray-200 rounded-md bg-white shadow-lg"},nl=["onClick"],rl={class:"flex items-center justify-between"},il={class:"font-medium text-gray-900"},ul={class:"text-xs text-gray-500"},cl={class:"col-span-1 flex items-start justify-center pt-1"},dl=["onClick"],gl={key:2,class:"flex justify-between items-center pt-4 mt-4 border-t border-gray-200"},pl=["disabled"],ml={key:0,class:"flex items-center"},vl={key:1},fl={__name:"IssueFilters",props:{searchQuery:{type:String,default:""},filters:{type:Object,default:()=>({})},filteredCount:{type:Number,default:0},issues:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:filters","suggestion-selected","filters-applied"],setup(e,{emit:t}){const s=e,a=t,r=O(s.searchQuery),c=O(!1),p=O([]),y=O([]);let m=0;const b=O(!1),g=[{value:"subject",label:"Subject",type:"text"},{value:"status",label:"Status",type:"select"},{value:"raised_by",label:"Raised By",type:"email"},{value:"description",label:"Description",type:"text"},{value:"customer",label:"Customer",type:"link"},{value:"contact",label:"Contact",type:"link"},{value:"lead",label:"Lead",type:"link"},{value:"custom_assigned_csm_team",label:"Assigned CSM Team",type:"link"},{value:"custom_users_assigned",label:"User Assigned",type:"link"},{value:"creation",label:"Created Date",type:"date"},{value:"modified",label:"Modified Date",type:"date"},{value:"_user_tags",label:"Tags",type:"tags"}],I={status:[{value:"New",label:"New"},{value:"In Review",label:"In Review"},{value:"Confirmed",label:"Confirmed"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"},{value:"Closed",label:"Closed"}]},C={text:[{value:"like",label:"Contains"},{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"}],email:[{value:"equals",label:"Equals"},{value:"like",label:"Contains"},{value:"not_equals",label:"Not Equals"}],select:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"in",label:"In"},{value:"not_in",label:"Not In"}],link:[{value:"in",label:"In"},{value:"equals",label:"Is"},{value:"not_equals",label:"Is Not"},{value:"like",label:"Contains"},{value:"not_in",label:"Not In"}],datetime:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],date:[{value:"equals",label:"On"},{value:"greater_than",label:"After"},{value:"less_than",label:"Before"},{value:"between",label:"Between"}],tags:[{value:"has",label:"Has Tag"},{value:"has_all",label:"Has All Tags"},{value:"not_has",label:"Does Not Have"}]},_=F(()=>JSON.stringify(p.value)!==JSON.stringify(y.value)),v=l=>{const u=g.find(i=>i.value===l);return(u==null?void 0:u.type)||"text"},f=l=>{const u=g.find(i=>i.value===l);return(u==null?void 0:u.label)||l},R=l=>({subject:"Enter issue title...",description:"Enter description...",raised_by:"Enter email address...",customer:"Search for customer...",contact:"Search for contact...",lead:"Search for lead...",custom_assigned_csm_team:"Search for CSM team...",custom_users_assigned:"Search for users...",creation:"Select date",modified:"Select date"})[l]||`Enter ${f(l).toLowerCase()}...`,h=l=>{const u=v(l);return C[u]||C.text},w=l=>I[l]||[],L=l=>l.displayValue?l.displayValue:Array.isArray(l.value)?l.value.join(", "):l.value,K=l=>l?typeof l=="string"?l.split(",").map(u=>u.trim()).filter(Boolean):l:[],B=(l,u)=>{const i=K(l.value);i.splice(u,1),l.value=i.join(", ")},N=l=>l?l.split(",").map(u=>u.trim()).filter(Boolean):[],H=(l,u)=>{const i=N(l.value);i.splice(u,1),l.value=i.join(", ")},j=(l,u)=>u.userDisplayMap&&u.userDisplayMap[l]?u.userDisplayMap[l]:l,W=(l,u)=>{const i=K(l.value);i.includes(u.value)||(i.push(u.value),l.value=i.join(", "),l.userDisplayMap||(l.userDisplayMap={}),l.userDisplayMap[u.value]=u.label),l.searchValue="",l.suggestions=[],l.selectedLinkIndex=-1},ee=(l,u)=>{if(!l.suggestions||l.suggestions.length===0)return;const i=l.suggestions.length-1;(l.selectedLinkIndex===void 0||l.selectedLinkIndex===null)&&(l.selectedLinkIndex=-1),u==="down"?l.selectedLinkIndex=l.selectedLinkIndex<i?l.selectedLinkIndex+1:0:u==="up"&&(l.selectedLinkIndex=l.selectedLinkIndex>0?l.selectedLinkIndex-1:i),X()},Z=l=>{l.selectedLinkIndex>=0&&l.suggestions&&l.suggestions[l.selectedLinkIndex]&&W(l,l.suggestions[l.selectedLinkIndex])},A=l=>{l.suggestions=[],l.selectedLinkIndex=-1},X=l=>{Ve(()=>{const u=document.querySelector('[ref="selectedLinkOption"]');u&&u.scrollIntoView({block:"nearest",behavior:"smooth"})})};let ue={};const M=(l,u)=>pe(this,null,function*(){l.loadingTags=!0;const i=l.selectedTagIndex;ue[l.id]&&clearTimeout(ue[l.id]),ue[l.id]=setTimeout(()=>pe(this,null,function*(){try{const G=yield fetch("/api/method/force_trans_customization.api.issues.search_tags",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:u||"",limit:15})});if(G.ok){const S=yield G.json();l.tagSuggestions=S.message||[],!l.tagSuggestions||l.tagSuggestions.length===0?l.selectedTagIndex=-1:i>=0&&i<l.tagSuggestions.length?l.selectedTagIndex=i:l.selectedTagIndex>=l.tagSuggestions.length&&(l.selectedTagIndex=Math.max(0,l.tagSuggestions.length-1))}}catch(G){console.error("Tag search error:",G),l.tagSuggestions=[]}finally{l.loadingTags=!1}}),300)}),V=(l,u)=>{const i=N(l.value);i.includes(u.value)||(i.push(u.value),l.value=i.join(", ")),l.tagInput="",l.tagSuggestions=[],l.selectedTagIndex=-1},q=(l,u)=>{if(!l.tagSuggestions||l.tagSuggestions.length===0)return;const i=l.tagSuggestions.length-1;(l.selectedTagIndex===void 0||l.selectedTagIndex===null)&&(l.selectedTagIndex=-1),u==="down"?l.selectedTagIndex=l.selectedTagIndex<i?l.selectedTagIndex+1:0:u==="up"&&(l.selectedTagIndex=l.selectedTagIndex>0?l.selectedTagIndex-1:i),Oe()},ce=l=>{l.selectedTagIndex>=0&&l.tagSuggestions&&l.tagSuggestions[l.selectedTagIndex]&&V(l,l.tagSuggestions[l.selectedTagIndex])},re=l=>{l.tagSuggestions=[],l.selectedTagIndex=-1},Oe=l=>{Ve(()=>{const u=document.querySelector('[ref="selectedTagOption"]');u&&u.scrollIntoView({block:"nearest",behavior:"smooth"})})},_e=l=>{const u=Bt(l);if(u){const i=u.startsWith("#")?u:`#${u}`,G=i.replace("#",""),S=parseInt(G.substr(0,2),16),ae=parseInt(G.substr(2,2),16),Ee=parseInt(G.substr(4,2),16);return{backgroundColor:`rgba(${S}, ${ae}, ${Ee}, 0.15)`,color:"#000000",borderColor:i,borderWidth:"1.5px"}}return{backgroundColor:"rgba(107, 114, 128, 0.1)",color:"#000000",borderColor:"rgba(107, 114, 128, 0.3)",borderWidth:"1px"}};let ke={};const Ne=(l,u)=>pe(this,null,function*(){l.searchValue=u,l.loading=!0;const i=l.selectedLinkIndex;ke[l.id]&&clearTimeout(ke[l.id]),ke[l.id]=setTimeout(()=>pe(this,null,function*(){try{let G=[],S="";if(l.field==="customer"?S="/api/method/force_trans_customization.api.issues.search_customers":l.field==="contact"?S="/api/method/force_trans_customization.api.issues.search_contacts":l.field==="lead"?S="/api/method/force_trans_customization.api.issues.search_leads":l.field==="custom_assigned_csm_team"?S="/api/method/force_trans_customization.api.issues.search_user_groups":l.field==="custom_users_assigned"&&(S="/api/method/force_trans_customization.api.issues.search_users"),S){const ae=yield fetch(S,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({search_query:u||"",limit:10,doctype_filter:l.field==="custom_users_assigned"?"User":void 0})});ae.ok&&(G=(yield ae.json()).message||[])}l.suggestions=G,!l.suggestions||l.suggestions.length===0?l.selectedLinkIndex=-1:i>=0&&i<l.suggestions.length?l.selectedLinkIndex=i:l.selectedLinkIndex>=l.suggestions.length&&(l.selectedLinkIndex=Math.max(0,l.suggestions.length-1))}catch(G){console.error("Search error:",G),l.suggestions=[]}finally{l.loading=!1}}),300)}),ge=(l,u)=>h(l).map(G=>({label:G.label,onClick:()=>{u.operator!==G.value&&(v(l)==="date"&&(G.value==="between"?u.value&&!u.startValue&&(u.startValue=u.value,u.endValue=""):u.operator==="between"&&(u.startValue&&!u.value&&(u.value=u.startValue),u.startValue="",u.endValue="")),u.multiSelectValue=null,u.searchValue="",u.suggestions=[],u.searchOptions=[]),u.operator=G.value}})),he=(l,u)=>{var G;return((G=h(u).find(S=>S.value===l))==null?void 0:G.label)||l},k=(l,u)=>{const G=w(u).find(S=>S.value===l);return G?G.label:l},P=l=>{l.startValue&&l.endValue?l.value=`${l.startValue},${l.endValue}`:l.value=""},$=l=>{var S;const u=v(l);let i="equals";u==="link"?i="in":u==="tags"?i="has":i=((S=h(l)[0])==null?void 0:S.value)||"equals";const G={id:++m,field:l,operator:i,value:"",startValue:"",endValue:"",searchValue:"",displayValue:"",suggestions:[],showSuggestions:!1,loading:!1,userDisplayMap:{},selectedLinkIndex:-1,tagInput:"",tagSuggestions:[],loadingTags:!1,selectedTagIndex:-1};p.value.push(G)},D=l=>{p.value.splice(l,1)},ie=l=>{y.value.splice(l,1),Je()},te=()=>pe(this,null,function*(){if(_.value){b.value=!0;try{y.value=JSON.parse(JSON.stringify(p.value)),Je(),c.value=!1}catch(l){console.error("Error applying filters:",l)}finally{setTimeout(()=>{b.value=!1},500)}}}),De=()=>{p.value=[],y.value=[],r.value="",a("update:searchQuery",""),a("update:filters",[]),a("filters-applied",[]),c.value=!1},Je=()=>{const l=y.value.filter(u=>u.value&&u.value.toString().trim()).map(u=>({field:u.field,operator:u.operator,value:u.value.toString().trim(),displayValue:u.displayValue||null}));console.log("Emitting filters:",l),a("update:filters",l),a("filters-applied",l)},We=l=>{r.value=l,a("update:searchQuery",l)},zt=l=>{a("suggestion-selected",l)};return Pe(()=>s.searchQuery,l=>{r.value=l}),Be(()=>{const l=localStorage.getItem("issue_filters");if(l)try{const u=JSON.parse(l);y.value=u.applied||[],p.value=u.pending||[]}catch(u){console.warn("Failed to parse saved filters:",u)}Pe(()=>p.value,u=>{u.forEach(i=>{v(i.field)==="link"&&i.searchValue&&Ne(i,i.searchValue)})},{deep:!0})}),Pe([y,p],()=>{localStorage.setItem("issue_filters",JSON.stringify({applied:y.value,pending:p.value}))},{deep:!0}),(l,u)=>(n(),d("div",No,[o("div",zo,[o("div",Ho,[U(Bo,{ref:"searchBoxRef","model-value":r.value,"onUpdate:modelValue":We,onSuggestionSelected:zt,issues:e.issues,placeholder:"Search issues by title, description, assignee...",class:"awesome-search"},null,8,["model-value","issues"]),r.value?(n(),d("div",Ko," Searching in "+T(e.filteredCount)+" issues ",1)):E("",!0)])]),o("div",qo,[o("div",Jo,[o("div",Wo,[o("button",{onClick:u[0]||(u[0]=i=>c.value=!c.value),class:"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors"},[u[4]||(u[4]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),u[5]||(u[5]=o("span",null,"Filters",-1)),y.value.length>0?(n(),d("span",Qo,T(y.value.length),1)):E("",!0)]),y.value.length>0?(n(),d("div",Go,[(n(!0),d(Y,null,se(y.value,(i,G)=>(n(),d("div",{key:i.id,class:"flex items-center space-x-1 bg-green-100 border border-green-200 rounded px-2 py-1 text-sm whitespace-nowrap"},[o("span",Xo,T(f(i.field)),1),o("span",Yo,T(i.operator),1),o("span",Zo,T(L(i)),1),o("button",{onClick:S=>ie(G),class:"text-green-400 hover:text-red-600 ml-1"},u[6]||(u[6]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ea)]))),128))])):E("",!0)]),o("div",ta,[y.value.length>0||r.value?(n(),d("button",{key:0,onClick:De,class:"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors"}," Clear All ")):E("",!0),p.value.length>0?(n(),d("button",{key:1,onClick:te,class:z(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",b.value?"bg-blue-500 text-white cursor-wait":_.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600 cursor-not-allowed"]),disabled:!_.value||b.value},[b.value?(n(),d("span",oa,u[7]||(u[7]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),oe(" Applying... ")]))):(n(),d("span",aa,T(_.value?"Apply Filters":"Filters Applied"),1))],10,sa)):E("",!0)])])]),c.value?(n(),d("div",la,[o("div",{class:"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg",onClick:u[2]||(u[2]=me(()=>{},["stop"]))},[o("div",na,[o("div",ra,[u[8]||(u[8]=o("div",{class:"p-3 border-b border-gray-200"},[o("h4",{class:"text-sm font-medium text-gray-900"},"Add Filter")],-1)),o("div",ia,[(n(),d(Y,null,se(g,i=>o("button",{key:i.value,onClick:me(G=>$(i.value),["stop"]),class:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center justify-between"},[o("span",null,T(i.label),1),o("span",ca,T(i.type),1)],8,ua)),64))])]),o("div",da,[o("div",ga,[p.value.length===0?(n(),d("div",pa,u[9]||(u[9]=[o("p",{class:"text-sm"},"Select a field from the left to add a filter",-1)]))):(n(),d("div",ma,[(n(!0),d(Y,null,se(p.value,(i,G)=>(n(),d("div",{key:i.id,class:"grid grid-cols-12 gap-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-shadow"},[o("div",va,[o("span",fa,T(f(i.field)),1)]),o("div",ha,[U(x(Ms),{options:ge(i.field,i),placement:"left"},{default:J(({open:S})=>[o("button",{class:z(["w-full px-3 py-2 text-sm border rounded-md transition-all duration-200 flex items-center justify-between bg-white hover:bg-gray-50",S?"border-blue-500 ring-2 ring-blue-200 shadow-md":"border-gray-300 hover:border-gray-400 shadow-sm"])},[o("span",ba,T(he(i.operator,i.field)),1),u[10]||(u[10]=o("svg",{class:"w-4 h-4 text-gray-400 flex-shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2)]),_:2},1032,["options"])]),o("div",ya,[v(i.field)==="text"?be((n(),d("input",{key:0,"onUpdate:modelValue":S=>i.value=S,type:"text",placeholder:R(i.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,xa)),[[Ce,i.value]]):v(i.field)==="email"?be((n(),d("input",{key:1,"onUpdate:modelValue":S=>i.value=S,type:"email",placeholder:R(i.field),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,wa)),[[Ce,i.value]]):v(i.field)==="datetime"?(n(),d("div",_a,[i.operator==="between"?(n(),d("div",ka,[o("div",null,[be(o("input",{"onUpdate:modelValue":S=>i.startValue=S,type:"datetime-local",placeholder:"Start date and time",onInput:S=>P(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ca),[[Ce,i.startValue]]),u[11]||(u[11]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[be(o("input",{"onUpdate:modelValue":S=>i.endValue=S,type:"datetime-local",placeholder:"End date and time",onInput:S=>P(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Sa),[[Ce,i.endValue]]),u[12]||(u[12]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(n(),d("div",Ia,[be(o("input",{"onUpdate:modelValue":S=>i.value=S,type:"datetime-local",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,$a),[[Ce,i.value]]),u[13]||(u[13]=o("p",{class:"text-xs text-gray-500 italic mt-1"},"Select date and time",-1))]))])):v(i.field)==="date"?(n(),d("div",Ta,[i.operator==="between"?(n(),d("div",Pa,[o("div",null,[be(o("input",{"onUpdate:modelValue":S=>i.startValue=S,type:"date",onInput:S=>P(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ra),[[Ce,i.startValue]]),u[14]||(u[14]=o("p",{class:"text-xs text-gray-500 mt-1"},"From",-1))]),o("div",null,[be(o("input",{"onUpdate:modelValue":S=>i.endValue=S,type:"date",onInput:S=>P(i),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Da),[[Ce,i.endValue]]),u[15]||(u[15]=o("p",{class:"text-xs text-gray-500 mt-1"},"To",-1))])])):(n(),d("div",Ma,[be(o("input",{"onUpdate:modelValue":S=>i.value=S,type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,8,La),[[Ce,i.value]])]))])):v(i.field)==="select"?(n(),d("div",Fa,[i.isMultiSelect?(n(),d("div",ja,[K(i.value).length>0?(n(),d("div",Ua,[(n(!0),d(Y,null,se(K(i.value),(S,ae)=>(n(),d("span",{key:ae,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[oe(T(k(S,i.field))+" ",1),o("button",{onClick:Ee=>B(i,ae),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},u[16]||(u[16]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ba)]))),128))])):E("",!0)])):(n(),d("div",Oa,[i.field==="priority"||i.field==="status"||i.field==="issue_type"?be((n(),d("select",{key:0,"onUpdate:modelValue":S=>i.value=S,onKeydown:u[1]||(u[1]=Me(me(S=>S.target.blur(),["prevent"]),["enter"])),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},[o("option",Ea,"Select "+T(f(i.field))+"...",1),(n(!0),d(Y,null,se(w(i.field),S=>(n(),d("option",{key:S.value,value:S.value},T(S.label),9,Aa))),128))],40,Va)),[[cs,i.value]]):E("",!0)]))])):v(i.field)==="link"?(n(),d("div",Na,[o("div",za,[K(i.value).length>0?(n(),d("div",Ha,[(n(!0),d(Y,null,se(K(i.value),(S,ae)=>(n(),d("span",{key:ae,class:"inline-flex items-center px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full border border-blue-200 hover:bg-blue-200 transition-colors"},[oe(T(j(S,i))+" ",1),o("button",{onClick:Ee=>B(i,ae),class:"ml-1 text-blue-600 hover:text-red-600 transition-colors"},u[17]||(u[17]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Ka)]))),128))])):E("",!0),o("div",qa,[be(o("input",{"onUpdate:modelValue":S=>i.searchValue=S,onInput:S=>Ne(i,i.searchValue),onKeydown:[Me(me(S=>ee(i,"up"),["prevent"]),["up"]),Me(me(S=>ee(i,"down"),["prevent"]),["down"]),Me(me(S=>Z(i),["prevent"]),["enter"]),Me(S=>A(i),["escape"])],type:"text",placeholder:`Search and add ${f(i.field)}...`,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,Ja),[[Ce,i.searchValue]]),i.loading?(n(),d("div",Wa,u[18]||(u[18]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):E("",!0)]),i.suggestions&&i.suggestions.length>0&&i.searchValue?(n(),d("div",Qa,[(n(!0),d(Y,null,se(i.suggestions,(S,ae)=>(n(),d("button",{key:ae,onClick:Ee=>W(i,S),class:z(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",i.selectedLinkIndex===ae?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:i.selectedLinkIndex===ae?"selectedLinkOption":null},[o("div",Xa,T(S.label),1),o("div",Ya,T(S.subtitle),1)],10,Ga))),128))])):E("",!0)])])):v(i.field)==="tags"?(n(),d("div",Za,[N(i.value).length>0?(n(),d("div",el,[(n(!0),d(Y,null,se(N(i.value),(S,ae)=>(n(),d("span",{key:ae,style:$e(_e(S)),class:"inline-flex items-center px-2 py-1 text-xs rounded-full border transition-colors"},[oe(T(S)+" ",1),o("button",{onClick:Ee=>H(i,ae),class:"ml-1 hover:text-red-600 transition-colors"},u[19]||(u[19]=[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,tl)],4))),128))])):E("",!0),o("div",sl,[be(o("input",{"onUpdate:modelValue":S=>i.tagInput=S,onInput:S=>M(i,i.tagInput),onKeyup:Me(S=>ce(i),["enter"]),onKeydown:[Me(me(S=>q(i,"up"),["prevent"]),["up"]),Me(me(S=>q(i,"down"),["prevent"]),["down"]),Me(S=>re(i),["escape"])],type:"text",placeholder:"Search and select tags from dropdown...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 hover:border-gray-400"},null,40,ol),[[Ce,i.tagInput]]),i.loadingTags?(n(),d("div",al,u[20]||(u[20]=[o("svg",{class:"animate-spin h-4 w-4 text-blue-500",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):E("",!0)]),i.tagSuggestions&&i.tagSuggestions.length>0?(n(),d("div",ll,[(n(!0),d(Y,null,se(i.tagSuggestions,(S,ae)=>(n(),d("button",{key:ae,onClick:Ee=>V(i,S),class:z(["w-full text-left px-3 py-2 text-sm border-b border-gray-100 last:border-b-0 transition-colors",i.selectedTagIndex===ae?"bg-blue-100 text-blue-900":"hover:bg-gray-100"]),ref_for:!0,ref:i.selectedTagIndex===ae?"selectedTagOption":null},[o("div",rl,[o("div",null,[o("div",il,T(S.label),1),o("div",ul,T(S.subtitle),1)]),S.color?(n(),d("div",{key:0,class:"w-3 h-3 rounded-full border border-gray-300",style:$e({backgroundColor:S.color})},null,4)):E("",!0)])],10,nl))),128))])):E("",!0),u[21]||(u[21]=o("p",{class:"text-xs text-gray-500 italic"},"Search existing tags and select from dropdown only",-1))])):E("",!0)]),o("div",cl,[o("button",{onClick:S=>D(G),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group"},u[22]||(u[22]=[o("svg",{class:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,dl)])]))),128))])),p.value.length>0?(n(),d("div",gl,[o("button",{onClick:De,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear All "),o("button",{onClick:te,disabled:!_.value||b.value,class:z(["px-4 py-2 text-sm font-medium rounded transition-all duration-200",b.value?"bg-gray-700 text-white cursor-wait":_.value?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-600 cursor-not-allowed"])},[b.value?(n(),d("span",ml,u[23]||(u[23]=[o("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),oe(" Applying... ")]))):(n(),d("span",vl,T(_.value?"Apply Filters":"Filters Applied"),1))],10,pl)])):E("",!0)])])])]),o("div",{class:"fixed inset-0 z-40",onClick:u[3]||(u[3]=i=>c.value=!1)})])):E("",!0)]))}},hl=Ke(fl,[["__scopeId","data-v-f08aca36"]]),bl={class:"bg-white rounded-lg shadow-sm border mt-4"},yl={class:"px-6 py-4 flex items-center justify-between"},xl={class:"text-sm text-gray-700"},wl={key:0},_l={key:1},kl={key:0,class:"flex items-center space-x-2"},Cl={class:"flex items-center space-x-1"},Sl={key:1,class:"px-2 text-gray-500"},Il={key:2,class:"px-2 text-gray-500"},$l={key:1,class:"flex items-center space-x-2"},Tl={__name:"IssuePagination",props:{currentPage:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},showItemsPerPage:{type:Boolean,default:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage","pageChange"],setup(e,{emit:t}){const s=e,a=t,r=O(s.itemsPerPage);Pe(()=>s.itemsPerPage,w=>{r.value=w});const c=F(()=>Math.ceil(s.totalItems/s.itemsPerPage)),p=F(()=>s.totalItems===0?0:(s.currentPage-1)*s.itemsPerPage+1),y=F(()=>{const w=s.currentPage*s.itemsPerPage;return Math.min(w,s.totalItems)}),m=F(()=>{const w=[],L=s.maxVisiblePages,K=s.currentPage,B=c.value;if(B<=L)for(let N=1;N<=B;N++)w.push(N);else{let N=Math.max(1,K-Math.floor(L/2)),H=Math.min(B,N+L-1);H-N+1<L&&(N=Math.max(1,H-L+1)),N>1&&(N=Math.max(2,N)),H<B&&(H=Math.min(B-1,H));for(let j=N;j<=H;j++)w.push(j)}return w}),b=F(()=>c.value>s.maxVisiblePages&&!m.value.includes(1)),g=F(()=>c.value>s.maxVisiblePages&&!m.value.includes(c.value)),I=F(()=>b.value&&m.value.length>0&&m.value[0]>2),C=F(()=>g.value&&m.value.length>0&&m.value[m.value.length-1]<c.value-1),_=F(()=>[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]),v=w=>{w>=1&&w<=c.value&&w!==s.currentPage&&(a("update:currentPage",w),a("pageChange",{page:w,itemsPerPage:s.itemsPerPage,offset:(w-1)*s.itemsPerPage}))},f=()=>{s.currentPage>1&&v(s.currentPage-1)},R=()=>{s.currentPage<c.value&&v(s.currentPage+1)},h=()=>{const w=r.value;a("update:itemsPerPage",w);const L=(s.currentPage-1)*s.itemsPerPage+1,K=Math.ceil(L/w);a("pageChange",{page:K,itemsPerPage:w,offset:(K-1)*w})};return(w,L)=>(n(),d("div",bl,[o("div",yl,[o("div",xl,[e.totalItems>0?(n(),d("span",wl," Showing "+T(p.value)+" to "+T(y.value)+" of "+T(e.totalItems)+" results ",1)):(n(),d("span",_l," No results found "))]),c.value>1?(n(),d("div",kl,[U(x(xe),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===1,onClick:f},{prefix:J(()=>[U(x(Fe),{name:"chevron-left",class:"h-4 w-4"})]),default:J(()=>[L[3]||(L[3]=oe(" Previous "))]),_:1,__:[3]},8,["disabled"]),o("div",Cl,[b.value?(n(),Q(x(xe),{key:0,theme:"gray",variant:"outline",size:"sm",class:z({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==1,"pagination-active-btn":e.currentPage===1}),onClick:L[0]||(L[0]=K=>v(1))},{default:J(()=>L[4]||(L[4]=[oe(" 1 ")])),_:1,__:[4]},8,["class"])):E("",!0),I.value?(n(),d("span",Sl,"...")):E("",!0),(n(!0),d(Y,null,se(m.value,K=>(n(),Q(x(xe),{key:K,theme:"gray",variant:"outline",size:"sm",class:z({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==K,"pagination-active-btn":e.currentPage===K}),onClick:B=>v(K)},{default:J(()=>[oe(T(K),1)]),_:2},1032,["class","onClick"]))),128)),C.value?(n(),d("span",Il,"...")):E("",!0),g.value?(n(),Q(x(xe),{key:3,theme:"gray",variant:"outline",size:"sm",class:z({"bg-blue-50 text-blue-600 border-blue-200":e.currentPage!==c.value,"pagination-active-btn":e.currentPage===c.value}),onClick:L[1]||(L[1]=K=>v(c.value))},{default:J(()=>[oe(T(c.value),1)]),_:1},8,["class"])):E("",!0)]),U(x(xe),{theme:"gray",variant:"outline",size:"sm",disabled:e.currentPage===c.value,onClick:R},{suffix:J(()=>[U(x(Fe),{name:"chevron-right",class:"h-4 w-4"})]),default:J(()=>[L[5]||(L[5]=oe(" Next "))]),_:1,__:[5]},8,["disabled"])])):E("",!0),e.showItemsPerPage?(n(),d("div",$l,[L[6]||(L[6]=o("span",{class:"text-sm text-gray-700"},"Items per page:",-1)),U(x(ds),{modelValue:r.value,"onUpdate:modelValue":L[2]||(L[2]=K=>r.value=K),options:_.value,onChange:h,class:"w-20"},null,8,["modelValue","options"])])):E("",!0)])]))}},Pl=Ke(Tl,[["__scopeId","data-v-898deb80"]]),Rl={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Dl={class:"text-3xl font-bold text-gray-900"},Ml={class:"text-3xl font-bold text-blue-600"},Ll={class:"text-3xl font-bold text-green-600"},Fl={class:"text-3xl font-bold text-orange-600"},Ol={class:"text-3xl font-bold text-purple-600"},Vl=3e4,El={__name:"IssueStats",props:{issues:{type:Array,default:()=>[]},activeFilter:{type:String,default:"team_tickets"}},emits:["filter-changed"],setup(e,{expose:t,emit:s}){const a=e,r=s,c=ze({team_tickets:0,open_tickets:0,assigned_to_me:0,actionable_tickets:0,response_tickets:0}),p=F(()=>c.value.team_tickets),y=F(()=>c.value.open_tickets),m=F(()=>c.value.assigned_to_me),b=F(()=>c.value.actionable_tickets),g=F(()=>c.value.response_tickets);let I=null,C=0;const _=()=>pe(this,null,function*(){const h=Date.now();if(I&&h-C<Vl)return I;try{const w=yield vs("force_trans_customization.api.issues.get_issue_stats");return c.value=w,I=w,C=h,w}catch(w){return console.error("Error fetching issue stats:",w),c.value}});let v=null;const f=()=>{v&&clearTimeout(v),v=setTimeout(()=>{_()},500)};Be(()=>{_()}),Pe(()=>a.issues.length,()=>{f()});const R=h=>{r("filter-changed",h)};return t({refreshStats:_}),(h,w)=>(n(),d("div",Rl,[o("div",{onClick:w[0]||(w[0]=L=>R("team_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="team_tickets"?"ring-2 ring-gray-500 bg-gray-50":"hover:bg-gray-50"])},[o("div",Dl,T(p.value),1),w[5]||(w[5]=o("div",{class:"text-sm text-gray-600 mt-1"},"Team Tickets",-1))],2),o("div",{onClick:w[1]||(w[1]=L=>R("open_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="open_tickets"?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-blue-50"])},[o("div",Ml,T(y.value),1),w[6]||(w[6]=o("div",{class:"text-sm text-gray-600 mt-1"},"Open Tickets",-1))],2),o("div",{onClick:w[2]||(w[2]=L=>R("assigned_to_me")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="assigned_to_me"?"ring-2 ring-green-500 bg-green-50":"hover:bg-green-50"])},[o("div",Ll,T(m.value),1),w[7]||(w[7]=o("div",{class:"text-sm text-gray-600 mt-1"},"Assigned To Me",-1))],2),o("div",{onClick:w[3]||(w[3]=L=>R("actionable_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="actionable_tickets"?"ring-2 ring-orange-500 bg-orange-50":"hover:bg-orange-50"]),title:"Tickets where customer awaits our reply"},[o("div",Fl,T(b.value),1),w[8]||(w[8]=o("div",{class:"text-sm text-gray-600 mt-1"},"Customers Awaiting Our Reply",-1))],2),o("div",{onClick:w[4]||(w[4]=L=>R("response_tickets")),class:z(["bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md",e.activeFilter==="response_tickets"?"ring-2 ring-purple-500 bg-purple-50":"hover:bg-purple-50"]),title:"Tickets awaiting customer response"},[o("div",Ol,T(g.value),1),w[9]||(w[9]=o("div",{class:"text-sm text-gray-600 mt-1"},"Awaiting Response from Customer",-1))],2)]))}},Al={props:["status"],template:`
    <Badge :label="displayStatus" :theme="statusTheme" variant="subtle" />
  `,computed:{displayStatus(){return this.status||"New"},statusTheme(){const e=this.status||"New";return{New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"}[e]||"gray"}},components:{Badge:dt}},jl={props:["priority"],template:`
    <div class="flex items-center gap-2">
      <div :class="priorityIndicatorClass" class="w-2 h-2 rounded-full"></div>
      <Badge :label="displayPriority" :theme="priorityTheme" variant="subtle" />
    </div>
  `,computed:{displayPriority(){return this.priority||"Medium"},priorityTheme(){const e=this.priority||"Medium";return{Critical:"red",High:"red",Medium:"yellow",Low:"green"}[e]||"yellow"},priorityIndicatorClass(){const e=this.priority||"Medium";return{"bg-red-500":e==="Critical","bg-red-400":e==="High","bg-yellow-400":e==="Medium","bg-green-400":e==="Low"}}},components:{Badge:dt}},Ul={components:{ListView:ao,Avatar:Ts,Badge:dt,Button:xe,FeatherIcon:Fe,ListHeader:Ot,ListHeaderItem:Ft,ListRow:pt,ListRowItem:Vt,ListRows:Et,ListSelectBanner:At,StatusBadge:Al,PriorityBadge:jl,Tooltip:Dt},props:{issues:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},sortField:{type:String,default:"creation"},sortDirection:{type:String,default:"desc"}},emits:["sort"],setup(e,{emit:t}){const s=O(!1),a=O(null),r=O({x:0,y:0}),c=O(!1),p=O({x:0,y:0}),y=O(null),m=O(!1),b=O({x:0,y:0}),g=O(null),I=k=>{if(!k||typeof k!="string")return"?";if(k.includes("@")){const P=k.split("@")[0];return P.includes(".")||P.includes("_")?P.split(/[._]/).map(D=>D[0]).join("").toUpperCase().slice(0,2):P.slice(0,2).toUpperCase()}return k.includes(" ")?k.split(" ").map(P=>P[0]).join("").toUpperCase().slice(0,2):k.slice(0,2).toUpperCase()},C=k=>{if(!k)return"";const P=k.match(/ISS-(\d{4}-\d+)/);return P?P[1]:k},_=k=>{if(!k)return"";const P=document.createElement("div");return P.innerHTML=k,P.textContent||P.innerText||""},v=k=>k?new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",f=k=>k?new Date(k).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",R=k=>({New:"blue","In Review":"orange",Confirmed:"purple","In Transit":"blue",Delivered:"green",Closed:"green",Open:"red",Replied:"orange","On Hold":"yellow",Resolved:"green"})[k]||"gray",h=k=>({Critical:"red",High:"red",Medium:"yellow",Low:"green"})[k]||"yellow",w=new Map,L=F(()=>e.issues.map(k=>{const P=k.name;if(w.has(P)){const D=w.get(P);if(D.originalStatus===k.status&&D.originalPriority===k.priority&&D.originalSubject===k.subject&&D.originalUsersAssigned===JSON.stringify(k.custom_users_assigned)&&D.originalIsResponseExpected===k.custom_is_response_expected)return D.transformed}const $=nt(Ie({},k),{status:{label:k.status||"New",color:R(k.status)},priority:{label:k.priority||"Medium",color:h(k.priority)}});return w.set(P,{transformed:$,originalStatus:k.status,originalPriority:k.priority,originalSubject:k.subject,originalUsersAssigned:JSON.stringify(k.custom_users_assigned),originalIsResponseExpected:k.custom_is_response_expected}),$})),K=ze([{label:"Issue ID",key:"name",width:"90px",sortable:!0},{label:"Title",key:"subject",width:3,sortable:!0},{label:"Status",key:"status",width:"110px",sortable:!0},{label:"Raised By",key:"raised_by",width:"120px",sortable:!0},{label:"Assigned Users",key:"custom_users_assigned",width:"120px",sortable:!1},{label:"CSM Team",key:"custom_assigned_csm_team",width:"100px",sortable:!1},{label:"Tags",key:"_user_tags",width:"100px",sortable:!1},{label:"Created At",key:"creation",width:"90px",sortable:!0}]),B=ze({showTooltip:!1,selectable:!0,resizeColumn:!1,rowHeight:60,emptyState:{title:"No tickets found",description:"Try adjusting your search or filter criteria"},onRowClick:k=>{j(k)}}),N=k=>{console.log("Selected rows:",k)},H=k=>`${window.location.origin}/app/issue/${k.name}`,j=k=>{console.log("Issue clicked:",k);const P=H(k);window.open(P,"_blank")},W=k=>{const P=k||"New";return{"bg-blue-500":P==="New","bg-orange-500":P==="In Review","bg-purple-500":P==="Confirmed","bg-blue-500":P==="In Transit","bg-green-500":P==="Delivered","bg-green-500":P==="Closed","bg-red-500":P==="Open","bg-orange-500":P==="Replied","bg-yellow-500":P==="On Hold","bg-green-500":P==="Resolved"}},ee=k=>{const P=k||"Medium";return{"bg-red-500":P==="Critical"||P==="High","bg-yellow-500":P==="Medium","bg-green-500":P==="Low"}},Z=k=>({New:"bg-blue-100 text-blue-800","In Review":"bg-orange-100 text-orange-800",Confirmed:"bg-purple-100 text-purple-800","In Transit":"bg-blue-100 text-blue-800",Delivered:"bg-green-100 text-green-800",Closed:"bg-green-100 text-green-800",Open:"bg-red-100 text-red-800",Replied:"bg-orange-100 text-orange-800","On Hold":"bg-yellow-100 text-yellow-800",Resolved:"bg-green-100 text-green-800"})[k||"New"]||"bg-gray-100 text-gray-800",A=k=>({Critical:"bg-red-100 text-red-800",High:"bg-red-100 text-red-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-green-100 text-green-800"})[k||"Medium"]||"bg-yellow-100 text-yellow-800",X=k=>{const P=k||"Medium";return{"bg-red-500":P==="Critical","bg-red-400":P==="High","bg-yellow-400":P==="Medium","bg-green-400":P==="Low"}},ue=(k,P)=>{const $=k.target.getBoundingClientRect();r.value={x:$.left+$.width/2,y:$.top-10},a.value=P,s.value=!0},M=()=>{s.value=!1,a.value=null},V=(k,P)=>{if(!P||P.length===0)return;const $=k.target.getBoundingClientRect();p.value={x:$.left+$.width/2,y:$.top-10},y.value=P,c.value=!0},q=()=>{c.value=!1,y.value=null},ce=(k,P)=>{if(!P||!P.subject)return;const $=k.currentTarget.getBoundingClientRect();b.value={x:$.left+$.width/2,y:$.top-10},g.value={subject:P.subject,description:P.description},m.value=!0},re=()=>{m.value=!1,g.value=null},Oe=k=>{let P="asc";e.sortField===k&&(P=e.sortDirection==="asc"?"desc":"asc"),t("sort",{field:k,direction:P})},_e=k=>e.sortField!==k?"arrow-up-down":e.sortDirection==="asc"?"arrow-up":"arrow-down",ke=k=>e.sortField!==k?"text-gray-400":"text-blue-600",Ne=k=>e.sortField===k?"bg-blue-50":"",ge=new Map;return{columns:K,listOptions:B,transformedIssues:L,handleSelections:N,getIssueUrl:H,handleIssueClick:j,getStatusColor:W,getPriorityColor:ee,getStatusBadgeClass:Z,getPriorityBadgeClass:A,getPriorityIndicatorClass:X,getInitials:I,formatIssueId:C,stripHtml:_,formatDate:v,formatTime:f,showPopup:s,popupUser:a,popupPosition:r,showUserPopup:ue,hideUserPopup:M,handleColumnSort:Oe,getSortIcon:_e,getSortIconClass:ke,getSortButtonClass:Ne,getTagStyle:k=>{if(ge.has(k))return ge.get(k);const P=Bt(k);let $;if(P){const D=P.replace("#",""),ie=parseInt(D.substr(0,2),16),te=parseInt(D.substr(2,2),16),De=parseInt(D.substr(4,2),16),Je=`rgba(${ie}, ${te}, ${De}, 0.1)`,We=`rgb(${Math.max(ie-50,0)}, ${Math.max(te-50,0)}, ${Math.max(De-50,0)})`;$={backgroundColor:Je,color:We,borderColor:We}}else $={backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"};return ge.set(k,$),$},showTagsPopup:c,tagsPopupPosition:p,tagsPopupData:y,showTagsPopupFn:V,hideTagsPopupFn:q,showIssueDetailsPopup:m,issueDetailsPopupPosition:b,issueDetailsPopupData:g,showIssueDetailsPopupFn:ce,hideIssueDetailsPopup:re}}},Bl={class:"bg-white rounded-lg shadow-sm border"},Nl={key:0,class:"px-6 py-12 text-center text-gray-500"},zl=["onClick"],Hl=["href","onClick"],Kl=["onMouseenter"],ql={class:"font-medium truncate"},Jl={key:0,class:"relative"},Wl={class:"text-gray-500 text-sm mt-1 truncate max-w-xs"},Ql={class:"text-sm font-medium text-gray-900 truncate block"},Gl={key:3,class:"flex flex-wrap gap-1"},Xl=["onMouseenter"],Yl={key:1,class:"text-gray-400 text-sm"},Zl={class:"text-sm font-medium text-gray-900 truncate block"},en=["onMouseenter"],tn=["title"],sn={class:"truncate"},on={key:0,class:"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500"},an={key:1,class:"text-gray-400 text-sm"},ln={key:6,class:"flex flex-col"},nn={class:"text-sm"},rn={class:"text-xs text-gray-400"},un={key:8},cn={class:"flex gap-2"},dn={class:"text-sm"},gn={class:"font-semibold text-gray-900 mb-1"},pn={class:"text-gray-600 flex items-center gap-1"},mn={class:"text-xs text-gray-500 mt-1"},vn={class:"text-sm"},fn={class:"font-bold text-gray-900 mb-3"},hn={key:0,class:"text-gray-700 whitespace-pre-wrap max-h-48 overflow-y-auto"},bn={key:1,class:"text-gray-400 italic"},yn={class:"text-sm"},xn={class:"flex flex-wrap gap-1"};function wn(e,t,s,a,r,c){const p=ye("FeatherIcon"),y=ye("ListHeaderItem"),m=ye("ListHeader"),b=ye("Avatar"),g=ye("Tooltip"),I=ye("ListRowItem"),C=ye("ListRow"),_=ye("ListRows"),v=ye("Button"),f=ye("ListSelectBanner"),R=ye("ListView");return n(),d("div",Bl,[t[6]||(t[6]=o("div",{class:"px-6 py-4 border-b border-gray-200"},[o("h3",{class:"text-lg font-medium text-gray-900"},"Issues")],-1)),s.loading?(n(),d("div",Nl,t[3]||(t[3]=[o("div",{class:"flex items-center justify-center"},[o("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),o("span",{class:"ml-2"},"Loading issues...")],-1)]))):(n(),Q(R,{key:1,columns:a.columns,rows:a.transformedIssues,"row-key":"name",options:a.listOptions,"onUpdate:selections":a.handleSelections,class:"p-4"},{default:J(()=>[U(m,null,{default:J(()=>[(n(!0),d(Y,null,se(a.columns,h=>(n(),Q(y,{key:h.key,item:h},gs({_:2},[h.icon?{name:"prefix",fn:J(({item:w})=>[U(p,{name:w.icon,class:"h-4 w-4"},null,8,["name"])]),key:"0"}:void 0,h.sortable?{name:"suffix",fn:J(()=>[o("button",{onClick:w=>a.handleColumnSort(h.key),class:z(["ml-2 p-1 rounded hover:bg-gray-100 transition-colors",a.getSortButtonClass(h.key)])},[U(p,{name:a.getSortIcon(h.key),class:z(["h-3 w-3",a.getSortIconClass(h.key)])},null,8,["name","class"])],10,zl)]),key:"1"}:void 0]),1032,["item"]))),128))]),_:1}),U(_,null,{default:J(()=>[(n(!0),d(Y,null,se(a.transformedIssues,h=>(n(),Q(C,{key:h.name,row:h,class:z({"bg-orange-50 hover:bg-orange-100":h.custom_is_response_expected===1})},{default:J(({column:w,item:L})=>[U(I,{item:L,align:w.align},{prefix:J(()=>[w.key==="raised_by"?(n(),Q(b,{key:0,size:"sm",label:a.getInitials(h.raised_by),class:"mr-3"},null,8,["label"])):E("",!0)]),default:J(()=>{var K;return[w.key==="name"?(n(),d("a",{key:0,href:a.getIssueUrl(h),target:"_blank",class:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-sm",onClick:me(B=>a.handleIssueClick(h),["prevent"])},T(a.formatIssueId(L)),9,Hl)):w.key==="subject"?(n(),d("div",{key:1,class:"max-w-xs cursor-pointer",onMouseenter:B=>a.showIssueDetailsPopupFn(B,h),onMouseleave:t[0]||(t[0]=(...B)=>a.hideIssueDetailsPopup&&a.hideIssueDetailsPopup(...B))},[o("div",ql,T(h.subject),1),h.description&&h.description.length>0?(n(),d("div",Jl,[o("div",Wl,T(a.stripHtml(h.description)),1)])):E("",!0)],40,Kl)):w.key==="raised_by"?(n(),Q(g,{key:2,text:`Raised By: ${L||"Not assigned"}`},{default:J(()=>[o("span",Ql,T(L||"-"),1)]),_:2},1032,["text"])):w.key==="custom_users_assigned"?(n(),d("div",Gl,[h.custom_users_assigned&&h.custom_users_assigned.length>0?(n(!0),d(Y,{key:0},se(h.custom_users_assigned.filter(B=>B.user_assigned),B=>(n(),d("div",{key:B.name||B,class:"relative inline-block"},[o("span",{class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors",onMouseenter:N=>a.showUserPopup(N,B),onMouseleave:t[1]||(t[1]=(...N)=>a.hideUserPopup&&a.hideUserPopup(...N))},T(a.getInitials(B.user_assigned)),41,Xl)]))),128)):(n(),d("span",Yl,"-"))])):w.key==="custom_assigned_csm_team"?(n(),Q(g,{key:4,text:`CSM Team: ${h.custom_assigned_csm_team||"Not assigned"}`},{default:J(()=>[o("span",Zl,T(h.custom_assigned_csm_team||"-"),1)]),_:2},1032,["text"])):w.key==="_user_tags"?(n(),d("div",{key:5,class:"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors",onMouseenter:B=>a.showTagsPopupFn(B,h._user_tags),onMouseleave:t[2]||(t[2]=(...B)=>a.hideTagsPopupFn&&a.hideTagsPopupFn(...B))},[h._user_tags&&h._user_tags.length>0?(n(),d(Y,{key:0},[o("span",{style:$e(a.getTagStyle(h._user_tags[0])),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16",title:h._user_tags[0]},[o("span",sn,T(h._user_tags[0]),1)],12,tn),h._user_tags.length>1?(n(),d("span",on," +"+T(h._user_tags.length-1),1)):E("",!0)],64)):(n(),d("span",an,"-"))],40,en)):w.key==="creation"?(n(),d("div",ln,[o("span",nn,T(a.formatDate(L)),1),o("span",rn,T(a.formatTime(L)),1)])):w.key==="status"?(n(),Q(g,{key:7,text:`Status: ${((K=h.status)==null?void 0:K.label)||h.status||"New"}`},{default:J(()=>{var B,N;return[o("span",{class:z([a.getStatusBadgeClass(((B=h.status)==null?void 0:B.label)||h.status||"New"),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},T(((N=h.status)==null?void 0:N.label)||h.status||"New"),3)]}),_:2},1032,["text"])):(n(),d("span",un,T(L),1))]}),_:2},1032,["item","align"])]),_:2},1032,["row","class"]))),128))]),_:1}),U(f,null,{actions:J(({unselectAll:h})=>[o("div",cn,[U(v,{variant:"ghost",label:"Delete"}),U(v,{variant:"ghost",label:"Unselect all",onClick:h},null,8,["onClick"])])]),_:1})]),_:1},8,["columns","rows","options","onUpdate:selections"])),a.showPopup&&a.popupUser&&typeof a.popupUser=="object"?(n(),d("div",{key:2,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48",style:$e({left:a.popupPosition.x+"px",top:a.popupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",dn,[o("div",gn,T(a.popupUser.user_assigned||"Unknown User"),1),o("div",pn,[t[4]||(t[4]=o("span",{class:"inline-block w-2 h-2 bg-blue-500 rounded-full"},null,-1)),oe(" "+T(a.popupUser.team||"No Team"),1)]),o("div",mn," Assigned: "+T(a.formatDate(a.popupUser.assigned_date)),1)])],4)):E("",!0),a.showIssueDetailsPopup&&a.issueDetailsPopupData?(n(),d("div",{key:3,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 max-w-md",style:$e({left:a.issueDetailsPopupPosition.x+"px",top:a.issueDetailsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",vn,[o("div",fn,T(a.issueDetailsPopupData.subject),1),a.issueDetailsPopupData.description?(n(),d("div",hn,T(a.stripHtml(a.issueDetailsPopupData.description)),1)):(n(),d("div",bn," No description available "))])],4)):E("",!0),a.showTagsPopup&&a.tagsPopupData?(n(),d("div",{key:4,class:"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs",style:$e({left:a.tagsPopupPosition.x+"px",top:a.tagsPopupPosition.y+"px",transform:"translateX(-50%) translateY(-100%)"})},[o("div",yn,[t[5]||(t[5]=o("div",{class:"font-semibold text-gray-900 mb-2"},"All Tags",-1)),o("div",xn,[(n(!0),d(Y,null,se(a.tagsPopupData,h=>(n(),d("span",{key:h,style:$e(a.getTagStyle(h)),class:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border"},T(h),5))),128))])])],4)):E("",!0)])}const _n=Ke(Ul,[["render",wn]]),kn={class:"fixed top-4 right-4 z-50 space-y-2 max-w-sm"},Cn={class:"flex items-start justify-between"},Sn={class:"flex items-start space-x-3"},In={class:"flex-shrink-0"},$n={class:"flex-1 min-w-0"},Tn={class:"text-sm font-medium text-gray-900"},Pn={class:"text-sm text-gray-600 mt-1"},Rn={class:"text-xs text-gray-500 mt-1"},Dn=["onClick"],Mn={__name:"RealTimeNotifications",props:{notifications:{type:Array,default:()=>[]}},emits:["remove"],setup(e){const t=c=>{const p="bg-white/95 border-l-4",y={success:"border-green-500",info:"border-blue-500",warning:"border-yellow-500",error:"border-red-500"};return`${p} ${y[c]||y.info}`},s=c=>{const p={success:"check-circle",info:"info",warning:"alert-triangle",error:"alert-circle"};return p[c]||p.info},a=c=>{const p={success:"text-green-500",info:"text-blue-500",warning:"text-yellow-500",error:"text-red-500"};return p[c]||p.info},r=c=>{const y=new Date-c,m=Math.floor(y/6e4);if(m<1)return"Just now";if(m<60)return`${m}m ago`;const b=Math.floor(m/60);return b<24?`${b}h ago`:c.toLocaleDateString()};return(c,p)=>(n(),d("div",kn,[U(ps,{name:"notification",tag:"div"},{default:J(()=>[(n(!0),d(Y,null,se(e.notifications,y=>(n(),d("div",{key:y.id,class:z([t(y.type),"p-4 rounded-lg shadow-lg border backdrop-blur-sm"])},[o("div",Cn,[o("div",Sn,[o("div",In,[U(x(Fe),{name:s(y.type),class:z([a(y.type),"h-5 w-5"])},null,8,["name","class"])]),o("div",$n,[o("p",Tn,T(y.title),1),o("p",Pn,T(y.message),1),o("p",Rn,T(r(y.timestamp)),1)])]),o("button",{onClick:m=>c.$emit("remove",y.id),class:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none"},[U(x(Fe),{name:"x",class:"h-4 w-4"})],8,Dn)])],2))),128))]),_:1})]))}},Ln=Ke(Mn,[["__scopeId","data-v-d57fd7d2"]]);function Fn(e,t){let s;return function(...r){const c=()=>{clearTimeout(s),e(...r)};clearTimeout(s),s=setTimeout(c,t)}}function On(){const e=O(""),t=O({status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}),s=O(""),a=Fn(_=>{s.value=_},300);Pe(e,_=>{a(_)});const r=F(()=>{const _={};return s.value.trim()&&(_.subject=["like",`%${s.value.trim()}%`]),t.value.status&&(_.status=t.value.status),t.value.priority&&(_.priority=t.value.priority),t.value.assignee&&(_.raised_by=t.value.assignee),t.value.tags&&(_.issue_type=t.value.tags),_}),c=F(()=>t.value.sortBy||"creation desc"),p=new Map,y=_=>{if(!_||!Array.isArray(_))return[];const v=JSON.stringify({issuesLength:_.length,searchQuery:e.value.trim(),status:t.value.status,priority:t.value.priority,assignee:t.value.assignee,tags:t.value.tags,sortBy:t.value.sortBy});if(p.has(v))return p.get(v);let f=[..._];if(e.value.trim()){const h=e.value.toLowerCase().trim();f=f.filter(w=>{const L=(w.subject||"").toLowerCase(),K=(w.description||"").toLowerCase();return L.includes(h)||K.includes(h)})}t.value.status&&(f=f.filter(h=>h.status===t.value.status)),t.value.priority&&(f=f.filter(h=>h.priority===t.value.priority)),t.value.assignee&&(f=f.filter(h=>h.raised_by===t.value.assignee)),t.value.tags&&(f=f.filter(h=>h.issue_type===t.value.tags));const R=Ae({Critical:4,High:3,Medium:2,Low:1});if(f.sort((h,w)=>{const[L,K]=t.value.sortBy.split(" "),B=h[L]||"",N=w[L]||"";let H=0;return L==="creation"||L==="modified"?H=new Date(B)-new Date(N):L==="priority"?H=(R[B]||0)-(R[N]||0):H=B.toString().localeCompare(N.toString()),K==="desc"?-H:H}),p.size>50){const h=p.keys().next().value;p.delete(h)}return p.set(v,f),f};let m=null,b=null;const g=_=>{if(!_||!Array.isArray(_))return Ae([{label:"All Assignees",value:""}]);const v=_.map(h=>h.raised_by).filter(h=>h&&h.trim()).sort().join("|");if(m&&b===v)return m;const f=[...new Set(_.map(h=>h.raised_by).filter(h=>h&&h.trim()))],R=Ae([{label:"All Assignees",value:""},...f.map(h=>({label:h,value:h}))]);return m=R,b=v,R},I=()=>{e.value="",s.value="",t.value={status:"",priority:"",assignee:"",tags:"",sortBy:"creation desc"}},C=F(()=>e.value.trim()!==""||t.value.status!==""||t.value.priority!==""||t.value.assignee!==""||t.value.tags!==""||t.value.sortBy!=="creation desc");return{searchQuery:e,filters:t,debouncedSearchQuery:s,apiFilters:r,sortOrder:c,hasActiveFilters:C,filterIssues:y,getAssigneeOptions:g,resetFilters:I}}function Vn(e,t,s){const a=ms(),r=O([]),c=O(!1),p=O(!1);let y=null;const m=p.value?15e3:2e3,b=()=>{console.log(`⏰ Setting up debounced refresh with ${m}ms delay`),y&&(clearTimeout(y),console.log("🔄 Cleared existing debounce timer")),y=setTimeout(()=>{console.log("⏰ Debounce timer fired, calling processDocumentRefreshes"),C()},m)},g=()=>{if(!a||c.value)return;a.emit("doctype_subscribe","Issue"),a.off("list_update"),a.on("list_update",j=>{try{if(console.log("📡 Received list_update event:",j),(j==null?void 0:j.doctype)!=="Issue")return;if(R()){console.log("⏸️ Skipping realtime update (avoid condition met)");return}if(j.action==="insert"||j.action==="create"){console.log("📝 Skipping new issue creation update:",j.name);return}console.log("✅ Adding to pending refreshes:",j.name),r.value.push(j),b()}catch(W){console.error("❌ Error processing list_update event:",W)}}),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(j=>{a.on(j,W=>{if((W==null?void 0:W.doctype)!=="Issue"||R())return;const ee={doctype:"Issue",name:W.name,action:j.includes("create")?"insert":j.includes("delete")?"delete":"update",modified_by:W.modified_by||W.owner,timestamp:new Date().toISOString()};if(ee.action==="insert"){console.log("📝 Skipping new issue creation update:",W.name);return}r.value.push(ee),b()})}),c.value=!0},I=()=>{if(!a||!c.value)return;a.emit("doctype_unsubscribe","Issue"),a.off("list_update"),["doctype_update","Issue_update","Issue_create","Issue_delete"].forEach(j=>{a.off(j)}),c.value=!1},C=()=>pe(this,null,function*(){if(console.log("🔄 processDocumentRefreshes called with",r.value.length,"pending refreshes"),!r.value.length){console.log("⏸️ No pending refreshes, returning early");return}const H=window.location.hash||window.location.pathname;if(console.log("🛣️ Current route:",H),!H.includes("issue-tracker")&&!H.includes("issues")&&!H.includes("frontend")){console.log("❌ Not on correct route, clearing pending refreshes and disabling updates"),r.value=[],I();return}console.log("✅ Route check passed, proceeding with refresh");const j=[...new Set(r.value.map(ee=>ee.name))],W=j.length;console.log(`🔄 Processing ${W} document refreshes:`,j),r.value=[];try{yield _(j),window&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("issueListUpdated",{detail:{count:W,documents:j}})),console.log(`✅ Successfully processed ${W} document refreshes`)}catch(ee){console.error("❌ Error updating individual rows, falling back to full refresh:",ee);try{t&&typeof t=="function"?(console.log("🔄 Using custom refresh function for fallback"),yield t()):(console.log("🔄 Using default refresh functions for fallback"),yield qe(),yield st()),console.log("✅ Fallback refresh completed successfully")}catch(Z){console.error("❌ Error in fallback refresh:",Z)}}}),_=H=>pe(this,null,function*(){try{const{activeResource:j,currentData:W}=v();if(!W||!Array.isArray(W)){console.log("📋 No current data available, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}let ee={limit_page_length:10,limit_start:0,filters:{},order_by:"creation desc"};if(e&&typeof e=="function")try{const X=e();X&&(ee=Ie(Ie({},ee),X))}catch(X){console.warn("Error getting current parameters, using defaults:",X)}const Z=W.map(X=>X.name),A=H.filter(X=>Z.includes(X));if(A.length===0){console.log("📋 Updated issues not visible on current page, skipping grid update");return}console.log(`🔄 Updating ${A.length} visible issues:`,A),yield f(A,j,W)}catch(j){throw console.error("Error during targeted refresh:",j),t&&typeof t=="function"&&(yield t()),j}}),v=()=>{if(s&&typeof s=="function")try{const Z=s();if(Z)return console.log(`📊 Using ${Z.resourceType} resource for updates (from parent)`),Z}catch(Z){console.warn("Error getting resource state from parent, falling back to detection:",Z)}const H=fe.data&&Array.isArray(fe.data)&&fe.data.length>0,j=ve.data&&Array.isArray(ve.data)&&ve.data.length>0;if(H&&!j)return console.log("📊 Using statFilterResource for updates (only stat has data)"),{activeResource:fe,currentData:fe.data,resourceType:"stat"};if(j&&!H)return console.log("📋 Using issuesResource for updates (only issues has data)"),{activeResource:ve,currentData:ve.data,resourceType:"main"};const W=fe.lastLoaded||0,ee=ve.lastLoaded||0;return H&&W>=ee?(console.log("📊 Using statFilterResource for updates (more recent)"),{activeResource:fe,currentData:fe.data,resourceType:"stat"}):(console.log("📋 Using issuesResource for updates (default)"),{activeResource:ve,currentData:ve.data||[],resourceType:"main"})},f=(H,j,W)=>pe(this,null,function*(){try{const Z=(yield Promise.all(H.map(A=>pe(this,null,function*(){try{return yield lo(A),Ut.data}catch(X){return console.warn(`Failed to fetch updated issue ${A}:`,X),null}})))).filter(A=>A!==null);if(Z.length===0){console.warn("No valid updated issues fetched, falling back to custom refresh"),t&&typeof t=="function"&&(yield t());return}if(j.data&&Array.isArray(j.data))console.log(`🔄 Updating ${Z.length} issues in ${j.data.length} total issues`),Z.forEach(A=>{const X=j.data.findIndex(ue=>ue.name===A.name);X!==-1?(console.log(`✅ Updating issue at index ${X}: ${A.name}`),Object.assign(j.data[X],A)):console.warn(`⚠️ Issue ${A.name} not found in current data for update`)});else{console.warn("⚠️ activeResource.data is not an array, using fallback method");const A=[...W];Z.forEach(X=>{const ue=A.findIndex(M=>M.name===X.name);ue!==-1?(console.log(`✅ Updating issue at index ${ue}: ${X.name} (fallback)`),A[ue]=X):console.warn(`⚠️ Issue ${X.name} not found in current data for update (fallback)`)}),j.data=A}console.log(`🎯 Successfully updated ${Z.length} issues in current view`)}catch(ee){console.error("Error updating visible issues in place:",ee),t&&typeof t=="function"&&(yield t())}}),R=()=>!!document.hidden,h=O(!1),w=()=>{document.hidden?h.value=!0:h.value&&(h.value=!1,console.log("🔄 Page came back into focus - refreshing Issue table"),r.value.length>0?(console.log(`📋 Processing ${r.value.length} pending updates`),C()):L())},L=()=>{r.value=[];try{t&&typeof t=="function"?t():(qe(),st())}catch(H){console.error("Error during manual refresh:",H)}},K=()=>{g()},B=()=>{c.value=!1},N=H=>{console.error("Socket connection error:",H),c.value=!1};return Be(()=>{a&&(a.on("connect",K),a.on("disconnect",B),a.on("connect_error",N),document.addEventListener("visibilitychange",w),a.connected&&g())}),at(()=>{a&&(a.off("connect",K),a.off("disconnect",B),a.off("connect_error",N)),document.removeEventListener("visibilitychange",w),I(),y&&clearTimeout(y)}),{pendingDocumentRefreshes:r,realtimeEventsSetup:c,setupRealtimeUpdates:g,disableRealtimeUpdates:I,manualRefresh:L,processDocumentRefreshes:C}}const En={class:"min-h-screen bg-gray-50"},An={class:"bg-white shadow-sm border-b"},jn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Un={class:"flex justify-between items-center py-4"},Bn={class:"flex items-center space-x-4"},Nn={class:"flex space-x-4"},zn={class:"flex items-center space-x-4"},Hn={class:"text-sm text-gray-600"},Kn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},qn={class:"fixed top-20 right-4 flex flex-col space-y-2"},Jn=["title"],Wn={class:"relative"},Qn={key:0,class:"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce"},tr={__name:"IssueTracker",setup(e){const{searchQuery:t,filters:s,debouncedSearchQuery:a,apiFilters:r,sortOrder:c,getAssigneeOptions:p}=On(),y=O(!1),m=O("team_tickets"),b=O(null),g=()=>{console.log("Refreshing current view:",{isUsingStatFilter:y.value,currentStatFilter:m.value,hasCustomFilters:A.value&&A.value.length>0});const $={limit_page_length:he.value,limit_start:(ge.value-1)*he.value,order_by:c.value};y.value?(A.value&&A.value.length>0&&($.filters=JSON.stringify(A.value)),Promise.all([it(m.value,$),A.value&&A.value.length>0?et(m.value,JSON.stringify(A.value)):et(m.value)]).then(()=>{console.log("Stat filter view refreshed successfully")}).catch(D=>{console.error("Error refreshing stat filter view:",D)})):Promise.all([qe(Ie({filters:JSON.stringify(A.value)},$)),st(JSON.stringify(A.value))]).then(()=>{console.log("Regular filter view refreshed successfully")}).catch(D=>{console.error("Error refreshing regular filter view:",D)})},{pendingDocumentRefreshes:I,realtimeEventsSetup:C,manualRefresh:_}=Vn(()=>({filters:P.value,order_by:c.value,limit_page_length:he.value,limit_start:(ge.value-1)*he.value}),g,()=>y.value?{activeResource:fe,currentData:fe.data||[],resourceType:"stat"}:{activeResource:ve,currentData:ve.data||[],resourceType:"main"}),v=()=>{g()},f=O([]),R=O(!1),h=$=>{f.value.push(Ie({id:Date.now()+Math.random()},$)),setTimeout(()=>{var D;w((D=f.value[f.value.length-1])==null?void 0:D.id)},5e3)},w=$=>{f.value=f.value.filter(D=>D.id!==$)},L=$=>{const D={sent:"Email Sent",scheduled:"Email Scheduled",draft_saved:"Draft Saved",send_failed:"Send Failed",draft_save_failed:"Save Failed"};h({type:$.type||"success",title:D[$.action]||"Email Action",message:$.message||`Email "${$.subject}" sent successfully to ${$.recipientCount} recipients`,timestamp:new Date}),$.type!=="error"&&(R.value=!1)},K=F(()=>y.value?fe.data||[]:ve.data||[]),B=F(()=>y.value?Nt.data||0:jt.data||0),N=F(()=>y.value?fe.loading:ve.loading),H=F(()=>K.value),j=F(()=>(c.value||"creation desc").split(" ")[0]),W=F(()=>(c.value||"creation desc").split(" ")[1]||"desc"),ee=({field:$,direction:D})=>{const ie=`${$} ${D}`;s.value.sortBy=ie,ge.value=1,g()},Z=$=>{},A=O([]),X=$=>{console.log("Filters applied:",$),A.value=$,ge.value=1,$&&$.length>0?y.value?(console.log("Applying custom filters on top of card filter:",m.value),q(m.value)):(console.log("Applying custom filters in regular mode"),ue()):(console.log("No filters applied, returning to default view"),M())},ue=()=>{y.value=!1,m.value="team_tickets",Promise.all([qe({filters:JSON.stringify(A.value),order_by:c.value,limit_page_length:he.value,limit_start:0}),st(JSON.stringify(A.value))]).then(()=>{console.log("Custom filters applied successfully")}).catch($=>{console.error("Error applying custom filters:",$)})},M=()=>{y.value=!0,m.value="team_tickets",q("team_tickets")},V=$=>{console.log("Card clicked:",$,"Current filters:",A.value),y.value=!0,m.value=$,t.value="",ge.value=1,q($)},q=$=>{const D={limit_page_length:he.value,limit_start:0,order_by:c.value};A.value&&A.value.length>0?(D.filters=JSON.stringify(A.value),console.log("Applying card filter with custom filters:",$,A.value)):console.log("Applying card filter without custom filters:",$),Promise.all([it($,D),A.value&&A.value.length>0?et($,JSON.stringify(A.value)):et($)]).then(()=>{console.log("Card filter applied successfully")}).catch(ie=>{console.error("Error applying card filter:",ie)})},ce=ze(Ae(io())),re=ze(Ae(uo())),Oe=ze(Ae(go()));let _e=null,ke=0;const Ne=F(()=>{const $=K.value.length;return _e&&ke===$||(_e=Ae(p(K.value)),ke=$),_e}),ge=O(1),he=O(10),k=({page:$,itemsPerPage:D,offset:ie})=>{console.log("Page change:",{page:$,newItemsPerPage:D,offset:ie}),ge.value=$,he.value=D;const te={limit_page_length:D,limit_start:ie,order_by:c.value};y.value?(A.value&&A.value.length>0&&(te.filters=JSON.stringify(A.value)),it(m.value,te).then(()=>{console.log("Pagination completed successfully (stat filter)")}).catch(De=>{console.error("Error during pagination (stat filter):",De)})):qe(Ie({filters:JSON.stringify(A.value)},te)).then(()=>{console.log("Pagination completed successfully (regular filter)")}).catch(De=>{console.error("Error during pagination (regular filter):",De)})},P=F(()=>{const $={};return s.value.status&&($.status=s.value.status),s.value.priority&&($.priority=s.value.priority),s.value.assignee&&($.raised_by=s.value.assignee),s.value.tags&&($.issue_type=s.value.tags),$});return Be(()=>{console.log("IssueTracker mounted, initializing with default view"),y.value=!0,m.value="team_tickets",q("team_tickets"),window.addEventListener("issueListUpdated",$=>pe(this,null,function*(){const{count:D,documents:ie}=$.detail;h({type:"info",title:"List Updated",message:`${D} issue${D>1?"s":""} updated: ${ie.slice(0,3).join(", ")}${ie.length>3?"...":""}`,timestamp:new Date}),console.log("🔄 List updated event received - refreshing only stat cards");try{b.value&&b.value.refreshStats&&(console.log("📊 Refreshing stat cards..."),yield b.value.refreshStats(),console.log("📊 Stat cards refreshed successfully")),console.log("✅ Stat cards refreshed after websocket update"),console.log("ℹ️  Individual row updates are handled automatically by the composable")}catch(te){console.error("❌ Error refreshing stat cards after websocket update:",te),h({type:"error",title:"Refresh Error",message:"Failed to refresh stat cards. Please refresh manually.",timestamp:new Date})}}))}),at(()=>{window.removeEventListener("issueListUpdated",()=>{})}),($,D)=>{const ie=ye("router-link");return n(),d("div",En,[o("div",An,[o("div",jn,[o("div",Un,[o("div",Bn,[D[11]||(D[11]=o("h1",{class:"text-2xl font-bold text-gray-900"},"Ticket Tracker",-1)),o("nav",Nn,[U(ie,{to:"/",class:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium","active-class":"bg-blue-100 text-blue-700","inactive-class":"text-gray-600 hover:text-gray-900"},{default:J(()=>D[7]||(D[7]=[oe(" Tickets ")])),_:1,__:[7]}),U(ie,{to:"/sent-emails",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium","active-class":"bg-blue-100 text-blue-700","inactive-class":"text-gray-600 hover:text-gray-900"},{default:J(()=>D[8]||(D[8]=[oe(" Sent Emails ")])),_:1,__:[8]}),D[9]||(D[9]=o("a",{href:"/app/support",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Desk ",-1)),D[10]||(D[10]=o("a",{href:"/intro",class:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"}," Wiki ",-1))])]),o("div",zn,[U(x(xe),{onClick:D[0]||(D[0]=te=>R.value=!0),variant:"solid",size:"sm"},{prefix:J(()=>[U(x(Fe),{name:"mail",class:"w-4 h-4"})]),default:J(()=>[D[12]||(D[12]=oe(" Compose Email "))]),_:1,__:[12]}),o("span",Hn,T(x(wt).user),1),U(x(xe),{onClick:D[1]||(D[1]=te=>x(wt).logout.submit()),variant:"outline",size:"sm"},{default:J(()=>D[13]||(D[13]=[oe(" Logout ")])),_:1,__:[13]})])])])]),o("div",Kn,[U(El,{ref_key:"issueStatsRef",ref:b,issues:H.value,activeFilter:m.value,onFilterChanged:V},null,8,["issues","activeFilter"]),U(hl,{searchQuery:x(t),"onUpdate:searchQuery":D[2]||(D[2]=te=>xt(t)?t.value=te:null),filters:x(s),"onUpdate:filters":D[3]||(D[3]=te=>xt(s)?s.value=te:null),statusOptions:Oe.value,priorityOptions:ce.value,assigneeOptions:Ne.value,tagsOptions:re.value,issues:K.value,filteredCount:B.value,onSuggestionSelected:Z,onFiltersApplied:X},null,8,["searchQuery","filters","statusOptions","priorityOptions","assigneeOptions","tagsOptions","issues","filteredCount"]),U(_n,{issues:H.value,loading:N.value,sortField:j.value,sortDirection:W.value,onSort:ee},null,8,["issues","loading","sortField","sortDirection"]),U(Pl,{currentPage:ge.value,"onUpdate:currentPage":D[4]||(D[4]=te=>ge.value=te),itemsPerPage:he.value,"onUpdate:itemsPerPage":D[5]||(D[5]=te=>he.value=te),totalItems:B.value,onPageChange:k},null,8,["currentPage","itemsPerPage","totalItems"]),o("div",qn,[o("div",{class:"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200",title:x(C)?"Real-time updates active":"Real-time updates disabled"},[o("div",Wn,[U(x(Fe),{name:x(C)?"wifi":"wifi-off",class:z(["h-5 w-5 transition-colors duration-200",x(C)?"text-green-600":"text-red-500"])},null,8,["name","class"]),o("div",{class:z(["absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white",x(C)?"bg-green-500 animate-pulse":"bg-red-500"])},null,2),x(I).length>0?(n(),d("div",Qn,T(x(I).length>9?"9+":x(I).length),1)):E("",!0)])],8,Jn),o("button",{onClick:v,class:"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95",title:"Manual refresh"},[U(x(Fe),{name:"refresh-cw",class:"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300"})])])]),U(Ln,{notifications:f.value,onRemove:w},null,8,["notifications"]),U(fs,{show:R.value,"onUpdate:show":D[6]||(D[6]=te=>R.value=te),onEmailSent:L},null,8,["show"])])}}};export{tr as default};
//# sourceMappingURL=IssueTracker-DokAQAjS.js.map
