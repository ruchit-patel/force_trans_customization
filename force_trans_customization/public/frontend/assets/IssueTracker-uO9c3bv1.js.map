{"version":3,"file":"IssueTracker-uO9c3bv1.js","sources":["../../../../frontend/node_modules/frappe-ui/src/components/Avatar/Avatar.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListEmptyState.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/utils.js","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListHeaderItem.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListHeader.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListRowItem.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListRow.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListRows.vue","../../../../frontend/node_modules/frappe-ui/src/icons/DownSolid.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListGroupHeader.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListGroupRows.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListGroups.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListSelectBanner.vue","../../../../frontend/node_modules/frappe-ui/src/components/ListView/ListView.vue","../../../../frontend/node_modules/frappe-ui/src/utils/call.js","../../../../frontend/src/data/issues.js","../../../../frontend/src/components/CustomSearchBox.vue","../../../../frontend/src/components/IssueFilters.vue","../../../../frontend/src/components/IssuePagination.vue","../../../../frontend/src/components/IssueStats.vue","../../../../frontend/src/components/IssueTable.vue","../../../../frontend/src/components/RealTimeNotifications.vue","../../../../frontend/src/composables/useIssueFilters.js","../../../../frontend/src/composables/useIssueListUpdates.js","../../../../frontend/src/pages/IssueTracker.vue"],"sourcesContent":["<template>\n  <div\n    class=\"relative inline-block shrink-0\"\n    :class=\"[sizeClasses, shapeClasses]\"\n  >\n    <img\n      v-if=\"image && !imgFetchError\"\n      :src=\"image\"\n      :alt=\"label\"\n      :class=\"[shapeClasses, 'h-full w-full object-cover']\"\n      @error=\"(err) => handleImageError(err)\"\n    />\n    <div\n      v-else\n      class=\"flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5 select-none\"\n      :class=\"[labelClasses, shapeClasses]\"\n    >\n      <div :class=\"iconClasses\" v-if=\"$slots.default\">\n        <slot></slot>\n      </div>\n      <template v-else>\n        {{ label && label[0] }}\n      </template>\n    </div>\n    <div\n      v-if=\"$slots.indicator\"\n      :class=\"[\n        'absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white',\n        indicatorContainerClasses,\n      ]\"\n    >\n      <div :class=\"indicatorClasses\">\n        <slot name=\"indicator\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport type { AvatarProps } from './types'\n\nconst imgFetchError = ref(false)\n\nconst props = withDefaults(defineProps<AvatarProps>(), {\n  size: 'md',\n  shape: 'circle',\n})\n\nconst shapeClasses = computed(() => {\n  return {\n    circle: 'rounded-full',\n    square: {\n      xs: 'rounded-[4px]',\n      sm: 'rounded-[5px]',\n      md: 'rounded-[5px]',\n      lg: 'rounded-[6px]',\n      xl: 'rounded-[6px]',\n      '2xl': 'rounded-[8px]',\n      '3xl': 'rounded-[10px]',\n    }[props.size],\n  }[props.shape]\n})\n\nconst sizeClasses = computed(() => {\n  return {\n    xs: 'w-4 h-4',\n    sm: 'w-5 h-5',\n    md: 'w-6 h-6',\n    lg: 'w-7 h-7',\n    xl: 'w-8 h-8',\n    '2xl': 'w-10 h-10',\n    '3xl': 'w-11.5 h-11.5',\n  }[props.size]\n})\n\nconst labelClasses = computed(() => {\n  let sizeClass = {\n    xs: 'text-2xs',\n    sm: 'text-sm',\n    md: 'text-base',\n    lg: 'text-base',\n    xl: 'text-lg',\n    '2xl': 'text-xl',\n    '3xl': 'text-2xl',\n  }[props.size]\n  return ['font-medium', sizeClass]\n})\n\nconst indicatorContainerClasses = computed(() => {\n  return {\n    xs: '-mr-[.1rem] -mb-[.1rem] h-2 w-2',\n    sm: '-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]',\n    md: '-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5',\n    lg: '-mr-[.1rem] -mb-[.1rem] h-3 w-3',\n    xl: '-mr-[.1rem] -mb-[.1rem] h-3 w-3',\n    '2xl': '-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5',\n    '3xl': '-mr-[.2rem] -mb-[.2rem] h-4 w-4',\n  }[props.size]\n})\n\nconst indicatorClasses = computed(() => {\n  return {\n    xs: 'h-1 w-1',\n    sm: 'h-[5px] w-[5px]',\n    md: 'h-1.5 w-1.5',\n    lg: 'h-2 w-2',\n    xl: 'h-2 w-2',\n    '2xl': 'h-2.5 w-2.5',\n    '3xl': 'h-3 w-3',\n  }[props.size]\n})\n\nconst iconClasses = computed(() => {\n  return {\n    xs: 'h-2.5 w-2.5',\n    sm: 'h-3 w-3',\n    md: 'h-4 w-4',\n    lg: 'h-4 w-4',\n    xl: 'h-4 w-4',\n    '2xl': 'h-5 w-5',\n    '3xl': 'h-5 w-5',\n  }[props.size]\n})\n\nfunction handleImageError(err) {\n  if (err.type) {\n    imgFetchError.value = true\n  }\n}\n</script>\n","<template>\n  <div\n    class=\"flex h-full w-full flex-col items-center justify-center text-base\"\n  >\n    <slot>\n      <div class=\"text-xl font-medium\">{{ list.options.emptyState.title }}</div>\n      <div class=\"mt-1 text-base text-ink-gray-5\">\n        {{ list.options.emptyState.description }}\n      </div>\n      <Button\n        v-if=\"list.options.emptyState.button\"\n        v-bind=\"list.options.emptyState.button\"\n        class=\"mt-4\"\n      ></Button>\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport { inject } from 'vue'\nimport { Button } from '../Button'\n\nconst list = inject('list')\n</script>\n","export function getGridTemplateColumns(columns, withCheckbox = true) {\n  let checkBoxWidth = withCheckbox ? '14px ' : ''\n  let columnsWidth = columns\n    .map((col) => {\n      let width = col.width || 1\n      if (typeof width === 'number') {\n        return width + 'fr'\n      }\n      return width\n    })\n    .join(' ')\n  return checkBoxWidth + columnsWidth\n}\n\nexport const alignmentMap = {\n  left: 'justify-start',\n  start: 'justify-start',\n  center: 'justify-center',\n  middle: 'justify-center',\n  right: 'justify-end',\n  end: 'justify-end',\n}\n","<template>\n  <div\n    ref=\"columnRef\"\n    class=\"group relative flex items-center\"\n    :class=\"item.align ? alignmentMap[item.align] : 'justify-between'\"\n  >\n    <div\n      class=\"flex items-center space-x-2 truncate text-sm text-ink-gray-5\"\n      :class=\"$attrs.class\"\n    >\n      <slot name=\"prefix\" v-bind=\"{ item }\" />\n      <slot>\n        <div class=\"truncate\">\n          {{ item.label }}\n        </div>\n      </slot>\n      <slot name=\"suffix\" v-bind=\"{ item }\" />\n    </div>\n    <slot v-if=\"list.options.resizeColumn\" name=\"resizer\" v-bind=\"{ item }\">\n      <div\n        class=\"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center\"\n        @mousedown=\"startResizing\"\n      >\n        <div\n          ref=\"resizer\"\n          class=\"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400\"\n        />\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport { alignmentMap } from './utils'\nimport { useDebounceFn } from '@vueuse/core'\nimport { ref, computed, inject } from 'vue'\n\nconst props = defineProps({\n  item: {\n    type: Object,\n    required: true,\n  },\n  debounce: {\n    type: Number,\n    default: 1000,\n  },\n})\n\nconst emit = defineEmits(['columnWidthUpdated'])\n\nconst resizer = ref(null)\nconst columnRef = ref(null)\n\nconst widthInPx = computed(() => {\n  if (typeof props.item.width === 'string') {\n    const parsedWidth = parseInt(props.item.width)\n    if (props.item.width.includes('rem')) {\n      return parsedWidth * 16\n    } else if (props.item.width.includes('px')) {\n      return parsedWidth\n    }\n  }\n  return columnRef.value.offsetWidth\n})\n\nconst startResizing = (e) => {\n  const initialX = e.clientX\n  const initialWidth = widthInPx.value\n  const onMouseMove = (e) => {\n    document.body.classList.add('select-none')\n    document.body.classList.add('cursor-col-resize')\n    resizer.value.style.backgroundColor = 'rgb(199 199 199)'\n    let newWidth = initialWidth + (e.clientX - initialX)\n\n    props.item.width = `${newWidth < 50 ? 50 : newWidth}px`\n    updateWidth(props.item.width)\n  }\n  const onMouseUp = () => {\n    document.body.classList.remove('select-none')\n    document.body.classList.remove('cursor-col-resize')\n    resizer.value.style.backgroundColor = ''\n    window.removeEventListener('mousemove', onMouseMove)\n    window.removeEventListener('mouseup', onMouseUp)\n  }\n  window.addEventListener('mousemove', onMouseMove)\n  window.addEventListener('mouseup', onMouseUp)\n}\n\nconst updateWidth = useDebounceFn((width) => {\n  props.item.width = width\n  emit('columnWidthUpdated')\n}, props.debounce)\n\nconst list = inject('list')\n</script>\n","<template>\n  <div\n    class=\"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2\"\n    :style=\"{\n      gridTemplateColumns: getGridTemplateColumns(\n        list.columns,\n        list.options.selectable,\n      ),\n    }\"\n  >\n    <Checkbox\n      v-if=\"list.options.selectable\"\n      class=\"cursor-pointer duration-300\"\n      :modelValue=\"list.allRowsSelected\"\n      @click.stop=\"list.toggleAllRows\"\n    />\n    <slot>\n      <ListHeaderItem\n        v-for=\"column in list.columns\"\n        :key=\"column.key\"\n        :item=\"column\"\n        @columnWidthUpdated=\"emit('columnWidthUpdated', column)\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport Checkbox from '../Checkbox/Checkbox.vue'\nimport ListHeaderItem from './ListHeaderItem.vue'\nimport { getGridTemplateColumns } from './utils'\nimport { inject } from 'vue'\n\nconst emit = defineEmits(['columnWidthUpdated'])\n\nconst list = inject('list')\n</script>\n","<template>\n  <div class=\"flex items-center space-x-2\" :class=\"alignmentMap[align]\">\n    <slot name=\"prefix\">\n      <component\n        v-if=\"column.prefix\"\n        :is=\"\n          typeof column.prefix === 'function'\n            ? column.prefix({ row })\n            : column.prefix\n        \"\n      />\n    </slot>\n    <Tooltip\n      v-bind=\"\n        list.options.showTooltip\n          ? {\n              text: tooltip,\n            }\n          : { text: '' }\n      \"\n    >\n      <slot v-bind=\"{ label }\">\n        <div class=\"truncate text-base\">{{ label }}</div>\n      </slot>\n    </Tooltip>\n    <slot name=\"suffix\" />\n  </div>\n</template>\n<script setup>\nimport { computed, inject } from 'vue'\nimport { Tooltip } from '../../index'\nimport { alignmentMap } from './utils'\n\nconst props = defineProps({\n  column: {\n    type: Object,\n    default: {},\n  },\n  row: {\n    type: Object,\n    default: {},\n  },\n  item: {\n    type: [String, Number, Object],\n    default: '',\n  },\n  align: {\n    type: String,\n    default: 'left',\n  },\n})\n\nconst label = computed(() => {\n  if (props.column?.getLabel) return props.column?.getLabel({ row: props.row })\n  return getValue(props.item).label || ''\n})\n\nconst tooltip = computed(() => {\n  if (!list.value.options.showTooltip) return ''\n  return props.column.getTooltip\n    ? props.column.getTooltip(props.row)\n    : getValue(props.item).label\n})\n\nfunction getValue(value) {\n  if (value && typeof value === 'object') {\n    return value\n  }\n  return { label: value }\n}\n\nconst list = inject('list')\n</script>\n","<template>\n  <component\n    :is=\"list.options.getRowRoute ? 'router-link' : 'div'\"\n    :class=\"[\n      roundedClass,\n      isSelected || isActive ? 'bg-surface-gray-2' : '',\n      isHoverable ? 'cursor-pointer' : '',\n      isHoverable\n        ? isSelected || isActive\n          ? 'hover:bg-surface-gray-3'\n          : 'hover:bg-surface-menu-bar'\n        : '',\n    ]\"\n    class=\"flex flex-col transition-all duration-300 ease-in-out\"\n    v-bind=\"{\n      to: list.options.getRowRoute ? list.options.getRowRoute(row) : undefined,\n      onClick: (e) => onRowClick(row, e),\n    }\"\n  >\n    <component\n      :is=\"list.options.getRowRoute ? 'template' : 'button'\"\n      class=\"[all:unset] hover:[all:unset]\"\n    >\n      <div\n        class=\"grid items-center space-x-4 px-2\"\n        :style=\"{\n          height: rowHeight,\n          gridTemplateColumns: getGridTemplateColumns(\n            list.columns,\n            list.options.selectable,\n          ),\n        }\"\n      >\n        <div\n          v-if=\"list.options.selectable\"\n          class=\"w-fit pr-2 py-3 flex\"\n          @click.stop.prevent\n          @dblclick.stop\n        >\n          <Checkbox\n            :modelValue=\"isSelected\"\n            class=\"cursor-pointer duration-300\"\n            @click.stop=\"list.toggleRow(row[list.rowKey])\"\n          />\n        </div>\n        <div\n          v-for=\"(column, i) in list.columns\"\n          :key=\"column.key\"\n          :class=\"[\n            alignmentMap[column.align],\n            i == 0 ? 'text-ink-gray-9' : 'text-ink-gray-7',\n          ]\"\n        >\n          <slot v-bind=\"{ idx: i, column, item: row[column.key], isActive }\">\n            <component\n              v-if=\"list.slots.cell\"\n              :is=\"list.slots.cell\"\n              v-bind=\"{\n                column,\n                row,\n                item: row[column.key],\n                align: column.align,\n              }\"\n            />\n            <ListRowItem\n              v-else\n              :column=\"column\"\n              :row=\"row\"\n              :item=\"row[column.key]\"\n              :align=\"column.align\"\n            />\n          </slot>\n        </div>\n      </div>\n      <div\n        v-if=\"!isLastRow\"\n        class=\"h-px border-t\"\n        :class=\"\n          roundedClass === 'rounded' || roundedClass?.includes?.('rounded-b')\n            ? 'mx-2 border-outline-gray-1'\n            : 'border-t-[--surface-gray-2]'\n        \"\n      />\n    </component>\n  </component>\n</template>\n\n<script setup>\nimport Checkbox from '../Checkbox/Checkbox.vue'\nimport ListRowItem from './ListRowItem.vue'\nimport { alignmentMap, getGridTemplateColumns } from './utils'\nimport { computed, inject, ref } from 'vue'\n\nconst props = defineProps({\n  row: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst list = inject('list')\n\nconst isLastRow = computed(() => {\n  if (!list.value.rows?.length) return false\n  return (\n    list.value.rows[list.value.rows.length - 1][list.value.rowKey] ===\n    props.row[list.value.rowKey]\n  )\n})\n\nconst isSelected = computed(() => {\n  return list.value.selections.has(props.row[list.value.rowKey])\n})\nconst isActive = computed(\n  () =>\n    list.value.options.enableActive &&\n    list.value.activeRow.value === props.row.name,\n)\n\nconst isHoverable = computed(() => {\n  return list.value.options.getRowRoute || list.value.options.onRowClick\n})\n\nconst rowHeight = computed(() => {\n  if (typeof list.value.options.rowHeight === 'number') {\n    return `${list.value.options.rowHeight}px`\n  }\n  return list.value.options.rowHeight\n})\n\nconst roundedClass = computed(() => {\n  if (!isSelected.value) return 'rounded'\n  const selections = [...list.value.selections]\n  let groups = list.value.rows[0]?.group\n    ? list.value.rows.map((k) => k.rows)\n    : [list.value.rows]\n\n  for (let rows of groups) {\n    let currentIndex = rows.findIndex((k) => k == props.row)\n    if (currentIndex === -1) continue\n    let atBottom = !selections.includes(rows[currentIndex + 1]?.name)\n    let atTop = !selections.includes(rows[currentIndex - 1]?.name)\n    return (atBottom ? 'rounded-b ' : '') + (atTop ? 'rounded-t' : '')\n  }\n})\n\nconst onRowClick = (row, e) => {\n  if (list.value.options.onRowClick) list.value.options.onRowClick(row, e)\n  if (list.value.activeRow.value === row.name) {\n    list.value.activeRow.value = null\n  } else {\n    list.value.activeRow.value = row.name\n  }\n}\n</script>\n","<template>\n  <div class=\"h-full overflow-y-auto\">\n    <slot>\n      <ListRow v-for=\"row in list.rows\" :key=\"row[list.rowKey]\" :row=\"row\" />\n    </slot>\n  </div>\n</template>\n\n<script setup>\nimport ListRow from './ListRow.vue'\nimport { inject } from 'vue'\n\nconst list = inject('list')\n</script>\n","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\">\n    <path\n      fill=\"currentColor\"\n      d=\"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z\"\n    />\n  </svg>\n</template>\n","<template>\n  <div class=\"flex items-center\">\n    <button\n      @click=\"toggleGroup\"\n      class=\"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2\"\n    >\n      <DownSolid\n        class=\"h-4 w-4 text-ink-gray-6 transition-transform duration-200\"\n        :class=\"[group.collapsed ? '-rotate-90' : '']\"\n      />\n    </button>\n    <slot>\n      <div class=\"w-full py-1.5 pr-2\">\n        <component\n          v-if=\"list.slots['group-header']\"\n          :is=\"list.slots['group-header']\"\n          v-bind=\"{ group }\"\n        />\n        <span v-else class=\"text-base font-medium leading-6\">\n          {{ group.group }}\n        </span>\n      </div>\n    </slot>\n  </div>\n  <div class=\"mx-2 h-px border-t border-outline-gray-modals\"></div>\n</template>\n<script setup>\nimport { inject } from 'vue'\nimport DownSolid from '../../icons/DownSolid.vue'\n\nconst props = defineProps({\n  group: {\n    type: Object,\n    required: true,\n  },\n})\n\nconst list = inject('list')\n\nfunction toggleGroup() {\n  if (props.group.collapsed == null) {\n    props.group.collapsed = false\n  }\n  props.group.collapsed = !props.group.collapsed\n}\n</script>\n","<template>\n  <div class=\"mb-5 mt-2\" v-if=\"!group.collapsed\">\n    <slot>\n      <ListRow v-for=\"row in group.rows\" :key=\"row[list.rowKey]\" :row=\"row\" />\n    </slot>\n  </div>\n</template>\n<script setup>\nimport ListRow from './ListRow.vue'\nimport { inject } from 'vue'\n\nconst props = defineProps({\n  group: {\n    type: Object,\n    required: true,\n  },\n})\nconst list = inject('list')\n</script>\n","<template>\n  <div class=\"h-full overflow-y-auto\">\n    <div v-for=\"group in list.rows\" :key=\"group.group\">\n      <slot>\n        <ListGroupHeader :group=\"group\">\n          <slot\n            name=\"group-header\"\n            v-if=\"$slots['group-header']\"\n            v-bind=\"{ group }\"\n          />\n        </ListGroupHeader>\n        <ListGroupRows :group=\"group\" />\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport ListGroupHeader from './ListGroupHeader.vue'\nimport ListGroupRows from './ListGroupRows.vue'\nimport { inject } from 'vue'\n\nconst list = inject('list')\n</script>\n","<template>\n  <transition\n    enter-active-class=\"duration-300 ease-out\"\n    enter-from-class=\"transform opacity-0\"\n    enter-to-class=\"opacity-100\"\n    leave-active-class=\"duration-300 ease-in\"\n    leave-from-class=\"opacity-100\"\n    leave-to-class=\"transform opacity-0\"\n  >\n    <div\n      v-if=\"list.selections.size\"\n      class=\"absolute inset-x-0 bottom-6 mx-auto w-max text-base\"\n    >\n      <div\n        class=\"flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl\"\n        :class=\"$attrs.class\"\n      >\n        <slot\n          v-bind=\"{\n            selections: list.selections,\n            allRowsSelected: list.allRowsSelected,\n            selectAll: () => list.toggleAllRows(true),\n            unselectAll: () => list.toggleAllRows(false),\n          }\"\n        >\n          <div\n            class=\"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9\"\n          >\n            <div class=\"flex items-center space-x-3\">\n              <Checkbox\n                :modelValue=\"true\"\n                :disabled=\"true\"\n                class=\"text-ink-gray-9\"\n              />\n              <div>{{ selectedText }}</div>\n            </div>\n            <div class=\"mr-3\">\n              <slot\n                name=\"actions\"\n                v-bind=\"{\n                  selections: list.selections,\n                  allRowsSelected: list.allRowsSelected,\n                  selectAll: () => list.toggleAllRows(true),\n                  unselectAll: () => list.toggleAllRows(false),\n                }\"\n              />\n            </div>\n          </div>\n          <div class=\"flex items-center space-x-1\">\n            <Button\n              class=\"w- text-ink-gray-7\"\n              :disabled=\"list.allRowsSelected\"\n              :class=\"list.allRowsSelected ? 'cursor-not-allowed' : ''\"\n              variant=\"ghost\"\n              @click=\"list.toggleAllRows(true)\"\n            >\n              Select all\n            </Button>\n            <Button\n              icon=\"x\"\n              variant=\"ghost\"\n              @click=\"list.toggleAllRows(false)\"\n            />\n          </div>\n        </slot>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script setup>\nimport Checkbox from '../Checkbox/Checkbox.vue'\nimport { Button } from '../Button'\nimport { computed, inject } from 'vue'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst list = inject('list')\n\nlet selectedText = computed(() => {\n  return list.value.options.selectionText(list.value.selections.size)\n})\n</script>\n","<template>\n  <div class=\"relative flex w-full flex-1 flex-col overflow-x-auto\">\n    <div\n      class=\"flex w-max min-w-full flex-col overflow-y-hidden\"\n      :class=\"$attrs.class\"\n      :style=\"$attrs.style\"\n    >\n      <slot v-bind=\"{ showGroupedRows, selectable }\">\n        <ListHeader />\n        <template v-if=\"props.rows.length\">\n          <ListGroups v-if=\"showGroupedRows\" />\n          <ListRows v-else />\n        </template>\n        <ListEmptyState v-else />\n        <ListSelectBanner v-if=\"selectable\" />\n      </slot>\n    </div>\n  </div>\n</template>\n<script setup>\nimport ListEmptyState from './ListEmptyState.vue'\nimport ListHeader from './ListHeader.vue'\nimport ListRows from './ListRows.vue'\nimport ListGroups from './ListGroups.vue'\nimport ListSelectBanner from './ListSelectBanner.vue'\nimport { ref, reactive, computed, provide, watch, useSlots } from 'vue'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst props = defineProps({\n  columns: {\n    type: Array,\n    default: [],\n  },\n  rows: {\n    type: Array,\n    default: [],\n  },\n  rowKey: {\n    type: String,\n    required: true,\n  },\n  options: {\n    type: Object,\n    default: () => ({\n      getRowRoute: null,\n      onRowClick: null,\n      showTooltip: true,\n      selectable: true,\n      resizeColumn: false,\n      rowHeight: 40,\n      emptyState: {\n        title: 'No Data',\n        description: 'No data available',\n      },\n    }),\n  },\n})\n\nconst slots = useSlots()\n\nlet selections = reactive(new Set())\nlet activeRow = ref(null)\n\nconst emit = defineEmits(['update:selections', 'update:active-row'])\n\nwatch(selections, (value) => {\n  if (selections.size) {\n    activeRow.value = null\n  }\n  emit('update:selections', value)\n})\n\nwatch(activeRow, (value) => {\n  emit('update:active-row', value)\n})\n\nlet _options = computed(() => {\n  function defaultTrue(value) {\n    return value === undefined ? true : value\n  }\n\n  function defaultFalse(value) {\n    return value === undefined ? false : value\n  }\n\n  return {\n    getRowRoute: props.options.getRowRoute || null,\n    onRowClick: props.options.onRowClick || null,\n    showTooltip: defaultTrue(props.options.showTooltip),\n    selectionText:\n      props.options.selectionText ||\n      ((val) => (val === 1 ? '1 row selected' : `${val} rows selected`)),\n    enableActive: defaultFalse(props.options.enableActive),\n    selectable: defaultTrue(props.options.selectable),\n    resizeColumn: defaultFalse(props.options.resizeColumn),\n    rowHeight: props.options.rowHeight || 40,\n    emptyState: props.options.emptyState,\n  }\n})\n\nconst allRowsSelected = computed(() => {\n  if (!props.rows.length) return false\n  if (showGroupedRows.value) {\n    return (\n      selections.size ===\n      props.rows.reduce((acc, row) => acc + row.rows.length, 0)\n    )\n  }\n  return selections.size === props.rows.length\n})\n\nconst selectable = computed(() => {\n  return _options.value.selectable\n})\n\nlet showGroupedRows = computed(() => {\n  return props.rows.every(\n    (row) => row.group && row.rows && Array.isArray(row.rows)\n  )\n})\n\nfunction toggleRow(row) {\n  if (!selections.delete(row)) {\n    selections.add(row)\n  }\n}\n\nfunction toggleAllRows(select) {\n  if (!select || allRowsSelected.value) {\n    selections.clear()\n    return\n  }\n  if (showGroupedRows.value) {\n    props.rows.forEach((row) => {\n      row.rows.forEach((r) => selections.add(r[props.rowKey]))\n    })\n    return\n  }\n  props.rows.forEach((row) => selections.add(row[props.rowKey]))\n}\n\nprovide(\n  'list',\n  computed(() => ({\n    rowKey: props.rowKey,\n    rows: props.rows,\n    columns: props.columns,\n    options: _options.value,\n    selections: selections,\n    activeRow: activeRow,\n    allRowsSelected: allRowsSelected.value,\n    slots: slots,\n    toggleRow,\n    toggleAllRows,\n  }))\n)\n\ndefineExpose({\n  selections,\n  allRowsSelected,\n  toggleRow,\n  toggleAllRows,\n})\n</script>\n","export default async function call(method, args, options = {}) {\n  if (!args) {\n    args = {}\n  }\n\n  let headers = Object.assign(\n    {\n      Accept: 'application/json',\n      'Content-Type': 'application/json; charset=utf-8',\n      'X-Frappe-Site-Name': window.location.hostname,\n    },\n    options.headers || {},\n  )\n\n  if (window.csrf_token && window.csrf_token !== '{{ csrf_token }}') {\n    headers['X-Frappe-CSRF-Token'] = window.csrf_token\n  }\n\n  let path = method.startsWith('/') ? method : `/api/method/${method}`\n  const res = await fetch(path, {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(args),\n  })\n\n  if (res.ok) {\n    const data = await res.json()\n    if (data.docs || method === 'login') {\n      return data\n    }\n    if (data.exc) {\n      try {\n        console.groupCollapsed(method)\n        console.log(`method: ${method}`)\n        console.log(`params:`, args)\n        let warning = JSON.parse(data.exc)\n        for (let text of warning) {\n          console.log(text)\n        }\n        console.groupEnd()\n      } catch (e) {\n        console.warn('Error printing debug messages', e)\n      }\n    }\n    return data.message\n  } else {\n    let response = await res.text()\n    let error, exception\n    try {\n      error = JSON.parse(response)\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n    let errorParts = [\n      [method, error.exc_type, error._error_message].filter(Boolean).join(' '),\n    ]\n    if (error.exc) {\n      exception = error.exc\n      try {\n        exception = JSON.parse(exception)[0]\n        console.log(exception)\n        // eslint-disable-next-line no-empty\n      } catch (e) {}\n    }\n    let e = new Error(errorParts.join('\\n'))\n    e.exc_type = error.exc_type\n    e.exc = exception\n    e.status = res.status\n    e.messages = error._server_messages\n      ? JSON.parse(error._server_messages)\n      : []\n    e.messages = e.messages.concat(error.message)\n    e.messages = e.messages.map((m) => {\n      try {\n        return JSON.parse(m).message\n      } catch (error) {\n        return m\n      }\n    })\n    e.messages = e.messages.filter(Boolean)\n    if (!e.messages.length) {\n      e.messages = error._error_message\n        ? [error._error_message]\n        : ['Internal Server Error']\n    }\n\n    if (options.onError) {\n      options.onError({ response: res, status: res.status, error: e })\n    }\n\n    throw e\n  }\n}\n\nexport function createCall(options) {\n  return function customCall(method, args) {\n    return call(method, args, options)\n  }\n}\n","import { createResource } from \"frappe-ui\"\n\n// Main resource for fetching Issue doctype data with child table support\nexport const issuesResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_issues_with_assignments\",\n\tmakeParams(params) {\n\t\t// Handle null/undefined params explicitly\n\t\tconst safeParams = params || {}\n\t\tconst limit_page_length = safeParams.limit_page_length || 10\n\t\tconst limit_start = safeParams.limit_start || 0\n\t\tconst filters = safeParams.filters || {}\n\t\tconst order_by = safeParams.order_by || \"creation desc\"\n\n\t\treturn {\n\t\t\tlimit_page_length,\n\t\t\tlimit_start,\n\t\t\tfilters,\n\t\t\torder_by,\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issues:\", error)\n\t\t// Show user-friendly error message using Frappe UI toast\n\t\tif (window.$toast) {\n\t\t\twindow.$toast({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\ttext: \"Failed to load issues. Please try again.\",\n\t\t\t\ticon: \"x\",\n\t\t\t\ticonClasses: \"text-red-600\",\n\t\t\t})\n\t\t}\n\t},\n\tauto: true, // Auto-fetch on component mount\n})\n\n// Resource for getting total count of issues (for pagination)\nexport const issuesCountResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_issues_count_with_filters\",\n\tmakeParams(params) {\n\t\t// Handle null/undefined params explicitly\n\t\tconst safeParams = params || {}\n\t\tconst filters = safeParams.filters || {}\n\t\treturn {\n\t\t\tfilters,\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issues count:\", error)\n\t},\n})\n\n// Helper function to reload issues with new parameters\nexport function reloadIssues(params = {}) {\n\tconst reloadParams = {\n\t\tlimit_page_length: params.limit_page_length || 10,\n\t\tlimit_start: params.limit_start || 0,\n\t\tfilters: params.filters || {},\n\t\torder_by: params.order_by || \"creation desc\",\n\t}\n\treturn issuesResource.reload(reloadParams)\n}\n\n// Helper function to get issues count with filters\nexport function getIssuesCount(filters = {}) {\n\treturn issuesCountResource.reload({ filters })\n}\n\n// Resource for fetching a single issue with assignments\nexport const singleIssueResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_single_issue_with_assignments\",\n\tmakeParams(issueName) {\n\t\treturn {\n\t\t\tissue_name: issueName\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch single issue:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to fetch a single issue\nexport function fetchSingleIssue(issueName) {\n\treturn singleIssueResource.reload(issueName)\n}\n\n// Resource for fetching Issue Priority options\nexport const issuePriorityResource = createResource({\n\turl: \"frappe.client.get_list\",\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: \"Issue Priority\",\n\t\t\tfields: [\"name\"],\n\t\t\tlimit_page_length: 0, // Get all priorities\n\t\t\torder_by: \"name asc\",\n\t\t}\n\t},\n\tcache: \"IssuePriority\", // Cache for 5 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issue priorities:\", error)\n\t},\n\tauto: true,\n})\n\n// Resource for fetching Issue Type options\nexport const issueTypeResource = createResource({\n\turl: \"frappe.client.get_list\",\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: \"Issue Type\",\n\t\t\tfields: [\"name\"],\n\t\t\tlimit_page_length: 0, // Get all issue types\n\t\t\torder_by: \"name asc\",\n\t\t}\n\t},\n\tcache: \"IssueType\", // Cache for 5 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch issue types:\", error)\n\t},\n\tauto: true,\n})\n\n// Resource for fetching Project options\nexport const projectResource = createResource({\n\turl: \"frappe.client.get_list\",\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: \"Project\",\n\t\t\tfields: [\"name\", \"project_name\", \"status\"],\n\t\t\tfilters: {\n\t\t\t\tstatus: [\"!=\", \"Cancelled\"], // Only active projects\n\t\t\t},\n\t\t\tlimit_page_length: 0, // Get all projects\n\t\t\torder_by: \"name asc\",\n\t\t}\n\t},\n\tcache: \"Project\", // Cache for 5 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch projects:\", error)\n\t},\n\tauto: true,\n})\n\n// Memoized helper functions to get dropdown options with caching and data freshness checks\nlet priorityOptionsCache = null\nlet priorityDataHash = null\nlet issueTypeOptionsCache = null\nlet issueTypeDataHash = null\nlet projectOptionsCache = null\nlet projectDataHash = null\n\nexport function getPriorityOptions() {\n\tconst currentData = issuePriorityResource.data || []\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Return cached result if data hasn't changed\n\tif (priorityOptionsCache && priorityDataHash === currentHash) {\n\t\treturn priorityOptionsCache\n\t}\n\t\n\tconst options = [\n\t\t{ label: \"All Priority\", value: \"\" },\n\t\t...currentData.map((p) => ({\n\t\t\tlabel: p.name,\n\t\t\tvalue: p.name,\n\t\t})),\n\t]\n\t\n\t// Cache the result with data hash\n\tpriorityOptionsCache = Object.freeze(options)\n\tpriorityDataHash = currentHash\n\treturn priorityOptionsCache\n}\n\nexport function getIssueTypeOptions() {\n\tconst currentData = issueTypeResource.data || []\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Return cached result if data hasn't changed\n\tif (issueTypeOptionsCache && issueTypeDataHash === currentHash) {\n\t\treturn issueTypeOptionsCache\n\t}\n\t\n\tconst options = [\n\t\t{ label: \"All Types\", value: \"\" },\n\t\t...currentData.map((t) => ({\n\t\t\tlabel: t.name,\n\t\t\tvalue: t.name,\n\t\t})),\n\t]\n\t\n\t// Cache the result with data hash\n\tissueTypeOptionsCache = Object.freeze(options)\n\tissueTypeDataHash = currentHash\n\treturn issueTypeOptionsCache\n}\n\nexport function getProjectOptions() {\n\tconst currentData = projectResource.data || []\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Return cached result if data hasn't changed\n\tif (projectOptionsCache && projectDataHash === currentHash) {\n\t\treturn projectOptionsCache\n\t}\n\t\n\tconst options = [\n\t\t{ label: \"All Projects\", value: \"\" },\n\t\t...currentData.map((p) => ({\n\t\t\tlabel: p.project_name || p.name,\n\t\t\tvalue: p.name,\n\t\t})),\n\t]\n\t\n\t// Cache the result with data hash\n\tprojectOptionsCache = Object.freeze(options)\n\tprojectDataHash = currentHash\n\treturn projectOptionsCache\n}\n\n// Status options (hardcoded as they are standard) - memoized since they never change\nconst statusOptionsCache = Object.freeze([\n\t{ label: \"All Status\", value: \"\" },\n\t{ label: \"Open\", value: \"Open\" },\n\t{ label: \"Replied\", value: \"Replied\" },\n\t{ label: \"On Hold\", value: \"On Hold\" },\n\t{ label: \"Resolved\", value: \"Resolved\" },\n\t{ label: \"Closed\", value: \"Closed\" },\n])\n\nexport function getStatusOptions() {\n\treturn statusOptionsCache\n}\n\n// Resource for fetching tag colors from Tag Categories\nexport const tagColorsResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_tag_colors\",\n\tcache: \"TagColors\", // Cache for 10 minutes\n\tonError(error) {\n\t\tconsole.error(\"Failed to fetch tag colors:\", error)\n\t},\n\tauto: true, // Auto-fetch on component mount\n})\n\n// Memoized tag color cache with data freshness check\nconst tagColorCache = new Map()\nlet tagColorsDataHash = null\n\n// Helper function to get tag color with memoization and cache invalidation\nexport function getTagColor(tagName) {\n\tconst currentData = tagColorsResource.data || {}\n\tconst currentHash = JSON.stringify(currentData)\n\t\n\t// Clear cache if data has changed\n\tif (tagColorsDataHash !== currentHash) {\n\t\ttagColorCache.clear()\n\t\ttagColorsDataHash = currentHash\n\t}\n\t\n\t// Check cache first\n\tif (tagColorCache.has(tagName)) {\n\t\treturn tagColorCache.get(tagName)\n\t}\n\t\n\tconst color = currentData[tagName] || null\n\t\n\t// Cache the result\n\ttagColorCache.set(tagName, color)\n\t\n\treturn color\n}\n\n// Cache invalidation will be handled by checking data freshness in the getter functions\n\n// Resource for searching issues (for autocomplete suggestions)\nexport const issueSearchResource = createResource({\n\turl: \"force_trans_customization.api.issues.issue_search\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\treturn {\n\t\t\tsearch_query: safeParams.search_query || \"\",\n\t\t\tlimit: safeParams.limit || 8,\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to search issues:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to search issues\nexport function searchIssues(searchQuery, limit = 8) {\n\tif (!searchQuery || searchQuery.length < 2) {\n\t\treturn Promise.resolve(issueSearchResource.data || [])\n\t}\n\treturn issueSearchResource.reload({ search_query: searchQuery, limit }).then(() => {\n\t\treturn issueSearchResource.data || []\n\t})\n}\n\n// Resource for filtering issues by suggestion\nexport const suggestionFilterResource = createResource({\n\turl: \"force_trans_customization.api.issues.filter_issues_by_suggestion\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\treturn {\n\t\t\tsuggestion_type: safeParams.suggestion_type || \"\",\n\t\t\tsuggestion_value: safeParams.suggestion_value || \"\",\n\t\t\tlimit_page_length: safeParams.limit_page_length || 10,\n\t\t\tlimit_start: safeParams.limit_start || 0,\n\t\t\torder_by: safeParams.order_by || \"creation desc\",\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to filter issues by suggestion:\", error)\n\t\tif (window.$toast) {\n\t\t\twindow.$toast({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\ttext: \"Failed to filter issues. Please try again.\",\n\t\t\t\ticon: \"x\",\n\t\t\t\ticonClasses: \"text-red-600\",\n\t\t\t})\n\t\t}\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Resource for getting count of filtered issues by suggestion\nexport const suggestionFilterCountResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_filtered_issues_count\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\treturn {\n\t\t\tsuggestion_type: safeParams.suggestion_type || \"\",\n\t\t\tsuggestion_value: safeParams.suggestion_value || \"\",\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to get filtered issues count:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to filter issues by suggestion\nexport function filterIssuesBySuggestion(suggestionType, suggestionValue, params = {}) {\n\tconst filterParams = {\n\t\tsuggestion_type: suggestionType,\n\t\tsuggestion_value: suggestionValue,\n\t\tlimit_page_length: params.limit_page_length || 10,\n\t\tlimit_start: params.limit_start || 0,\n\t\torder_by: params.order_by || \"creation desc\",\n\t}\n\treturn suggestionFilterResource.reload(filterParams)\n}\n\n// Helper function to get count of filtered issues by suggestion\nexport function getFilteredIssuesCountBySuggestion(suggestionType, suggestionValue) {\n\treturn suggestionFilterCountResource.reload({\n\t\tsuggestion_type: suggestionType,\n\t\tsuggestion_value: suggestionValue,\n\t})\n}\n\n// Resource for filtering issues by stat type\nexport const statFilterResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_issues_by_stat_filter\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\treturn {\n\t\t\tstat_type: safeParams.stat_type || \"team_tickets\",\n\t\t\tlimit_page_length: safeParams.limit_page_length || 10,\n\t\t\tlimit_start: safeParams.limit_start || 0,\n\t\t\torder_by: safeParams.order_by || \"creation desc\",\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to filter issues by stat:\", error)\n\t\tif (window.$toast) {\n\t\t\twindow.$toast({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\ttext: \"Failed to filter issues. Please try again.\",\n\t\t\t\ticon: \"x\",\n\t\t\t\ticonClasses: \"text-red-600\",\n\t\t\t})\n\t\t}\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Resource for getting count of issues by stat filter\nexport const statFilterCountResource = createResource({\n\turl: \"force_trans_customization.api.issues.get_stat_filter_count\",\n\tmakeParams(params) {\n\t\tconst safeParams = params || {}\n\t\treturn {\n\t\t\tstat_type: safeParams.stat_type || \"team_tickets\",\n\t\t}\n\t},\n\tonError(error) {\n\t\tconsole.error(\"Failed to get stat filter count:\", error)\n\t},\n\tauto: false, // Don't auto-fetch, only fetch when called\n})\n\n// Helper function to filter issues by stat type\nexport function filterIssuesByStat(statType, params = {}) {\n\tconst filterParams = {\n\t\tstat_type: statType,\n\t\tlimit_page_length: params.limit_page_length || 10,\n\t\tlimit_start: params.limit_start || 0,\n\t\torder_by: params.order_by || \"creation desc\",\n\t}\n\treturn statFilterResource.reload(filterParams)\n}\n\n// Helper function to get count of issues by stat filter\nexport function getStatFilterCount(statType) {\n\treturn statFilterCountResource.reload({\n\t\tstat_type: statType,\n\t})\n}\n\n// Helper function to refresh all filter options and clear caches\nexport function refreshFilterOptions() {\n\t// Clear caches before reloading\n\tpriorityOptionsCache = null\n\tissueTypeOptionsCache = null\n\tprojectOptionsCache = null\n\t\n\tissuePriorityResource.reload()\n\tissueTypeResource.reload()\n\tprojectResource.reload()\n\ttagColorsResource.reload()\n}\n\n// Cache invalidation is handled by checking data freshness in the getter functions\n// The frappe-ui createResource doesn't support event listeners, so we rely on\n// the cache validation logic in getPriorityOptions, getIssueTypeOptions, and getProjectOptions\n","<template>\n\t<div class=\"relative w-full max-w-2xl mx-auto\">\n\t\t<!-- Search Input Container -->\n\t\t<div class=\"relative group\">\n\t\t\t<!-- Search Icon -->\n\t\t\t<div class=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10\">\n\t\t\t\t<svg class=\"h-5 w-5 text-slate-400 transition-colors duration-200 group-focus-within:text-blue-500\"\n\t\t\t\t\tfill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\td=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n\t\t\t\t</svg>\n\t\t\t</div>\n\n\t\t\t<!-- Main Search Input -->\n\t\t\t<input ref=\"searchInput\" type=\"text\" v-model=\"searchQuery\" @input=\"handleSearch\" @focus=\"handleFocus\"\n\t\t\t\t@blur=\"handleBlur\" @keydown=\"handleKeydown\" :placeholder=\"placeholder\" class=\"w-full h-14 pl-12 pr-20 text-base bg-white border border-slate-200 rounded-2xl \n                       placeholder-slate-400 text-slate-700 transition-all duration-200 ease-out\n                       focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 \n                       focus:bg-white hover:border-slate-300 hover:shadow-sm focus:shadow-lg\n                       backdrop-blur-sm\" :class=\"{\n\t\t\t\t\t\t'shadow-lg ring-2 ring-blue-500/20 border-blue-500': isFocused,\n\t\t\t\t\t\t'bg-slate-50/50': !isFocused && searchQuery\n\t\t\t\t\t}\" />\n\n\t\t\t<!-- Right Side Controls -->\n\t\t\t<div class=\"absolute inset-y-0 right-0 flex items-center pr-4 space-x-2\">\n\t\t\t\t<!-- Clear Button -->\n\t\t\t\t<button v-if=\"searchQuery\" @click=\"clearSearch\" class=\"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg \n                           transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20\"\n\t\t\t\t\taria-label=\"Clear search\">\n\t\t\t\t\t<svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\n\t\t\t\t<!-- Keyboard Shortcut Hint -->\n\t\t\t\t<div v-if=\"!searchQuery && !isFocused\" class=\"flex items-center pointer-events-none\">\n\t\t\t\t\t<kbd class=\"hidden sm:inline-flex items-center px-2.5 py-1.5 border border-slate-200 \n                               rounded-lg text-xs font-mono text-slate-400 bg-slate-50/80 shadow-sm\">\n\t\t\t\t\t\t<span class=\"text-xs\">⌘+</span>K\n\t\t\t\t\t</kbd>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Loading Spinner -->\n\t\t\t\t<div v-if=\"isLoading\" class=\"animate-spin\">\n\t\t\t\t\t<svg class=\"h-4 w-4 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\">\n\t\t\t\t\t\t</circle>\n\t\t\t\t\t\t<path class=\"opacity-75\" fill=\"currentColor\"\n\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\">\n\t\t\t\t\t\t</path>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Search Results Dropdown -->\n\t\t<div v-if=\"showSuggestions\" class=\"absolute z-50 w-full mt-3 bg-white border border-slate-200 rounded-2xl shadow-2xl \n                    overflow-hidden backdrop-blur-sm bg-white/95\"\n\t\t\t:class=\"{ 'animate-in slide-in-from-top-2 duration-200': showSuggestions }\">\n\n\t\t\t<!-- Results Header -->\n\t\t\t<div v-if=\"searchSuggestions.length > 0\"\n\t\t\t\tclass=\"px-4 py-3 bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-100\">\n\t\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t\t<span class=\"text-xs font-semibold text-slate-600 uppercase tracking-wider\">\n\t\t\t\t\t\t{{ searchSuggestions.length }} Result{{ searchSuggestions.length !== 1 ? 's' : '' }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"text-xs text-slate-500\">\n\t\t\t\t\t\t{{ Math.round(searchTime) }}ms\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Search Results -->\n\t\t\t<div ref=\"suggestionsContainer\"\n\t\t\t\tclass=\"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200 scrollbar-track-transparent\">\n\t\t\t\t<div v-if=\"searchSuggestions.length === 0 && searchQuery.length >= 2\" class=\"px-6 py-8 text-center\">\n\t\t\t\t\t<div class=\"w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-full flex items-center justify-center\">\n\t\t\t\t\t\t<svg class=\"w-8 h-8 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\td=\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-slate-500 text-sm font-medium\">No issues found</p>\n\t\t\t\t\t<p class=\"text-slate-400 text-xs mt-1\">Try adjusting your search terms</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-for=\"(suggestion, index) in searchSuggestions\" :key=\"suggestion.name || index\"\n\t\t\t\t\t:ref=\"el => suggestionRefs[index] = el\" @click=\"selectSuggestion(suggestion)\" class=\"group px-4 py-4 hover:bg-blue-50/50 cursor-pointer transition-all duration-150 \n                            border-b border-slate-50 last:border-b-0\" :class=\"{\n\t\t\t\t\t\t\t\t'bg-blue-50 ring-2 ring-blue-500/10': index === selectedSuggestionIndex\n\t\t\t\t\t\t\t}\">\n\t\t\t\t\t<div class=\"flex items-start space-x-4\">\n\t\t\t\t\t\t<!-- Issue Icon -->\n\t\t\t\t\t\t<div class=\"flex-shrink-0 mt-0.5\">\n\t\t\t\t\t\t\t<div class=\"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl \n                                        flex items-center justify-center group-hover:from-blue-200 group-hover:to-blue-300 \n                                        transition-all duration-200\">\n\t\t\t\t\t\t\t\t<svg class=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\td=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Issue Content -->\n\t\t\t\t\t\t<div class=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"flex-1 min-w-0\">\n\t\t\t\t\t\t\t\t\t<h4 class=\"text-sm font-semibold text-slate-900 truncate group-hover:text-blue-900 \n                                               transition-colors duration-150\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tv-html=\"highlightMatch(suggestion.subject || suggestion.name, searchQuery)\"></span>\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t<p class=\"text-xs text-slate-500 mt-1 line-clamp-2\">\n\t\t\t\t\t\t\t\t\t\tID: {{ suggestion.name }}\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"suggestion.customer\" class=\"ml-2\">• {{ suggestion.customer }}</span>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Status Badge -->\n\t\t\t\t\t\t\t\t<div class=\"flex-shrink-0 ml-4\">\n\t\t\t\t\t\t\t\t\t<span class=\"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium \n                                                 transition-colors duration-150\"\n\t\t\t\t\t\t\t\t\t\t:class=\"getStatusBadgeClass(suggestion.status)\">\n\t\t\t\t\t\t\t\t\t\t{{ suggestion.status }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Additional Info -->\n\t\t\t\t\t\t\t<div class=\"mt-2 flex items-center justify-between text-xs text-slate-400\">\n\t\t\t\t\t\t\t\t<!-- Raised By -->\n\t\t\t\t\t\t\t\t<div v-if=\"suggestion.raised_by\" class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{ suggestion.raised_by }}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Creation Date -->\n\t\t\t\t\t\t\t\t<div v-if=\"suggestion.creation\" class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{ formatCreationDate(suggestion.creation) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Footer with shortcuts -->\n\t\t\t<div v-if=\"searchQuery && searchSuggestions.length > 0\"\n\t\t\t\tclass=\"px-4 py-3 bg-slate-50/50 border-t border-slate-100\">\n\t\t\t\t<div class=\"flex items-center justify-between text-xs text-slate-500\">\n\t\t\t\t\t<div class=\"flex items-center space-x-4\">\n\t\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\t\tclass=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1\">↵</kbd>\n\t\t\t\t\t\t\tto select\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\t\tclass=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1\">↑↓</kbd>\n\t\t\t\t\t\t\tto navigate\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"flex items-center\">\n\t\t\t\t\t\t<kbd\n\t\t\t\t\t\t\tclass=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs font-mono mr-1\">esc</kbd>\n\t\t\t\t\t\tto close\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Backdrop -->\n\t\t<div v-if=\"showSuggestions\" class=\"fixed inset-0 z-40 bg-black/5\" @click=\"hideSuggestions\">\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, onUnmounted } from 'vue'\nimport { searchIssues } from '../data/issues'\n\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: String,\n\t\tdefault: ''\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\tdefault: 'Search issues by title, description, ID...'\n\t},\n\tissues: {\n\t\ttype: Array,\n\t\tdefault: () => []\n\t}\n})\n\nconst emit = defineEmits(['update:modelValue', 'search', 'suggestion-selected'])\n\nconst searchInput = ref(null)\nconst searchQuery = ref(props.modelValue)\nconst isFocused = ref(false)\nconst showSuggestions = ref(false)\nconst selectedSuggestionIndex = ref(-1)\nconst isLoading = ref(false)\nconst searchTime = ref(0)\n\n// Refs for auto-scroll functionality\nconst suggestionsContainer = ref(null)\nconst suggestionRefs = ref([])\n\n// Debounce timer for search\nlet searchTimeout = null\n\n// Watch for external changes to modelValue\nwatch(() => props.modelValue, (newValue) => {\n\tsearchQuery.value = newValue\n})\n\n// Watch for changes in search query\nwatch(searchQuery, (newValue) => {\n\temit('update:modelValue', newValue)\n\temit('search', newValue)\n})\n\n// Search suggestions from API\nconst searchSuggestions = ref([])\n\n// Function to fetch search suggestions from API\nconst fetchSearchSuggestions = async (query) => {\n\tif (!query || query.length < 2) {\n\t\tsearchSuggestions.value = []\n\t\tshowSuggestions.value = false\n\t\tisLoading.value = false\n\t\treturn\n\t}\n\n\ttry {\n\t\tisLoading.value = true\n\t\tconst startTime = performance.now()\n\n\t\tconst results = await searchIssues(query, 8)\n\n\t\tsearchTime.value = performance.now() - startTime\n\t\tsearchSuggestions.value = results || []\n\t\tshowSuggestions.value = true\n\n\t} catch (error) {\n\t\tconsole.error('Search error:', error)\n\t\tsearchSuggestions.value = []\n\t\tshowSuggestions.value = false\n\t} finally {\n\t\tisLoading.value = false\n\t}\n}\n\n// Debounced search function\nconst debouncedSearch = (query) => {\n\t// Clear any existing timeout\n\tif (searchTimeout) {\n\t\tclearTimeout(searchTimeout)\n\t}\n\n\t// Reset selected suggestion index when typing\n\tselectedSuggestionIndex.value = -1\n\n\t// If query is too short, clear suggestions immediately\n\tif (!query || query.length < 2) {\n\t\tsearchSuggestions.value = []\n\t\tshowSuggestions.value = false\n\t\tisLoading.value = false\n\t\treturn\n\t}\n\n\t// Show loading state immediately for better UX\n\tisLoading.value = true\n\n\t// Set new timeout for 1 second\n\tsearchTimeout = setTimeout(() => {\n\t\tfetchSearchSuggestions(query)\n\t}, 1000)\n}\n\nconst handleSearch = () => {\n\tdebouncedSearch(searchQuery.value)\n}\n\n// Highlight matching text in search results\nconst highlightMatch = (text, query) => {\n\tif (!text || !query) return text\n\n\tconst escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n\tconst regex = new RegExp(`(${escapedQuery})`, 'gi')\n\treturn text.replace(regex, '<mark class=\"bg-yellow-200 text-yellow-900 px-0.5 rounded\">$1</mark>')\n}\n\n// Get status badge styling\nconst getStatusBadgeClass = (status) => {\n\tconst statusClasses = {\n\t\t'Open': 'bg-green-100 text-green-800 border border-green-200',\n\t\t'New': 'bg-blue-100 text-blue-800 border border-blue-200',\n\t\t'In Progress': 'bg-blue-100 text-blue-800 border border-blue-200',\n\t\t'In Review': 'bg-orange-100 text-orange-800 border border-orange-200',\n\t\t'Resolved': 'bg-gray-100 text-gray-800 border border-gray-200',\n\t\t'Closed': 'bg-red-100 text-red-800 border border-red-200',\n\t\t'Pending': 'bg-yellow-100 text-yellow-800 border border-yellow-200',\n\t\t'On Hold': 'bg-orange-100 text-orange-800 border border-orange-200',\n\t\t'Delivered': 'bg-green-100 text-green-800 border border-green-200',\n\t\t'Confirmed': 'bg-purple-100 text-purple-800 border border-purple-200'\n\t}\n\n\treturn statusClasses[status] || 'bg-gray-100 text-gray-800 border border-gray-200'\n}\n\nconst handleFocus = () => {\n\tisFocused.value = true\n\t// Clear any pending blur timeout to prevent suggestions from hiding\n\tif (blurTimeout) {\n\t\tclearTimeout(blurTimeout)\n\t\tblurTimeout = null\n\t}\n\n\t// Show suggestions if there's a query and we have results or need to fetch them\n\tif (searchQuery.value.length >= 2) {\n\t\t// If we already have suggestions, show them immediately\n\t\tif (searchSuggestions.value.length > 0) {\n\t\t\tshowSuggestions.value = true\n\t\t} else {\n\t\t\t// Otherwise, fetch new suggestions\n\t\t\tfetchSearchSuggestions(searchQuery.value)\n\t\t}\n\t}\n}\n\n// Add blur timeout variable\nlet blurTimeout = null\n\nconst handleBlur = () => {\n\tisFocused.value = false\n\t// Use a timeout to allow for click events on suggestions\n\tblurTimeout = setTimeout(() => {\n\t\tshowSuggestions.value = false\n\t\tblurTimeout = null\n\t}, 200)\n}\n\nconst handleKeydown = (event) => {\n\tif (!showSuggestions.value) return\n\n\tswitch (event.key) {\n\t\tcase 'ArrowDown':\n\t\t\tevent.preventDefault()\n\t\t\tselectedSuggestionIndex.value = Math.min(\n\t\t\t\tselectedSuggestionIndex.value + 1,\n\t\t\t\tsearchSuggestions.value.length - 1\n\t\t\t)\n\t\t\t// Auto-scroll to the selected suggestion\n\t\t\tscrollToSelectedSuggestion()\n\t\t\tbreak\n\t\tcase 'ArrowUp':\n\t\t\tevent.preventDefault()\n\t\t\tselectedSuggestionIndex.value = Math.max(selectedSuggestionIndex.value - 1, -1)\n\t\t\t// Auto-scroll to the selected suggestion\n\t\t\tscrollToSelectedSuggestion()\n\t\t\tbreak\n\t\tcase 'Enter':\n\t\t\tevent.preventDefault()\n\t\t\tif (selectedSuggestionIndex.value >= 0) {\n\t\t\t\tselectSuggestion(searchSuggestions.value[selectedSuggestionIndex.value])\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'Escape':\n\t\t\thideSuggestions()\n\t\t\tsearchInput.value?.blur()\n\t\t\tbreak\n\t}\n\n}\n\nconst selectSuggestion = (suggestion) => {\n\tsearchQuery.value = suggestion.name\n\thideSuggestions()\n\t\n\t// Navigate to Frappe issue page\n\tconst hostname = window.location.origin\n\tconst issueUrl = `${hostname}/app/issue/${suggestion.name}`\n\twindow.open(issueUrl, '_blank')\n\t\n\temit('suggestion-selected', suggestion)\n}\n\nconst clearSearch = () => {\n\tsearchQuery.value = ''\n\thideSuggestions()\n\tsearchInput.value?.focus()\n}\n\nconst hideSuggestions = () => {\n\tshowSuggestions.value = false\n\tselectedSuggestionIndex.value = -1\n}\n\n// Function to scroll selected suggestion into view\nconst scrollToSelectedSuggestion = () => {\n\tif (selectedSuggestionIndex.value < 0 || !suggestionsContainer.value || !suggestionRefs.value[selectedSuggestionIndex.value]) {\n\t\treturn\n\t}\n\n\tconst container = suggestionsContainer.value\n\tconst selectedElement = suggestionRefs.value[selectedSuggestionIndex.value]\n\n\tif (selectedElement) {\n\t\t// Get the position of the selected element relative to the container\n\t\tconst containerRect = container.getBoundingClientRect()\n\t\tconst elementRect = selectedElement.getBoundingClientRect()\n\n\t\t// Calculate if the element is outside the visible area\n\t\tconst elementTop = elementRect.top - containerRect.top + container.scrollTop\n\t\tconst elementBottom = elementTop + elementRect.height\n\n\t\tconst containerScrollTop = container.scrollTop\n\t\tconst containerHeight = container.clientHeight\n\n\t\t// Scroll if element is above the visible area\n\t\tif (elementTop < containerScrollTop) {\n\t\t\tcontainer.scrollTop = elementTop\n\t\t}\n\t\t// Scroll if element is below the visible area\n\t\telse if (elementBottom > containerScrollTop + containerHeight) {\n\t\t\tcontainer.scrollTop = elementBottom - containerHeight\n\t\t}\n\t}\n}\n\n// Function to format creation date for display\nconst formatCreationDate = (dateString) => {\n\tif (!dateString) return ''\n\n\ttry {\n\t\tconst date = new Date(dateString)\n\t\tconst now = new Date()\n\t\tconst diffTime = Math.abs(now - date)\n\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n\n\t\t// If less than 1 day, show relative time\n\t\tif (diffDays === 1) {\n\t\t\treturn 'Today'\n\t\t} else if (diffDays === 2) {\n\t\t\treturn 'Yesterday'\n\t\t} else if (diffDays <= 7) {\n\t\t\treturn `${diffDays - 1} days ago`\n\t\t} else {\n\t\t\t// Otherwise show formatted date\n\t\t\treturn date.toLocaleDateString('en-US', {\n\t\t\t\tmonth: 'short',\n\t\t\t\tday: 'numeric',\n\t\t\t\tyear: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('Error formatting date:', error)\n\t\treturn dateString\n\t}\n}\n\n// Global keyboard shortcut (Cmd+K / Ctrl+K)\nconst handleGlobalKeydown = (event) => {\n\tif ((event.metaKey || event.ctrlKey) && event.key === 'k') {\n\t\tevent.preventDefault()\n\t\tsearchInput.value?.focus()\n\t\tsearchInput.value?.select()\n\t}\n}\n\nonMounted(() => {\n\tdocument.addEventListener('keydown', handleGlobalKeydown)\n})\n\nonUnmounted(() => {\n\tdocument.removeEventListener('keydown', handleGlobalKeydown)\n\t// Clean up any pending timeouts\n\tif (searchTimeout) {\n\t\tclearTimeout(searchTimeout)\n\t}\n\tif (blurTimeout) {\n\t\tclearTimeout(blurTimeout)\n\t}\n})\n\n// Expose methods for parent component\ndefineExpose({\n\tfocus: () => {\n\t\tsearchInput.value?.focus()\n\t\tsearchInput.value?.select()\n\t},\n\tselect: () => searchInput.value?.select(),\n\t$el: searchInput\n})\n</script>\n\n<style scoped>\n/* Custom scrollbar styles */\n.scrollbar-thin {\n\tscrollbar-width: thin;\n}\n\n.scrollbar-thumb-slate-200::-webkit-scrollbar-thumb {\n\tbackground-color: rgb(226 232 240);\n\tborder-radius: 0.375rem;\n}\n\n.scrollbar-track-transparent::-webkit-scrollbar-track {\n\tbackground-color: transparent;\n}\n\n.scrollbar-thin::-webkit-scrollbar {\n\twidth: 6px;\n}\n\n/* Animation classes */\n@keyframes slide-in-from-top {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translateY(-10px);\n\t}\n\n\tto {\n\t\topacity: 1;\n\t\ttransform: translateY(0);\n\t}\n}\n\n.animate-in {\n\tanimation-fill-mode: both;\n}\n\n.slide-in-from-top-2 {\n\tanimation-name: slide-in-from-top;\n}\n\n.duration-200 {\n\tanimation-duration: 200ms;\n}\n\n/* Line clamp utility */\n.line-clamp-2 {\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 2;\n\t-webkit-box-orient: vertical;\n\toverflow: hidden;\n}\n\n/* Focus ring improvements */\n.focus\\:ring-blue-500\\/20:focus {\n\t--tw-ring-color: rgb(59 130 246 / 0.2);\n}\n\n/* Backdrop blur support */\n.backdrop-blur-sm {\n\tbackdrop-filter: blur(4px);\n}\n\n/* Background opacity utilities */\n.bg-white\\/95 {\n\tbackground-color: rgb(255 255 255 / 0.95);\n}\n\n.bg-slate-50\\/50 {\n\tbackground-color: rgb(248 250 252 / 0.5);\n}\n\n.bg-slate-50\\/80 {\n\tbackground-color: rgb(248 250 252 / 0.8);\n}\n\n.bg-blue-50\\/50 {\n\tbackground-color: rgb(239 246 255 / 0.5);\n}\n\n.bg-black\\/5 {\n\tbackground-color: rgb(0 0 0 / 0.05);\n}\n\n.ring-blue-500\\/10 {\n\t--tw-ring-color: rgb(59 130 246 / 0.1);\n}\n\n.ring-blue-500\\/20 {\n\t--tw-ring-color: rgb(59 130 246 / 0.2);\n}\n</style>","<template>\n  <div class=\"bg-white p-6 rounded-lg shadow-sm border mb-6\">\n    <!-- Search Section -->\n    <div class=\"mb-6\">\n      <div class=\"relative max-w-2xl mx-auto\">\n        <CustomSearchBox ref=\"searchBoxRef\" :model-value=\"localSearchQuery\" @update:model-value=\"handleSearchChange\"\n          @suggestion-selected=\"handleSuggestionSelected\" :issues=\"issues\"\n          placeholder=\"Search issues by title, description, assignee...\" class=\"awesome-search\" />\n        <div v-if=\"localSearchQuery\" class=\"absolute top-full left-0 right-0 mt-1 text-sm text-gray-500 text-center\">\n          Searching in {{ filteredCount }} issues\n        </div>\n      </div>\n    </div>\n\n\n    <!-- Compact Frappe-style Filter Controls -->\n    <div class=\"border-t border-gray-200 pt-4\">\n      <div class=\"flex items-center justify-between\">\n        <!-- Left side: Filter button and active filters -->\n        <div class=\"flex items-center space-x-3 flex-1\">\n          <!-- Filters Button -->\n          <button @click=\"showFilterPanel = !showFilterPanel\"\n            class=\"inline-flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md text-sm font-medium text-gray-700 transition-colors\">\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z\"/>\n            </svg>\n            <span>Filters</span>\n            <span v-if=\"dynamicFilters.length > 0\" class=\"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full\">\n              {{ dynamicFilters.length }}\n            </span>\n          </button>\n\n          <!-- Active Filters - Inline compact display -->\n          <div v-if=\"dynamicFilters.length > 0\" class=\"flex items-center space-x-2 flex-1 overflow-x-auto\">\n            <div v-for=\"(filter, index) in dynamicFilters\" :key=\"filter.id\" \n              class=\"flex items-center space-x-1 bg-gray-100 rounded px-2 py-1 text-sm whitespace-nowrap\">\n              <span class=\"text-gray-600 font-medium\">{{ getFieldLabel(filter.field) }}</span>\n              <span class=\"text-gray-500\">{{ filter.operator }}</span>\n              <!-- Special display for tags with colors -->\n              <span v-if=\"filter.field === '_user_tags' && filter.value\" \n                :style=\"getTagStyle(filter.value)\"\n                class=\"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border\">\n                {{ filter.value }}\n              </span>\n              <!-- Regular display for other fields -->\n              <span v-else class=\"text-gray-900\">{{ filter.value }}</span>\n              <button @click=\"removeDynamicFilter(index)\"\n                class=\"text-gray-400 hover:text-red-600 ml-1\">\n                <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <!-- Right side: Clear and Apply buttons -->\n        <div v-if=\"dynamicFilters.length > 0\" class=\"flex items-center space-x-2 ml-4\">\n          <button @click=\"clearAllDynamicFilters\"\n            class=\"px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors\">\n            Clear Filters\n          </button>\n          <button @click=\"applyFilters\"\n            class=\"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded-md hover:bg-gray-800 transition-colors\">\n            Apply Filters\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Frappe-style Filter Panel -->\n    <div v-if=\"showFilterPanel\" class=\"relative\">\n      <div class=\"absolute top-2 left-0 right-0 z-50 bg-white border border-gray-200 rounded-lg shadow-lg\">\n        <div class=\"flex\">\n          <!-- Left Sidebar - Field Selection -->\n          <div class=\"w-48 border-r border-gray-200 bg-gray-50\">\n            <div class=\"p-3 border-b border-gray-200\">\n              <h4 class=\"text-sm font-medium text-gray-900\">Add Filter</h4>\n            </div>\n            <div class=\"max-h-64 overflow-y-auto\">\n              <button v-for=\"field in availableFields\" :key=\"field.value\"\n                @click=\"addNewFilter(field.value)\"\n                class=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors\">\n                {{ field.label }}\n              </button>\n            </div>\n          </div>\n\n          <!-- Right Panel - Active Filters -->\n          <div class=\"flex-1 min-w-96\">\n            <div class=\"p-4\">\n              <div v-if=\"dynamicFilters.length === 0\" class=\"text-center py-8 text-gray-500\">\n                <p class=\"text-sm\">Select a field from the left to add a filter</p>\n              </div>\n              \n              <div v-else class=\"space-y-3\">\n                <div v-for=\"(filter, index) in dynamicFilters\" :key=\"filter.id\" \n                  class=\"flex items-center space-x-3 p-3 bg-gray-50 rounded border\">\n                  \n                  <!-- Field Name (read-only) -->\n                  <div class=\"w-24 text-sm font-medium text-gray-700\">\n                    {{ getFieldLabel(filter.field) }}\n                  </div>\n\n                  <!-- Operator -->\n                  <div class=\"w-24\">\n                    <select v-model=\"filter.operator\" @change=\"updateDynamicFilter(index)\"\n                      class=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500\">\n                      <option v-for=\"op in getOperatorOptions(filter.field)\" :key=\"op.value\" :value=\"op.value\">\n                        {{ op.label }}\n                      </option>\n                    </select>\n                  </div>\n\n                  <!-- Value -->\n                  <div class=\"flex-1\">\n                    <!-- Special handling for tags with colors -->\n                    <div v-if=\"filter.field === '_user_tags'\" class=\"relative\">\n                      <select v-model=\"filter.value\" \n                        @change=\"updateDynamicFilter(index)\"\n                        class=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500\">\n                        <option value=\"\">Select tag...</option>\n                        <option v-for=\"tag in availableTags\" :key=\"tag.value\" :value=\"tag.value\">\n                          {{ tag.label }}\n                        </option>\n                      </select>\n                      <!-- Show selected tag with color -->\n                      <div v-if=\"filter.value\" class=\"absolute right-8 top-1/2 transform -translate-y-1/2\">\n                        <span :style=\"getTagStyle(filter.value)\"\n                          class=\"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border\">\n                          {{ filter.value }}\n                        </span>\n                      </div>\n                    </div>\n                    <!-- Regular select for other fields -->\n                    <select v-else-if=\"isSelectField(filter.field)\" \n                      v-model=\"filter.value\" \n                      @change=\"updateDynamicFilter(index)\"\n                      class=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500\">\n                      <option value=\"\">Select...</option>\n                      <option v-for=\"option in getFieldOptions(filter.field)\" :key=\"option.value\" :value=\"option.value\">\n                        {{ option.label }}\n                      </option>\n                    </select>\n                    <!-- Text input for other fields -->\n                    <input v-else\n                      v-model=\"filter.value\"\n                      @input=\"updateDynamicFilter(index)\"\n                      type=\"text\"\n                      :placeholder=\"getFieldPlaceholder(filter.field)\"\n                      class=\"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500\" />\n                  </div>\n\n                  <!-- Remove Button -->\n                  <button @click=\"removeDynamicFilter(index)\"\n                    class=\"p-1 text-gray-400 hover:text-red-600 transition-colors\">\n                    <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n\n              <!-- Bottom Actions -->\n              <div v-if=\"dynamicFilters.length > 0\" class=\"flex justify-between items-center pt-4 mt-4 border-t border-gray-200\">\n                <button @click=\"clearAllDynamicFilters\"\n                  class=\"text-sm text-gray-600 hover:text-gray-900 transition-colors\">\n                  Clear Filters\n                </button>\n                <button @click=\"applyFilters\"\n                  class=\"px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 transition-colors\">\n                  Apply Filters\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Backdrop -->\n      <div class=\"fixed inset-0 z-40\" @click=\"showFilterPanel = false\"></div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { Select } from \"frappe-ui\"\nimport { computed, ref, watch, onMounted, onUnmounted } from \"vue\"\nimport CustomSearchBox from \"./CustomSearchBox.vue\"\nimport { getTagColor } from \"../data/issues\"\n\n// Props\nconst props = defineProps({\n  searchQuery: {\n    type: String,\n    default: \"\",\n  },\n  filters: {\n    type: Object,\n    default: () => ({\n      status: \"\",\n      priority: \"\",\n      assignee: \"\",\n      tags: \"\",\n      sortBy: \"creation\",\n    }),\n  },\n  statusOptions: {\n    type: Array,\n    default: () => [],\n  },\n  priorityOptions: {\n    type: Array,\n    default: () => [],\n  },\n  assigneeOptions: {\n    type: Array,\n    default: () => [],\n  },\n  tagsOptions: {\n    type: Array,\n    default: () => [],\n  },\n  filteredCount: {\n    type: Number,\n    default: 0,\n  },\n  issues: {\n    type: Array,\n    default: () => [],\n  },\n})\n\n// Emits\nconst emit = defineEmits([\"update:searchQuery\", \"update:filters\", \"suggestion-selected\"])\n\n// Local reactive state\nconst localSearchQuery = ref(props.searchQuery)\nconst localFilters = ref({ ...props.filters })\nconst searchBoxRef = ref(null)\n\n// Dynamic filter system state\nconst showFilterPanel = ref(false)\nconst dynamicFilters = ref([])\nlet filterIdCounter = 0\n\n// Get available tags from issues\nconst availableTags = computed(() => {\n  const tagSet = new Set()\n  props.issues.forEach(issue => {\n    if (issue._user_tags && Array.isArray(issue._user_tags)) {\n      issue._user_tags.forEach(tag => {\n        if (tag && tag.trim()) {\n          tagSet.add(tag.trim())\n        }\n      })\n    }\n  })\n  \n  return Array.from(tagSet).sort().map(tag => ({\n    label: tag,\n    value: tag,\n    color: getTagColor(tag)\n  }))\n})\n\n// Available fields for filtering based on Issue doctype schema\nconst availableFields = computed(() => [\n  // Core Issue Fields\n  {\n    value: 'subject',\n    label: 'Subject',\n    description: 'Filter by issue title',\n    icon: 'type',\n    type: 'text'\n  },\n  {\n    value: 'status',\n    label: 'Status',\n    description: 'Filter by issue status (New, In Review, etc.)',\n    icon: 'circle',\n    type: 'select'\n  },\n  {\n    value: 'priority',\n    label: 'Priority',\n    description: 'Filter by priority level',\n    icon: 'flag',\n    type: 'select'\n  },\n  {\n    value: 'issue_type',\n    label: 'Issue Type',\n    description: 'Filter by issue category',\n    icon: 'tag',\n    type: 'select'\n  },\n  {\n    value: 'raised_by',\n    label: 'Raised By (Email)',\n    description: 'Filter by who raised the issue',\n    icon: 'user',\n    type: 'text'\n  },\n  {\n    value: 'description',\n    label: 'Description',\n    description: 'Filter by issue description',\n    icon: 'file-text',\n    type: 'text'\n  },\n  \n  // Customer & Contact Fields\n  {\n    value: 'customer',\n    label: 'Customer',\n    description: 'Filter by customer',\n    icon: 'building',\n    type: 'link'\n  },\n  {\n    value: 'customer_name',\n    label: 'Customer Name',\n    description: 'Filter by customer name',\n    icon: 'building',\n    type: 'text'\n  },\n  {\n    value: 'contact',\n    label: 'Contact',\n    description: 'Filter by contact person',\n    icon: 'user',\n    type: 'link'\n  },\n  {\n    value: 'lead',\n    label: 'Lead',\n    description: 'Filter by associated lead',\n    icon: 'user-plus',\n    type: 'link'\n  },\n  \n  // Project & Company\n  {\n    value: 'project',\n    label: 'Project',\n    description: 'Filter by project',\n    icon: 'folder',\n    type: 'link'\n  },\n  {\n    value: 'company',\n    label: 'Company',\n    description: 'Filter by company',\n    icon: 'building',\n    type: 'link'\n  },\n  \n  // Service Level Agreement Fields\n  {\n    value: 'service_level_agreement',\n    label: 'Service Level Agreement',\n    description: 'Filter by SLA',\n    icon: 'clock',\n    type: 'link'\n  },\n  {\n    value: 'agreement_status',\n    label: 'SLA Status',\n    description: 'Filter by SLA status',\n    icon: 'check-circle',\n    type: 'select'\n  },\n  {\n    value: 'response_by',\n    label: 'Response By',\n    description: 'Filter by response deadline',\n    icon: 'clock',\n    type: 'datetime'\n  },\n  {\n    value: 'sla_resolution_by',\n    label: 'Resolution By',\n    description: 'Filter by resolution deadline',\n    icon: 'clock',\n    type: 'datetime'\n  },\n  \n  // Custom Fields\n  {\n    value: 'custom_assigned_csm_team',\n    label: 'Assigned CSM Team',\n    description: 'Filter by assigned CSM team',\n    icon: 'users',\n    type: 'link'\n  },\n  {\n    value: 'custom_users_assigned',\n    label: 'Users Assigned',\n    description: 'Filter by assigned users',\n    icon: 'user-check',\n    type: 'multiselect'\n  },\n  {\n    value: 'custom_labels',\n    label: 'Labels',\n    description: 'Filter by issue labels',\n    icon: 'tag',\n    type: 'multiselect'\n  },\n  \n  // Date Fields\n  {\n    value: 'creation',\n    label: 'Created Date',\n    description: 'Filter by creation date',\n    icon: 'calendar',\n    type: 'date'\n  },\n  {\n    value: 'modified',\n    label: 'Modified Date',\n    description: 'Filter by last modified date',\n    icon: 'clock',\n    type: 'date'\n  },\n  {\n    value: 'opening_date',\n    label: 'Opening Date',\n    description: 'Filter by opening date',\n    icon: 'calendar',\n    type: 'date'\n  },\n  {\n    value: 'opening_time',\n    label: 'Opening Time',\n    description: 'Filter by opening time',\n    icon: 'clock',\n    type: 'time'\n  },\n  {\n    value: 'sla_resolution_date',\n    label: 'Resolution Date',\n    description: 'Filter by resolution date',\n    icon: 'calendar',\n    type: 'datetime'\n  },\n  {\n    value: 'first_responded_on',\n    label: 'First Responded On',\n    description: 'Filter by first response date',\n    icon: 'clock',\n    type: 'datetime'\n  },\n  \n  // Duration Fields\n  {\n    value: 'first_response_time',\n    label: 'First Response Time',\n    description: 'Filter by first response time',\n    icon: 'clock',\n    type: 'duration'\n  },\n  {\n    value: 'avg_response_time',\n    label: 'Average Response Time',\n    description: 'Filter by average response time',\n    icon: 'clock',\n    type: 'duration'\n  },\n  {\n    value: 'resolution_time',\n    label: 'Resolution Time',\n    description: 'Filter by resolution time',\n    icon: 'clock',\n    type: 'duration'\n  },\n  {\n    value: 'user_resolution_time',\n    label: 'User Resolution Time',\n    description: 'Filter by user resolution time',\n    icon: 'clock',\n    type: 'duration'\n  },\n  {\n    value: 'total_hold_time',\n    label: 'Total Hold Time',\n    description: 'Filter by total hold time',\n    icon: 'pause',\n    type: 'duration'\n  },\n  \n  // Boolean Fields\n  {\n    value: 'via_customer_portal',\n    label: 'Via Customer Portal',\n    description: 'Filter by customer portal origin',\n    icon: 'globe',\n    type: 'boolean'\n  },\n  \n  // System Fields\n  {\n    value: 'naming_series',\n    label: 'Series',\n    description: 'Filter by naming series',\n    icon: 'hash',\n    type: 'text'\n  },\n  {\n    value: 'email_account',\n    label: 'Email Account',\n    description: 'Filter by email account',\n    icon: 'mail',\n    type: 'link'\n  },\n  {\n    value: 'issue_split_from',\n    label: 'Issue Split From',\n    description: 'Filter by parent issue',\n    icon: 'git-branch',\n    type: 'link'\n  },\n  \n  // Tags (User Tags)\n  {\n    value: '_user_tags',\n    label: 'Tags',\n    description: 'Filter by user tags',\n    icon: 'tag',\n    type: 'tags'\n  }\n])\n\n// Sort options (static)\nconst sortOptions = computed(() => [\n  { label: \"Created Date (Newest)\", value: \"creation desc\" },\n  { label: \"Created Date (Oldest)\", value: \"creation asc\" },\n  { label: \"Modified Date (Newest)\", value: \"modified desc\" },\n  { label: \"Modified Date (Oldest)\", value: \"modified asc\" },\n  { label: \"Subject (A-Z)\", value: \"subject asc\" },\n  { label: \"Subject (Z-A)\", value: \"subject desc\" },\n  { label: \"Priority\", value: \"priority asc\" },\n  { label: \"Status\", value: \"status asc\" },\n])\n\n// Watch for prop changes and update local state\nwatch(\n  () => props.searchQuery,\n  (newValue) => {\n    localSearchQuery.value = newValue\n  },\n)\n\nwatch(\n  () => props.filters,\n  (newValue) => {\n    localFilters.value = { ...newValue }\n  },\n  { deep: true },\n)\n\n// Keyboard shortcut handler\nconst handleKeyboardShortcut = (event) => {\n  if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\n    event.preventDefault()\n    focusSearch()\n  }\n}\n\n// Focus search function\nconst focusSearch = () => {\n  if (searchBoxRef.value) {\n    searchBoxRef.value.focus()\n    searchBoxRef.value.select()\n  }\n}\n\n// Event handlers\nconst handleSearchChange = (value) => {\n  localSearchQuery.value = value\n  emit(\"update:searchQuery\", value)\n}\n\nconst handleSuggestionSelected = (suggestion) => {\n  emit(\"suggestion-selected\", suggestion)\n}\n\nconst handleFilterChange = () => {\n  emit(\"update:filters\", { ...localFilters.value })\n}\n\n// Modern filter features\nconst activeFilterCount = computed(() => {\n  let count = 0\n  if (localFilters.value.status) count++\n  if (localFilters.value.priority) count++\n  if (localFilters.value.assignee) count++\n  if (localFilters.value.tags) count++\n  if (localFilters.value.sortBy !== 'creation desc') count++\n  return count\n})\n\nconst activeFilters = computed(() => {\n  const filters = []\n  \n  if (localFilters.value.status) {\n    const statusOption = props.statusOptions.find(opt => opt.value === localFilters.value.status)\n    filters.push({\n      key: 'status',\n      label: 'Status',\n      value: statusOption?.label || localFilters.value.status,\n      colorClass: 'bg-green-100 text-green-800 border-green-200'\n    })\n  }\n  \n  if (localFilters.value.priority) {\n    const priorityOption = props.priorityOptions.find(opt => opt.value === localFilters.value.priority)\n    filters.push({\n      key: 'priority',\n      label: 'Priority',\n      value: priorityOption?.label || localFilters.value.priority,\n      colorClass: 'bg-orange-100 text-orange-800 border-orange-200'\n    })\n  }\n  \n  if (localFilters.value.assignee) {\n    const assigneeOption = props.assigneeOptions.find(opt => opt.value === localFilters.value.assignee)\n    filters.push({\n      key: 'assignee',\n      label: 'Assignee',\n      value: assigneeOption?.label || localFilters.value.assignee,\n      colorClass: 'bg-blue-100 text-blue-800 border-blue-200'\n    })\n  }\n  \n  if (localFilters.value.tags) {\n    const tagOption = props.tagsOptions.find(opt => opt.value === localFilters.value.tags)\n    filters.push({\n      key: 'tags',\n      label: 'Tags',\n      value: tagOption?.label || localFilters.value.tags,\n      colorClass: 'bg-purple-100 text-purple-800 border-purple-200'\n    })\n  }\n  \n  if (localFilters.value.sortBy !== 'creation desc') {\n    const sortOption = sortOptions.value.find(opt => opt.value === localFilters.value.sortBy)\n    filters.push({\n      key: 'sortBy',\n      label: 'Sort',\n      value: sortOption?.label || localFilters.value.sortBy,\n      colorClass: 'bg-indigo-100 text-indigo-800 border-indigo-200'\n    })\n  }\n  \n  return filters\n})\n\nconst clearFilter = (filterKey) => {\n  if (filterKey === 'sortBy') {\n    localFilters.value[filterKey] = 'creation desc'\n  } else {\n    localFilters.value[filterKey] = ''\n  }\n  handleFilterChange()\n}\n\nconst clearAllFilters = () => {\n  localFilters.value = {\n    status: '',\n    priority: '',\n    assignee: '',\n    tags: '',\n    sortBy: 'creation desc'\n  }\n  handleFilterChange()\n}\n\n// Dynamic filter functions\nconst addNewFilter = (fieldValue) => {\n  const field = availableFields.value.find(f => f.value === fieldValue)\n  if (!field) return\n\n  const newFilter = {\n    id: ++filterIdCounter,\n    field: fieldValue,\n    operator: getDefaultOperator(fieldValue),\n    value: '',\n    type: field.type\n  }\n\n  dynamicFilters.value.push(newFilter)\n  showFilterPanel.value = false\n  updateDynamicFiltersOutput()\n}\n\nconst removeDynamicFilter = (index) => {\n  dynamicFilters.value.splice(index, 1)\n  updateDynamicFiltersOutput()\n}\n\nconst clearAllDynamicFilters = () => {\n  dynamicFilters.value = []\n  updateDynamicFiltersOutput()\n}\n\nconst updateDynamicFilter = (index) => {\n  // Trigger reactivity and update parent\n  updateDynamicFiltersOutput()\n}\n\nconst updateDynamicFiltersOutput = () => {\n  // Convert dynamic filters to the format expected by parent component\n  const filterObj = {}\n  \n  dynamicFilters.value.forEach(filter => {\n    if (filter.value) {\n      const key = filter.field === 'issue_type' ? 'tags' : \n                  filter.field === 'raised_by' ? 'assignee' : filter.field\n      \n      if (filter.operator === 'equals') {\n        filterObj[key] = filter.value\n      } else if (filter.operator === 'contains') {\n        filterObj[key] = filter.value\n      } else if (filter.operator === 'not_equals') {\n        filterObj[key] = `!${filter.value}`\n      }\n      // Add more operator handling as needed\n    }\n  })\n  \n  // Update local filters and emit\n  localFilters.value = { ...localFilters.value, ...filterObj }\n  emit(\"update:filters\", { ...localFilters.value })\n}\n\n// Helper functions for dynamic filters\nconst getFieldLabel = (fieldValue) => {\n  const field = availableFields.value.find(f => f.value === fieldValue)\n  return field?.label || fieldValue\n}\n\nconst getDefaultOperator = (fieldValue) => {\n  const field = availableFields.value.find(f => f.value === fieldValue)\n  if (field?.type === 'select') return 'equals'\n  if (field?.type === 'text') return 'like'\n  if (field?.type === 'date' || field?.type === 'datetime') return 'equals'\n  if (field?.type === 'time') return 'equals'\n  if (field?.type === 'duration') return 'equals'\n  if (field?.type === 'boolean') return 'equals'\n  if (field?.type === 'link') return 'equals'\n  if (field?.type === 'multiselect' || field?.type === 'tags') return 'like'\n  return 'equals'\n}\n\nconst getOperatorOptions = (fieldValue) => {\n  const field = availableFields.value.find(f => f.value === fieldValue)\n  \n  if (field?.type === 'select') {\n    return [\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' },\n      { label: 'In', value: 'in' },\n      { label: 'Not In', value: 'not_in' }\n    ]\n  }\n  \n  if (field?.type === 'text') {\n    return [\n      { label: 'Like', value: 'like' },\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' },\n      { label: 'Starts with', value: 'starts_with' },\n      { label: 'Ends with', value: 'ends_with' },\n      { label: 'Is Set', value: 'is_set' },\n      { label: 'Is Not Set', value: 'is_not_set' }\n    ]\n  }\n  \n  if (field?.type === 'date' || field?.type === 'datetime') {\n    return [\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' },\n      { label: 'Greater than', value: 'greater_than' },\n      { label: 'Less than', value: 'less_than' },\n      { label: 'Greater than or equal', value: 'greater_than_equal' },\n      { label: 'Less than or equal', value: 'less_than_equal' },\n      { label: 'Between', value: 'between' },\n      { label: 'Is Set', value: 'is_set' },\n      { label: 'Is Not Set', value: 'is_not_set' }\n    ]\n  }\n  \n  if (field?.type === 'time') {\n    return [\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' },\n      { label: 'Greater than', value: 'greater_than' },\n      { label: 'Less than', value: 'less_than' }\n    ]\n  }\n  \n  if (field?.type === 'duration') {\n    return [\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' },\n      { label: 'Greater than', value: 'greater_than' },\n      { label: 'Less than', value: 'less_than' },\n      { label: 'Is Set', value: 'is_set' },\n      { label: 'Is Not Set', value: 'is_not_set' }\n    ]\n  }\n  \n  if (field?.type === 'boolean') {\n    return [\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' }\n    ]\n  }\n  \n  if (field?.type === 'link') {\n    return [\n      { label: 'Equals', value: 'equals' },\n      { label: 'Not Equals', value: 'not_equals' },\n      { label: 'Like', value: 'like' },\n      { label: 'In', value: 'in' },\n      { label: 'Not In', value: 'not_in' },\n      { label: 'Is Set', value: 'is_set' },\n      { label: 'Is Not Set', value: 'is_not_set' }\n    ]\n  }\n  \n  if (field?.type === 'multiselect' || field?.type === 'tags') {\n    return [\n      { label: 'Like', value: 'like' },\n      { label: 'Not Like', value: 'not_like' },\n      { label: 'In', value: 'in' },\n      { label: 'Not In', value: 'not_in' },\n      { label: 'Is Set', value: 'is_set' },\n      { label: 'Is Not Set', value: 'is_not_set' }\n    ]\n  }\n  \n  return [{ label: 'Equals', value: 'equals' }]\n}\n\nconst isSelectField = (fieldValue) => {\n  const field = availableFields.value.find(f => f.value === fieldValue)\n  return field?.type === 'select' || field?.type === 'tags'\n}\n\nconst getFieldOptions = (fieldValue) => {\n  switch (fieldValue) {\n    case 'status':\n      return props.statusOptions\n    case 'priority':\n      return props.priorityOptions\n    case 'raised_by':\n      return props.assigneeOptions\n    case 'issue_type':\n      return props.tagsOptions\n    case '_user_tags':\n      return availableTags.value\n    default:\n      return []\n  }\n}\n\nconst getFieldPlaceholder = (fieldValue) => {\n  const field = availableFields.value.find(f => f.value === fieldValue)\n  \n  switch (fieldValue) {\n    // Text fields\n    case 'subject':\n      return 'Enter issue title...'\n    case 'description':\n      return 'Enter description text...'\n    case 'raised_by':\n      return 'Enter email address...'\n    case 'customer_name':\n      return 'Enter customer name...'\n    case 'naming_series':\n      return 'Enter series (e.g., ISS-2025-)...'\n    \n    // Date fields\n    case 'creation':\n    case 'modified':\n    case 'opening_date':\n    case 'sla_resolution_date':\n    case 'first_responded_on':\n      return 'YYYY-MM-DD or YYYY-MM-DD HH:MM:SS'\n    case 'response_by':\n    case 'sla_resolution_by':\n      return 'YYYY-MM-DD HH:MM:SS'\n    \n    // Time fields\n    case 'opening_time':\n      return 'HH:MM:SS'\n    \n    // Duration fields\n    case 'first_response_time':\n    case 'avg_response_time':\n    case 'resolution_time':\n    case 'user_resolution_time':\n    case 'total_hold_time':\n      return 'Enter duration (e.g., 2:30:00 for 2h 30m)'\n    \n    // Link fields\n    case 'customer':\n      return 'Enter customer name or ID...'\n    case 'contact':\n      return 'Enter contact name or ID...'\n    case 'lead':\n      return 'Enter lead name or ID...'\n    case 'project':\n      return 'Enter project name or ID...'\n    case 'company':\n      return 'Enter company name or ID...'\n    case 'service_level_agreement':\n      return 'Enter SLA name or ID...'\n    case 'custom_assigned_csm_team':\n      return 'Enter team name or ID...'\n    case 'email_account':\n      return 'Enter email account name...'\n    case 'issue_split_from':\n      return 'Enter parent issue ID...'\n    \n    // Boolean fields\n    case 'via_customer_portal':\n      return 'Enter 1 for Yes, 0 for No'\n    \n    // Multiselect/Tags fields\n    case 'custom_users_assigned':\n      return 'Enter user names (comma separated)...'\n    case 'custom_labels':\n      return 'Enter labels (comma separated)...'\n    case '_user_tags':\n      return 'Enter tags (comma separated)...'\n    \n    default:\n      // Generate placeholder based on field type\n      if (field?.type === 'date' || field?.type === 'datetime') {\n        return 'YYYY-MM-DD or YYYY-MM-DD HH:MM:SS'\n      } else if (field?.type === 'time') {\n        return 'HH:MM:SS'\n      } else if (field?.type === 'duration') {\n        return 'Enter duration (e.g., 2:30:00)'\n      } else if (field?.type === 'boolean') {\n        return 'Enter 1 for Yes, 0 for No'\n      } else if (field?.type === 'link') {\n        return `Enter ${field?.label?.toLowerCase() || 'value'} name or ID...`\n      } else if (field?.type === 'multiselect' || field?.type === 'tags') {\n        return `Enter ${field?.label?.toLowerCase() || 'values'} (comma separated)...`\n      } else {\n        return `Enter ${field?.label?.toLowerCase() || 'value'}...`\n      }\n  }\n}\n\n// Tag styling function (same as in IssueTable for consistency)\nconst getTagStyle = (tag) => {\n  // Get tag color from API\n  const hexColor = getTagColor(tag)\n\n  if (hexColor) {\n    // Convert hex color to RGB for background and text colors\n    const hex = hexColor.replace('#', '')\n    const r = parseInt(hex.substr(0, 2), 16)\n    const g = parseInt(hex.substr(2, 2), 16)\n    const b = parseInt(hex.substr(4, 2), 16)\n\n    // Create background color (lighter version with opacity)\n    const bgColor = `rgba(${r}, ${g}, ${b}, 0.1)`\n\n    // Create text color (darker version for contrast)\n    const textColor = `rgb(${Math.max(r - 50, 0)}, ${Math.max(g - 50, 0)}, ${Math.max(b - 50, 0)})`\n\n    return {\n      backgroundColor: bgColor,\n      color: textColor,\n      borderColor: textColor\n    }\n  }\n\n  // Fallback to default styling\n  return {\n    backgroundColor: '#f3f4f6',\n    color: '#374151',\n    borderColor: '#d1d5db'\n  }\n}\n\n// Apply filters function\nconst applyFilters = () => {\n  updateDynamicFiltersOutput()\n  showFilterPanel.value = false\n}\n\n// Lifecycle hooks for keyboard shortcuts\nonMounted(() => {\n  document.addEventListener('keydown', handleKeyboardShortcut)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('keydown', handleKeyboardShortcut)\n})\n</script>\n\n<style scoped>\n.awesome-search {\n  transition: all 0.3s ease;\n}\n\n.awesome-search:deep(.search-box) {\n  border-radius: 12px;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  border: 2px solid #e5e7eb;\n  background: white;\n  transition: all 0.3s ease;\n}\n\n.awesome-search:deep(.search-box):hover {\n  border-color: #3b82f6;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n}\n\n.awesome-search:deep(.search-box):focus-within {\n  border-color: #3b82f6;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n.awesome-search:deep(.search-input) {\n  border: none;\n  outline: none;\n  background: transparent;\n  font-size: 16px;\n  padding: 16px 16px 16px 44px;\n  height: auto;\n  border-radius: 12px;\n}\n\n.awesome-search:deep(.search-input)::placeholder {\n  color: #9ca3af;\n  font-weight: 400;\n}\n\n.awesome-search:deep(.search-icon) {\n  left: 14px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #6b7280;\n}\n\n/* Keyboard shortcut styling */\nkbd {\n  font-family: ui-monospace, SFMono-Regular, \"SF Mono\", Consolas, \"Liberation Mono\", Menlo, monospace;\n}\n\n/* Modern Filter Styling */\n.modern-filter-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.modern-filter-label {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: #4b5563;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  margin-bottom: 0.25rem;\n}\n\n/* Modern Select Styling */\n.modern-select:deep(.form-select) {\n  border: 1.5px solid #e5e7eb;\n  border-radius: 0.75rem;\n  padding: 0.75rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  transition: all 0.2s ease;\n  min-height: 42px;\n}\n\n.modern-select:deep(.form-select):hover {\n  border-color: #d1d5db;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  transform: translateY(-1px);\n}\n\n.modern-select:deep(.form-select):focus {\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  transform: translateY(-1px);\n  outline: none;\n}\n\n/* Filter-specific styling */\n.status-select:deep(.form-select):focus {\n  border-color: #10b981;\n  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);\n}\n\n.priority-select:deep(.form-select):focus {\n  border-color: #f59e0b;\n  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);\n}\n\n.assignee-select:deep(.form-select):focus {\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n.tags-select:deep(.form-select):focus {\n  border-color: #8b5cf6;\n  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);\n}\n\n.sort-select:deep(.form-select):focus {\n  border-color: #6366f1;\n  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\n}\n\n/* Active Filter Indicator */\n.filter-active-indicator {\n  position: absolute;\n  top: -0.25rem;\n  right: -0.25rem;\n  width: 0.75rem;\n  height: 0.75rem;\n  border-radius: 50%;\n  border: 2px solid white;\n  animation: pulse-indicator 2s infinite;\n  z-index: 10;\n}\n\n@keyframes pulse-indicator {\n  0%, 100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 0.8;\n    transform: scale(1.1);\n  }\n}\n\n/* Modern Filter Pills */\n.modern-filter-pill {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(4px);\n}\n\n.modern-filter-pill:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.modern-filter-pill button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  padding: 0.125rem;\n  transition: all 0.2s ease;\n}\n\n.modern-filter-pill button:hover {\n  transform: scale(1.1);\n}\n\n/* Responsive adjustments */\n@media (max-width: 640px) {\n  .modern-select:deep(.form-select) {\n    font-size: 0.875rem;\n    padding: 0.625rem 0.875rem;\n    min-height: 38px;\n  }\n  \n  .modern-filter-label {\n    font-size: 0.6875rem;\n  }\n}\n\n/* Enhanced hover states */\n.modern-filter-group:hover .modern-filter-label {\n  color: #374151;\n}\n\n/* Smooth transitions for all elements */\n.modern-filter-group * {\n  transition: all 0.2s ease;\n}\n</style>","<template>\r\n  <div class=\"bg-white rounded-lg shadow-sm border mt-4\">\r\n    <div class=\"px-6 py-4 flex items-center justify-between\">\r\n      <!-- Results info -->\r\n      <div class=\"text-sm text-gray-700\">\r\n        <span v-if=\"totalItems > 0\">\r\n          Showing {{ startItem }} to {{ endItem }} of {{ totalItems }} results\r\n        </span>\r\n        <span v-else>\r\n          No results found\r\n        </span>\r\n      </div>\r\n\r\n      <!-- Pagination controls -->\r\n      <div class=\"flex items-center space-x-2\" v-if=\"totalPages > 1\">\r\n        <!-- Previous button -->\r\n        <Button\r\n          theme=\"gray\"\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          :disabled=\"currentPage === 1\"\r\n          @click=\"goToPreviousPage\"\r\n        >\r\n          <template #prefix>\r\n            <FeatherIcon name=\"chevron-left\" class=\"h-4 w-4\" />\r\n          </template>\r\n          Previous\r\n        </Button>\r\n\r\n        <!-- Page numbers -->\r\n        <div class=\"flex items-center space-x-1\">\r\n          <!-- First page -->\r\n          <Button\r\n            v-if=\"showFirstPage\"\r\n            theme=\"gray\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            :class=\"{ 'bg-blue-50 text-blue-600 border-blue-200': currentPage === 1 }\"\r\n            @click=\"goToPage(1)\"\r\n          >\r\n            1\r\n          </Button>\r\n\r\n          <!-- First ellipsis -->\r\n          <span v-if=\"showFirstEllipsis\" class=\"px-2 text-gray-500\">...</span>\r\n\r\n          <!-- Visible page numbers -->\r\n          <Button\r\n            v-for=\"page in visiblePages\"\r\n            :key=\"page\"\r\n            theme=\"gray\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            :class=\"{ 'bg-blue-50 text-blue-600 border-blue-200': currentPage === page }\"\r\n            @click=\"goToPage(page)\"\r\n          >\r\n            {{ page }}\r\n          </Button>\r\n\r\n          <!-- Last ellipsis -->\r\n          <span v-if=\"showLastEllipsis\" class=\"px-2 text-gray-500\">...</span>\r\n\r\n          <!-- Last page -->\r\n          <Button\r\n            v-if=\"showLastPage\"\r\n            theme=\"gray\"\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            :class=\"{ 'bg-blue-50 text-blue-600 border-blue-200': currentPage === totalPages }\"\r\n            @click=\"goToPage(totalPages)\"\r\n          >\r\n            {{ totalPages }}\r\n          </Button>\r\n        </div>\r\n\r\n        <!-- Next button -->\r\n        <Button\r\n          theme=\"gray\"\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          :disabled=\"currentPage === totalPages\"\r\n          @click=\"goToNextPage\"\r\n        >\r\n          Next\r\n          <template #suffix>\r\n            <FeatherIcon name=\"chevron-right\" class=\"h-4 w-4\" />\r\n          </template>\r\n        </Button>\r\n      </div>\r\n\r\n      <!-- Items per page selector -->\r\n      <div class=\"flex items-center space-x-2\" v-if=\"showItemsPerPage\">\r\n        <span class=\"text-sm text-gray-700\">Items per page:</span>\r\n        <Select\r\n          v-model=\"localItemsPerPage\"\r\n          :options=\"itemsPerPageOptions\"\r\n          @change=\"handleItemsPerPageChange\"\r\n          class=\"w-20\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Button, FeatherIcon, Select } from \"frappe-ui\"\nimport { computed, ref, watch } from \"vue\"\n\n// Props\nconst props = defineProps({\n\tcurrentPage: {\n\t\ttype: Number,\n\t\tdefault: 1,\n\t},\n\ttotalItems: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t},\n\titemsPerPage: {\n\t\ttype: Number,\n\t\tdefault: 10,\n\t},\n\tshowItemsPerPage: {\n\t\ttype: Boolean,\n\t\tdefault: true,\n\t},\n\tmaxVisiblePages: {\n\t\ttype: Number,\n\t\tdefault: 5,\n\t},\n})\n\n// Emits\nconst emit = defineEmits([\n\t\"update:currentPage\",\n\t\"update:itemsPerPage\",\n\t\"pageChange\",\n])\n\n// Local state\nconst localItemsPerPage = ref(props.itemsPerPage)\n\n// Watch for prop changes\nwatch(\n\t() => props.itemsPerPage,\n\t(newValue) => {\n\t\tlocalItemsPerPage.value = newValue\n\t},\n)\n\n// Computed properties\nconst totalPages = computed(() => {\n\treturn Math.ceil(props.totalItems / props.itemsPerPage)\n})\n\nconst startItem = computed(() => {\n\tif (props.totalItems === 0) return 0\n\treturn (props.currentPage - 1) * props.itemsPerPage + 1\n})\n\nconst endItem = computed(() => {\n\tconst end = props.currentPage * props.itemsPerPage\n\treturn Math.min(end, props.totalItems)\n})\n\n// Calculate visible page numbers\nconst visiblePages = computed(() => {\n\tconst pages = []\n\tconst maxVisible = props.maxVisiblePages\n\tconst current = props.currentPage\n\tconst total = totalPages.value\n\n\tif (total <= maxVisible) {\n\t\t// Show all pages if total is less than max visible\n\t\tfor (let i = 1; i <= total; i++) {\n\t\t\tpages.push(i)\n\t\t}\n\t} else {\n\t\t// Calculate start and end of visible range\n\t\tlet start = Math.max(1, current - Math.floor(maxVisible / 2))\n\t\tlet end = Math.min(total, start + maxVisible - 1)\n\n\t\t// Adjust start if we're near the end\n\t\tif (end - start + 1 < maxVisible) {\n\t\t\tstart = Math.max(1, end - maxVisible + 1)\n\t\t}\n\n\t\t// Don't include first and last page in visible range if they'll be shown separately\n\t\tif (start > 1) start = Math.max(2, start)\n\t\tif (end < total) end = Math.min(total - 1, end)\n\n\t\tfor (let i = start; i <= end; i++) {\n\t\t\tpages.push(i)\n\t\t}\n\t}\n\n\treturn pages\n})\n\n// Show/hide first page button\nconst showFirstPage = computed(() => {\n\treturn (\n\t\ttotalPages.value > props.maxVisiblePages && !visiblePages.value.includes(1)\n\t)\n})\n\n// Show/hide last page button\nconst showLastPage = computed(() => {\n\treturn (\n\t\ttotalPages.value > props.maxVisiblePages &&\n\t\t!visiblePages.value.includes(totalPages.value)\n\t)\n})\n\n// Show/hide ellipsis\nconst showFirstEllipsis = computed(() => {\n\treturn (\n\t\tshowFirstPage.value &&\n\t\tvisiblePages.value.length > 0 &&\n\t\tvisiblePages.value[0] > 2\n\t)\n})\n\nconst showLastEllipsis = computed(() => {\n\treturn (\n\t\tshowLastPage.value &&\n\t\tvisiblePages.value.length > 0 &&\n\t\tvisiblePages.value[visiblePages.value.length - 1] < totalPages.value - 1\n\t)\n})\n\n// Items per page options\nconst itemsPerPageOptions = computed(() => [\n\t{ label: \"5\", value: 5 },\n\t{ label: \"10\", value: 10 },\n\t{ label: \"20\", value: 20 },\n\t{ label: \"50\", value: 50 },\n\t{ label: \"100\", value: 100 },\n])\n\n// Methods\nconst goToPage = (page) => {\n\tif (page >= 1 && page <= totalPages.value && page !== props.currentPage) {\n\t\temit(\"update:currentPage\", page)\n\t\temit(\"pageChange\", {\n\t\t\tpage,\n\t\t\titemsPerPage: props.itemsPerPage,\n\t\t\toffset: (page - 1) * props.itemsPerPage,\n\t\t})\n\t}\n}\n\nconst goToPreviousPage = () => {\n\tif (props.currentPage > 1) {\n\t\tgoToPage(props.currentPage - 1)\n\t}\n}\n\nconst goToNextPage = () => {\n\tif (props.currentPage < totalPages.value) {\n\t\tgoToPage(props.currentPage + 1)\n\t}\n}\n\nconst handleItemsPerPageChange = () => {\n\tconst newItemsPerPage = localItemsPerPage.value\n\temit(\"update:itemsPerPage\", newItemsPerPage)\n\n\t// Calculate new page to maintain roughly the same position\n\tconst currentFirstItem = (props.currentPage - 1) * props.itemsPerPage + 1\n\tconst newPage = Math.ceil(currentFirstItem / newItemsPerPage)\n\n\temit(\"pageChange\", {\n\t\tpage: newPage,\n\t\titemsPerPage: newItemsPerPage,\n\t\toffset: (newPage - 1) * newItemsPerPage,\n\t})\n}\n</script>","<template>\n  <div class=\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8\">\n    <div \n      @click=\"handleStatClick('team_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'team_tickets' ? 'ring-2 ring-gray-500 bg-gray-50' : 'hover:bg-gray-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-gray-900\">{{ teamTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Team Tickets</div>\n    </div>\n    <div \n      @click=\"handleStatClick('open_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'open_tickets' ? 'ring-2 ring-blue-500 bg-blue-50' : 'hover:bg-blue-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-blue-600\">{{ openTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Open Tickets</div>\n    </div>\n    <div \n      @click=\"handleStatClick('assigned_to_me')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'assigned_to_me' ? 'ring-2 ring-green-500 bg-green-50' : 'hover:bg-green-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-green-600\">{{ assignedToMe }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Assigned To Me</div>\n    </div>\n    <div \n      @click=\"handleStatClick('actionable_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'actionable_tickets' ? 'ring-2 ring-orange-500 bg-orange-50' : 'hover:bg-orange-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-orange-600\">{{ actionableTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Actionable</div>\n    </div>\n    <div \n      @click=\"handleStatClick('response_tickets')\"\n      :class=\"[\n        'bg-white p-6 rounded-lg shadow-sm border cursor-pointer transition-all duration-200 hover:shadow-md',\n        activeFilter === 'response_tickets' ? 'ring-2 ring-purple-500 bg-purple-50' : 'hover:bg-purple-50'\n      ]\"\n    >\n      <div class=\"text-3xl font-bold text-purple-600\">{{ responseTickets }}</div>\n      <div class=\"text-sm text-gray-600 mt-1\">Response</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch, shallowRef } from \"vue\"\nimport { call } from \"frappe-ui\"\n\nconst props = defineProps({\n  issues: {\n    type: Array,\n    default: () => [],\n  },\n  activeFilter: {\n    type: String,\n    default: 'team_tickets'\n  }\n})\n\n// Define emits\nconst emit = defineEmits(['filter-changed'])\n\n// Use shallowRef for stats object since we replace the entire object\nconst stats = shallowRef({\n  team_tickets: 0,\n  open_tickets: 0,\n  assigned_to_me: 0,\n  actionable_tickets: 0,\n  response_tickets: 0\n})\n\n// Memoized reactive getters for template with proper reactivity\nconst teamTickets = computed(() => stats.value.team_tickets)\nconst openTickets = computed(() => stats.value.open_tickets)\nconst assignedToMe = computed(() => stats.value.assigned_to_me)\nconst actionableTickets = computed(() => stats.value.actionable_tickets)\nconst responseTickets = computed(() => stats.value.response_tickets)\n\n// Memoized stats fetching with debouncing to prevent excessive API calls\nlet statsCache = null\nlet lastFetchTime = 0\nconst CACHE_DURATION = 30000 // 30 seconds cache\n\nconst fetchStats = async () => {\n  const now = Date.now()\n  \n  // Return cached result if still valid\n  if (statsCache && (now - lastFetchTime) < CACHE_DURATION) {\n    return statsCache\n  }\n  \n  try {\n    const result = await call(\"force_trans_customization.api.issues.get_issue_stats\")\n    stats.value = result\n    statsCache = result\n    lastFetchTime = now\n    return result\n  } catch (error) {\n    console.error(\"Error fetching issue stats:\", error)\n    // Keep existing values on error\n    return stats.value\n  }\n}\n\n// Debounced stats refresh to prevent excessive API calls\nlet refreshTimeout = null\nconst debouncedStatsRefresh = () => {\n  if (refreshTimeout) {\n    clearTimeout(refreshTimeout)\n  }\n  refreshTimeout = setTimeout(() => {\n    fetchStats()\n  }, 500) // 500ms debounce\n}\n\n// Fetch stats on component mount\nonMounted(() => {\n  fetchStats()\n})\n\n// Optimized watcher - only watch issues length instead of deep watching entire array\n// This prevents unnecessary re-renders when issue content changes but count remains same\nwatch(() => props.issues.length, () => {\n  debouncedStatsRefresh()\n})\n\n// Handle stat tile clicks\nconst handleStatClick = (filterType) => {\n  emit('filter-changed', filterType)\n}\n\n// Expose fetchStats method for parent components to trigger refresh\ndefineExpose({\n  refreshStats: fetchStats\n})\n</script>","<template>\n\t<div class=\"bg-white rounded-lg shadow-sm border\">\n\t\t<div class=\"px-6 py-4 border-b border-gray-200\">\n\t\t\t<h3 class=\"text-lg font-medium text-gray-900\">Issues</h3>\n\t\t</div>\n\n\t\t<!-- Loading state -->\n\t\t<div v-if=\"loading\" class=\"px-6 py-12 text-center text-gray-500\">\n\t\t\t<div class=\"flex items-center justify-center\">\n\t\t\t\t<div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n\t\t\t\t<span class=\"ml-2\">Loading issues...</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- ListView -->\n\t\t<ListView v-else :columns=\"columns\" :rows=\"transformedIssues\" row-key=\"name\" :options=\"listOptions\"\n\t\t\t@update:selections=\"handleSelections\">\n\n\t\t\t<ListHeader>\n\t\t\t\t<ListHeaderItem v-for=\"column in columns\" :key=\"column.key\" :item=\"column\">\n\t\t\t\t\t<template v-if=\"column.icon\" #prefix=\"{ item }\">\n\t\t\t\t\t\t<FeatherIcon :name=\"item.icon\" class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<!-- Sort indicator for sortable columns -->\n\t\t\t\t\t<template v-if=\"column.sortable\" #suffix>\n\t\t\t\t\t\t<button @click=\"handleColumnSort(column.key)\"\n\t\t\t\t\t\t\tclass=\"ml-2 p-1 rounded hover:bg-gray-100 transition-colors\"\n\t\t\t\t\t\t\t:class=\"getSortButtonClass(column.key)\">\n\t\t\t\t\t\t\t<FeatherIcon :name=\"getSortIcon(column.key)\" class=\"h-3 w-3\"\n\t\t\t\t\t\t\t\t:class=\"getSortIconClass(column.key)\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</template>\n\t\t\t\t</ListHeaderItem>\n\t\t\t</ListHeader>\n\n\t\t\t<ListRows>\n\t\t\t\t<ListRow v-for=\"issue in transformedIssues\" :key=\"issue.name\" :row=\"issue\">\n\t\t\t\t\t<template #default=\"{ column, item }\">\n\t\t\t\t\t\t<ListRowItem :item=\"item\" :align=\"column.align\">\n\t\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t\t<!-- Avatar for assignee column -->\n\t\t\t\t\t\t\t\t<Avatar v-if=\"column.key === 'raised_by'\" :size=\"'sm'\"\n\t\t\t\t\t\t\t\t\t:label=\"getInitials(issue.raised_by)\" class=\"mr-3\" />\n\t\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\t<!-- Custom content for specific columns only -->\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<!-- Issue ID with link -->\n\t\t\t\t\t\t\t\t<a v-if=\"column.key === 'name'\" href=\"#\"\n\t\t\t\t\t\t\t\t\tclass=\"text-blue-600 hover:text-blue-800 hover:underline font-medium\"\n\t\t\t\t\t\t\t\t\t@click.prevent=\"handleIssueClick(issue)\">\n\t\t\t\t\t\t\t\t\t{{ formatIssueId(item) }}\n\t\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t\t<!-- Title with description -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === 'subject'\" class=\"max-w-xs\">\n\t\t\t\t\t\t\t\t\t<div class=\"font-medium truncate\" :title=\"issue.subject\">{{ issue.subject }}</div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"issue.description\" class=\"text-gray-500 text-xs mt-1 truncate\"\n\t\t\t\t\t\t\t\t\t\t:title=\"issue.description\">\n\t\t\t\t\t\t\t\t\t\t{{ stripHtml(issue.description) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Assignee email with truncation -->\n\t\t\t\t\t\t\t\t<span v-else-if=\"column.key === 'raised_by'\"\n\t\t\t\t\t\t\t\t\tclass=\"text-sm font-medium text-gray-900 truncate block\" :title=\"item || '-'\">\n\t\t\t\t\t\t\t\t\t{{ item || '-' }}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<!-- Assigned Users as pills with hover popup -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === 'custom_users_assigned'\" class=\"flex flex-wrap gap-1\">\n\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\tv-if=\"issue.custom_users_assigned && issue.custom_users_assigned.length > 0\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"user in issue.custom_users_assigned.filter(u => u.user_assigned)\"\n\t\t\t\t\t\t\t\t\t\t\t:key=\"user.name || user\" class=\"relative inline-block\">\n\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 transition-colors\"\n\t\t\t\t\t\t\t\t\t\t\t\t@mouseenter=\"showUserPopup($event, user)\" @mouseleave=\"hideUserPopup\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ getInitials(user.user_assigned) }}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<span v-else class=\"text-gray-400 text-sm\">-</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Tags -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === '_user_tags'\"\n\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1 cursor-pointer hover:bg-gray-50 p-1 rounded transition-colors\"\n\t\t\t\t\t\t\t\t\t@mouseenter=\"showTagsPopupFn($event, issue._user_tags)\"\n\t\t\t\t\t\t\t\t\t@mouseleave=\"hideTagsPopupFn\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"issue._user_tags && issue._user_tags.length > 0\">\n\t\t\t\t\t\t\t\t\t\t<!-- Show first tag, truncated if needed -->\n\t\t\t\t\t\t\t\t\t\t<span :style=\"getTagStyle(issue._user_tags[0])\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border transition-colors max-w-16\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"issue._user_tags[0]\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"truncate\">{{ issue._user_tags[0] }}</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<!-- Always show +X more if there are more tags -->\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"issue._user_tags.length > 1\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-1 py-1 text-xs font-medium text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\t+{{ issue._user_tags.length - 1 }}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<span v-else class=\"text-gray-400 text-sm\">-</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Created At with date and time -->\n\t\t\t\t\t\t\t\t<div v-else-if=\"column.key === 'creation'\" class=\"flex flex-col\">\n\t\t\t\t\t\t\t\t\t<span>{{ formatDate(item) }}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-400\">{{ formatTime(item) }}</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Status badge -->\n\t\t\t\t\t\t\t\t<span v-else-if=\"column.key === 'status'\"\n\t\t\t\t\t\t\t\t\t:class=\"getStatusBadgeClass(issue.status?.label || issue.status || 'New')\"\n\t\t\t\t\t\t\t\t\tclass=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full\">\n\t\t\t\t\t\t\t\t\t{{ issue.status?.label || issue.status || 'New' }}\n\t\t\t\t\t\t\t\t</span>\n\n\n\n\t\t\t\t\t\t\t\t<!-- Default fallback for other columns -->\n\t\t\t\t\t\t\t\t<span v-else>{{ item }}</span>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t</template>\n\t\t\t\t</ListRow>\n\t\t\t</ListRows>\n\n\t\t\t<ListSelectBanner>\n\t\t\t\t<template #actions=\"{ unselectAll }\">\n\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t<Button variant=\"ghost\" label=\"Delete\" />\n\t\t\t\t\t\t<Button variant=\"ghost\" label=\"Unselect all\" @click=\"unselectAll\" />\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</ListSelectBanner>\n\n\t\t</ListView>\n\n\t\t<!-- User Popup -->\n\t\t<div v-if=\"showPopup && popupUser\"\n\t\t\tclass=\"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48\" :style=\"{\n\t\t\t\tleft: popupPosition.x + 'px',\n\t\t\t\ttop: popupPosition.y + 'px',\n\t\t\t\ttransform: 'translateX(-50%) translateY(-100%)'\n\t\t\t}\">\n\t\t\t<div class=\"text-sm\">\n\t\t\t\t<div class=\"font-semibold text-gray-900 mb-1\">\n\t\t\t\t\t{{ popupUser.user_assigned || 'Unknown User' }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"text-gray-600 flex items-center gap-1\">\n\t\t\t\t\t<span class=\"inline-block w-2 h-2 bg-blue-500 rounded-full\"></span>\n\t\t\t\t\t{{ popupUser.team || 'No Team' }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"text-xs text-gray-500 mt-1\">\n\t\t\t\t\tAssigned: {{ formatDate(popupUser.assigned_date) }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tags Popup -->\n\t\t<div v-if=\"showTagsPopup && tagsPopupData\"\n\t\t\tclass=\"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-3 min-w-48 max-w-xs\" :style=\"{\n\t\t\t\tleft: tagsPopupPosition.x + 'px',\n\t\t\t\ttop: tagsPopupPosition.y + 'px',\n\t\t\t\ttransform: 'translateX(-50%) translateY(-100%)'\n\t\t\t}\">\n\t\t\t<div class=\"text-sm\">\n\t\t\t\t<div class=\"font-semibold text-gray-900 mb-2\">All Tags</div>\n\t\t\t\t<div class=\"flex flex-wrap gap-1\">\n\t\t\t\t\t<span v-for=\"tag in tagsPopupData\" :key=\"tag\" :style=\"getTagStyle(tag)\"\n\t\t\t\t\t\tclass=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full border\">\n\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { Avatar, Badge, Button, FeatherIcon, ListView } from \"frappe-ui\"\nimport ListHeader from \"frappe-ui/src/components/ListView/ListHeader.vue\"\nimport ListHeaderItem from \"frappe-ui/src/components/ListView/ListHeaderItem.vue\"\nimport ListRow from \"frappe-ui/src/components/ListView/ListRow.vue\"\nimport ListRowItem from \"frappe-ui/src/components/ListView/ListRowItem.vue\"\nimport ListRows from \"frappe-ui/src/components/ListView/ListRows.vue\"\nimport ListSelectBanner from \"frappe-ui/src/components/ListView/ListSelectBanner.vue\"\nimport { computed, ref, shallowRef, watchEffect } from \"vue\"\nimport { getTagColor } from \"../data/issues\"\n\n// Enhanced status badge component with custom status values\nconst StatusBadge = {\n\tprops: [\"status\"],\n\ttemplate: `\n    <Badge :label=\"displayStatus\" :theme=\"statusTheme\" variant=\"subtle\" />\n  `,\n\tcomputed: {\n\t\tdisplayStatus() {\n\t\t\treturn this.status || \"New\"\n\t\t},\n\t\tstatusTheme() {\n\t\t\tconst status = this.status || \"New\"\n\t\t\t// Color mapping from issue_list.js to maintain consistency\n\t\t\tconst statusThemes = {\n\t\t\t\tNew: \"blue\", // 🔵 New issues - blue for fresh/attention needed\n\t\t\t\t\"In Review\": \"orange\", // 🟠 Under review - orange for active progress\n\t\t\t\t\"Waiting on Customer\": \"yellow\", // 🟡 Customer action needed - yellow for pause/wait\n\t\t\t\tConfirmed: \"purple\", // 🟣 Confirmed and validated - purple for approval\n\t\t\t\t\"In Transit\": \"blue\", // 🔷 Active transit - light-blue mapped to blue in Frappe UI\n\t\t\t\t\"In Transit Unmanaged\": \"gray\", // ⚫ Unmanaged transit - grey for limited control\n\t\t\t\tDelivered: \"green\", // 🟢 Successfully delivered - green for success\n\t\t\t\tClosed: \"green\", // 🟢 Fully completed - darkgreen mapped to green in Frappe UI\n\n\t\t\t\t// Legacy Status Support (backward compatibility)\n\t\t\t\tOpen: \"red\", // 🔴 Legacy open state\n\t\t\t\tReplied: \"orange\", // 🟠 Legacy replied state\n\t\t\t\t\"On Hold\": \"yellow\", // 🟡 Legacy hold state\n\t\t\t\tResolved: \"green\", // 🟢 Legacy resolved state\n\t\t\t}\n\t\t\treturn statusThemes[status] || \"gray\"\n\t\t},\n\t},\n\tcomponents: { Badge },\n}\n\n// Enhanced priority badge component with visual indicators\nconst PriorityBadge = {\n\tprops: [\"priority\"],\n\ttemplate: `\n    <div class=\"flex items-center gap-2\">\n      <div :class=\"priorityIndicatorClass\" class=\"w-2 h-2 rounded-full\"></div>\n      <Badge :label=\"displayPriority\" :theme=\"priorityTheme\" variant=\"subtle\" />\n    </div>\n  `,\n\tcomputed: {\n\t\tdisplayPriority() {\n\t\t\treturn this.priority || \"Medium\"\n\t\t},\n\t\tpriorityTheme() {\n\t\t\tconst priority = this.priority || \"Medium\"\n\t\t\tconst priorityThemes = {\n\t\t\t\tCritical: \"red\",\n\t\t\t\tHigh: \"red\",\n\t\t\t\tMedium: \"yellow\",\n\t\t\t\tLow: \"green\",\n\t\t\t}\n\t\t\treturn priorityThemes[priority] || \"yellow\"\n\t\t},\n\t\tpriorityIndicatorClass() {\n\t\t\tconst priority = this.priority || \"Medium\"\n\t\t\treturn {\n\t\t\t\t\"bg-red-500\": priority === \"Critical\",\n\t\t\t\t\"bg-red-400\": priority === \"High\",\n\t\t\t\t\"bg-yellow-400\": priority === \"Medium\",\n\t\t\t\t\"bg-green-400\": priority === \"Low\",\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: { Badge },\n}\n\n\n\nexport default {\n\tcomponents: {\n\t\tListView,\n\t\tAvatar,\n\t\tBadge,\n\t\tButton,\n\t\tFeatherIcon,\n\t\tListHeader,\n\t\tListHeaderItem,\n\t\tListRow,\n\t\tListRowItem,\n\t\tListRows,\n\t\tListSelectBanner,\n\t\tStatusBadge,\n\t\tPriorityBadge,\n\t},\n\tprops: {\n\t\tissues: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsortField: {\n\t\t\ttype: String,\n\t\t\tdefault: \"creation\",\n\t\t},\n\t\tsortDirection: {\n\t\t\ttype: String,\n\t\t\tdefault: \"desc\",\n\t\t},\n\t},\n\temits: [\"sort\"],\n\tsetup(props, { emit }) {\n\t\t// Popup state management\n\t\tconst showPopup = ref(false)\n\t\tconst popupUser = ref(null)\n\t\tconst popupPosition = ref({ x: 0, y: 0 })\n\n\t\t// Tags popup state management\n\t\tconst showTagsPopup = ref(false)\n\t\tconst tagsPopupPosition = ref({ x: 0, y: 0 })\n\t\tconst tagsPopupData = ref(null)\n\n\t\t// Helper methods\n\t\tconst getInitials = (name) => {\n\t\t\tif (!name || typeof name !== \"string\") {\n\t\t\t\treturn \"?\"\n\t\t\t}\n\n\t\t\t// If it's an email address, extract the part before @\n\t\t\tif (name.includes(\"@\")) {\n\t\t\t\tconst emailPart = name.split(\"@\")[0]\n\n\t\t\t\t// If email part has dots or underscores, use those as separators\n\t\t\t\tif (emailPart.includes(\".\") || emailPart.includes(\"_\")) {\n\t\t\t\t\tconst parts = emailPart.split(/[._]/)\n\t\t\t\t\treturn parts\n\t\t\t\t\t\t.map((part) => part[0])\n\t\t\t\t\t\t.join(\"\")\n\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t.slice(0, 2)\n\t\t\t\t}\n\t\t\t\t// Otherwise, take first 2 characters of email part\n\t\t\t\treturn emailPart.slice(0, 2).toUpperCase()\n\t\t\t}\n\n\t\t\t// For regular names with spaces\n\t\t\tif (name.includes(\" \")) {\n\t\t\t\treturn name\n\t\t\t\t\t.split(\" \")\n\t\t\t\t\t.map((n) => n[0])\n\t\t\t\t\t.join(\"\")\n\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t.slice(0, 2)\n\t\t\t}\n\n\t\t\t// For single words, take first 2 characters\n\t\t\treturn name.slice(0, 2).toUpperCase()\n\t\t}\n\n\t\t// Format issue ID to show only year and serial number\n\t\tconst formatIssueId = (issueId) => {\n\t\t\tif (!issueId) return \"\"\n\t\t\t// Extract year and serial from ISS-2025-000016 format\n\t\t\tconst match = issueId.match(/ISS-(\\d{4}-\\d+)/)\n\t\t\treturn match ? match[1] : issueId\n\t\t}\n\n\t\tconst stripHtml = (html) => {\n\t\t\tif (!html) return \"\"\n\t\t\tconst tmp = document.createElement(\"div\")\n\t\t\ttmp.innerHTML = html\n\t\t\treturn tmp.textContent || tmp.innerText || \"\"\n\t\t}\n\n\t\tconst formatDate = (dateString) => {\n\t\t\tif (!dateString) return \"-\"\n\t\t\treturn new Date(dateString).toLocaleDateString(\"en-US\", {\n\t\t\t\tyear: \"numeric\",\n\t\t\t\tmonth: \"short\",\n\t\t\t\tday: \"numeric\",\n\t\t\t})\n\t\t}\n\n\t\tconst formatTime = (dateString) => {\n\t\t\tif (!dateString) return \"\"\n\t\t\treturn new Date(dateString).toLocaleTimeString(\"en-US\", {\n\t\t\t\thour: \"2-digit\",\n\t\t\t\tminute: \"2-digit\",\n\t\t\t})\n\t\t}\n\n\t\t// Helper function to get status color\n\t\tconst getStatusBadgeColor = (status) => {\n\t\t\tconst statusColors = {\n\t\t\t\tNew: \"blue\",\n\t\t\t\t\"In Review\": \"orange\",\n\t\t\t\t\"Waiting on Customer\": \"yellow\",\n\t\t\t\tConfirmed: \"purple\",\n\t\t\t\t\"In Transit\": \"blue\",\n\t\t\t\t\"In Transit Unmanaged\": \"gray\",\n\t\t\t\tDelivered: \"green\",\n\t\t\t\tClosed: \"green\",\n\t\t\t\tOpen: \"red\",\n\t\t\t\tReplied: \"orange\",\n\t\t\t\t\"On Hold\": \"yellow\",\n\t\t\t\tResolved: \"green\",\n\t\t\t}\n\t\t\treturn statusColors[status] || \"gray\"\n\t\t}\n\n\t\t// Helper function to get priority color\n\t\tconst getPriorityBadgeColor = (priority) => {\n\t\t\tconst priorityColors = {\n\t\t\t\tCritical: \"red\",\n\t\t\t\tHigh: \"red\",\n\t\t\t\tMedium: \"yellow\",\n\t\t\t\tLow: \"green\",\n\t\t\t}\n\t\t\treturn priorityColors[priority] || \"yellow\"\n\t\t}\n\n\t\t// Memoized transformation cache to prevent unnecessary re-computations\n\t\tconst transformationCache = new Map()\n\t\t\n\t\t// Transform issues data to include badge structure for ListView with memoization\n\t\tconst transformedIssues = computed(() => {\n\t\t\treturn props.issues.map((issue) => {\n\t\t\t\t// Use issue name as cache key since it's unique\n\t\t\t\tconst cacheKey = issue.name\n\t\t\t\t\n\t\t\t\t// Check if we have a cached transformation for this issue\n\t\t\t\tif (transformationCache.has(cacheKey)) {\n\t\t\t\t\tconst cached = transformationCache.get(cacheKey)\n\t\t\t\t\t// Verify the cached data is still valid (status/priority haven't changed)\n\t\t\t\t\tif (cached.originalStatus === issue.status && cached.originalPriority === issue.priority) {\n\t\t\t\t\t\treturn cached.transformed\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Create new transformation\n\t\t\t\tconst transformed = {\n\t\t\t\t\t...issue,\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\tlabel: issue.status || \"New\",\n\t\t\t\t\t\tcolor: getStatusBadgeColor(issue.status),\n\t\t\t\t\t},\n\t\t\t\t\tpriority: {\n\t\t\t\t\t\tlabel: issue.priority || \"Medium\",\n\t\t\t\t\t\tcolor: getPriorityBadgeColor(issue.priority),\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Cache the transformation\n\t\t\t\ttransformationCache.set(cacheKey, {\n\t\t\t\t\ttransformed,\n\t\t\t\t\toriginalStatus: issue.status,\n\t\t\t\t\toriginalPriority: issue.priority\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\treturn transformed\n\t\t\t})\n\t\t})\n\n\t\t// Static columns configuration (memoized since it never changes)\n\t\tconst columns = shallowRef([\n\t\t\t{\n\t\t\t\tlabel: \"Issue ID\",\n\t\t\t\tkey: \"name\",\n\t\t\t\twidth: \"110px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Title\",\n\t\t\t\tkey: \"subject\",\n\t\t\t\twidth: 4,\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Status\",\n\t\t\t\tkey: \"status\",\n\t\t\t\twidth: \"160px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Assignee\",\n\t\t\t\tkey: \"raised_by\",\n\t\t\t\twidth: \"150px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Assigned Users\",\n\t\t\t\tkey: \"custom_users_assigned\",\n\t\t\t\twidth: \"180px\",\n\t\t\t\tsortable: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Tags\",\n\t\t\t\tkey: \"_user_tags\",\n\t\t\t\twidth: \"120px\",\n\t\t\t\tsortable: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Created At\",\n\t\t\t\tkey: \"creation\",\n\t\t\t\twidth: \"120px\",\n\t\t\t\tsortable: true,\n\t\t\t},\n\t\t])\n\n\t\t// Static ListView options (memoized since they rarely change)\n\t\tconst listOptions = shallowRef({\n\t\t\tshowTooltip: true,\n\t\t\tselectable: true,\n\t\t\tresizeColumn: false,\n\t\t\trowHeight: 60,\n\t\t\temptyState: {\n\t\t\t\ttitle: \"No issues found\",\n\t\t\t\tdescription: \"Try adjusting your search or filter criteria\",\n\t\t\t},\n\t\t\tonRowClick: (row) => {\n\t\t\t\t// Handle row click\n\t\t\t\tconsole.log(\"Row clicked:\", row)\n\t\t\t},\n\t\t})\n\n\t\t// Handle selections\n\t\tconst handleSelections = (selections) => {\n\t\t\tconsole.log(\"Selected rows:\", selections)\n\t\t}\n\n\t\t// Handle issue click\n\t\tconst handleIssueClick = (issue) => {\n\t\t\tconsole.log(\"Issue clicked:\", issue)\n\t\t\t// Navigate to Frappe issue page\n\t\t\tconst hostname = window.location.origin\n\t\t\tconst issueUrl = `${hostname}/app/issue/${issue.name}`\n\t\t\twindow.open(issueUrl, '_blank')\n\t\t}\n\n\t\t// Get status color classes for indicator dots\n\t\tconst getStatusColor = (status) => {\n\t\t\tconst statusValue = status || \"New\"\n\t\t\t// Color mapping from issue_list.js to maintain consistency\n\t\t\treturn {\n\t\t\t\t\"bg-blue-500\": statusValue === \"New\", // 🔵 New issues - blue for fresh/attention needed\n\t\t\t\t\"bg-orange-500\": statusValue === \"In Review\", // 🟠 Under review - orange for active progress\n\t\t\t\t\"bg-yellow-500\": statusValue === \"Waiting on Customer\", // 🟡 Customer action needed - yellow for pause/wait\n\t\t\t\t\"bg-purple-500\": statusValue === \"Confirmed\", // 🟣 Confirmed and validated - purple for approval\n\t\t\t\t\"bg-blue-500\": statusValue === \"In Transit\", // 🔷 Active transit - light-blue mapped to blue in Tailwind\n\t\t\t\t\"bg-gray-500\": statusValue === \"In Transit Unmanaged\", // ⚫ Unmanaged transit - grey for limited control\n\t\t\t\t\"bg-green-500\": statusValue === \"Delivered\", // 🟢 Successfully delivered - green for success\n\t\t\t\t\"bg-green-500\": statusValue === \"Closed\", // 🟢 Fully completed - darkgreen mapped to green in Tailwind\n\n\t\t\t\t// Legacy Status Support (backward compatibility)\n\t\t\t\t\"bg-red-500\": statusValue === \"Open\", // 🔴 Legacy open state\n\t\t\t\t\"bg-orange-500\": statusValue === \"Replied\", // 🟠 Legacy replied state\n\t\t\t\t\"bg-yellow-500\": statusValue === \"On Hold\", // 🟡 Legacy hold state\n\t\t\t\t\"bg-green-500\": statusValue === \"Resolved\", // 🟢 Legacy resolved state\n\t\t\t}\n\t\t}\n\n\t\t// Get priority color classes\n\t\tconst getPriorityColor = (priority) => {\n\t\t\tconst priorityValue = priority || \"Medium\"\n\t\t\treturn {\n\t\t\t\t\"bg-red-500\": priorityValue === \"Critical\" || priorityValue === \"High\",\n\t\t\t\t\"bg-yellow-500\": priorityValue === \"Medium\",\n\t\t\t\t\"bg-green-500\": priorityValue === \"Low\",\n\t\t\t}\n\t\t}\n\n\t\t// Get status badge CSS classes\n\t\tconst getStatusBadgeClass = (status) => {\n\t\t\tconst statusValue = status || \"New\"\n\t\t\tconst statusClasses = {\n\t\t\t\tNew: \"bg-blue-100 text-blue-800\",\n\t\t\t\t\"In Review\": \"bg-orange-100 text-orange-800\",\n\t\t\t\t\"Waiting on Customer\": \"bg-yellow-100 text-yellow-800\",\n\t\t\t\tConfirmed: \"bg-purple-100 text-purple-800\",\n\t\t\t\t\"In Transit\": \"bg-blue-100 text-blue-800\",\n\t\t\t\t\"In Transit Unmanaged\": \"bg-gray-100 text-gray-800\",\n\t\t\t\tDelivered: \"bg-green-100 text-green-800\",\n\t\t\t\tClosed: \"bg-green-100 text-green-800\",\n\t\t\t\tOpen: \"bg-red-100 text-red-800\",\n\t\t\t\tReplied: \"bg-orange-100 text-orange-800\",\n\t\t\t\t\"On Hold\": \"bg-yellow-100 text-yellow-800\",\n\t\t\t\tResolved: \"bg-green-100 text-green-800\",\n\t\t\t}\n\t\t\treturn statusClasses[statusValue] || \"bg-gray-100 text-gray-800\"\n\t\t}\n\n\t\t// Get priority badge CSS classes\n\t\tconst getPriorityBadgeClass = (priority) => {\n\t\t\tconst priorityValue = priority || \"Medium\"\n\t\t\tconst priorityClasses = {\n\t\t\t\tCritical: \"bg-red-100 text-red-800\",\n\t\t\t\tHigh: \"bg-red-100 text-red-800\",\n\t\t\t\tMedium: \"bg-yellow-100 text-yellow-800\",\n\t\t\t\tLow: \"bg-green-100 text-green-800\",\n\t\t\t}\n\t\t\treturn priorityClasses[priorityValue] || \"bg-yellow-100 text-yellow-800\"\n\t\t}\n\n\t\t// Get priority indicator dot CSS classes\n\t\tconst getPriorityIndicatorClass = (priority) => {\n\t\t\tconst priorityValue = priority || \"Medium\"\n\t\t\treturn {\n\t\t\t\t\"bg-red-500\": priorityValue === \"Critical\",\n\t\t\t\t\"bg-red-400\": priorityValue === \"High\",\n\t\t\t\t\"bg-yellow-400\": priorityValue === \"Medium\",\n\t\t\t\t\"bg-green-400\": priorityValue === \"Low\",\n\t\t\t}\n\t\t}\n\n\t\t// Popup functions for user hover\n\t\tconst showUserPopup = (event, user) => {\n\t\t\tconst rect = event.target.getBoundingClientRect()\n\t\t\tpopupPosition.value = {\n\t\t\t\tx: rect.left + rect.width / 2,\n\t\t\t\ty: rect.top - 10,\n\t\t\t}\n\t\t\tpopupUser.value = user\n\t\t\tshowPopup.value = true\n\t\t}\n\n\t\tconst hideUserPopup = () => {\n\t\t\tshowPopup.value = false\n\t\t\tpopupUser.value = null\n\t\t}\n\n\t\t// Tags popup functions\n\t\tconst showTagsPopupFn = (event, tags) => {\n\t\t\tif (!tags || tags.length === 0) return\n\n\t\t\tconst rect = event.target.getBoundingClientRect()\n\t\t\ttagsPopupPosition.value = {\n\t\t\t\tx: rect.left + rect.width / 2,\n\t\t\t\ty: rect.top - 10,\n\t\t\t}\n\t\t\ttagsPopupData.value = tags\n\t\t\tshowTagsPopup.value = true\n\t\t}\n\n\t\tconst hideTagsPopupFn = () => {\n\t\t\tshowTagsPopup.value = false\n\t\t\ttagsPopupData.value = null\n\t\t}\n\n\t\t// Sorting functionality\n\t\tconst handleColumnSort = (field) => {\n\t\t\tlet newDirection = \"asc\"\n\n\t\t\t// If clicking the same field, toggle direction\n\t\t\tif (props.sortField === field) {\n\t\t\t\tnewDirection = props.sortDirection === \"asc\" ? \"desc\" : \"asc\"\n\t\t\t}\n\n\t\t\t// Emit sort event to parent component\n\t\t\temit(\"sort\", { field, direction: newDirection })\n\t\t}\n\n\t\tconst getSortIcon = (field) => {\n\t\t\tif (props.sortField !== field) {\n\t\t\t\treturn \"arrow-up-down\" // Default unsorted icon\n\t\t\t}\n\n\t\t\treturn props.sortDirection === \"asc\" ? \"arrow-up\" : \"arrow-down\"\n\t\t}\n\n\t\tconst getSortIconClass = (field) => {\n\t\t\tif (props.sortField !== field) {\n\t\t\t\treturn \"text-gray-400\" // Inactive sort icon\n\t\t\t}\n\n\t\t\treturn \"text-blue-600\" // Active sort icon\n\t\t}\n\n\t\tconst getSortButtonClass = (field) => {\n\t\t\tif (props.sortField === field) {\n\t\t\t\treturn \"bg-blue-50\" // Active sort button background\n\t\t\t}\n\n\t\t\treturn \"\" // Default button styling\n\t\t}\n\n\t\t// Memoized tag styling function to prevent recalculating colors\n\t\tconst tagStyleCache = new Map()\n\t\tconst getTagStyle = (tag) => {\n\t\t\t// Check cache first\n\t\t\tif (tagStyleCache.has(tag)) {\n\t\t\t\treturn tagStyleCache.get(tag)\n\t\t\t}\n\t\t\t\n\t\t\t// Get tag color from API\n\t\t\tconst hexColor = getTagColor(tag)\n\t\t\tlet style\n\n\t\t\tif (hexColor) {\n\t\t\t\t// Convert hex color to RGB for background and text colors\n\t\t\t\tconst hex = hexColor.replace('#', '')\n\t\t\t\tconst r = parseInt(hex.substr(0, 2), 16)\n\t\t\t\tconst g = parseInt(hex.substr(2, 2), 16)\n\t\t\t\tconst b = parseInt(hex.substr(4, 2), 16)\n\n\t\t\t\t// Create background color (lighter version with opacity)\n\t\t\t\tconst bgColor = `rgba(${r}, ${g}, ${b}, 0.1)`\n\n\t\t\t\t// Create text color (darker version for contrast)\n\t\t\t\tconst textColor = `rgb(${Math.max(r - 50, 0)}, ${Math.max(g - 50, 0)}, ${Math.max(b - 50, 0)})`\n\n\t\t\t\tstyle = {\n\t\t\t\t\tbackgroundColor: bgColor,\n\t\t\t\t\tcolor: textColor,\n\t\t\t\t\tborderColor: textColor\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Fallback to default styling\n\t\t\t\tstyle = {\n\t\t\t\t\tbackgroundColor: '#f3f4f6',\n\t\t\t\t\tcolor: '#374151',\n\t\t\t\t\tborderColor: '#d1d5db'\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Cache the result\n\t\t\ttagStyleCache.set(tag, style)\n\t\t\treturn style\n\t\t}\n\n\t\treturn {\n\t\t\tcolumns,\n\t\t\tlistOptions,\n\t\t\ttransformedIssues,\n\t\t\thandleSelections,\n\t\t\thandleIssueClick,\n\t\t\tgetStatusColor,\n\t\t\tgetPriorityColor,\n\t\t\tgetStatusBadgeClass,\n\t\t\tgetPriorityBadgeClass,\n\t\t\tgetPriorityIndicatorClass,\n\t\t\tgetInitials,\n\t\t\tformatIssueId,\n\t\t\tstripHtml,\n\t\t\tformatDate,\n\t\t\tformatTime,\n\t\t\tshowPopup,\n\t\t\tpopupUser,\n\t\t\tpopupPosition,\n\t\t\tshowUserPopup,\n\t\t\thideUserPopup,\n\t\t\thandleColumnSort,\n\t\t\tgetSortIcon,\n\t\t\tgetSortIconClass,\n\t\t\tgetSortButtonClass,\n\t\t\tgetTagStyle,\n\t\t\tshowTagsPopup,\n\t\t\ttagsPopupPosition,\n\t\t\ttagsPopupData,\n\t\t\tshowTagsPopupFn,\n\t\t\thideTagsPopupFn,\n\t\t}\n\t},\n}\n</script>","<template>\n  <div class=\"fixed top-4 right-4 z-50 space-y-2 max-w-sm\">\n    <transition-group name=\"notification\" tag=\"div\">\n      <div\n        v-for=\"notification in notifications\"\n        :key=\"notification.id\"\n        :class=\"notificationClasses(notification.type)\"\n        class=\"p-4 rounded-lg shadow-lg border backdrop-blur-sm\"\n      >\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex items-start space-x-3\">\n            <div class=\"flex-shrink-0\">\n              <FeatherIcon \n                :name=\"getNotificationIcon(notification.type)\" \n                :class=\"getIconColor(notification.type)\"\n                class=\"h-5 w-5\"\n              />\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-gray-900\">\n                {{ notification.title }}\n              </p>\n              <p class=\"text-sm text-gray-600 mt-1\">\n                {{ notification.message }}\n              </p>\n              <p class=\"text-xs text-gray-500 mt-1\">\n                {{ formatTime(notification.timestamp) }}\n              </p>\n            </div>\n          </div>\n          <button\n            @click=\"$emit('remove', notification.id)\"\n            class=\"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 focus:outline-none\"\n          >\n            <FeatherIcon name=\"x\" class=\"h-4 w-4\" />\n          </button>\n        </div>\n      </div>\n    </transition-group>\n  </div>\n</template>\n\n<script setup>\nimport { FeatherIcon } from 'frappe-ui'\n\ndefineProps({\n  notifications: {\n    type: Array,\n    default: () => []\n  }\n})\n\ndefineEmits(['remove'])\n\nconst notificationClasses = (type) => {\n  const baseClasses = 'bg-white/95 border-l-4'\n  const typeClasses = {\n    success: 'border-green-500',\n    info: 'border-blue-500', \n    warning: 'border-yellow-500',\n    error: 'border-red-500'\n  }\n  return `${baseClasses} ${typeClasses[type] || typeClasses.info}`\n}\n\nconst getNotificationIcon = (type) => {\n  const icons = {\n    success: 'check-circle',\n    info: 'info',\n    warning: 'alert-triangle',\n    error: 'alert-circle'\n  }\n  return icons[type] || icons.info\n}\n\nconst getIconColor = (type) => {\n  const colors = {\n    success: 'text-green-500',\n    info: 'text-blue-500',\n    warning: 'text-yellow-500', \n    error: 'text-red-500'\n  }\n  return colors[type] || colors.info\n}\n\nconst formatTime = (timestamp) => {\n  const now = new Date()\n  const diff = now - timestamp\n  const minutes = Math.floor(diff / 60000)\n  \n  if (minutes < 1) return 'Just now'\n  if (minutes < 60) return `${minutes}m ago`\n  \n  const hours = Math.floor(minutes / 60)\n  if (hours < 24) return `${hours}h ago`\n  \n  return timestamp.toLocaleDateString()\n}\n</script>\n\n<style scoped>\n.notification-enter-active,\n.notification-leave-active {\n  transition: all 0.3s ease;\n}\n\n.notification-enter-from {\n  opacity: 0;\n  transform: translateX(100%);\n}\n\n.notification-leave-to {\n  opacity: 0;\n  transform: translateX(100%);\n}\n\n.notification-move {\n  transition: transform 0.3s ease;\n}\n</style>","import { computed, ref, watch, shallowRef, markRaw } from \"vue\"\n\n// Optimized debounce function with cleanup\nfunction debounce(func, wait) {\n\tlet timeout\n\treturn function executedFunction(...args) {\n\t\tconst later = () => {\n\t\t\tclearTimeout(timeout)\n\t\t\tfunc(...args)\n\t\t}\n\t\tclearTimeout(timeout)\n\t\ttimeout = setTimeout(later, wait)\n\t}\n}\n\nexport function useIssueFilters() {\n\t// Reactive state for search and filters\n\tconst searchQuery = ref(\"\")\n\tconst filters = ref({\n\t\tstatus: \"\",\n\t\tpriority: \"\",\n\t\tassignee: \"\",\n\t\ttags: \"\",\n\t\tsortBy: \"creation desc\",\n\t})\n\n\t// Debounced search to optimize performance\n\tconst debouncedSearchQuery = ref(\"\")\n\n\t// Create debounced function for search\n\tconst updateDebouncedSearch = debounce((query) => {\n\t\tdebouncedSearchQuery.value = query\n\t}, 300) // 300ms delay\n\n\t// Watch search query and update debounced version\n\twatch(searchQuery, (newQuery) => {\n\t\tupdateDebouncedSearch(newQuery)\n\t})\n\n\t// Computed property for API filters\n\tconst apiFilters = computed(() => {\n\t\tconst filterObj = {}\n\n\t\t// Add search filter if query exists\n\t\tif (debouncedSearchQuery.value.trim()) {\n\t\t\t// Search in subject and description fields\n\t\t\tfilterObj[\"subject\"] = [\"like\", `%${debouncedSearchQuery.value.trim()}%`]\n\t\t}\n\n\t\t// Add status filter\n\t\tif (filters.value.status) {\n\t\t\tfilterObj[\"status\"] = filters.value.status\n\t\t}\n\n\t\t// Add priority filter\n\t\tif (filters.value.priority) {\n\t\t\tfilterObj[\"priority\"] = filters.value.priority\n\t\t}\n\n\t\t// Add assignee filter\n\t\tif (filters.value.assignee) {\n\t\t\tfilterObj[\"raised_by\"] = filters.value.assignee\n\t\t}\n\n\t\t// Add tags filter (issue_type)\n\t\tif (filters.value.tags) {\n\t\t\tfilterObj[\"issue_type\"] = filters.value.tags\n\t\t}\n\n\t\treturn filterObj\n\t})\n\n\t// Computed property for sort order\n\tconst sortOrder = computed(() => {\n\t\treturn filters.value.sortBy || \"creation desc\"\n\t})\n\n\t// Memoized filter cache to prevent re-filtering identical data\n\tconst filterCache = new Map()\n\t\n\t// Function to apply filters to a list of issues (client-side filtering) with memoization\n\tconst filterIssues = (issues) => {\n\t\tif (!issues || !Array.isArray(issues)) return []\n\n\t\t// Create cache key based on issues length and filter values\n\t\tconst cacheKey = JSON.stringify({\n\t\t\tissuesLength: issues.length,\n\t\t\tsearchQuery: searchQuery.value.trim(),\n\t\t\tstatus: filters.value.status,\n\t\t\tpriority: filters.value.priority,\n\t\t\tassignee: filters.value.assignee,\n\t\t\ttags: filters.value.tags,\n\t\t\tsortBy: filters.value.sortBy\n\t\t})\n\t\t\n\t\t// Return cached result if available\n\t\tif (filterCache.has(cacheKey)) {\n\t\t\treturn filterCache.get(cacheKey)\n\t\t}\n\n\t\tlet filteredIssues = [...issues]\n\n\t\t// Apply search filter\n\t\tif (searchQuery.value.trim()) {\n\t\t\tconst query = searchQuery.value.toLowerCase().trim()\n\t\t\tfilteredIssues = filteredIssues.filter((issue) => {\n\t\t\t\tconst subject = (issue.subject || \"\").toLowerCase()\n\t\t\t\tconst description = (issue.description || \"\").toLowerCase()\n\t\t\t\treturn subject.includes(query) || description.includes(query)\n\t\t\t})\n\t\t}\n\n\t\t// Apply status filter\n\t\tif (filters.value.status) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.status === filters.value.status,\n\t\t\t)\n\t\t}\n\n\t\t// Apply priority filter\n\t\tif (filters.value.priority) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.priority === filters.value.priority,\n\t\t\t)\n\t\t}\n\n\t\t// Apply assignee filter\n\t\tif (filters.value.assignee) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.raised_by === filters.value.assignee,\n\t\t\t)\n\t\t}\n\n\t\t// Apply tags filter (issue_type)\n\t\tif (filters.value.tags) {\n\t\t\tfilteredIssues = filteredIssues.filter(\n\t\t\t\t(issue) => issue.issue_type === filters.value.tags,\n\t\t\t)\n\t\t}\n\n\t\t// Apply sorting with memoized priority order\n\t\tconst priorityOrder = markRaw({ Critical: 4, High: 3, Medium: 2, Low: 1 })\n\t\tfilteredIssues.sort((a, b) => {\n\t\t\tconst [field, direction] = filters.value.sortBy.split(\" \")\n\t\t\tconst aValue = a[field] || \"\"\n\t\t\tconst bValue = b[field] || \"\"\n\n\t\t\tlet comparison = 0\n\n\t\t\t// Handle different field types\n\t\t\tif (field === \"creation\" || field === \"modified\") {\n\t\t\t\tcomparison = new Date(aValue) - new Date(bValue)\n\t\t\t} else if (field === \"priority\") {\n\t\t\t\t// Custom priority sorting: Critical > High > Medium > Low\n\t\t\t\tcomparison = (priorityOrder[aValue] || 0) - (priorityOrder[bValue] || 0)\n\t\t\t} else {\n\t\t\t\t// String comparison\n\t\t\t\tcomparison = aValue.toString().localeCompare(bValue.toString())\n\t\t\t}\n\n\t\t\treturn direction === \"desc\" ? -comparison : comparison\n\t\t})\n\n\t\t// Cache the result (limit cache size to prevent memory leaks)\n\t\tif (filterCache.size > 50) {\n\t\t\tconst firstKey = filterCache.keys().next().value\n\t\t\tfilterCache.delete(firstKey)\n\t\t}\n\t\tfilterCache.set(cacheKey, filteredIssues)\n\n\t\treturn filteredIssues\n\t}\n\n\t// Memoized assignee options cache\n\tlet assigneeOptionsCache = null\n\tlet lastAssigneeIssuesHash = null\n\t\n\t// Function to get unique assignees from issues list with memoization\n\tconst getAssigneeOptions = (issues) => {\n\t\tif (!issues || !Array.isArray(issues))\n\t\t\treturn markRaw([{ label: \"All Assignees\", value: \"\" }])\n\n\t\t// Create hash of assignees to detect changes\n\t\tconst assigneesHash = issues\n\t\t\t.map(issue => issue.raised_by)\n\t\t\t.filter(assignee => assignee && assignee.trim())\n\t\t\t.sort()\n\t\t\t.join('|')\n\t\t\n\t\t// Return cached result if assignees haven't changed\n\t\tif (assigneeOptionsCache && lastAssigneeIssuesHash === assigneesHash) {\n\t\t\treturn assigneeOptionsCache\n\t\t}\n\n\t\tconst uniqueAssignees = [\n\t\t\t...new Set(\n\t\t\t\tissues\n\t\t\t\t\t.map((issue) => issue.raised_by)\n\t\t\t\t\t.filter((assignee) => assignee && assignee.trim()),\n\t\t\t),\n\t\t]\n\n\t\tconst options = markRaw([\n\t\t\t{ label: \"All Assignees\", value: \"\" },\n\t\t\t...uniqueAssignees.map((assignee) => ({\n\t\t\t\tlabel: assignee,\n\t\t\t\tvalue: assignee,\n\t\t\t})),\n\t\t])\n\t\t\n\t\t// Cache the result\n\t\tassigneeOptionsCache = options\n\t\tlastAssigneeIssuesHash = assigneesHash\n\n\t\treturn options\n\t}\n\n\t// Function to reset all filters\n\tconst resetFilters = () => {\n\t\tsearchQuery.value = \"\"\n\t\tdebouncedSearchQuery.value = \"\"\n\t\tfilters.value = {\n\t\t\tstatus: \"\",\n\t\t\tpriority: \"\",\n\t\t\tassignee: \"\",\n\t\t\ttags: \"\",\n\t\t\tsortBy: \"creation desc\",\n\t\t}\n\t}\n\n\t// Function to check if any filters are active\n\tconst hasActiveFilters = computed(() => {\n\t\treturn (\n\t\t\tsearchQuery.value.trim() !== \"\" ||\n\t\t\tfilters.value.status !== \"\" ||\n\t\t\tfilters.value.priority !== \"\" ||\n\t\t\tfilters.value.assignee !== \"\" ||\n\t\t\tfilters.value.tags !== \"\" ||\n\t\t\tfilters.value.sortBy !== \"creation desc\"\n\t\t)\n\t})\n\n\treturn {\n\t\t// Reactive state\n\t\tsearchQuery,\n\t\tfilters,\n\t\tdebouncedSearchQuery,\n\n\t\t// Computed properties\n\t\tapiFilters,\n\t\tsortOrder,\n\t\thasActiveFilters,\n\n\t\t// Functions\n\t\tfilterIssues,\n\t\tgetAssigneeOptions,\n\t\tresetFilters,\n\t}\n}\n","import { onMounted, onUnmounted, ref } from 'vue'\nimport { useSocket } from '../socket'\nimport { reloadIssues, getIssuesCount, issuesResource, fetchSingleIssue, singleIssueResource } from '../data/issues'\n\n/**\n * Composable that implements Frappe's list view realtime update pattern\n * Similar to setup_realtime_updates() in frappe/public/js/frappe/list/list_view.js\n */\nexport function useIssueListUpdates(getCurrentParams, customRefreshFunction) {\n  const socket = useSocket()\n  const pendingDocumentRefreshes = ref([])\n  const realtimeEventsSetup = ref(false)\n  const isLargeTable = ref(false) // Could be made configurable\n  \n  // Debounced refresh similar to Frappe's approach\n  let debounceTimer = null\n  const debounceDelay = isLargeTable.value ? 15000 : 2000 // 15s for large tables, 2s for normal\n  \n  const debouncedRefresh = () => {\n    if (debounceTimer) {\n      clearTimeout(debounceTimer)\n    }\n    debounceTimer = setTimeout(() => {\n      processDocumentRefreshes()\n    }, debounceDelay)\n  }\n\n  const setupRealtimeUpdates = () => {\n    if (!socket || realtimeEventsSetup.value) {\n      return\n    }\n    \n    // Subscribe to Issue doctype updates (Frappe's standard way)\n    socket.emit('doctype_subscribe', 'Issue')\n    \n    // Remove any existing listeners to avoid duplicates\n    socket.off('list_update')\n    \n    // Listen for Frappe's standard list_update event\n    socket.on('list_update', (data) => {\n      if (data?.doctype !== 'Issue') {\n        return\n      }\n\n      // Skip updates if we're in a state where updates should be avoided\n      if (avoidRealtimeUpdate()) {\n        return\n      }\n\n      // Add to pending refreshes\n      pendingDocumentRefreshes.value.push(data)\n      debouncedRefresh()\n    })\n\n    // Also listen for individual document events that should trigger list updates\n    const documentEvents = ['doctype_update', 'Issue_update', 'Issue_create', 'Issue_delete']\n    \n    documentEvents.forEach(eventName => {\n      socket.on(eventName, (data) => {\n        if (data?.doctype !== 'Issue') {\n          return\n        }\n\n        if (avoidRealtimeUpdate()) {\n          return\n        }\n\n        // Convert to list_update format\n        const listUpdateData = {\n          doctype: 'Issue',\n          name: data.name,\n          action: eventName.includes('create') ? 'insert' : \n                  eventName.includes('delete') ? 'delete' : 'update',\n          modified_by: data.modified_by || data.owner,\n          timestamp: new Date().toISOString()\n        }\n\n        pendingDocumentRefreshes.value.push(listUpdateData)\n        debouncedRefresh()\n      })\n    })\n\n    realtimeEventsSetup.value = true\n  }\n\n  const disableRealtimeUpdates = () => {\n    if (!socket || !realtimeEventsSetup.value) {\n      return\n    }\n    \n    // Unsubscribe from doctype updates\n    socket.emit('doctype_unsubscribe', 'Issue')\n    \n    // Remove all event listeners\n    socket.off('list_update')\n    const documentEvents = ['doctype_update', 'Issue_update', 'Issue_create', 'Issue_delete']\n    documentEvents.forEach(eventName => {\n      socket.off(eventName)\n    })\n    \n    realtimeEventsSetup.value = false\n  }\n\n  const processDocumentRefreshes = async () => {\n    if (!pendingDocumentRefreshes.value.length) {\n      return\n    }\n\n    // Check if we're still on the correct route/page\n    const currentRoute = window.location.hash || window.location.pathname\n    if (!currentRoute.includes('issue-tracker') && !currentRoute.includes('issues')) {\n      // Clear pending refreshes if user navigated away\n      pendingDocumentRefreshes.value = []\n      disableRealtimeUpdates()\n      return\n    }\n\n    // Get unique document names from pending refreshes\n    const uniqueDocuments = [...new Set(pendingDocumentRefreshes.value.map(d => d.name))]\n    const refreshCount = uniqueDocuments.length\n\n    // Clear pending refreshes\n    pendingDocumentRefreshes.value = []\n\n    try {\n      // Update with current view parameters to maintain user's context\n      await updateIndividualRows(uniqueDocuments)\n      \n      // Emit a custom event that the parent component can listen to for notifications\n      if (window && typeof window.dispatchEvent === 'function') {\n        window.dispatchEvent(new CustomEvent('issueListUpdated', {\n          detail: { count: refreshCount, documents: uniqueDocuments }\n        }))\n      }\n    } catch (error) {\n      console.error('Error updating individual rows, falling back to full refresh:', error)\n      // Fallback to full refresh if individual update fails\n      try {\n        await reloadIssues()\n        await getIssuesCount()\n      } catch (fallbackError) {\n        console.error('Error in fallback refresh:', fallbackError)\n      }\n    }\n  }\n\n  const updateIndividualRows = async (documentNames) => {\n    try {\n      // If a custom refresh function is provided, use it instead of the default logic\n      if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n        await customRefreshFunction()\n        return\n      }\n      \n      // Fallback to default logic if no custom refresh function\n      // Check if we have current data\n      if (!issuesResource.data || !Array.isArray(issuesResource.data)) {\n        throw new Error('No issues data available')\n      }\n      \n      // Get the current pagination and filter parameters from the component\n      let currentParams = {\n        limit_page_length: 10,\n        limit_start: 0,\n        filters: {},\n        order_by: \"creation desc\"\n      }\n      \n      // If getCurrentParams function is provided, use it to get actual current parameters\n      if (getCurrentParams && typeof getCurrentParams === 'function') {\n        try {\n          const params = getCurrentParams()\n          if (params) {\n            currentParams = { ...currentParams, ...params }\n          }\n        } catch (paramError) {\n          console.warn('Error getting current parameters, using defaults:', paramError)\n        }\n      }\n      \n      // Reload the issues resource with current parameters\n      // This maintains the user's current view (filters, sort, pagination)\n      await issuesResource.reload(currentParams)\n      \n    } catch (error) {\n      console.error('Error during targeted refresh:', error)\n      throw error\n    }\n  }\n\n  const shouldIncludeInCurrentView = (issue) => {\n    // This is a simplified check - you might want to implement more sophisticated\n    // filtering logic based on current filters, search terms, etc.\n    // For now, we'll include all new issues\n    return true\n  }\n\n  const avoidRealtimeUpdate = () => {\n    // Similar to Frappe's avoid_realtime_update() logic\n    \n    // Check if any bulk operations are in progress\n    // (you could check for selected items, bulk actions, etc.)\n    \n    // Check if filters are being edited\n    // (you could check if filter modals/inputs are active)\n    \n    // Check if the page is hidden/not focused\n    if (document.hidden) {\n      return true\n    }\n\n    // Add any other conditions where updates should be avoided\n    return false\n  }\n\n  // Manual refresh method (useful for pull-to-refresh or manual refresh buttons)\n  const manualRefresh = () => {\n    pendingDocumentRefreshes.value = [] // Clear any pending\n    try {\n      // Use custom refresh function if provided, otherwise use default\n      if (customRefreshFunction && typeof customRefreshFunction === 'function') {\n        customRefreshFunction()\n      } else {\n        reloadIssues()\n        getIssuesCount()\n      }\n    } catch (error) {\n      console.error('Error during manual refresh:', error)\n    }\n  }\n\n  // Socket connection handlers\n  const handleConnect = () => {\n    setupRealtimeUpdates()\n  }\n\n  const handleDisconnect = () => {\n    realtimeEventsSetup.value = false\n  }\n\n  const handleConnectError = (error) => {\n    console.error('Socket connection error:', error)\n    realtimeEventsSetup.value = false\n  }\n\n  // Lifecycle management\n  onMounted(() => {\n    if (!socket) {\n      return\n    }\n\n    // Set up socket connection handlers\n    socket.on('connect', handleConnect)\n    socket.on('disconnect', handleDisconnect)\n    socket.on('connect_error', handleConnectError)\n\n    // If already connected, set up immediately\n    if (socket.connected) {\n      setupRealtimeUpdates()\n    }\n  })\n\n  onUnmounted(() => {\n    if (socket) {\n      socket.off('connect', handleConnect)\n      socket.off('disconnect', handleDisconnect)\n      socket.off('connect_error', handleConnectError)\n    }\n    \n    disableRealtimeUpdates()\n    \n    // Clear any pending debounce timer\n    if (debounceTimer) {\n      clearTimeout(debounceTimer)\n    }\n  })\n\n  return {\n    // State (return the refs, not their values)\n    pendingDocumentRefreshes,\n    realtimeEventsSetup,\n    \n    // Methods\n    setupRealtimeUpdates,\n    disableRealtimeUpdates,\n    manualRefresh,\n    processDocumentRefreshes\n  }\n}","<template>\r\n  <div class=\"min-h-screen bg-gray-50\">\r\n    <!-- Header -->\r\n    <div class=\"bg-white shadow-sm border-b\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"flex justify-between items-center py-4\">\r\n          <div class=\"flex items-center space-x-4\">\r\n            <h1 class=\"text-2xl font-bold text-gray-900\">Issue Tracker</h1>\r\n            <nav class=\"flex space-x-4\">\r\n              <router-link to=\"/\" class=\"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium\">\r\n                Home\r\n              </router-link>\r\n              <router-link to=\"/issue-tracker\"\r\n                class=\"bg-blue-100 text-blue-700 px-3 py-2 rounded-md text-sm font-medium\">\r\n                Issues\r\n              </router-link>\r\n            </nav>\r\n          </div>\r\n          <div class=\"flex items-center space-x-4\">\r\n            <span class=\"text-sm text-gray-600\">{{ session.user }}</span>\r\n            <Button @click=\"session.logout.submit()\" theme=\"gray\" variant=\"outline\" size=\"sm\">\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Main Content -->\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Statistics Cards -->\r\n      <IssueStats :issues=\"issues\" :activeFilter=\"currentStatFilter\" @filter-changed=\"handleStatFilterChanged\" />\r\n\r\n      <!-- Search and Filters -->\r\n      <IssueFilters v-model:searchQuery=\"searchQuery\" v-model:filters=\"filters\" :statusOptions=\"statusOptions\"\r\n        :priorityOptions=\"priorityOptions\" :assigneeOptions=\"assigneeOptions\" :tagsOptions=\"tagsOptions\"\r\n        :issues=\"allIssues\" :filteredCount=\"totalIssues\" @suggestion-selected=\"handleSuggestionSelected\" />\r\n\r\n      <!-- Issues Table -->\r\n      <IssueTable :issues=\"issues\" :loading=\"isLoading\" :sortField=\"currentSortField\"\r\n        :sortDirection=\"currentSortDirection\" @sort=\"handleSort\" />\r\n\r\n      <!-- Pagination -->\r\n      <IssuePagination v-model:currentPage=\"currentPage\" v-model:itemsPerPage=\"itemsPerPage\" :totalItems=\"totalIssues\"\r\n        @pageChange=\"handlePageChange\" />\r\n\r\n      <!-- Compact Real-time Status Icons (Vertical) -->\r\n      <div class=\"fixed top-20 right-4 flex flex-col space-y-2\">\r\n        <!-- Connection Status -->\r\n        <div\r\n          class=\"group relative bg-white rounded-full shadow-lg border p-2 hover:shadow-xl transition-all duration-200\"\r\n          :title=\"realtimeEventsSetup ? 'Real-time updates active' : 'Real-time updates disabled'\">\r\n          <!-- Connection Icon with Status -->\r\n          <div class=\"relative\">\r\n            <FeatherIcon :name=\"realtimeEventsSetup ? 'wifi' : 'wifi-off'\" :class=\"[\r\n              'h-5 w-5 transition-colors duration-200',\r\n              realtimeEventsSetup ? 'text-green-600' : 'text-red-500'\r\n            ]\" />\r\n            <!-- Status Dot -->\r\n            <div :class=\"[\r\n              'absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-white',\r\n              realtimeEventsSetup\r\n                ? 'bg-green-500 animate-pulse'\r\n                : 'bg-red-500'\r\n            ]\"></div>\r\n            <!-- Pending Updates Badge -->\r\n            <div v-if=\"pendingDocumentRefreshes.length > 0\"\r\n              class=\"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium animate-bounce\">\r\n              {{ pendingDocumentRefreshes.length > 9 ? '9+' : pendingDocumentRefreshes.length }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Manual Refresh Button -->\r\n        <button @click=\"manualRefresh\"\r\n          class=\"group bg-white rounded-full shadow-lg border p-2 hover:shadow-xl hover:bg-blue-50 transition-all duration-200 active:scale-95\"\r\n          title=\"Manual refresh\">\r\n          <FeatherIcon name=\"refresh-cw\"\r\n            class=\"h-5 w-5 text-gray-600 group-hover:text-blue-600 group-active:rotate-180 transition-all duration-300\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Real-time Notifications -->\r\n    <RealTimeNotifications :notifications=\"notifications\" @remove=\"removeNotification\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted, onUnmounted, ref, watch, shallowRef, markRaw } from \"vue\"\r\nimport { Button, FeatherIcon } from \"frappe-ui\"\r\nimport IssueFilters from \"../components/IssueFilters.vue\"\r\nimport IssuePagination from \"../components/IssuePagination.vue\"\r\nimport IssueStats from \"../components/IssueStats.vue\"\r\nimport IssueTable from \"../components/IssueTable.vue\"\r\nimport RealTimeNotifications from \"../components/RealTimeNotifications.vue\"\r\nimport { useIssueFilters } from \"../composables/useIssueFilters\"\r\nimport { useIssueListUpdates } from \"../composables/useIssueListUpdates\"\r\nimport {\r\n  getIssueTypeOptions,\r\n  getIssuesCount,\r\n  getPriorityOptions,\r\n  getStatusOptions,\r\n  issuesCountResource,\r\n  issuesResource,\r\n  reloadIssues,\r\n  filterIssuesBySuggestion,\r\n  getFilteredIssuesCountBySuggestion,\r\n  suggestionFilterResource,\r\n  suggestionFilterCountResource,\r\n  filterIssuesByStat,\r\n  getStatFilterCount,\r\n  statFilterResource,\r\n  statFilterCountResource,\r\n} from \"../data/issues\"\r\nimport { session } from \"../data/session\"\r\n\r\n// Use the filtering composable\r\nconst {\r\n  searchQuery,\r\n  filters,\r\n  debouncedSearchQuery,\r\n  apiFilters,\r\n  sortOrder,\r\n  getAssigneeOptions,\r\n} = useIssueFilters()\r\n\r\n// State to track if we're using suggestion-based filtering\r\nconst isUsingSuggestionFilter = ref(false)\r\nconst currentSuggestion = ref(null)\r\n\r\n// State to track if we're using stat-based filtering\r\nconst isUsingStatFilter = ref(false)\r\nconst currentStatFilter = ref('team_tickets') // Default to team tickets\r\n\r\n// Custom refresh function that knows about current filtering mode\r\nconst refreshCurrentView = () => {\r\n  const currentParams = {\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: (currentPage.value - 1) * itemsPerPage.value,\r\n    order_by: sortOrder.value,\r\n  }\r\n\r\n  if (isUsingStatFilter.value) {\r\n    // Refresh stat filter view\r\n    filterIssuesByStat(currentStatFilter.value, currentParams)\r\n    getStatFilterCount(currentStatFilter.value)\r\n  } else if (isUsingSuggestionFilter.value && currentSuggestion.value) {\r\n    // Refresh suggestion filter view\r\n    const suggestionType = \"name\"\r\n    const suggestionValue = currentSuggestion.value.name\r\n    filterIssuesBySuggestion(suggestionType, suggestionValue, currentParams)\r\n    getFilteredIssuesCountBySuggestion(suggestionType, suggestionValue)\r\n  } else {\r\n    // Refresh regular view\r\n    reloadIssues({\r\n      filters: nonSearchFilters.value,\r\n      ...currentParams,\r\n    })\r\n    getIssuesCount(nonSearchFilters.value)\r\n  }\r\n}\r\n\r\n// Realtime list updates composable (Frappe-style)\r\nconst {\r\n  pendingDocumentRefreshes,\r\n  realtimeEventsSetup,\r\n  manualRefresh: originalManualRefresh\r\n} = useIssueListUpdates(() => {\r\n  // Return current parameters for realtime updates\r\n  return {\r\n    filters: nonSearchFilters.value,\r\n    order_by: sortOrder.value,\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: (currentPage.value - 1) * itemsPerPage.value,\r\n  }\r\n}, refreshCurrentView)\r\n\r\n// Override manual refresh to use our custom refresh function\r\nconst manualRefresh = () => {\r\n  refreshCurrentView()\r\n}\r\n\r\n// Simplified notification system for list updates\r\nconst notifications = ref([])\r\n\r\nconst addNotification = (notification) => {\r\n  notifications.value.push({\r\n    id: Date.now() + Math.random(),\r\n    ...notification\r\n  })\r\n\r\n  // Auto-remove after 5 seconds\r\n  setTimeout(() => {\r\n    removeNotification(notifications.value[notifications.value.length - 1]?.id)\r\n  }, 5000)\r\n}\r\n\r\nconst removeNotification = (id) => {\r\n  notifications.value = notifications.value.filter(n => n.id !== id)\r\n}\r\n\r\n// Computed properties for displaying data\r\nconst allIssues = computed(() => {\r\n  // Priority: stat filter > suggestion filter > regular issues\r\n  if (isUsingStatFilter.value) {\r\n    return statFilterResource.data || []\r\n  } else if (isUsingSuggestionFilter.value) {\r\n    return suggestionFilterResource.data || []\r\n  }\r\n  return issuesResource.data || []\r\n})\r\n\r\nconst totalIssues = computed(() => {\r\n  // Priority: stat filter > suggestion filter > regular count\r\n  if (isUsingStatFilter.value) {\r\n    return statFilterCountResource.data || 0\r\n  } else if (isUsingSuggestionFilter.value) {\r\n    return suggestionFilterCountResource.data || 0\r\n  }\r\n  return issuesCountResource.data || 0\r\n})\r\n\r\nconst isLoading = computed(() => {\r\n  // Check loading state of active resource\r\n  if (isUsingStatFilter.value) {\r\n    return statFilterResource.loading\r\n  } else if (isUsingSuggestionFilter.value) {\r\n    return suggestionFilterResource.loading\r\n  }\r\n  return issuesResource.loading\r\n})\r\n\r\n// With server-side pagination, we use the data directly without client-side filtering\r\nconst issues = computed(() => allIssues.value)\r\n\r\n// Sort functionality\r\nconst currentSortField = computed(() => {\r\n  const order = sortOrder.value || \"creation desc\"\r\n  return order.split(\" \")[0]\r\n})\r\n\r\nconst currentSortDirection = computed(() => {\r\n  const order = sortOrder.value || \"creation desc\"\r\n  return order.split(\" \")[1] || \"desc\"\r\n})\r\n\r\nconst handleSort = ({ field, direction }) => {\r\n  // Update the sort order in the composable\r\n  const newSortOrder = `${field} ${direction}`\r\n  // This will trigger the watcher and reload data\r\n  filters.value.sortBy = newSortOrder\r\n}\r\n\r\n// Handle suggestion selection from search\r\nconst handleSuggestionSelected = (suggestion) => {\r\n  // Switch to suggestion-based filtering mode\r\n  isUsingSuggestionFilter.value = true\r\n  currentSuggestion.value = suggestion\r\n\r\n  // Set search query to show the selected suggestion in the search box\r\n  searchQuery.value = suggestion.subject || suggestion.name\r\n\r\n  // Reset to first page when suggestion is selected\r\n  currentPage.value = 1\r\n\r\n  // Determine suggestion type based on what was clicked\r\n  // For now, we'll use \"name\" as the default type for exact match\r\n  const suggestionType = \"name\"\r\n  const suggestionValue = suggestion.name\r\n\r\n  // Filter issues using the new suggestion-based API\r\n  filterIssuesBySuggestion(suggestionType, suggestionValue, {\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n    order_by: sortOrder.value,\r\n  })\r\n\r\n  // Get count for pagination\r\n  getFilteredIssuesCountBySuggestion(suggestionType, suggestionValue)\r\n}\r\n\r\n// Function to clear suggestion filter and return to normal search\r\nconst clearSuggestionFilter = () => {\r\n  isUsingSuggestionFilter.value = false\r\n  currentSuggestion.value = null\r\n  searchQuery.value = \"\"\r\n  \r\n  // Reset to first page\r\n  currentPage.value = 1\r\n  \r\n  // Reload with normal filters (excluding search)\r\n  reloadIssues({\r\n    filters: nonSearchFilters.value,\r\n    order_by: sortOrder.value,\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n  })\r\n  \r\n  // Reload count\r\n  getIssuesCount(nonSearchFilters.value)\r\n}\r\n\r\n// Handle stat filter changes from IssueStats component\r\nconst handleStatFilterChanged = (statType) => {\r\n  // Exit other filter modes\r\n  isUsingSuggestionFilter.value = false\r\n  currentSuggestion.value = null\r\n  \r\n  // Set stat filter mode\r\n  isUsingStatFilter.value = true\r\n  currentStatFilter.value = statType\r\n  \r\n  // Clear search query\r\n  searchQuery.value = \"\"\r\n  \r\n  // Reset to first page\r\n  currentPage.value = 1\r\n  \r\n  // Filter issues by stat type\r\n  filterIssuesByStat(statType, {\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n    order_by: sortOrder.value,\r\n  })\r\n  \r\n  // Get count for pagination\r\n  getStatFilterCount(statType)\r\n}\r\n\r\n// Function to clear stat filter and return to normal view\r\nconst clearStatFilter = () => {\r\n  isUsingStatFilter.value = false\r\n  currentStatFilter.value = 'team_tickets'\r\n  \r\n  // Reset to first page\r\n  currentPage.value = 1\r\n  \r\n  // Reload with normal filters\r\n  reloadIssues({\r\n    filters: nonSearchFilters.value,\r\n    order_by: sortOrder.value,\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n  })\r\n  \r\n  // Reload count\r\n  getIssuesCount(nonSearchFilters.value)\r\n}\r\n\r\n// Memoized filter options to prevent unnecessary re-computations\r\n// These are static or rarely changing, so we can use shallowRef for better performance\r\nconst priorityOptions = shallowRef(markRaw(getPriorityOptions()))\r\nconst tagsOptions = shallowRef(markRaw(getIssueTypeOptions()))\r\nconst statusOptions = shallowRef(markRaw(getStatusOptions()))\r\n\r\n// Memoized assignee options with caching based on issues length\r\nlet assigneeOptionsCache = null\r\nlet lastIssuesLength = 0\r\nconst assigneeOptions = computed(() => {\r\n  const currentLength = allIssues.value.length\r\n  \r\n  // Return cached options if issues length hasn't changed\r\n  if (assigneeOptionsCache && lastIssuesLength === currentLength) {\r\n    return assigneeOptionsCache\r\n  }\r\n  \r\n  // Recalculate and cache\r\n  assigneeOptionsCache = markRaw(getAssigneeOptions(allIssues.value))\r\n  lastIssuesLength = currentLength\r\n  \r\n  return assigneeOptionsCache\r\n})\r\n\r\n// Pagination state\r\nconst currentPage = ref(1)\r\nconst itemsPerPage = ref(10)\r\n\r\n// Pagination handler\r\nconst handlePageChange = ({ page, itemsPerPage: newItemsPerPage, offset }) => {\r\n  currentPage.value = page\r\n  itemsPerPage.value = newItemsPerPage\r\n\r\n  if (isUsingStatFilter.value) {\r\n    // Use stat-based filtering for pagination\r\n    filterIssuesByStat(currentStatFilter.value, {\r\n      limit_page_length: newItemsPerPage,\r\n      limit_start: offset,\r\n      order_by: sortOrder.value,\r\n    })\r\n  } else if (isUsingSuggestionFilter.value && currentSuggestion.value) {\r\n    // Use suggestion-based filtering for pagination\r\n    const suggestionType = \"name\"\r\n    const suggestionValue = currentSuggestion.value.name\r\n\r\n    filterIssuesBySuggestion(suggestionType, suggestionValue, {\r\n      limit_page_length: newItemsPerPage,\r\n      limit_start: offset,\r\n      order_by: sortOrder.value,\r\n    })\r\n  } else {\r\n    // Use regular filtering for pagination (excluding search)\r\n    reloadIssues({\r\n      filters: nonSearchFilters.value,\r\n      order_by: sortOrder.value,\r\n      limit_page_length: newItemsPerPage,\r\n      limit_start: offset,\r\n    })\r\n\r\n    // Also reload count with current filters\r\n    getIssuesCount(nonSearchFilters.value)\r\n  }\r\n}\r\n\r\n// Create computed property for non-search filters only\r\nconst nonSearchFilters = computed(() => {\r\n  const filterObj = {}\r\n\r\n  // Add status filter\r\n  if (filters.value.status) {\r\n    filterObj[\"status\"] = filters.value.status\r\n  }\r\n\r\n  // Add priority filter\r\n  if (filters.value.priority) {\r\n    filterObj[\"priority\"] = filters.value.priority\r\n  }\r\n\r\n  // Add assignee filter\r\n  if (filters.value.assignee) {\r\n    filterObj[\"raised_by\"] = filters.value.assignee\r\n  }\r\n\r\n  // Add tags filter (issue_type)\r\n  if (filters.value.tags) {\r\n    filterObj[\"issue_type\"] = filters.value.tags\r\n  }\r\n\r\n  return filterObj\r\n})\r\n\r\n// Optimized watcher with debouncing to prevent excessive API calls\r\nlet filterChangeTimeout = null\r\nconst debouncedFilterChange = () => {\r\n  if (filterChangeTimeout) {\r\n    clearTimeout(filterChangeTimeout)\r\n  }\r\n  filterChangeTimeout = setTimeout(() => {\r\n    // If user is changing filters (not search), exit special filter modes\r\n    if (isUsingSuggestionFilter.value) {\r\n      isUsingSuggestionFilter.value = false\r\n      currentSuggestion.value = null\r\n    }\r\n    \r\n    if (isUsingStatFilter.value) {\r\n      isUsingStatFilter.value = false\r\n      currentStatFilter.value = 'team_tickets'\r\n    }\r\n\r\n    // Reset to first page when filters change\r\n    currentPage.value = 1\r\n\r\n    // Reload issues with new filters and sort order\r\n    reloadIssues({\r\n      filters: nonSearchFilters.value,\r\n      order_by: sortOrder.value,\r\n      limit_page_length: itemsPerPage.value,\r\n      limit_start: 0,\r\n    })\r\n\r\n    // Also reload count with new filters\r\n    getIssuesCount(nonSearchFilters.value)\r\n  }, 300) // 300ms debounce\r\n}\r\n\r\n// Watch for filter changes and reload data from server when needed\r\n// Note: We exclude search-related filters to prevent table updates while typing\r\nwatch(\r\n  [nonSearchFilters, sortOrder],\r\n  debouncedFilterChange,\r\n  { deep: true },\r\n)\r\n\r\n// Watch for search query changes to handle clearing the search\r\nwatch(\r\n  searchQuery,\r\n  (newSearchQuery) => {\r\n    // If search is cleared and we were in suggestion mode, return to normal view\r\n    if (!newSearchQuery && isUsingSuggestionFilter.value) {\r\n      clearSuggestionFilter()\r\n    }\r\n  }\r\n)\r\n\r\n// Note: We intentionally do NOT watch debouncedSearchQuery for table updates\r\n// The table should only update when:\r\n// 1. A suggestion is explicitly selected (handled in handleSuggestionSelected)\r\n// 2. Other filters are changed (handled in the watcher above)\r\n// 3. Search is cleared while in suggestion mode (handled in the searchQuery watcher above)\r\n\r\nonMounted(() => {\r\n  // Start with default stat filter (Team Tickets) active\r\n  isUsingStatFilter.value = true\r\n  currentStatFilter.value = 'team_tickets'\r\n  \r\n  // Load initial data with stat filter\r\n  filterIssuesByStat('team_tickets', {\r\n    limit_page_length: itemsPerPage.value,\r\n    limit_start: 0,\r\n    order_by: sortOrder.value,\r\n  })\r\n  \r\n  // Load initial count for stat filter\r\n  getStatFilterCount('team_tickets')\r\n\r\n  // Listen for list update events from the composable\r\n  window.addEventListener('issueListUpdated', (event) => {\r\n    const { count, documents } = event.detail\r\n    addNotification({\r\n      type: 'info',\r\n      title: 'List Updated',\r\n      message: `${count} issue${count > 1 ? 's' : ''} updated: ${documents.slice(0, 3).join(', ')}${documents.length > 3 ? '...' : ''}`,\r\n      timestamp: new Date()\r\n    })\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  // Clean up event listener\r\n  window.removeEventListener('issueListUpdated', () => { })\r\n})\r\n\r\n</script>"],"names":["imgFetchError","ref","props","__props","shapeClasses","computed","sizeClasses","labelClasses","indicatorContainerClasses","indicatorClasses","iconClasses","handleImageError","err","_createElementBlock","_normalizeClass","image","label","_cache","$slots","_renderSlot","_ctx","_Fragment","_createElementVNode","list","inject","_openBlock","_hoisted_1","_hoisted_2","_toDisplayString","_unref","_hoisted_3","_createBlock","Button","_mergeProps","getGridTemplateColumns","columns","withCheckbox","checkBoxWidth","columnsWidth","col","width","alignmentMap","emit","__emit","resizer","columnRef","widthInPx","parsedWidth","startResizing","e","initialX","initialWidth","onMouseMove","newWidth","updateWidth","onMouseUp","useDebounceFn","$attrs","_normalizeProps","_normalizeStyle","Checkbox","_withModifiers","_renderList","column","ListHeaderItem","$event","_a","_b","getValue","tooltip","value","_resolveDynamicComponent","_createVNode","Tooltip","_guardReactiveProps","isLastRow","isSelected","isActive","isHoverable","rowHeight","roundedClass","selections","groups","k","rows","currentIndex","atBottom","atTop","_c","onRowClick","row","i","ListRowItem","ListRow","_sfc_render","toggleGroup","DownSolid","group","ListGroupHeader","ListGroupRows","selectedText","_Transition","_hoisted_4","_hoisted_5","slots","useSlots","reactive","activeRow","watch","_options","defaultTrue","defaultFalse","val","allRowsSelected","showGroupedRows","acc","selectable","toggleRow","toggleAllRows","select","r","provide","__expose","ListHeader","ListGroups","ListRows","ListEmptyState","ListSelectBanner","call","_0","_1","__async","method","args","options","headers","path","res","data","warning","text","response","error","exception","errorParts","m","issuesResource","createResource","params","safeParams","limit_page_length","limit_start","filters","order_by","issuesCountResource","reloadIssues","reloadParams","getIssuesCount","issueName","issuePriorityResource","issueTypeResource","priorityOptionsCache","priorityDataHash","issueTypeOptionsCache","issueTypeDataHash","getPriorityOptions","currentData","currentHash","p","getIssueTypeOptions","t","statusOptionsCache","getStatusOptions","tagColorsResource","tagColorCache","tagColorsDataHash","getTagColor","tagName","color","issueSearchResource","searchIssues","searchQuery","limit","suggestionFilterResource","suggestionFilterCountResource","filterIssuesBySuggestion","suggestionType","suggestionValue","filterParams","getFilteredIssuesCountBySuggestion","statFilterResource","statFilterCountResource","filterIssuesByStat","statType","getStatFilterCount","searchInput","isFocused","showSuggestions","selectedSuggestionIndex","isLoading","searchTime","suggestionsContainer","suggestionRefs","searchTimeout","newValue","searchSuggestions","fetchSearchSuggestions","query","startTime","results","debouncedSearch","handleSearch","highlightMatch","escapedQuery","regex","getStatusBadgeClass","status","handleFocus","blurTimeout","handleBlur","handleKeydown","event","scrollToSelectedSuggestion","selectSuggestion","hideSuggestions","suggestion","issueUrl","clearSearch","container","selectedElement","containerRect","elementRect","elementTop","elementBottom","containerScrollTop","containerHeight","formatCreationDate","dateString","date","now","diffTime","diffDays","handleGlobalKeydown","onMounted","onUnmounted","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","index","el","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","_createTextVNode","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","localSearchQuery","localFilters","__spreadValues","searchBoxRef","showFilterPanel","dynamicFilters","filterIdCounter","availableTags","tagSet","issue","tag","availableFields","sortOptions","handleKeyboardShortcut","focusSearch","handleSearchChange","handleSuggestionSelected","count","statusOption","opt","priorityOption","assigneeOption","tagOption","sortOption","addNewFilter","fieldValue","field","f","newFilter","getDefaultOperator","updateDynamicFiltersOutput","removeDynamicFilter","clearAllDynamicFilters","updateDynamicFilter","filterObj","filter","key","getFieldLabel","getOperatorOptions","isSelectField","getFieldOptions","getFieldPlaceholder","getTagStyle","hexColor","hex","g","b","bgColor","textColor","applyFilters","CustomSearchBox","_hoisted_12","_hoisted_18","_hoisted_26","op","_hoisted_28","_vModelSelect","_hoisted_29","_hoisted_30","_hoisted_32","_hoisted_33","option","_hoisted_35","_vModelText","_hoisted_38","localItemsPerPage","totalPages","startItem","endItem","end","visiblePages","pages","maxVisible","current","total","start","showFirstPage","showLastPage","showFirstEllipsis","showLastEllipsis","itemsPerPageOptions","goToPage","page","goToPreviousPage","goToNextPage","handleItemsPerPageChange","newItemsPerPage","currentFirstItem","newPage","FeatherIcon","Select","CACHE_DURATION","stats","shallowRef","teamTickets","openTickets","assignedToMe","actionableTickets","responseTickets","statsCache","lastFetchTime","fetchStats","result","refreshTimeout","debouncedStatsRefresh","handleStatClick","filterType","StatusBadge","Badge","PriorityBadge","priority","_sfc_main","ListView","Avatar","showPopup","popupUser","popupPosition","showTagsPopup","tagsPopupPosition","tagsPopupData","getInitials","name","emailPart","part","n","formatIssueId","issueId","match","stripHtml","html","tmp","formatDate","formatTime","getStatusBadgeColor","getPriorityBadgeColor","transformationCache","transformedIssues","cacheKey","cached","transformed","__spreadProps","listOptions","handleSelections","handleIssueClick","getStatusColor","statusValue","getPriorityColor","priorityValue","getPriorityBadgeClass","getPriorityIndicatorClass","showUserPopup","user","rect","hideUserPopup","showTagsPopupFn","tags","hideTagsPopupFn","handleColumnSort","newDirection","getSortIcon","getSortIconClass","getSortButtonClass","tagStyleCache","style","$props","_component_ListView","$setup","_component_ListHeader","_component_ListHeaderItem","_withCtx","item","_component_FeatherIcon","_component_ListRows","_component_ListRow","_component_ListRowItem","_component_Avatar","u","_component_ListSelectBanner","unselectAll","_component_Button","notificationClasses","type","baseClasses","typeClasses","getNotificationIcon","icons","getIconColor","colors","timestamp","diff","minutes","hours","_TransitionGroup","notification","$emit","debounce","func","wait","timeout","later","useIssueFilters","debouncedSearchQuery","updateDebouncedSearch","newQuery","apiFilters","sortOrder","filterCache","filterIssues","issues","filteredIssues","subject","description","priorityOrder","markRaw","a","direction","aValue","bValue","comparison","firstKey","assigneeOptionsCache","lastAssigneeIssuesHash","getAssigneeOptions","assigneesHash","assignee","uniqueAssignees","resetFilters","hasActiveFilters","useIssueListUpdates","getCurrentParams","customRefreshFunction","socket","useSocket","pendingDocumentRefreshes","realtimeEventsSetup","isLargeTable","debounceTimer","debounceDelay","debouncedRefresh","processDocumentRefreshes","setupRealtimeUpdates","avoidRealtimeUpdate","eventName","listUpdateData","disableRealtimeUpdates","currentRoute","uniqueDocuments","d","refreshCount","updateIndividualRows","fallbackError","documentNames","currentParams","paramError","manualRefresh","handleConnect","handleDisconnect","handleConnectError","isUsingSuggestionFilter","currentSuggestion","isUsingStatFilter","currentStatFilter","refreshCurrentView","itemsPerPage","currentPage","nonSearchFilters","originalManualRefresh","notifications","addNotification","removeNotification","id","allIssues","totalIssues","currentSortField","currentSortDirection","handleSort","newSortOrder","clearSuggestionFilter","handleStatFilterChanged","priorityOptions","tagsOptions","statusOptions","lastIssuesLength","assigneeOptions","currentLength","handlePageChange","offset","filterChangeTimeout","newSearchQuery","documents","_component_router_link","session","IssueStats","IssueFilters","IssueTable","IssuePagination","RealTimeNotifications"],"mappings":"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CAAA,CAExB,CAAA,CAEJ,CAAA,EAEM,MAAM,KAAKF,CAAM,EAAE,KAAM,EAAC,IAAIE,IAAQ,CAC3C,MAAOA,EACP,MAAOA,EACP,MAAOpG,GAAYoG,CAAG,CAC1B,EAAI,CACJ,CAAC,EAGKC,EAAkBhR,EAAS,IAAM,CAErC,CACE,MAAO,UACP,MAAO,UACP,YAAa,wBACb,KAAM,OACN,KAAM,MACP,EACD,CACE,MAAO,SACP,MAAO,SACP,YAAa,gDACb,KAAM,SACN,KAAM,QACP,EACD,CACE,MAAO,WACP,MAAO,WACP,YAAa,2BACb,KAAM,OACN,KAAM,QACP,EACD,CACE,MAAO,aACP,MAAO,aACP,YAAa,2BACb,KAAM,MACN,KAAM,QACP,EACD,CACE,MAAO,YACP,MAAO,oBACP,YAAa,iCACb,KAAM,OACN,KAAM,MACP,EACD,CACE,MAAO,cACP,MAAO,cACP,YAAa,8BACb,KAAM,YACN,KAAM,MACP,EAGD,CACE,MAAO,WACP,MAAO,WACP,YAAa,qBACb,KAAM,WACN,KAAM,MACP,EACD,CACE,MAAO,gBACP,MAAO,gBACP,YAAa,0BACb,KAAM,WACN,KAAM,MACP,EACD,CACE,MAAO,UACP,MAAO,UACP,YAAa,2BACb,KAAM,OACN,KAAM,MACP,EACD,CACE,MAAO,OACP,MAAO,OACP,YAAa,4BACb,KAAM,YACN,KAAM,MACP,EAGD,CACE,MAAO,UACP,MAAO,UACP,YAAa,oBACb,KAAM,SACN,KAAM,MACP,EACD,CACE,MAAO,UACP,MAAO,UACP,YAAa,oBACb,KAAM,WACN,KAAM,MACP,EAGD,CACE,MAAO,0BACP,MAAO,0BACP,YAAa,gBACb,KAAM,QACN,KAAM,MACP,EACD,CACE,MAAO,mBACP,MAAO,aACP,YAAa,uBACb,KAAM,eACN,KAAM,QACP,EACD,CACE,MAAO,cACP,MAAO,cACP,YAAa,8BACb,KAAM,QACN,KAAM,UACP,EACD,CACE,MAAO,oBACP,MAAO,gBACP,YAAa,gCACb,KAAM,QACN,KAAM,UACP,EAGD,CACE,MAAO,2BACP,MAAO,oBACP,YAAa,8BACb,KAAM,QACN,KAAM,MACP,EACD,CACE,MAAO,wBACP,MAAO,iBACP,YAAa,2BACb,KAAM,aACN,KAAM,aACP,EACD,CACE,MAAO,gBACP,MAAO,SACP,YAAa,yBACb,KAAM,MACN,KAAM,aACP,EAGD,CACE,MAAO,WACP,MAAO,eACP,YAAa,0BACb,KAAM,WACN,KAAM,MACP,EACD,CACE,MAAO,WACP,MAAO,gBACP,YAAa,+BACb,KAAM,QACN,KAAM,MACP,EACD,CACE,MAAO,eACP,MAAO,eACP,YAAa,yBACb,KAAM,WACN,KAAM,MACP,EACD,CACE,MAAO,eACP,MAAO,eACP,YAAa,yBACb,KAAM,QACN,KAAM,MACP,EACD,CACE,MAAO,sBACP,MAAO,kBACP,YAAa,4BACb,KAAM,WACN,KAAM,UACP,EACD,CACE,MAAO,qBACP,MAAO,qBACP,YAAa,gCACb,KAAM,QACN,KAAM,UACP,EAGD,CACE,MAAO,sBACP,MAAO,sBACP,YAAa,gCACb,KAAM,QACN,KAAM,UACP,EACD,CACE,MAAO,oBACP,MAAO,wBACP,YAAa,kCACb,KAAM,QACN,KAAM,UACP,EACD,CACE,MAAO,kBACP,MAAO,kBACP,YAAa,4BACb,KAAM,QACN,KAAM,UACP,EACD,CACE,MAAO,uBACP,MAAO,uBACP,YAAa,iCACb,KAAM,QACN,KAAM,UACP,EACD,CACE,MAAO,kBACP,MAAO,kBACP,YAAa,4BACb,KAAM,QACN,KAAM,UACP,EAGD,CACE,MAAO,sBACP,MAAO,sBACP,YAAa,mCACb,KAAM,QACN,KAAM,SACP,EAGD,CACE,MAAO,gBACP,MAAO,SACP,YAAa,0BACb,KAAM,OACN,KAAM,MACP,EACD,CACE,MAAO,gBACP,MAAO,gBACP,YAAa,0BACb,KAAM,OACN,KAAM,MACP,EACD,CACE,MAAO,mBACP,MAAO,mBACP,YAAa,yBACb,KAAM,aACN,KAAM,MACP,EAGD,CACE,MAAO,aACP,MAAO,OACP,YAAa,sBACb,KAAM,MACN,KAAM,MACV,CACA,CAAC,EAGKiR,EAAcjR,EAAS,IAAM,CACjC,CAAE,MAAO,wBAAyB,MAAO,eA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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}